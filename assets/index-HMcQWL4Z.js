var jS=Object.defineProperty;var Im=i=>{throw TypeError(i)};var BS=(i,t,e)=>t in i?jS(i,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):i[t]=e;var K=(i,t,e)=>BS(i,typeof t!="symbol"?t+"":t,e),ef=(i,t,e)=>t.has(i)||Im("Cannot "+e);var c=(i,t,e)=>(ef(i,t,"read from private field"),e?e.call(i):t.get(i)),w=(i,t,e)=>t.has(i)?Im("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(i):t.set(i,e),b=(i,t,e,n)=>(ef(i,t,"write to private field"),n?n.call(i,e):t.set(i,e),e),x=(i,t,e)=>(ef(i,t,"access private method"),e);var ke=(i,t,e,n)=>({set _(s){b(i,t,s,e)},get _(){return c(i,t,n)}});import{r as P,R as VS,a as ut,b as rs,c as HS,d as $S,j as C,T as US,u as WS,e as Ke,f as Ye,P as F,g as _d,h as Re,i as $o,B as G,k as _n,C as Td,A as zS,D as nu,S as nf,l as iu,m as su,n as dt,I as pi,M as GS,o as Cd,p as qS,L as XS,q as KS,s as Pb,t as YS,v as Rb,w as QS,G as Uu,x as kb,y as Mb,z as ZS,F as Dm,E as JS,H as tE,J as eE,K as nE,N as iE}from"./mui-vendor-BETPRmvE.js";import{_ as Mh,R as sE}from"./three-vendor-C7_5fWAc.js";import{b as rE,g as Ne,c as Lh,r as qs,a as Lb}from"./react-vendor-DeqkGhWy.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const r of s)if(r.type==="childList")for(const a of r.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&n(a)}).observe(document,{childList:!0,subtree:!0});function e(s){const r={};return s.integrity&&(r.integrity=s.integrity),s.referrerPolicy&&(r.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?r.credentials="include":s.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function n(s){if(s.ep)return;s.ep=!0;const r=e(s);fetch(s.href,r)}})();/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Wu(){return Wu=Object.assign?Object.assign.bind():function(i){for(var t=1;t<arguments.length;t++){var e=arguments[t];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(i[n]=e[n])}return i},Wu.apply(this,arguments)}var Bs;(function(i){i.Pop="POP",i.Push="PUSH",i.Replace="REPLACE"})(Bs||(Bs={}));const Om="popstate";function aE(i){i===void 0&&(i={});function t(n,s){let{pathname:r,search:a,hash:o}=n.location;return Of("",{pathname:r,search:a,hash:o},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function e(n,s){return typeof s=="string"?s:Db(s)}return lE(t,e,null,i)}function Xe(i,t){if(i===!1||i===null||typeof i>"u")throw new Error(t)}function Ib(i,t){if(!i){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function oE(){return Math.random().toString(36).substr(2,8)}function Fm(i,t){return{usr:i.state,key:i.key,idx:t}}function Of(i,t,e,n){return e===void 0&&(e=null),Wu({pathname:typeof i=="string"?i:i.pathname,search:"",hash:""},typeof t=="string"?Pd(t):t,{state:e,key:t&&t.key||n||oE()})}function Db(i){let{pathname:t="/",search:e="",hash:n=""}=i;return e&&e!=="?"&&(t+=e.charAt(0)==="?"?e:"?"+e),n&&n!=="#"&&(t+=n.charAt(0)==="#"?n:"#"+n),t}function Pd(i){let t={};if(i){let e=i.indexOf("#");e>=0&&(t.hash=i.substr(e),i=i.substr(0,e));let n=i.indexOf("?");n>=0&&(t.search=i.substr(n),i=i.substr(0,n)),i&&(t.pathname=i)}return t}function lE(i,t,e,n){n===void 0&&(n={});let{window:s=document.defaultView,v5Compat:r=!1}=n,a=s.history,o=Bs.Pop,l=null,h=u();h==null&&(h=0,a.replaceState(Wu({},a.state,{idx:h}),""));function u(){return(a.state||{idx:null}).idx}function d(){o=Bs.Pop;let v=u(),y=v==null?null:v-h;h=v,l&&l({action:o,location:m.location,delta:y})}function f(v,y){o=Bs.Push;let A=Of(m.location,v,y);h=u()+1;let S=Fm(A,h),E=m.createHref(A);try{a.pushState(S,"",E)}catch(T){if(T instanceof DOMException&&T.name==="DataCloneError")throw T;s.location.assign(E)}r&&l&&l({action:o,location:m.location,delta:1})}function p(v,y){o=Bs.Replace;let A=Of(m.location,v,y);h=u();let S=Fm(A,h),E=m.createHref(A);a.replaceState(S,"",E),r&&l&&l({action:o,location:m.location,delta:0})}function g(v){let y=s.location.origin!=="null"?s.location.origin:s.location.href,A=typeof v=="string"?v:Db(v);return A=A.replace(/ $/,"%20"),Xe(y,"No window.location.(origin|href) available to create URL for href: "+A),new URL(A,y)}let m={get action(){return o},get location(){return i(s,a)},listen(v){if(l)throw new Error("A history only accepts one active listener");return s.addEventListener(Om,d),l=v,()=>{s.removeEventListener(Om,d),l=null}},createHref(v){return t(s,v)},createURL:g,encodeLocation(v){let y=g(v);return{pathname:y.pathname,search:y.search,hash:y.hash}},push:f,replace:p,go(v){return a.go(v)}};return m}var Nm;(function(i){i.data="data",i.deferred="deferred",i.redirect="redirect",i.error="error"})(Nm||(Nm={}));function cE(i,t,e){return e===void 0&&(e="/"),hE(i,t,e)}function hE(i,t,e,n){let s=typeof t=="string"?Pd(t):t,r=Nb(s.pathname||"/",e);if(r==null)return null;let a=Ob(i);uE(a);let o=null;for(let l=0;o==null&&l<a.length;++l){let h=SE(r);o=xE(a[l],h)}return o}function Ob(i,t,e,n){t===void 0&&(t=[]),e===void 0&&(e=[]),n===void 0&&(n="");let s=(r,a,o)=>{let l={relativePath:o===void 0?r.path||"":o,caseSensitive:r.caseSensitive===!0,childrenIndex:a,route:r};l.relativePath.startsWith("/")&&(Xe(l.relativePath.startsWith(n),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+n+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(n.length));let h=Na([n,l.relativePath]),u=e.concat(l);r.children&&r.children.length>0&&(Xe(r.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+h+'".')),Ob(r.children,t,u,h)),!(r.path==null&&!r.index)&&t.push({path:h,score:vE(h,r.index),routesMeta:u})};return i.forEach((r,a)=>{var o;if(r.path===""||!((o=r.path)!=null&&o.includes("?")))s(r,a);else for(let l of Fb(r.path))s(r,a,l)}),t}function Fb(i){let t=i.split("/");if(t.length===0)return[];let[e,...n]=t,s=e.endsWith("?"),r=e.replace(/\?$/,"");if(n.length===0)return s?[r,""]:[r];let a=Fb(n.join("/")),o=[];return o.push(...a.map(l=>l===""?r:[r,l].join("/"))),s&&o.push(...a),o.map(l=>i.startsWith("/")&&l===""?"/":l)}function uE(i){i.sort((t,e)=>t.score!==e.score?e.score-t.score:bE(t.routesMeta.map(n=>n.childrenIndex),e.routesMeta.map(n=>n.childrenIndex)))}const dE=/^:[\w-]+$/,fE=3,pE=2,gE=1,mE=10,yE=-2,jm=i=>i==="*";function vE(i,t){let e=i.split("/"),n=e.length;return e.some(jm)&&(n+=yE),t&&(n+=pE),e.filter(s=>!jm(s)).reduce((s,r)=>s+(dE.test(r)?fE:r===""?gE:mE),n)}function bE(i,t){return i.length===t.length&&i.slice(0,-1).every((n,s)=>n===t[s])?i[i.length-1]-t[t.length-1]:0}function xE(i,t,e){let{routesMeta:n}=i,s={},r="/",a=[];for(let o=0;o<n.length;++o){let l=n[o],h=o===n.length-1,u=r==="/"?t:t.slice(r.length)||"/",d=AE({path:l.relativePath,caseSensitive:l.caseSensitive,end:h},u),f=l.route;if(!d)return null;Object.assign(s,d.params),a.push({params:s,pathname:Na([r,d.pathname]),pathnameBase:EE(Na([r,d.pathnameBase])),route:f}),d.pathnameBase!=="/"&&(r=Na([r,d.pathnameBase]))}return a}function AE(i,t){typeof i=="string"&&(i={path:i,caseSensitive:!1,end:!0});let[e,n]=wE(i.path,i.caseSensitive,i.end),s=t.match(e);if(!s)return null;let r=s[0],a=r.replace(/(.)\/+$/,"$1"),o=s.slice(1);return{params:n.reduce((h,u,d)=>{let{paramName:f,isOptional:p}=u;if(f==="*"){let m=o[d]||"";a=r.slice(0,r.length-m.length).replace(/(.)\/+$/,"$1")}const g=o[d];return p&&!g?h[f]=void 0:h[f]=(g||"").replace(/%2F/g,"/"),h},{}),pathname:r,pathnameBase:a,pattern:i}}function wE(i,t,e){t===void 0&&(t=!1),e===void 0&&(e=!0),Ib(i==="*"||!i.endsWith("*")||i.endsWith("/*"),'Route path "'+i+'" will be treated as if it were '+('"'+i.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+i.replace(/\*$/,"/*")+'".'));let n=[],s="^"+i.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(a,o,l)=>(n.push({paramName:o,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return i.endsWith("*")?(n.push({paramName:"*"}),s+=i==="*"||i==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):e?s+="\\/*$":i!==""&&i!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,t?void 0:"i"),n]}function SE(i){try{return i.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return Ib(!1,'The URL path "'+i+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),i}}function Nb(i,t){if(t==="/")return i;if(!i.toLowerCase().startsWith(t.toLowerCase()))return null;let e=t.endsWith("/")?t.length-1:t.length,n=i.charAt(e);return n&&n!=="/"?null:i.slice(e)||"/"}const Na=i=>i.join("/").replace(/\/\/+/g,"/"),EE=i=>i.replace(/\/+$/,"").replace(/^\/*/,"/");function _E(i){return i!=null&&typeof i.status=="number"&&typeof i.statusText=="string"&&typeof i.internal=="boolean"&&"data"in i}const jb=["post","put","patch","delete"];new Set(jb);const TE=["get",...jb];new Set(TE);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function zu(){return zu=Object.assign?Object.assign.bind():function(i){for(var t=1;t<arguments.length;t++){var e=arguments[t];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(i[n]=e[n])}return i},zu.apply(this,arguments)}const CE=P.createContext(null),PE=P.createContext(null),Bb=P.createContext(null),Rd=P.createContext(null),kd=P.createContext({outlet:null,matches:[],isDataRoute:!1}),Vb=P.createContext(null);function Pg(){return P.useContext(Rd)!=null}function RE(){return Pg()||Xe(!1),P.useContext(Rd).location}function kE(i,t){return ME(i,t)}function ME(i,t,e,n){Pg()||Xe(!1);let{navigator:s}=P.useContext(Bb),{matches:r}=P.useContext(kd),a=r[r.length-1],o=a?a.params:{};a&&a.pathname;let l=a?a.pathnameBase:"/";a&&a.route;let h=RE(),u;if(t){var d;let v=typeof t=="string"?Pd(t):t;l==="/"||(d=v.pathname)!=null&&d.startsWith(l)||Xe(!1),u=v}else u=h;let f=u.pathname||"/",p=f;if(l!=="/"){let v=l.replace(/^\//,"").split("/");p="/"+f.replace(/^\//,"").split("/").slice(v.length).join("/")}let g=cE(i,{pathname:p}),m=FE(g&&g.map(v=>Object.assign({},v,{params:Object.assign({},o,v.params),pathname:Na([l,s.encodeLocation?s.encodeLocation(v.pathname).pathname:v.pathname]),pathnameBase:v.pathnameBase==="/"?l:Na([l,s.encodeLocation?s.encodeLocation(v.pathnameBase).pathname:v.pathnameBase])})),r,e,n);return t&&m?P.createElement(Rd.Provider,{value:{location:zu({pathname:"/",search:"",hash:"",state:null,key:"default"},u),navigationType:Bs.Pop}},m):m}function LE(){let i=VE(),t=_E(i)?i.status+" "+i.statusText:i instanceof Error?i.message:JSON.stringify(i),e=i instanceof Error?i.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return P.createElement(P.Fragment,null,P.createElement("h2",null,"Unexpected Application Error!"),P.createElement("h3",{style:{fontStyle:"italic"}},t),e?P.createElement("pre",{style:s},e):null,null)}const IE=P.createElement(LE,null);class DE extends P.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,e){return e.location!==t.location||e.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:e.error,location:e.location,revalidation:t.revalidation||e.revalidation}}componentDidCatch(t,e){console.error("React Router caught the following error during render",t,e)}render(){return this.state.error!==void 0?P.createElement(kd.Provider,{value:this.props.routeContext},P.createElement(Vb.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function OE(i){let{routeContext:t,match:e,children:n}=i,s=P.useContext(CE);return s&&s.static&&s.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=e.route.id),P.createElement(kd.Provider,{value:t},n)}function FE(i,t,e,n){var s;if(t===void 0&&(t=[]),e===void 0&&(e=null),n===void 0&&(n=null),i==null){var r;if(!e)return null;if(e.errors)i=e.matches;else if((r=n)!=null&&r.v7_partialHydration&&t.length===0&&!e.initialized&&e.matches.length>0)i=e.matches;else return null}let a=i,o=(s=e)==null?void 0:s.errors;if(o!=null){let u=a.findIndex(d=>d.route.id&&(o==null?void 0:o[d.route.id])!==void 0);u>=0||Xe(!1),a=a.slice(0,Math.min(a.length,u+1))}let l=!1,h=-1;if(e&&n&&n.v7_partialHydration)for(let u=0;u<a.length;u++){let d=a[u];if((d.route.HydrateFallback||d.route.hydrateFallbackElement)&&(h=u),d.route.id){let{loaderData:f,errors:p}=e,g=d.route.loader&&f[d.route.id]===void 0&&(!p||p[d.route.id]===void 0);if(d.route.lazy||g){l=!0,h>=0?a=a.slice(0,h+1):a=[a[0]];break}}}return a.reduceRight((u,d,f)=>{let p,g=!1,m=null,v=null;e&&(p=o&&d.route.id?o[d.route.id]:void 0,m=d.route.errorElement||IE,l&&(h<0&&f===0?(HE("route-fallback"),g=!0,v=null):h===f&&(g=!0,v=d.route.hydrateFallbackElement||null)));let y=t.concat(a.slice(0,f+1)),A=()=>{let S;return p?S=m:g?S=v:d.route.Component?S=P.createElement(d.route.Component,null):d.route.element?S=d.route.element:S=u,P.createElement(OE,{match:d,routeContext:{outlet:u,matches:y,isDataRoute:e!=null},children:S})};return e&&(d.route.ErrorBoundary||d.route.errorElement||f===0)?P.createElement(DE,{location:e.location,revalidation:e.revalidation,component:m,error:p,children:A(),routeContext:{outlet:null,matches:y,isDataRoute:!0}}):A()},null)}var Hb=function(i){return i.UseBlocker="useBlocker",i.UseLoaderData="useLoaderData",i.UseActionData="useActionData",i.UseRouteError="useRouteError",i.UseNavigation="useNavigation",i.UseRouteLoaderData="useRouteLoaderData",i.UseMatches="useMatches",i.UseRevalidator="useRevalidator",i.UseNavigateStable="useNavigate",i.UseRouteId="useRouteId",i}(Hb||{});function NE(i){let t=P.useContext(PE);return t||Xe(!1),t}function jE(i){let t=P.useContext(kd);return t||Xe(!1),t}function BE(i){let t=jE(),e=t.matches[t.matches.length-1];return e.route.id||Xe(!1),e.route.id}function VE(){var i;let t=P.useContext(Vb),e=NE(Hb.UseRouteError),n=BE();return t!==void 0?t:(i=e.errors)==null?void 0:i[n]}const Bm={};function HE(i,t,e){Bm[i]||(Bm[i]=!0)}function $E(i,t){i==null||i.v7_startTransition,i==null||i.v7_relativeSplatPath}function $b(i){Xe(!1)}function UE(i){let{basename:t="/",children:e=null,location:n,navigationType:s=Bs.Pop,navigator:r,static:a=!1,future:o}=i;Pg()&&Xe(!1);let l=t.replace(/^\/*/,"/"),h=P.useMemo(()=>({basename:l,navigator:r,static:a,future:zu({v7_relativeSplatPath:!1},o)}),[l,o,r,a]);typeof n=="string"&&(n=Pd(n));let{pathname:u="/",search:d="",hash:f="",state:p=null,key:g="default"}=n,m=P.useMemo(()=>{let v=Nb(u,l);return v==null?null:{location:{pathname:v,search:d,hash:f,state:p,key:g},navigationType:s}},[l,u,d,f,p,g,s]);return m==null?null:P.createElement(Bb.Provider,{value:h},P.createElement(Rd.Provider,{children:e,value:m}))}function WE(i){let{children:t,location:e}=i;return kE(Ff(t),e)}new Promise(()=>{});function Ff(i,t){t===void 0&&(t=[]);let e=[];return P.Children.forEach(i,(n,s)=>{if(!P.isValidElement(n))return;let r=[...t,s];if(n.type===P.Fragment){e.push.apply(e,Ff(n.props.children,r));return}n.type!==$b&&Xe(!1),!n.props.index||!n.props.children||Xe(!1);let a={id:n.props.id||r.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,loader:n.props.loader,action:n.props.action,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(a.children=Ff(n.props.children,r)),e.push(a)}),e}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */const zE="6";try{window.__reactRouterVersion=zE}catch{}const GE="startTransition",Vm=VS[GE];function qE(i){let{basename:t,children:e,future:n,window:s}=i,r=P.useRef();r.current==null&&(r.current=aE({window:s,v5Compat:!0}));let a=r.current,[o,l]=P.useState({action:a.action,location:a.location}),{v7_startTransition:h}=n||{},u=P.useCallback(d=>{h&&Vm?Vm(()=>l(d)):l(d)},[l,h]);return P.useLayoutEffect(()=>a.listen(u),[a,u]),P.useEffect(()=>$E(n),[n]),P.createElement(UE,{basename:t,children:e,location:o.location,navigationType:o.action,navigator:a,future:n})}var Hm;(function(i){i.UseScrollRestoration="useScrollRestoration",i.UseSubmit="useSubmit",i.UseSubmitFetcher="useSubmitFetcher",i.UseFetcher="useFetcher",i.useViewTransitionState="useViewTransitionState"})(Hm||(Hm={}));var $m;(function(i){i.UseFetcher="useFetcher",i.UseFetchers="useFetchers",i.UseScrollRestoration="useScrollRestoration"})($m||($m={}));[...Array(19).fill("none")];var Ge=function(){return Ge=Object.assign||function(t){for(var e,n=1,s=arguments.length;n<s;n++){e=arguments[n];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])}return t},Ge.apply(this,arguments)};function Zl(i,t,e){if(e||arguments.length===2)for(var n=0,s=t.length,r;n<s;n++)(r||!(n in t))&&(r||(r=Array.prototype.slice.call(t,0,n)),r[n]=t[n]);return i.concat(r||Array.prototype.slice.call(t))}var Pt="-ms-",Hl="-moz-",vt="-webkit-",Ub="comm",Md="rule",Rg="decl",XE="@import",Wb="@keyframes",KE="@layer",zb=Math.abs,kg=String.fromCharCode,Nf=Object.assign;function YE(i,t){return ue(i,0)^45?(((t<<2^ue(i,0))<<2^ue(i,1))<<2^ue(i,2))<<2^ue(i,3):0}function Gb(i){return i.trim()}function Ai(i,t){return(i=t.exec(i))?i[0]:i}function nt(i,t,e){return i.replace(t,e)}function ru(i,t,e){return i.indexOf(t,e)}function ue(i,t){return i.charCodeAt(t)|0}function Uo(i,t,e){return i.slice(t,e)}function fi(i){return i.length}function qb(i){return i.length}function Al(i,t){return t.push(i),i}function QE(i,t){return i.map(t).join("")}function Um(i,t){return i.filter(function(e){return!Ai(e,t)})}var Ld=1,Wo=1,Xb=0,Tn=0,Qt=0,Qo="";function Id(i,t,e,n,s,r,a,o){return{value:i,root:t,parent:e,type:n,props:s,children:r,line:Ld,column:Wo,length:a,return:"",siblings:o}}function os(i,t){return Nf(Id("",null,null,"",null,null,0,i.siblings),i,{length:-i.length},t)}function xa(i){for(;i.root;)i=os(i.root,{children:[i]});Al(i,i.siblings)}function ZE(){return Qt}function JE(){return Qt=Tn>0?ue(Qo,--Tn):0,Wo--,Qt===10&&(Wo=1,Ld--),Qt}function Gn(){return Qt=Tn<Xb?ue(Qo,Tn++):0,Wo++,Qt===10&&(Wo=1,Ld++),Qt}function sa(){return ue(Qo,Tn)}function au(){return Tn}function Dd(i,t){return Uo(Qo,i,t)}function jf(i){switch(i){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function t_(i){return Ld=Wo=1,Xb=fi(Qo=i),Tn=0,[]}function e_(i){return Qo="",i}function sf(i){return Gb(Dd(Tn-1,Bf(i===91?i+2:i===40?i+1:i)))}function n_(i){for(;(Qt=sa())&&Qt<33;)Gn();return jf(i)>2||jf(Qt)>3?"":" "}function i_(i,t){for(;--t&&Gn()&&!(Qt<48||Qt>102||Qt>57&&Qt<65||Qt>70&&Qt<97););return Dd(i,au()+(t<6&&sa()==32&&Gn()==32))}function Bf(i){for(;Gn();)switch(Qt){case i:return Tn;case 34:case 39:i!==34&&i!==39&&Bf(Qt);break;case 40:i===41&&Bf(i);break;case 92:Gn();break}return Tn}function s_(i,t){for(;Gn()&&i+Qt!==57;)if(i+Qt===84&&sa()===47)break;return"/*"+Dd(t,Tn-1)+"*"+kg(i===47?i:Gn())}function r_(i){for(;!jf(sa());)Gn();return Dd(i,Tn)}function a_(i){return e_(ou("",null,null,null,[""],i=t_(i),0,[0],i))}function ou(i,t,e,n,s,r,a,o,l){for(var h=0,u=0,d=a,f=0,p=0,g=0,m=1,v=1,y=1,A=0,S="",E=s,T=r,_=n,R=S;v;)switch(g=A,A=Gn()){case 40:if(g!=108&&ue(R,d-1)==58){ru(R+=nt(sf(A),"&","&\f"),"&\f",zb(h?o[h-1]:0))!=-1&&(y=-1);break}case 34:case 39:case 91:R+=sf(A);break;case 9:case 10:case 13:case 32:R+=n_(g);break;case 92:R+=i_(au()-1,7);continue;case 47:switch(sa()){case 42:case 47:Al(o_(s_(Gn(),au()),t,e,l),l);break;default:R+="/"}break;case 123*m:o[h++]=fi(R)*y;case 125*m:case 59:case 0:switch(A){case 0:case 125:v=0;case 59+u:y==-1&&(R=nt(R,/\f/g,"")),p>0&&fi(R)-d&&Al(p>32?zm(R+";",n,e,d-1,l):zm(nt(R," ","")+";",n,e,d-2,l),l);break;case 59:R+=";";default:if(Al(_=Wm(R,t,e,h,u,s,o,S,E=[],T=[],d,r),r),A===123)if(u===0)ou(R,t,_,_,E,r,d,o,T);else switch(f===99&&ue(R,3)===110?100:f){case 100:case 108:case 109:case 115:ou(i,_,_,n&&Al(Wm(i,_,_,0,0,s,o,S,s,E=[],d,T),T),s,T,d,o,n?E:T);break;default:ou(R,_,_,_,[""],T,0,o,T)}}h=u=p=0,m=y=1,S=R="",d=a;break;case 58:d=1+fi(R),p=g;default:if(m<1){if(A==123)--m;else if(A==125&&m++==0&&JE()==125)continue}switch(R+=kg(A),A*m){case 38:y=u>0?1:(R+="\f",-1);break;case 44:o[h++]=(fi(R)-1)*y,y=1;break;case 64:sa()===45&&(R+=sf(Gn())),f=sa(),u=d=fi(S=R+=r_(au())),A++;break;case 45:g===45&&fi(R)==2&&(m=0)}}return r}function Wm(i,t,e,n,s,r,a,o,l,h,u,d){for(var f=s-1,p=s===0?r:[""],g=qb(p),m=0,v=0,y=0;m<n;++m)for(var A=0,S=Uo(i,f+1,f=zb(v=a[m])),E=i;A<g;++A)(E=Gb(v>0?p[A]+" "+S:nt(S,/&\f/g,p[A])))&&(l[y++]=E);return Id(i,t,e,s===0?Md:o,l,h,u,d)}function o_(i,t,e,n){return Id(i,t,e,Ub,kg(ZE()),Uo(i,2,-2),0,n)}function zm(i,t,e,n,s){return Id(i,t,e,Rg,Uo(i,0,n),Uo(i,n+1,-1),n,s)}function Kb(i,t,e){switch(YE(i,t)){case 5103:return vt+"print-"+i+i;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return vt+i+i;case 4789:return Hl+i+i;case 5349:case 4246:case 4810:case 6968:case 2756:return vt+i+Hl+i+Pt+i+i;case 5936:switch(ue(i,t+11)){case 114:return vt+i+Pt+nt(i,/[svh]\w+-[tblr]{2}/,"tb")+i;case 108:return vt+i+Pt+nt(i,/[svh]\w+-[tblr]{2}/,"tb-rl")+i;case 45:return vt+i+Pt+nt(i,/[svh]\w+-[tblr]{2}/,"lr")+i}case 6828:case 4268:case 2903:return vt+i+Pt+i+i;case 6165:return vt+i+Pt+"flex-"+i+i;case 5187:return vt+i+nt(i,/(\w+).+(:[^]+)/,vt+"box-$1$2"+Pt+"flex-$1$2")+i;case 5443:return vt+i+Pt+"flex-item-"+nt(i,/flex-|-self/g,"")+(Ai(i,/flex-|baseline/)?"":Pt+"grid-row-"+nt(i,/flex-|-self/g,""))+i;case 4675:return vt+i+Pt+"flex-line-pack"+nt(i,/align-content|flex-|-self/g,"")+i;case 5548:return vt+i+Pt+nt(i,"shrink","negative")+i;case 5292:return vt+i+Pt+nt(i,"basis","preferred-size")+i;case 6060:return vt+"box-"+nt(i,"-grow","")+vt+i+Pt+nt(i,"grow","positive")+i;case 4554:return vt+nt(i,/([^-])(transform)/g,"$1"+vt+"$2")+i;case 6187:return nt(nt(nt(i,/(zoom-|grab)/,vt+"$1"),/(image-set)/,vt+"$1"),i,"")+i;case 5495:case 3959:return nt(i,/(image-set\([^]*)/,vt+"$1$`$1");case 4968:return nt(nt(i,/(.+:)(flex-)?(.*)/,vt+"box-pack:$3"+Pt+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+vt+i+i;case 4200:if(!Ai(i,/flex-|baseline/))return Pt+"grid-column-align"+Uo(i,t)+i;break;case 2592:case 3360:return Pt+nt(i,"template-","")+i;case 4384:case 3616:return e&&e.some(function(n,s){return t=s,Ai(n.props,/grid-\w+-end/)})?~ru(i+(e=e[t].value),"span",0)?i:Pt+nt(i,"-start","")+i+Pt+"grid-row-span:"+(~ru(e,"span",0)?Ai(e,/\d+/):+Ai(e,/\d+/)-+Ai(i,/\d+/))+";":Pt+nt(i,"-start","")+i;case 4896:case 4128:return e&&e.some(function(n){return Ai(n.props,/grid-\w+-start/)})?i:Pt+nt(nt(i,"-end","-span"),"span ","")+i;case 4095:case 3583:case 4068:case 2532:return nt(i,/(.+)-inline(.+)/,vt+"$1$2")+i;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(fi(i)-1-t>6)switch(ue(i,t+1)){case 109:if(ue(i,t+4)!==45)break;case 102:return nt(i,/(.+:)(.+)-([^]+)/,"$1"+vt+"$2-$3$1"+Hl+(ue(i,t+3)==108?"$3":"$2-$3"))+i;case 115:return~ru(i,"stretch",0)?Kb(nt(i,"stretch","fill-available"),t,e)+i:i}break;case 5152:case 5920:return nt(i,/(.+?):(\d+)(\s*\/\s*(span)?\s*(\d+))?(.*)/,function(n,s,r,a,o,l,h){return Pt+s+":"+r+h+(a?Pt+s+"-span:"+(o?l:+l-+r)+h:"")+i});case 4949:if(ue(i,t+6)===121)return nt(i,":",":"+vt)+i;break;case 6444:switch(ue(i,ue(i,14)===45?18:11)){case 120:return nt(i,/(.+:)([^;\s!]+)(;|(\s+)?!.+)?/,"$1"+vt+(ue(i,14)===45?"inline-":"")+"box$3$1"+vt+"$2$3$1"+Pt+"$2box$3")+i;case 100:return nt(i,":",":"+Pt)+i}break;case 5719:case 2647:case 2135:case 3927:case 2391:return nt(i,"scroll-","scroll-snap-")+i}return i}function Gu(i,t){for(var e="",n=0;n<i.length;n++)e+=t(i[n],n,i,t)||"";return e}function l_(i,t,e,n){switch(i.type){case KE:if(i.children.length)break;case XE:case Rg:return i.return=i.return||i.value;case Ub:return"";case Wb:return i.return=i.value+"{"+Gu(i.children,n)+"}";case Md:if(!fi(i.value=i.props.join(",")))return""}return fi(e=Gu(i.children,n))?i.return=i.value+"{"+e+"}":""}function c_(i){var t=qb(i);return function(e,n,s,r){for(var a="",o=0;o<t;o++)a+=i[o](e,n,s,r)||"";return a}}function h_(i){return function(t){t.root||(t=t.return)&&i(t)}}function u_(i,t,e,n){if(i.length>-1&&!i.return)switch(i.type){case Rg:i.return=Kb(i.value,i.length,e);return;case Wb:return Gu([os(i,{value:nt(i.value,"@","@"+vt)})],n);case Md:if(i.length)return QE(e=i.props,function(s){switch(Ai(s,n=/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":xa(os(i,{props:[nt(s,/:(read-\w+)/,":"+Hl+"$1")]})),xa(os(i,{props:[s]})),Nf(i,{props:Um(e,n)});break;case"::placeholder":xa(os(i,{props:[nt(s,/:(plac\w+)/,":"+vt+"input-$1")]})),xa(os(i,{props:[nt(s,/:(plac\w+)/,":"+Hl+"$1")]})),xa(os(i,{props:[nt(s,/:(plac\w+)/,Pt+"input-$1")]})),xa(os(i,{props:[s]})),Nf(i,{props:Um(e,n)});break}return""})}}var d_={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},Je={},zo=typeof process<"u"&&Je!==void 0&&(Je.REACT_APP_SC_ATTR||Je.SC_ATTR)||"data-styled",Yb="active",Qb="data-styled-version",Od="6.1.19",Mg=`/*!sc*/
`,qu=typeof window<"u"&&typeof document<"u",f_=!!(typeof SC_DISABLE_SPEEDY=="boolean"?SC_DISABLE_SPEEDY:typeof process<"u"&&Je!==void 0&&Je.REACT_APP_SC_DISABLE_SPEEDY!==void 0&&Je.REACT_APP_SC_DISABLE_SPEEDY!==""?Je.REACT_APP_SC_DISABLE_SPEEDY!=="false"&&Je.REACT_APP_SC_DISABLE_SPEEDY:typeof process<"u"&&Je!==void 0&&Je.SC_DISABLE_SPEEDY!==void 0&&Je.SC_DISABLE_SPEEDY!==""&&Je.SC_DISABLE_SPEEDY!=="false"&&Je.SC_DISABLE_SPEEDY),Fd=Object.freeze([]),Go=Object.freeze({});function p_(i,t,e){return e===void 0&&(e=Go),i.theme!==e.theme&&i.theme||t||e.theme}var Zb=new Set(["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","tr","track","u","ul","use","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","marker","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"]),g_=/[!"#$%&'()*+,./:;<=>?@[\\\]^`{|}~-]+/g,m_=/(^-|-$)/g;function Gm(i){return i.replace(g_,"-").replace(m_,"")}var y_=/(a)(d)/gi,Ih=52,qm=function(i){return String.fromCharCode(i+(i>25?39:97))};function Vf(i){var t,e="";for(t=Math.abs(i);t>Ih;t=t/Ih|0)e=qm(t%Ih)+e;return(qm(t%Ih)+e).replace(y_,"$1-$2")}var rf,Jb=5381,ka=function(i,t){for(var e=t.length;e;)i=33*i^t.charCodeAt(--e);return i},t0=function(i){return ka(Jb,i)};function e0(i){return Vf(t0(i)>>>0)}function v_(i){return i.displayName||i.name||"Component"}function af(i){return typeof i=="string"&&!0}var n0=typeof Symbol=="function"&&Symbol.for,i0=n0?Symbol.for("react.memo"):60115,b_=n0?Symbol.for("react.forward_ref"):60112,x_={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},A_={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},s0={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},w_=((rf={})[b_]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},rf[i0]=s0,rf);function Xm(i){return("type"in(t=i)&&t.type.$$typeof)===i0?s0:"$$typeof"in i?w_[i.$$typeof]:x_;var t}var S_=Object.defineProperty,E_=Object.getOwnPropertyNames,Km=Object.getOwnPropertySymbols,__=Object.getOwnPropertyDescriptor,T_=Object.getPrototypeOf,Ym=Object.prototype;function r0(i,t,e){if(typeof t!="string"){if(Ym){var n=T_(t);n&&n!==Ym&&r0(i,n,e)}var s=E_(t);Km&&(s=s.concat(Km(t)));for(var r=Xm(i),a=Xm(t),o=0;o<s.length;++o){var l=s[o];if(!(l in A_||e&&e[l]||a&&l in a||r&&l in r)){var h=__(t,l);try{S_(i,l,h)}catch{}}}}return i}function qo(i){return typeof i=="function"}function Lg(i){return typeof i=="object"&&"styledComponentId"in i}function ar(i,t){return i&&t?"".concat(i," ").concat(t):i||t||""}function Hf(i,t){if(i.length===0)return"";for(var e=i[0],n=1;n<i.length;n++)e+=i[n];return e}function Jl(i){return i!==null&&typeof i=="object"&&i.constructor.name===Object.name&&!("props"in i&&i.$$typeof)}function $f(i,t,e){if(e===void 0&&(e=!1),!e&&!Jl(i)&&!Array.isArray(i))return t;if(Array.isArray(t))for(var n=0;n<t.length;n++)i[n]=$f(i[n],t[n]);else if(Jl(t))for(var n in t)i[n]=$f(i[n],t[n]);return i}function Ig(i,t){Object.defineProperty(i,"toString",{value:t})}function Ah(i){for(var t=[],e=1;e<arguments.length;e++)t[e-1]=arguments[e];return new Error("An error occurred. See https://github.com/styled-components/styled-components/blob/main/packages/styled-components/src/utils/errors.md#".concat(i," for more information.").concat(t.length>0?" Args: ".concat(t.join(", ")):""))}var C_=function(){function i(t){this.groupSizes=new Uint32Array(512),this.length=512,this.tag=t}return i.prototype.indexOfGroup=function(t){for(var e=0,n=0;n<t;n++)e+=this.groupSizes[n];return e},i.prototype.insertRules=function(t,e){if(t>=this.groupSizes.length){for(var n=this.groupSizes,s=n.length,r=s;t>=r;)if((r<<=1)<0)throw Ah(16,"".concat(t));this.groupSizes=new Uint32Array(r),this.groupSizes.set(n),this.length=r;for(var a=s;a<r;a++)this.groupSizes[a]=0}for(var o=this.indexOfGroup(t+1),l=(a=0,e.length);a<l;a++)this.tag.insertRule(o,e[a])&&(this.groupSizes[t]++,o++)},i.prototype.clearGroup=function(t){if(t<this.length){var e=this.groupSizes[t],n=this.indexOfGroup(t),s=n+e;this.groupSizes[t]=0;for(var r=n;r<s;r++)this.tag.deleteRule(n)}},i.prototype.getGroup=function(t){var e="";if(t>=this.length||this.groupSizes[t]===0)return e;for(var n=this.groupSizes[t],s=this.indexOfGroup(t),r=s+n,a=s;a<r;a++)e+="".concat(this.tag.getRule(a)).concat(Mg);return e},i}(),lu=new Map,Xu=new Map,cu=1,Dh=function(i){if(lu.has(i))return lu.get(i);for(;Xu.has(cu);)cu++;var t=cu++;return lu.set(i,t),Xu.set(t,i),t},P_=function(i,t){cu=t+1,lu.set(i,t),Xu.set(t,i)},R_="style[".concat(zo,"][").concat(Qb,'="').concat(Od,'"]'),k_=new RegExp("^".concat(zo,'\\.g(\\d+)\\[id="([\\w\\d-]+)"\\].*?"([^"]*)')),M_=function(i,t,e){for(var n,s=e.split(","),r=0,a=s.length;r<a;r++)(n=s[r])&&i.registerName(t,n)},L_=function(i,t){for(var e,n=((e=t.textContent)!==null&&e!==void 0?e:"").split(Mg),s=[],r=0,a=n.length;r<a;r++){var o=n[r].trim();if(o){var l=o.match(k_);if(l){var h=0|parseInt(l[1],10),u=l[2];h!==0&&(P_(u,h),M_(i,u,l[3]),i.getTag().insertRules(h,s)),s.length=0}else s.push(o)}}},Qm=function(i){for(var t=document.querySelectorAll(R_),e=0,n=t.length;e<n;e++){var s=t[e];s&&s.getAttribute(zo)!==Yb&&(L_(i,s),s.parentNode&&s.parentNode.removeChild(s))}};function I_(){return typeof __webpack_nonce__<"u"?__webpack_nonce__:null}var a0=function(i){var t=document.head,e=i||t,n=document.createElement("style"),s=function(o){var l=Array.from(o.querySelectorAll("style[".concat(zo,"]")));return l[l.length-1]}(e),r=s!==void 0?s.nextSibling:null;n.setAttribute(zo,Yb),n.setAttribute(Qb,Od);var a=I_();return a&&n.setAttribute("nonce",a),e.insertBefore(n,r),n},D_=function(){function i(t){this.element=a0(t),this.element.appendChild(document.createTextNode("")),this.sheet=function(e){if(e.sheet)return e.sheet;for(var n=document.styleSheets,s=0,r=n.length;s<r;s++){var a=n[s];if(a.ownerNode===e)return a}throw Ah(17)}(this.element),this.length=0}return i.prototype.insertRule=function(t,e){try{return this.sheet.insertRule(e,t),this.length++,!0}catch{return!1}},i.prototype.deleteRule=function(t){this.sheet.deleteRule(t),this.length--},i.prototype.getRule=function(t){var e=this.sheet.cssRules[t];return e&&e.cssText?e.cssText:""},i}(),O_=function(){function i(t){this.element=a0(t),this.nodes=this.element.childNodes,this.length=0}return i.prototype.insertRule=function(t,e){if(t<=this.length&&t>=0){var n=document.createTextNode(e);return this.element.insertBefore(n,this.nodes[t]||null),this.length++,!0}return!1},i.prototype.deleteRule=function(t){this.element.removeChild(this.nodes[t]),this.length--},i.prototype.getRule=function(t){return t<this.length?this.nodes[t].textContent:""},i}(),F_=function(){function i(t){this.rules=[],this.length=0}return i.prototype.insertRule=function(t,e){return t<=this.length&&(this.rules.splice(t,0,e),this.length++,!0)},i.prototype.deleteRule=function(t){this.rules.splice(t,1),this.length--},i.prototype.getRule=function(t){return t<this.length?this.rules[t]:""},i}(),Zm=qu,N_={isServer:!qu,useCSSOMInjection:!f_},o0=function(){function i(t,e,n){t===void 0&&(t=Go),e===void 0&&(e={});var s=this;this.options=Ge(Ge({},N_),t),this.gs=e,this.names=new Map(n),this.server=!!t.isServer,!this.server&&qu&&Zm&&(Zm=!1,Qm(this)),Ig(this,function(){return function(r){for(var a=r.getTag(),o=a.length,l="",h=function(d){var f=function(y){return Xu.get(y)}(d);if(f===void 0)return"continue";var p=r.names.get(f),g=a.getGroup(d);if(p===void 0||!p.size||g.length===0)return"continue";var m="".concat(zo,".g").concat(d,'[id="').concat(f,'"]'),v="";p!==void 0&&p.forEach(function(y){y.length>0&&(v+="".concat(y,","))}),l+="".concat(g).concat(m,'{content:"').concat(v,'"}').concat(Mg)},u=0;u<o;u++)h(u);return l}(s)})}return i.registerId=function(t){return Dh(t)},i.prototype.rehydrate=function(){!this.server&&qu&&Qm(this)},i.prototype.reconstructWithOptions=function(t,e){return e===void 0&&(e=!0),new i(Ge(Ge({},this.options),t),this.gs,e&&this.names||void 0)},i.prototype.allocateGSInstance=function(t){return this.gs[t]=(this.gs[t]||0)+1},i.prototype.getTag=function(){return this.tag||(this.tag=(t=function(e){var n=e.useCSSOMInjection,s=e.target;return e.isServer?new F_(s):n?new D_(s):new O_(s)}(this.options),new C_(t)));var t},i.prototype.hasNameForId=function(t,e){return this.names.has(t)&&this.names.get(t).has(e)},i.prototype.registerName=function(t,e){if(Dh(t),this.names.has(t))this.names.get(t).add(e);else{var n=new Set;n.add(e),this.names.set(t,n)}},i.prototype.insertRules=function(t,e,n){this.registerName(t,e),this.getTag().insertRules(Dh(t),n)},i.prototype.clearNames=function(t){this.names.has(t)&&this.names.get(t).clear()},i.prototype.clearRules=function(t){this.getTag().clearGroup(Dh(t)),this.clearNames(t)},i.prototype.clearTag=function(){this.tag=void 0},i}(),j_=/&/g,B_=/^\s*\/\/.*$/gm;function l0(i,t){return i.map(function(e){return e.type==="rule"&&(e.value="".concat(t," ").concat(e.value),e.value=e.value.replaceAll(",",",".concat(t," ")),e.props=e.props.map(function(n){return"".concat(t," ").concat(n)})),Array.isArray(e.children)&&e.type!=="@keyframes"&&(e.children=l0(e.children,t)),e})}function V_(i){var t,e,n,s=Go,r=s.options,a=r===void 0?Go:r,o=s.plugins,l=o===void 0?Fd:o,h=function(f,p,g){return g.startsWith(e)&&g.endsWith(e)&&g.replaceAll(e,"").length>0?".".concat(t):f},u=l.slice();u.push(function(f){f.type===Md&&f.value.includes("&")&&(f.props[0]=f.props[0].replace(j_,e).replace(n,h))}),a.prefix&&u.push(u_),u.push(l_);var d=function(f,p,g,m){p===void 0&&(p=""),g===void 0&&(g=""),m===void 0&&(m="&"),t=m,e=p,n=new RegExp("\\".concat(e,"\\b"),"g");var v=f.replace(B_,""),y=a_(g||p?"".concat(g," ").concat(p," { ").concat(v," }"):v);a.namespace&&(y=l0(y,a.namespace));var A=[];return Gu(y,c_(u.concat(h_(function(S){return A.push(S)})))),A};return d.hash=l.length?l.reduce(function(f,p){return p.name||Ah(15),ka(f,p.name)},Jb).toString():"",d}var H_=new o0,Uf=V_(),c0=ut.createContext({shouldForwardProp:void 0,styleSheet:H_,stylis:Uf});c0.Consumer;ut.createContext(void 0);function Jm(){return P.useContext(c0)}var h0=function(){function i(t,e){var n=this;this.inject=function(s,r){r===void 0&&(r=Uf);var a=n.name+r.hash;s.hasNameForId(n.id,a)||s.insertRules(n.id,a,r(n.rules,a,"@keyframes"))},this.name=t,this.id="sc-keyframes-".concat(t),this.rules=e,Ig(this,function(){throw Ah(12,String(n.name))})}return i.prototype.getName=function(t){return t===void 0&&(t=Uf),this.name+t.hash},i}(),$_=function(i){return i>="A"&&i<="Z"};function ty(i){for(var t="",e=0;e<i.length;e++){var n=i[e];if(e===1&&n==="-"&&i[0]==="-")return i;$_(n)?t+="-"+n.toLowerCase():t+=n}return t.startsWith("ms-")?"-"+t:t}var u0=function(i){return i==null||i===!1||i===""},d0=function(i){var t,e,n=[];for(var s in i){var r=i[s];i.hasOwnProperty(s)&&!u0(r)&&(Array.isArray(r)&&r.isCss||qo(r)?n.push("".concat(ty(s),":"),r,";"):Jl(r)?n.push.apply(n,Zl(Zl(["".concat(s," {")],d0(r),!1),["}"],!1)):n.push("".concat(ty(s),": ").concat((t=s,(e=r)==null||typeof e=="boolean"||e===""?"":typeof e!="number"||e===0||t in d_||t.startsWith("--")?String(e).trim():"".concat(e,"px")),";")))}return n};function ra(i,t,e,n){if(u0(i))return[];if(Lg(i))return[".".concat(i.styledComponentId)];if(qo(i)){if(!qo(r=i)||r.prototype&&r.prototype.isReactComponent||!t)return[i];var s=i(t);return ra(s,t,e,n)}var r;return i instanceof h0?e?(i.inject(e,n),[i.getName(n)]):[i]:Jl(i)?d0(i):Array.isArray(i)?Array.prototype.concat.apply(Fd,i.map(function(a){return ra(a,t,e,n)})):[i.toString()]}function U_(i){for(var t=0;t<i.length;t+=1){var e=i[t];if(qo(e)&&!Lg(e))return!1}return!0}var W_=t0(Od),z_=function(){function i(t,e,n){this.rules=t,this.staticRulesId="",this.isStatic=(n===void 0||n.isStatic)&&U_(t),this.componentId=e,this.baseHash=ka(W_,e),this.baseStyle=n,o0.registerId(e)}return i.prototype.generateAndInjectStyles=function(t,e,n){var s=this.baseStyle?this.baseStyle.generateAndInjectStyles(t,e,n):"";if(this.isStatic&&!n.hash)if(this.staticRulesId&&e.hasNameForId(this.componentId,this.staticRulesId))s=ar(s,this.staticRulesId);else{var r=Hf(ra(this.rules,t,e,n)),a=Vf(ka(this.baseHash,r)>>>0);if(!e.hasNameForId(this.componentId,a)){var o=n(r,".".concat(a),void 0,this.componentId);e.insertRules(this.componentId,a,o)}s=ar(s,a),this.staticRulesId=a}else{for(var l=ka(this.baseHash,n.hash),h="",u=0;u<this.rules.length;u++){var d=this.rules[u];if(typeof d=="string")h+=d;else if(d){var f=Hf(ra(d,t,e,n));l=ka(l,f+u),h+=f}}if(h){var p=Vf(l>>>0);e.hasNameForId(this.componentId,p)||e.insertRules(this.componentId,p,n(h,".".concat(p),void 0,this.componentId)),s=ar(s,p)}}return s},i}(),f0=ut.createContext(void 0);f0.Consumer;var of={};function G_(i,t,e){var n=Lg(i),s=i,r=!af(i),a=t.attrs,o=a===void 0?Fd:a,l=t.componentId,h=l===void 0?function(E,T){var _=typeof E!="string"?"sc":Gm(E);of[_]=(of[_]||0)+1;var R="".concat(_,"-").concat(e0(Od+_+of[_]));return T?"".concat(T,"-").concat(R):R}(t.displayName,t.parentComponentId):l,u=t.displayName,d=u===void 0?function(E){return af(E)?"styled.".concat(E):"Styled(".concat(v_(E),")")}(i):u,f=t.displayName&&t.componentId?"".concat(Gm(t.displayName),"-").concat(t.componentId):t.componentId||h,p=n&&s.attrs?s.attrs.concat(o).filter(Boolean):o,g=t.shouldForwardProp;if(n&&s.shouldForwardProp){var m=s.shouldForwardProp;if(t.shouldForwardProp){var v=t.shouldForwardProp;g=function(E,T){return m(E,T)&&v(E,T)}}else g=m}var y=new z_(e,f,n?s.componentStyle:void 0);function A(E,T){return function(_,R,k){var I=_.attrs,D=_.componentStyle,M=_.defaultProps,L=_.foldedComponentIds,N=_.styledComponentId,O=_.target,U=ut.useContext(f0),z=Jm(),j=_.shouldForwardProp||z.shouldForwardProp,V=p_(R,U,M)||Go,tt=function(Wt,gt,Y){for(var rt,Tt=Ge(Ge({},gt),{className:void 0,theme:Y}),zt=0;zt<Wt.length;zt+=1){var pt=qo(rt=Wt[zt])?rt(Tt):rt;for(var be in pt)Tt[be]=be==="className"?ar(Tt[be],pt[be]):be==="style"?Ge(Ge({},Tt[be]),pt[be]):pt[be]}return gt.className&&(Tt.className=ar(Tt.className,gt.className)),Tt}(I,R,V),yt=tt.as||O,ft={};for(var st in tt)tt[st]===void 0||st[0]==="$"||st==="as"||st==="theme"&&tt.theme===V||(st==="forwardedAs"?ft.as=tt.forwardedAs:j&&!j(st,yt)||(ft[st]=tt[st]));var lt=function(Wt,gt){var Y=Jm(),rt=Wt.generateAndInjectStyles(gt,Y.styleSheet,Y.stylis);return rt}(D,tt),It=ar(L,N);return lt&&(It+=" "+lt),tt.className&&(It+=" "+tt.className),ft[af(yt)&&!Zb.has(yt)?"class":"className"]=It,k&&(ft.ref=k),P.createElement(yt,ft)}(S,E,T)}A.displayName=d;var S=ut.forwardRef(A);return S.attrs=p,S.componentStyle=y,S.displayName=d,S.shouldForwardProp=g,S.foldedComponentIds=n?ar(s.foldedComponentIds,s.styledComponentId):"",S.styledComponentId=f,S.target=n?s.target:i,Object.defineProperty(S,"defaultProps",{get:function(){return this._foldedDefaultProps},set:function(E){this._foldedDefaultProps=n?function(T){for(var _=[],R=1;R<arguments.length;R++)_[R-1]=arguments[R];for(var k=0,I=_;k<I.length;k++)$f(T,I[k],!0);return T}({},s.defaultProps,E):E}}),Ig(S,function(){return".".concat(S.styledComponentId)}),r&&r0(S,i,{attrs:!0,componentStyle:!0,displayName:!0,foldedComponentIds:!0,shouldForwardProp:!0,styledComponentId:!0,target:!0}),S}function ey(i,t){for(var e=[i[0]],n=0,s=t.length;n<s;n+=1)e.push(t[n],i[n+1]);return e}var ny=function(i){return Object.assign(i,{isCss:!0})};function $l(i){for(var t=[],e=1;e<arguments.length;e++)t[e-1]=arguments[e];if(qo(i)||Jl(i))return ny(ra(ey(Fd,Zl([i],t,!0))));var n=i;return t.length===0&&n.length===1&&typeof n[0]=="string"?ra(n):ny(ra(ey(n,t)))}function Wf(i,t,e){if(e===void 0&&(e=Go),!t)throw Ah(1,t);var n=function(s){for(var r=[],a=1;a<arguments.length;a++)r[a-1]=arguments[a];return i(t,e,$l.apply(void 0,Zl([s],r,!1)))};return n.attrs=function(s){return Wf(i,t,Ge(Ge({},e),{attrs:Array.prototype.concat(e.attrs,s).filter(Boolean)}))},n.withConfig=function(s){return Wf(i,t,Ge(Ge({},e),s))},n}var p0=function(i){return Wf(G_,i)},q_=p0;Zb.forEach(function(i){q_[i]=p0(i)});function Dg(i){for(var t=[],e=1;e<arguments.length;e++)t[e-1]=arguments[e];var n=Hf($l.apply(void 0,Zl([i],t,!1))),s=e0(n);return new h0(s,n)}const X_=Dg`
  from {
    opacity: 0;
  }
  to {
    opacity: 1;
  }
`,K_=Dg`
  from {
    transform: translateY(20px);
    opacity: 0;
  }
  to {
    transform: translateY(0);
    opacity: 1;
  }
`,Y_=Dg`
  from {
    transform: scale(1);
  }
  to {
    transform: scale(1.05);
  }
`;$l`
    animation: ${X_} 0.5s ease-in-out;
  `,$l`
    animation: ${K_} 0.5s ease-in-out;
  `,$l`
    &:hover {
      animation: ${Y_} 0.3s ease-in-out;
      transform: scale(1.05);
    }
  `;const Q_={borderRadius:4,radius:{xs:1,sm:2,md:4,lg:6,xl:8,default:4}},Aa={shape:Q_},Z_=i=>({animations:{durations:{shortest:150,shorter:200,short:250,standard:300,complex:375,enteringScreen:225,leavingScreen:195},easings:{easeInOut:"cubic-bezier(0.4, 0, 0.2, 1)",easeOut:"cubic-bezier(0.0, 0, 0.2, 1)",easeIn:"cubic-bezier(0.4, 0, 1, 1)",sharp:"cubic-bezier(0.4, 0, 0.6, 1)"},transitions:{create:(t=["all"],e={})=>{const{duration:n="standard",easing:s="easeInOut",delay:r=0}=e,a=typeof n=="string"?i.animations.durations[n]:n,o=typeof s=="string"?i.animations.easings[s]:s;return(Array.isArray(t)?t:[t]).map(l=>`${l} ${a}ms ${o} ${r}ms`).join(",")}}},sections:{layout:{spacing:{xs:i.spacing(4),sm:i.spacing(6),md:i.spacing(8),lg:i.spacing(10)},padding:{xs:i.spacing(2),sm:i.spacing(3),md:i.spacing(4),lg:i.spacing(5)},maxWidth:{xs:"100%",sm:"600px",md:"900px",lg:"1200px",xl:"1400px"}}},projectCard:{height:"400px",borderWidth:"4px",variants:{primary:{color:i.palette.primary.main,focusRing:rs(i.palette.primary.main,.25)},secondary:{color:i.palette.secondary.main,focusRing:rs(i.palette.secondary.main,.25)},success:{color:i.palette.success.main,focusRing:rs(i.palette.success.main,.25)},warning:{color:i.palette.warning.main,focusRing:rs(i.palette.warning.main,.25)},error:{color:i.palette.error.main,focusRing:rs(i.palette.error.main,.25)},info:{color:i.palette.info.main,focusRing:rs(i.palette.info.main,.25)}}},media:{ratios:{portrait:"3 / 4",square:"1 / 1",landscape:"16 / 9",widescreen:"21 / 9"},placeholders:{image:"/assets/images/placeholders/image-placeholder.jpg",project:"/assets/images/placeholders/project-placeholder.jpg",avatar:"/assets/images/placeholders/avatar-placeholder.jpg",video:"/assets/images/placeholders/video-placeholder.jpg"}},overlays:{header:{light:"rgba(248, 250, 252, 0.7)",dark:"rgba(10, 22, 40, 0.7)"},aboutImage:{default:"rgba(0,0,0,0.5)",hover:"rgba(0,0,0,0.7)"},contactCard:{background:"rgba(255, 255, 255, 0.1)",border:"1px solid rgba(255, 255, 255, 0.2)"},socialIcon:{base:rs(i.palette.secondary.main,.1),hover:rs(i.palette.secondary.main,.18)}},header:{burgerMenuOffset:{top:i.spacing(1),right:{xs:i.spacing(2.5),sm:i.spacing(3),md:i.spacing(1)}}},zIndex:{header:1100,modal:1300,notification:1400,tooltip:1500,popover:1600}}),lf=(i,t="md")=>{var n;const e=((n=i==null?void 0:i.shape)==null?void 0:n.radius)||Aa.shape.radius;return e[t]||e.default||8},g0=(i="dark")=>{var S;const t=i==="dark",e=230,n=85,s=190,r=t?65:45,a=t?65:50,o=t?60:45,l=(E,T,_)=>{_/=100;const R=T*Math.min(_,1-_)/100,k=I=>{const D=(I+E/30)%12,M=_-R*Math.max(Math.min(D-3,9-D,1),-1);return Math.round(255*M).toString(16).padStart(2,"0")};return`#${k(0)}${k(8)}${k(4)}`},h=l(e,80,r),u=l(e,75,r+10),d=l(e,85,r-10),f=l(n,80,a),p=l(n,75,a+10),g=l(n,85,a-10),m=l(s,75,o),v=l(s,70,o+10),y=l(s,80,o-10);let A=HS({palette:{mode:i,primary:{main:h,light:u,dark:d,contrastText:"#ffffff"},secondary:{main:f,light:p,dark:g,contrastText:t?"#000000":"#ffffff"},accent:{main:m,light:v,dark:y,contrastText:"#ffffff"},info:{main:m},background:{default:t?"#121212":"#f7f9fc",paper:t?"#1e1e1e":"#ffffff",subtle:t?"rgba(255, 255, 255, 0.05)":"rgba(0, 0, 0, 0.03)"},text:{primary:t?"#ffffff":"#111111",secondary:t?"rgba(255, 255, 255, 0.7)":"rgba(0, 0, 0, 0.6)",disabled:t?"rgba(255, 255, 255, 0.5)":"rgba(0, 0, 0, 0.38)"},divider:t?"rgba(255, 255, 255, 0.12)":"rgba(0, 0, 0, 0.12)",scene3d:{sphere:h,box:f,torus:m,particleColor:t?"#ffffff":h,emissive:t?p:f}},typography:{fontFamily:["Montserrat","IBM Plex Mono","-apple-system","BlinkMacSystemFont","Arial","sans-serif"].join(","),h1:{fontWeight:700,fontSize:"3.5rem",lineHeight:1.2},h2:{fontWeight:700,fontSize:"2.75rem",lineHeight:1.2},h3:{fontWeight:600,fontSize:"2.25rem",lineHeight:1.3},h4:{fontWeight:600,fontSize:"1.75rem",lineHeight:1.4},h5:{fontWeight:600,fontSize:"1.5rem",lineHeight:1.4},h6:{fontWeight:600,fontSize:"1.25rem",lineHeight:1.4},subtitle1:{fontWeight:500,fontSize:"1.1rem",lineHeight:1.5,letterSpacing:"0.00938em"},body1:{fontSize:"1rem",lineHeight:1.6,letterSpacing:"0.00938em"},body2:{fontSize:"0.875rem",lineHeight:1.6,letterSpacing:"0.01071em"},button:{fontWeight:600,fontSize:"0.875rem",letterSpacing:"0.02857em",textTransform:"none"},caption:{fontSize:"0.75rem",lineHeight:1.5,letterSpacing:"0.03333em"},chipText:{fontSize:"0.875rem",fontWeight:500}},shape:{borderRadius:((S=Aa.shape.radius)==null?void 0:S.default)||8,radius:Aa.shape.radius||{xs:2,sm:4,md:8,lg:12,xl:16,default:8}},spacing:8,shadows:["none","0px 2px 4px rgba(0, 0, 0, 0.05)","0px 4px 8px rgba(0, 0, 0, 0.08)","0px 6px 12px rgba(0, 0, 0, 0.12)","0px 8px 16px rgba(0, 0, 0, 0.15)","0px 10px 20px rgba(0, 0, 0, 0.18)",...Array(19).fill("none")],zIndex:{appBar:1100,drawer:1200,modal:1300,snackbar:1400,tooltip:1500,heroBackground:5,heroContent:10,scrollIndicator:15,sectionNavigation:20},components:{MuiButton:{styleOverrides:{root:{borderRadius:lf(Aa,"md"),boxShadow:"none","&:hover":{boxShadow:"0px 4px 8px rgba(0, 0, 0, 0.1)"}},contained:{padding:"8px 24px"},outlined:{padding:"7px 23px"},text:{padding:"8px 16px"}}},MuiCard:{styleOverrides:{root:{borderRadius:lf(Aa,"lg"),boxShadow:t?"0 4px 20px rgba(0, 0, 0, 0.4)":"0 4px 20px rgba(0, 0, 0, 0.08)"}}},MuiChip:{styleOverrides:{root:{borderRadius:lf(Aa,"sm"),fontWeight:500}}}}});return A=$S(A),A.custom=Z_(A),A},J_=g0("light"),m0=g0("dark"),t1=P.createContext({mode:"dark",toggleTheme:()=>{},theme:m0}),e1=({children:i})=>{const[t,e]=P.useState(()=>{const a=localStorage.getItem("themeMode");return a==="light"||a==="dark"?a:"dark"}),n=P.useCallback(()=>{e(a=>{const o=a==="dark"?"light":"dark";return localStorage.setItem("themeMode",o),o})},[]);P.useEffect(()=>{const a=window.matchMedia("(prefers-color-scheme: dark)"),o=l=>{localStorage.getItem("themeMode")||e(l.matches?"dark":"light")};return a.addEventListener?a.addEventListener("change",o):a.addListener(o),()=>{a.removeEventListener?a.removeEventListener("change",o):a.removeListener(o)}},[]);const s=P.useMemo(()=>t==="dark"?m0:J_,[t]),r=P.useMemo(()=>({mode:t,toggleTheme:n,theme:s}),[t,n,s]);return C.jsx(t1.Provider,{value:r,children:C.jsx(US,{theme:s,children:i})})};var nl={},cf={};const n1=rE(WS);var iy;function Qe(){return iy||(iy=1,function(i){"use client";Object.defineProperty(i,"__esModule",{value:!0}),Object.defineProperty(i,"default",{enumerable:!0,get:function(){return t.createSvgIcon}});var t=n1}(cf)),cf}var sy;function i1(){if(sy)return nl;sy=1;var i=Ke();Object.defineProperty(nl,"__esModule",{value:!0}),nl.default=void 0;var t=i(Qe()),e=Ye();return nl.default=(0,t.default)((0,e.jsx)("path",{d:"M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}),"Close"),nl}var s1=i1();const Ul=Ne(s1);var il={},ry;function r1(){if(ry)return il;ry=1;var i=Ke();Object.defineProperty(il,"__esModule",{value:!0}),il.default=void 0;var t=i(Qe()),e=Ye();return il.default=(0,t.default)((0,e.jsx)("path",{d:"M19 9h-4V3H9v6H5l7 7zM5 18v2h14v-2z"}),"FileDownload"),il}var a1=r1();const o1=Ne(a1);var sl={},ay;function l1(){if(ay)return sl;ay=1;var i=Ke();Object.defineProperty(sl,"__esModule",{value:!0}),sl.default=void 0;var t=i(Qe()),e=Ye();return sl.default=(0,t.default)((0,e.jsx)("path",{d:"M19 19H5V5h7V3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2v-7h-2zM14 3v2h3.59l-9.83 9.83 1.41 1.41L19 6.41V10h2V3z"}),"OpenInNew"),sl}var c1=l1();const h1=Ne(c1);var Wl={};Wl.d=(i,t)=>{for(var e in t)Wl.o(t,e)&&!Wl.o(i,e)&&Object.defineProperty(i,e,{enumerable:!0,get:t[e]})};Wl.o=(i,t)=>Object.prototype.hasOwnProperty.call(i,t);var Z=globalThis.pdfjsLib={};Wl.d(Z,{AbortException:()=>ga,AnnotationEditorLayer:()=>ng,AnnotationEditorParamsType:()=>Q,AnnotationEditorType:()=>et,AnnotationEditorUIManager:()=>ca,AnnotationLayer:()=>lC,AnnotationMode:()=>us,ColorPicker:()=>Zu,DOMSVGFactory:()=>Gg,DrawLayer:()=>ag,FeatureTest:()=>De,GlobalWorkerOptions:()=>Xi,ImageKind:()=>hu,InvalidPDFException:()=>v0,MissingPDFException:()=>pa,OPS:()=>Mn,OutputScale:()=>Kf,PDFDataRangeTransport:()=>px,PDFDateString:()=>Bg,PDFWorker:()=>Ba,PasswordResponses:()=>p1,PermissionFlag:()=>f1,PixelsPerInch:()=>Vs,RenderingCancelledException:()=>Ng,TextLayer:()=>Sp,UnexpectedResponseException:()=>Vd,Util:()=>W,VerbosityLevel:()=>Nd,XfaLayer:()=>mx,build:()=>$T,createValidAbsoluteUrl:()=>v1,fetchData:()=>$d,getDocument:()=>IT,getFilenameFromUrl:()=>C1,getPdfFilenameFromUrl:()=>P1,getXfaPageViewport:()=>R1,isDataScheme:()=>Ud,isPdfFile:()=>jg,noContextMenu:()=>Cn,normalizeUnicode:()=>E1,setLayerDimensions:()=>la,shadow:()=>ht,version:()=>HT});const Ce=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser"),y0=[1,0,0,1,0,0],zf=[.001,0,0,.001,0,0],u1=1e7,hf=1.35,cn={ANY:1,DISPLAY:2,PRINT:4,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,IS_EDITING:128,OPLIST:256},us={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3},d1="pdfjs_internal_editor_",et={DISABLE:-1,NONE:0,FREETEXT:3,HIGHLIGHT:9,STAMP:13,INK:15},Q={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23,HIGHLIGHT_COLOR:31,HIGHLIGHT_DEFAULT_COLOR:32,HIGHLIGHT_THICKNESS:33,HIGHLIGHT_FREE:34,HIGHLIGHT_SHOW_ALL:35},f1={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048},xe={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4},hu={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3},Jt={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,WIDGET:20},rl={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5},Nd={ERRORS:0,WARNINGS:1,INFOS:5},Mn={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91,setStrokeTransparent:92,setFillTransparent:93},p1={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};let jd=Nd.WARNINGS;function g1(i){Number.isInteger(i)&&(jd=i)}function m1(){return jd}function Bd(i){jd>=Nd.INFOS&&console.log(`Info: ${i}`)}function at(i){jd>=Nd.WARNINGS&&console.log(`Warning: ${i}`)}function Rt(i){throw new Error(i)}function ie(i,t){i||Rt(t)}function y1(i){switch(i==null?void 0:i.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function v1(i,t=null,e=null){if(!i)return null;try{if(e&&typeof i=="string"){if(e.addDefaultProtocol&&i.startsWith("www.")){const s=i.match(/\./g);(s==null?void 0:s.length)>=2&&(i=`http://${i}`)}if(e.tryConvertEncoding)try{i=S1(i)}catch{}}const n=t?new URL(i,t):new URL(i);if(y1(n))return n}catch{}return null}function ht(i,t,e,n=!1){return Object.defineProperty(i,t,{value:e,enumerable:!n,configurable:!0,writable:!1}),e}const Xs=function(){function t(e,n){this.message=e,this.name=n}return t.prototype=new Error,t.constructor=t,t}();class Gf extends Xs{constructor(t,e){super(t,"PasswordException"),this.code=e}}class qf extends Xs{constructor(t,e){super(t,"UnknownErrorException"),this.details=e}}class v0 extends Xs{constructor(t){super(t,"InvalidPDFException")}}class pa extends Xs{constructor(t){super(t,"MissingPDFException")}}class Vd extends Xs{constructor(t,e){super(t,"UnexpectedResponseException"),this.status=e}}class b1 extends Xs{constructor(t){super(t,"FormatError")}}class ga extends Xs{constructor(t){super(t,"AbortException")}}function b0(i){(typeof i!="object"||(i==null?void 0:i.length)===void 0)&&Rt("Invalid argument for bytesToString");const t=i.length,e=8192;if(t<e)return String.fromCharCode.apply(null,i);const n=[];for(let s=0;s<t;s+=e){const r=Math.min(s+e,t),a=i.subarray(s,r);n.push(String.fromCharCode.apply(null,a))}return n.join("")}function Hd(i){typeof i!="string"&&Rt("Invalid argument for stringToBytes");const t=i.length,e=new Uint8Array(t);for(let n=0;n<t;++n)e[n]=i.charCodeAt(n)&255;return e}function x1(i){return String.fromCharCode(i>>24&255,i>>16&255,i>>8&255,i&255)}function Og(i){const t=Object.create(null);for(const[e,n]of i)t[e]=n;return t}function A1(){const i=new Uint8Array(4);return i[0]=1,new Uint32Array(i.buffer,0,1)[0]===1}function w1(){try{return new Function(""),!0}catch{return!1}}class De{static get isLittleEndian(){return ht(this,"isLittleEndian",A1())}static get isEvalSupported(){return ht(this,"isEvalSupported",w1())}static get isOffscreenCanvasSupported(){return ht(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}static get platform(){return typeof navigator<"u"&&typeof(navigator==null?void 0:navigator.platform)=="string"?ht(this,"platform",{isMac:navigator.platform.includes("Mac"),isWindows:navigator.platform.includes("Win"),isFirefox:typeof(navigator==null?void 0:navigator.userAgent)=="string"&&navigator.userAgent.includes("Firefox")}):ht(this,"platform",{isMac:!1,isWindows:!1,isFirefox:!1})}static get isCSSRoundSupported(){var t,e;return ht(this,"isCSSRoundSupported",(e=(t=globalThis.CSS)==null?void 0:t.supports)==null?void 0:e.call(t,"width: round(1.5px, 1px)"))}}const uf=Array.from(Array(256).keys(),i=>i.toString(16).padStart(2,"0"));var Zi,uu,Xf;class W{static makeHexColor(t,e,n){return`#${uf[t]}${uf[e]}${uf[n]}`}static scaleMinMax(t,e){let n;t[0]?(t[0]<0&&(n=e[0],e[0]=e[2],e[2]=n),e[0]*=t[0],e[2]*=t[0],t[3]<0&&(n=e[1],e[1]=e[3],e[3]=n),e[1]*=t[3],e[3]*=t[3]):(n=e[0],e[0]=e[1],e[1]=n,n=e[2],e[2]=e[3],e[3]=n,t[1]<0&&(n=e[1],e[1]=e[3],e[3]=n),e[1]*=t[1],e[3]*=t[1],t[2]<0&&(n=e[0],e[0]=e[2],e[2]=n),e[0]*=t[2],e[2]*=t[2]),e[0]+=t[4],e[1]+=t[5],e[2]+=t[4],e[3]+=t[5]}static transform(t,e){return[t[0]*e[0]+t[2]*e[1],t[1]*e[0]+t[3]*e[1],t[0]*e[2]+t[2]*e[3],t[1]*e[2]+t[3]*e[3],t[0]*e[4]+t[2]*e[5]+t[4],t[1]*e[4]+t[3]*e[5]+t[5]]}static applyTransform(t,e){const n=t[0]*e[0]+t[1]*e[2]+e[4],s=t[0]*e[1]+t[1]*e[3]+e[5];return[n,s]}static applyInverseTransform(t,e){const n=e[0]*e[3]-e[1]*e[2],s=(t[0]*e[3]-t[1]*e[2]+e[2]*e[5]-e[4]*e[3])/n,r=(-t[0]*e[1]+t[1]*e[0]+e[4]*e[1]-e[5]*e[0])/n;return[s,r]}static getAxialAlignedBoundingBox(t,e){const n=this.applyTransform(t,e),s=this.applyTransform(t.slice(2,4),e),r=this.applyTransform([t[0],t[3]],e),a=this.applyTransform([t[2],t[1]],e);return[Math.min(n[0],s[0],r[0],a[0]),Math.min(n[1],s[1],r[1],a[1]),Math.max(n[0],s[0],r[0],a[0]),Math.max(n[1],s[1],r[1],a[1])]}static inverseTransform(t){const e=t[0]*t[3]-t[1]*t[2];return[t[3]/e,-t[1]/e,-t[2]/e,t[0]/e,(t[2]*t[5]-t[4]*t[3])/e,(t[4]*t[1]-t[5]*t[0])/e]}static singularValueDecompose2dScale(t){const e=[t[0],t[2],t[1],t[3]],n=t[0]*e[0]+t[1]*e[2],s=t[0]*e[1]+t[1]*e[3],r=t[2]*e[0]+t[3]*e[2],a=t[2]*e[1]+t[3]*e[3],o=(n+a)/2,l=Math.sqrt((n+a)**2-4*(n*a-r*s))/2,h=o+l||1,u=o-l||1;return[Math.sqrt(h),Math.sqrt(u)]}static normalizeRect(t){const e=t.slice(0);return t[0]>t[2]&&(e[0]=t[2],e[2]=t[0]),t[1]>t[3]&&(e[1]=t[3],e[3]=t[1]),e}static intersect(t,e){const n=Math.max(Math.min(t[0],t[2]),Math.min(e[0],e[2])),s=Math.min(Math.max(t[0],t[2]),Math.max(e[0],e[2]));if(n>s)return null;const r=Math.max(Math.min(t[1],t[3]),Math.min(e[1],e[3])),a=Math.min(Math.max(t[1],t[3]),Math.max(e[1],e[3]));return r>a?null:[n,r,s,a]}static bezierBoundingBox(t,e,n,s,r,a,o,l,h){return h?(h[0]=Math.min(h[0],t,o),h[1]=Math.min(h[1],e,l),h[2]=Math.max(h[2],t,o),h[3]=Math.max(h[3],e,l)):h=[Math.min(t,o),Math.min(e,l),Math.max(t,o),Math.max(e,l)],x(this,Zi,Xf).call(this,t,n,r,o,e,s,a,l,3*(-t+3*(n-r)+o),6*(t-2*n+r),3*(n-t),h),x(this,Zi,Xf).call(this,t,n,r,o,e,s,a,l,3*(-e+3*(s-a)+l),6*(e-2*s+a),3*(s-e),h),h}}Zi=new WeakSet,uu=function(t,e,n,s,r,a,o,l,h,u){if(h<=0||h>=1)return;const d=1-h,f=h*h,p=f*h,g=d*(d*(d*t+3*h*e)+3*f*n)+p*s,m=d*(d*(d*r+3*h*a)+3*f*o)+p*l;u[0]=Math.min(u[0],g),u[1]=Math.min(u[1],m),u[2]=Math.max(u[2],g),u[3]=Math.max(u[3],m)},Xf=function(t,e,n,s,r,a,o,l,h,u,d,f){if(Math.abs(h)<1e-12){Math.abs(u)>=1e-12&&x(this,Zi,uu).call(this,t,e,n,s,r,a,o,l,-d/u,f);return}const p=u**2-4*d*h;if(p<0)return;const g=Math.sqrt(p),m=2*h;x(this,Zi,uu).call(this,t,e,n,s,r,a,o,l,(-u+g)/m,f),x(this,Zi,uu).call(this,t,e,n,s,r,a,o,l,(-u-g)/m,f)},w(W,Zi);function S1(i){return decodeURIComponent(escape(i))}let df=null,oy=null;function E1(i){return df||(df=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,oy=new Map([["","t"]])),i.replaceAll(df,(t,e,n)=>e?e.normalize("NFKC"):oy.get(n))}function _1(){if(typeof crypto<"u"&&typeof(crypto==null?void 0:crypto.randomUUID)=="function")return crypto.randomUUID();const i=new Uint8Array(32);if(typeof crypto<"u"&&typeof(crypto==null?void 0:crypto.getRandomValues)=="function")crypto.getRandomValues(i);else for(let t=0;t<32;t++)i[t]=Math.floor(Math.random()*255);return b0(i)}const Fg="pdfjs_internal_id_",vi={BEZIER_CURVE_TO:0,MOVE_TO:1,LINE_TO:2,QUADRATIC_CURVE_TO:3,RESTORE:4,SAVE:5,SCALE:6,TRANSFORM:7,TRANSLATE:8};function T1(i){return Uint8Array.prototype.toBase64?i.toBase64():btoa(b0(i))}const xi="http://www.w3.org/2000/svg",sr=class sr{};K(sr,"CSS",96),K(sr,"PDF",72),K(sr,"PDF_TO_CSS_UNITS",sr.CSS/sr.PDF);let Vs=sr;async function $d(i,t="text"){if(wl(i,document.baseURI)){const e=await fetch(i);if(!e.ok)throw new Error(e.statusText);switch(t){case"arraybuffer":return e.arrayBuffer();case"blob":return e.blob();case"json":return e.json()}return e.text()}return new Promise((e,n)=>{const s=new XMLHttpRequest;s.open("GET",i,!0),s.responseType=t,s.onreadystatechange=()=>{if(s.readyState===XMLHttpRequest.DONE){if(s.status===200||s.status===0){switch(t){case"arraybuffer":case"blob":case"json":e(s.response);return}e(s.responseText);return}n(new Error(s.statusText))}},s.send(null)})}class wh{constructor({viewBox:t,scale:e,rotation:n,offsetX:s=0,offsetY:r=0,dontFlip:a=!1}){this.viewBox=t,this.scale=e,this.rotation=n,this.offsetX=s,this.offsetY=r;const o=(t[2]+t[0])/2,l=(t[3]+t[1])/2;let h,u,d,f;switch(n%=360,n<0&&(n+=360),n){case 180:h=-1,u=0,d=0,f=1;break;case 90:h=0,u=1,d=1,f=0;break;case 270:h=0,u=-1,d=-1,f=0;break;case 0:h=1,u=0,d=0,f=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}a&&(d=-d,f=-f);let p,g,m,v;h===0?(p=Math.abs(l-t[1])*e+s,g=Math.abs(o-t[0])*e+r,m=(t[3]-t[1])*e,v=(t[2]-t[0])*e):(p=Math.abs(o-t[0])*e+s,g=Math.abs(l-t[1])*e+r,m=(t[2]-t[0])*e,v=(t[3]-t[1])*e),this.transform=[h*e,u*e,d*e,f*e,p-h*e*o-d*e*l,g-u*e*o-f*e*l],this.width=m,this.height=v}get rawDims(){const{viewBox:t}=this;return ht(this,"rawDims",{pageWidth:t[2]-t[0],pageHeight:t[3]-t[1],pageX:t[0],pageY:t[1]})}clone({scale:t=this.scale,rotation:e=this.rotation,offsetX:n=this.offsetX,offsetY:s=this.offsetY,dontFlip:r=!1}={}){return new wh({viewBox:this.viewBox.slice(),scale:t,rotation:e,offsetX:n,offsetY:s,dontFlip:r})}convertToViewportPoint(t,e){return W.applyTransform([t,e],this.transform)}convertToViewportRectangle(t){const e=W.applyTransform([t[0],t[1]],this.transform),n=W.applyTransform([t[2],t[3]],this.transform);return[e[0],e[1],n[0],n[1]]}convertToPdfPoint(t,e){return W.applyInverseTransform([t,e],this.transform)}}class Ng extends Xs{constructor(t,e=0){super(t,"RenderingCancelledException"),this.extraDelay=e}}function Ud(i){const t=i.length;let e=0;for(;e<t&&i[e].trim()==="";)e++;return i.substring(e,e+5).toLowerCase()==="data:"}function jg(i){return typeof i=="string"&&/\.pdf$/i.test(i)}function C1(i){return[i]=i.split(/[#?]/,1),i.substring(i.lastIndexOf("/")+1)}function P1(i,t="document.pdf"){if(typeof i!="string")return t;if(Ud(i))return at('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),t;const e=/^(?:(?:[^:]+:)?\/\/[^/]+)?([^?#]*)(\?[^#]*)?(#.*)?$/,n=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i,s=e.exec(i);let r=n.exec(s[1])||n.exec(s[2])||n.exec(s[3]);if(r&&(r=r[0],r.includes("%")))try{r=n.exec(decodeURIComponent(r))[0]}catch{}return r||t}class ly{constructor(){K(this,"started",Object.create(null));K(this,"times",[])}time(t){t in this.started&&at(`Timer is already running for ${t}`),this.started[t]=Date.now()}timeEnd(t){t in this.started||at(`Timer has not been started for ${t}`),this.times.push({name:t,start:this.started[t],end:Date.now()}),delete this.started[t]}toString(){const t=[];let e=0;for(const{name:n}of this.times)e=Math.max(n.length,e);for(const{name:n,start:s,end:r}of this.times)t.push(`${n.padEnd(e)} ${r-s}ms
`);return t.join("")}}function wl(i,t){try{const{protocol:e}=t?new URL(i,t):new URL(i);return e==="http:"||e==="https:"}catch{return!1}}function Cn(i){i.preventDefault()}function cy(i){console.log("Deprecated API usage: "+i)}var ac;class Bg{static toDateObject(t){if(!t||typeof t!="string")return null;c(this,ac)||b(this,ac,new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?"));const e=c(this,ac).exec(t);if(!e)return null;const n=parseInt(e[1],10);let s=parseInt(e[2],10);s=s>=1&&s<=12?s-1:0;let r=parseInt(e[3],10);r=r>=1&&r<=31?r:1;let a=parseInt(e[4],10);a=a>=0&&a<=23?a:0;let o=parseInt(e[5],10);o=o>=0&&o<=59?o:0;let l=parseInt(e[6],10);l=l>=0&&l<=59?l:0;const h=e[7]||"Z";let u=parseInt(e[8],10);u=u>=0&&u<=23?u:0;let d=parseInt(e[9],10)||0;return d=d>=0&&d<=59?d:0,h==="-"?(a+=u,o+=d):h==="+"&&(a-=u,o-=d),new Date(Date.UTC(n,s,r,a,o,l))}}ac=new WeakMap,w(Bg,ac);function R1(i,{scale:t=1,rotation:e=0}){const{width:n,height:s}=i.attributes.style,r=[0,0,parseInt(n),parseInt(s)];return new wh({viewBox:r,scale:t,rotation:e})}function Vg(i){if(i.startsWith("#")){const t=parseInt(i.slice(1),16);return[(t&16711680)>>16,(t&65280)>>8,t&255]}return i.startsWith("rgb(")?i.slice(4,-1).split(",").map(t=>parseInt(t)):i.startsWith("rgba(")?i.slice(5,-1).split(",").map(t=>parseInt(t)).slice(0,3):(at(`Not a valid color format: "${i}"`),[0,0,0])}function k1(i){const t=document.createElement("span");t.style.visibility="hidden",document.body.append(t);for(const e of i.keys()){t.style.color=e;const n=window.getComputedStyle(t).color;i.set(e,Vg(n))}t.remove()}function jt(i){const{a:t,b:e,c:n,d:s,e:r,f:a}=i.getTransform();return[t,e,n,s,r,a]}function bi(i){const{a:t,b:e,c:n,d:s,e:r,f:a}=i.getTransform().invertSelf();return[t,e,n,s,r,a]}function la(i,t,e=!1,n=!0){if(t instanceof wh){const{pageWidth:s,pageHeight:r}=t.rawDims,{style:a}=i,o=De.isCSSRoundSupported,l=`var(--scale-factor) * ${s}px`,h=`var(--scale-factor) * ${r}px`,u=o?`round(down, ${l}, var(--scale-round-x, 1px))`:`calc(${l})`,d=o?`round(down, ${h}, var(--scale-round-y, 1px))`:`calc(${h})`;!e||t.rotation%180===0?(a.width=u,a.height=d):(a.width=d,a.height=u)}n&&i.setAttribute("data-main-rotation",t.rotation)}class Kf{constructor(){const t=window.devicePixelRatio||1;this.sx=t,this.sy=t}get scaled(){return this.sx!==1||this.sy!==1}get symmetric(){return this.sx===this.sy}}var ds,lr,Ln,cr,oc,lc,ld,x0,Oe,A0,w0,du,S0,Qf;const wi=class wi{constructor(t){w(this,Oe);w(this,ds,null);w(this,lr,null);w(this,Ln);w(this,cr,null);w(this,oc,null);b(this,Ln,t),c(wi,lc)||b(wi,lc,Object.freeze({freetext:"pdfjs-editor-remove-freetext-button",highlight:"pdfjs-editor-remove-highlight-button",ink:"pdfjs-editor-remove-ink-button",stamp:"pdfjs-editor-remove-stamp-button"}))}render(){const t=b(this,ds,document.createElement("div"));t.classList.add("editToolbar","hidden"),t.setAttribute("role","toolbar");const e=c(this,Ln)._uiManager._signal;t.addEventListener("contextmenu",Cn,{signal:e}),t.addEventListener("pointerdown",x(wi,ld,x0),{signal:e});const n=b(this,cr,document.createElement("div"));n.className="buttons",t.append(n);const s=c(this,Ln).toolbarPosition;if(s){const{style:r}=t,a=c(this,Ln)._uiManager.direction==="ltr"?1-s[0]:s[0];r.insetInlineEnd=`${100*a}%`,r.top=`calc(${100*s[1]}% + var(--editor-toolbar-vert-offset))`}return x(this,Oe,S0).call(this),t}get div(){return c(this,ds)}hide(){var t;c(this,ds).classList.add("hidden"),(t=c(this,lr))==null||t.hideDropdown()}show(){var t;c(this,ds).classList.remove("hidden"),(t=c(this,oc))==null||t.shown()}async addAltText(t){const e=await t.render();x(this,Oe,du).call(this,e),c(this,cr).prepend(e,c(this,Oe,Qf)),b(this,oc,t)}addColorPicker(t){b(this,lr,t);const e=t.renderButton();x(this,Oe,du).call(this,e),c(this,cr).prepend(e,c(this,Oe,Qf))}remove(){var t;c(this,ds).remove(),(t=c(this,lr))==null||t.destroy(),b(this,lr,null)}};ds=new WeakMap,lr=new WeakMap,Ln=new WeakMap,cr=new WeakMap,oc=new WeakMap,lc=new WeakMap,ld=new WeakSet,x0=function(t){t.stopPropagation()},Oe=new WeakSet,A0=function(t){c(this,Ln)._focusEventsAllowed=!1,t.preventDefault(),t.stopPropagation()},w0=function(t){c(this,Ln)._focusEventsAllowed=!0,t.preventDefault(),t.stopPropagation()},du=function(t){const e=c(this,Ln)._uiManager._signal;t.addEventListener("focusin",x(this,Oe,A0).bind(this),{capture:!0,signal:e}),t.addEventListener("focusout",x(this,Oe,w0).bind(this),{capture:!0,signal:e}),t.addEventListener("contextmenu",Cn,{signal:e})},S0=function(){const{editorType:t,_uiManager:e}=c(this,Ln),n=document.createElement("button");n.className="delete",n.tabIndex=0,n.setAttribute("data-l10n-id",c(wi,lc)[t]),x(this,Oe,du).call(this,n),n.addEventListener("click",s=>{e.delete()},{signal:e._signal}),c(this,cr).append(n)},Qf=function(){const t=document.createElement("div");return t.className="divider",t},w(wi,ld),w(wi,lc,null);let Yf=wi;var cc,hr,ur,zs,E0,_0,T0;class M1{constructor(t){w(this,zs);w(this,cc,null);w(this,hr,null);w(this,ur);b(this,ur,t)}show(t,e,n){const[s,r]=x(this,zs,_0).call(this,e,n),{style:a}=c(this,hr)||b(this,hr,x(this,zs,E0).call(this));t.append(c(this,hr)),a.insetInlineEnd=`${100*s}%`,a.top=`calc(${100*r}% + var(--editor-toolbar-vert-offset))`}hide(){c(this,hr).remove()}}cc=new WeakMap,hr=new WeakMap,ur=new WeakMap,zs=new WeakSet,E0=function(){const t=b(this,hr,document.createElement("div"));t.className="editToolbar",t.setAttribute("role","toolbar"),t.addEventListener("contextmenu",Cn,{signal:c(this,ur)._signal});const e=b(this,cc,document.createElement("div"));return e.className="buttons",t.append(e),x(this,zs,T0).call(this),t},_0=function(t,e){let n=0,s=0;for(const r of t){const a=r.y+r.height;if(a<n)continue;const o=r.x+(e?r.width:0);if(a>n){s=o,n=a;continue}e?o>s&&(s=o):o<s&&(s=o)}return[e?1-s:s,n]},T0=function(){const t=document.createElement("button");t.className="highlightButton",t.tabIndex=0,t.setAttribute("data-l10n-id","pdfjs-highlight-floating-button1");const e=document.createElement("span");t.append(e),e.className="visuallyHidden",e.setAttribute("data-l10n-id","pdfjs-highlight-floating-button-label");const n=c(this,ur)._signal;t.addEventListener("contextmenu",Cn,{signal:n}),t.addEventListener("click",()=>{c(this,ur).highlightSelection("floating_button")},{signal:n}),c(this,cc).append(t)};function Ku(i,t,e){for(const n of e)t.addEventListener(n,i[n].bind(i))}function L1(i){return Math.round(Math.min(255,Math.max(1,255*i))).toString(16).padStart(2,"0")}var cd;class I1{constructor(){w(this,cd,0)}get id(){return`${d1}${ke(this,cd)._++}`}}cd=new WeakMap;var Ua,hc,we,Wa,fu;const km=class km{constructor(){w(this,Wa);w(this,Ua,_1());w(this,hc,0);w(this,we,null)}static get _isSVGFittingCanvas(){const t='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>',n=new OffscreenCanvas(1,3).getContext("2d",{willReadFrequently:!0}),s=new Image;s.src=t;const r=s.decode().then(()=>(n.drawImage(s,0,0,1,1,0,0,1,3),new Uint32Array(n.getImageData(0,0,1,1).data.buffer)[0]===0));return ht(this,"_isSVGFittingCanvas",r)}async getFromFile(t){const{lastModified:e,name:n,size:s,type:r}=t;return x(this,Wa,fu).call(this,`${e}_${n}_${s}_${r}`,t)}async getFromUrl(t){return x(this,Wa,fu).call(this,t,t)}async getFromBlob(t,e){const n=await e;return x(this,Wa,fu).call(this,t,n)}async getFromId(t){c(this,we)||b(this,we,new Map);const e=c(this,we).get(t);if(!e)return null;if(e.bitmap)return e.refCounter+=1,e;if(e.file)return this.getFromFile(e.file);if(e.blobPromise){const{blobPromise:n}=e;return delete e.blobPromise,this.getFromBlob(e.id,n)}return this.getFromUrl(e.url)}getFromCanvas(t,e){c(this,we)||b(this,we,new Map);let n=c(this,we).get(t);if(n!=null&&n.bitmap)return n.refCounter+=1,n;const s=new OffscreenCanvas(e.width,e.height);return s.getContext("2d").drawImage(e,0,0),n={bitmap:s.transferToImageBitmap(),id:`image_${c(this,Ua)}_${ke(this,hc)._++}`,refCounter:1,isSvg:!1},c(this,we).set(t,n),c(this,we).set(n.id,n),n}getSvgUrl(t){const e=c(this,we).get(t);return e!=null&&e.isSvg?e.svgUrl:null}deleteId(t){var s;c(this,we)||b(this,we,new Map);const e=c(this,we).get(t);if(!e||(e.refCounter-=1,e.refCounter!==0))return;const{bitmap:n}=e;if(!e.url&&!e.file){const r=new OffscreenCanvas(n.width,n.height);r.getContext("bitmaprenderer").transferFromImageBitmap(n),e.blobPromise=r.convertToBlob()}(s=n.close)==null||s.call(n),e.bitmap=null}isValidId(t){return t.startsWith(`image_${c(this,Ua)}_`)}};Ua=new WeakMap,hc=new WeakMap,we=new WeakMap,Wa=new WeakSet,fu=async function(t,e){c(this,we)||b(this,we,new Map);let n=c(this,we).get(t);if(n===null)return null;if(n!=null&&n.bitmap)return n.refCounter+=1,n;try{n||(n={bitmap:null,id:`image_${c(this,Ua)}_${ke(this,hc)._++}`,refCounter:0,isSvg:!1});let s;if(typeof e=="string"?(n.url=e,s=await $d(e,"blob")):e instanceof File?s=n.file=e:e instanceof Blob&&(s=e),s.type==="image/svg+xml"){const r=km._isSVGFittingCanvas,a=new FileReader,o=new Image,l=new Promise((h,u)=>{o.onload=()=>{n.bitmap=o,n.isSvg=!0,h()},a.onload=async()=>{const d=n.svgUrl=a.result;o.src=await r?`${d}#svgView(preserveAspectRatio(none))`:d},o.onerror=a.onerror=u});a.readAsDataURL(s),await l}else n.bitmap=await createImageBitmap(s);n.refCounter=1}catch(s){console.error(s),n=null}return c(this,we).set(t,n),n&&c(this,we).set(n.id,n),n};let Zf=km;var ae,fs,uc,oe;class D1{constructor(t=128){w(this,ae,[]);w(this,fs,!1);w(this,uc);w(this,oe,-1);b(this,uc,t)}add({cmd:t,undo:e,post:n,mustExec:s,type:r=NaN,overwriteIfSameType:a=!1,keepUndo:o=!1}){if(s&&t(),c(this,fs))return;const l={cmd:t,undo:e,post:n,type:r};if(c(this,oe)===-1){c(this,ae).length>0&&(c(this,ae).length=0),b(this,oe,0),c(this,ae).push(l);return}if(a&&c(this,ae)[c(this,oe)].type===r){o&&(l.undo=c(this,ae)[c(this,oe)].undo),c(this,ae)[c(this,oe)]=l;return}const h=c(this,oe)+1;h===c(this,uc)?c(this,ae).splice(0,1):(b(this,oe,h),h<c(this,ae).length&&c(this,ae).splice(h)),c(this,ae).push(l)}undo(){if(c(this,oe)===-1)return;b(this,fs,!0);const{undo:t,post:e}=c(this,ae)[c(this,oe)];t(),e==null||e(),b(this,fs,!1),b(this,oe,c(this,oe)-1)}redo(){if(c(this,oe)<c(this,ae).length-1){b(this,oe,c(this,oe)+1),b(this,fs,!0);const{cmd:t,post:e}=c(this,ae)[c(this,oe)];t(),e==null||e(),b(this,fs,!1)}}hasSomethingToUndo(){return c(this,oe)!==-1}hasSomethingToRedo(){return c(this,oe)<c(this,ae).length-1}destroy(){b(this,ae,null)}}ae=new WeakMap,fs=new WeakMap,uc=new WeakMap,oe=new WeakMap;var hd,C0;class Sh{constructor(t){w(this,hd);this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:e}=De.platform;for(const[n,s,r={}]of t)for(const a of n){const o=a.startsWith("mac+");e&&o?(this.callbacks.set(a.slice(4),{callback:s,options:r}),this.allKeys.add(a.split("+").at(-1))):!e&&!o&&(this.callbacks.set(a,{callback:s,options:r}),this.allKeys.add(a.split("+").at(-1)))}}exec(t,e){if(!this.allKeys.has(e.key))return;const n=this.callbacks.get(x(this,hd,C0).call(this,e));if(!n)return;const{callback:s,options:{bubbles:r=!1,args:a=[],checker:o=null}}=n;o&&!o(t,e)||(s.bind(t,...a,e)(),r||(e.stopPropagation(),e.preventDefault()))}}hd=new WeakSet,C0=function(t){t.altKey&&this.buffer.push("alt"),t.ctrlKey&&this.buffer.push("ctrl"),t.metaKey&&this.buffer.push("meta"),t.shiftKey&&this.buffer.push("shift"),this.buffer.push(t.key);const e=this.buffer.join("+");return this.buffer.length=0,e};const ud=class ud{get _colors(){const t=new Map([["CanvasText",null],["Canvas",null]]);return k1(t),ht(this,"_colors",t)}convert(t){const e=Vg(t);if(!window.matchMedia("(forced-colors: active)").matches)return e;for(const[n,s]of this._colors)if(s.every((r,a)=>r===e[a]))return ud._colorsMapping.get(n);return e}getHexCode(t){const e=this._colors.get(t);return e?W.makeHexColor(...e):t}};K(ud,"_colorsMapping",new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]));let Jf=ud;var za,tn,te,fe,Ga,Ei,qa,In,ps,Xa,dr,Kn,Dn,fr,dc,fc,Ka,pc,Yn,gs,Ya,ms,Qn,dd,ys,gc,vs,pr,mc,yc,le,xt,_i,gr,vc,bc,bs,Zn,Ti,xc,yn,H,pu,tp,P0,R0,gu,k0,M0,L0,ep,I0,np,ip,D0,Me,ls,O0,F0,sp,N0,Sl,rp;const Fa=class Fa{constructor(t,e,n,s,r,a,o,l,h,u,d){w(this,H);w(this,za,new AbortController);w(this,tn,null);w(this,te,new Map);w(this,fe,new Map);w(this,Ga,null);w(this,Ei,null);w(this,qa,null);w(this,In,new D1);w(this,ps,null);w(this,Xa,0);w(this,dr,new Set);w(this,Kn,null);w(this,Dn,null);w(this,fr,new Set);w(this,dc,!1);w(this,fc,!1);w(this,Ka,!1);w(this,pc,null);w(this,Yn,null);w(this,gs,null);w(this,Ya,null);w(this,ms,!1);w(this,Qn,null);w(this,dd,new I1);w(this,ys,!1);w(this,gc,!1);w(this,vs,null);w(this,pr,null);w(this,mc,null);w(this,yc,null);w(this,le,et.NONE);w(this,xt,new Set);w(this,_i,null);w(this,gr,null);w(this,vc,null);w(this,bc,{isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1,hasSelectedText:!1});w(this,bs,[0,0]);w(this,Zn,null);w(this,Ti,null);w(this,xc,null);w(this,yn,null);const f=this._signal=c(this,za).signal;b(this,Ti,t),b(this,xc,e),b(this,Ga,n),this._eventBus=s,s._on("editingaction",this.onEditingAction.bind(this),{signal:f}),s._on("pagechanging",this.onPageChanging.bind(this),{signal:f}),s._on("scalechanging",this.onScaleChanging.bind(this),{signal:f}),s._on("rotationchanging",this.onRotationChanging.bind(this),{signal:f}),s._on("setpreference",this.onSetPreference.bind(this),{signal:f}),s._on("switchannotationeditorparams",p=>this.updateParams(p.type,p.value),{signal:f}),x(this,H,k0).call(this),x(this,H,D0).call(this),x(this,H,ep).call(this),b(this,Ei,r.annotationStorage),b(this,pc,r.filterFactory),b(this,gr,a),b(this,Ya,o||null),b(this,dc,l),b(this,fc,h),b(this,Ka,u),b(this,yc,d||null),this.viewParameters={realScale:Vs.PDF_TO_CSS_UNITS,rotation:0},this.isShiftKeyDown=!1}static get _keyboardManager(){const t=Fa.prototype,e=a=>c(a,Ti).contains(document.activeElement)&&document.activeElement.tagName!=="BUTTON"&&a.hasSomethingToControl(),n=(a,{target:o})=>{if(o instanceof HTMLInputElement){const{type:l}=o;return l!=="text"&&l!=="number"}return!0},s=this.TRANSLATE_SMALL,r=this.TRANSLATE_BIG;return ht(this,"_keyboardManager",new Sh([[["ctrl+a","mac+meta+a"],t.selectAll,{checker:n}],[["ctrl+z","mac+meta+z"],t.undo,{checker:n}],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],t.redo,{checker:n}],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],t.delete,{checker:n}],[["Enter","mac+Enter"],t.addNewEditorFromKeyboard,{checker:(a,{target:o})=>!(o instanceof HTMLButtonElement)&&c(a,Ti).contains(o)&&!a.isEnterHandled}],[[" ","mac+ "],t.addNewEditorFromKeyboard,{checker:(a,{target:o})=>!(o instanceof HTMLButtonElement)&&c(a,Ti).contains(document.activeElement)}],[["Escape","mac+Escape"],t.unselectAll],[["ArrowLeft","mac+ArrowLeft"],t.translateSelectedEditors,{args:[-s,0],checker:e}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t.translateSelectedEditors,{args:[-r,0],checker:e}],[["ArrowRight","mac+ArrowRight"],t.translateSelectedEditors,{args:[s,0],checker:e}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t.translateSelectedEditors,{args:[r,0],checker:e}],[["ArrowUp","mac+ArrowUp"],t.translateSelectedEditors,{args:[0,-s],checker:e}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t.translateSelectedEditors,{args:[0,-r],checker:e}],[["ArrowDown","mac+ArrowDown"],t.translateSelectedEditors,{args:[0,s],checker:e}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t.translateSelectedEditors,{args:[0,r],checker:e}]]))}destroy(){var t,e,n,s;(t=c(this,yn))==null||t.resolve(),b(this,yn,null),(e=c(this,za))==null||e.abort(),b(this,za,null),this._signal=null;for(const r of c(this,fe).values())r.destroy();c(this,fe).clear(),c(this,te).clear(),c(this,fr).clear(),b(this,tn,null),c(this,xt).clear(),c(this,In).destroy(),(n=c(this,Ga))==null||n.destroy(),(s=c(this,Qn))==null||s.hide(),b(this,Qn,null),c(this,Yn)&&(clearTimeout(c(this,Yn)),b(this,Yn,null)),c(this,Zn)&&(clearTimeout(c(this,Zn)),b(this,Zn,null))}combinedSignal(t){return AbortSignal.any([this._signal,t.signal])}get mlManager(){return c(this,yc)}get useNewAltTextFlow(){return c(this,fc)}get useNewAltTextWhenAddingImage(){return c(this,Ka)}get hcmFilter(){return ht(this,"hcmFilter",c(this,gr)?c(this,pc).addHCMFilter(c(this,gr).foreground,c(this,gr).background):"none")}get direction(){return ht(this,"direction",getComputedStyle(c(this,Ti)).direction)}get highlightColors(){return ht(this,"highlightColors",c(this,Ya)?new Map(c(this,Ya).split(",").map(t=>t.split("=").map(e=>e.trim()))):null)}get highlightColorNames(){return ht(this,"highlightColorNames",this.highlightColors?new Map(Array.from(this.highlightColors,t=>t.reverse())):null)}setMainHighlightColorPicker(t){b(this,mc,t)}editAltText(t,e=!1){var n;(n=c(this,Ga))==null||n.editAltText(this,t,e)}switchToMode(t,e){this._eventBus.on("annotationeditormodechanged",e,{once:!0,signal:this._signal}),this._eventBus.dispatch("showannotationeditorui",{source:this,mode:t})}setPreference(t,e){this._eventBus.dispatch("setpreference",{source:this,name:t,value:e})}onSetPreference({name:t,value:e}){switch(t){case"enableNewAltTextWhenAddingImage":b(this,Ka,e);break}}onPageChanging({pageNumber:t}){b(this,Xa,t-1)}focusMainContainer(){c(this,Ti).focus()}findParent(t,e){for(const n of c(this,fe).values()){const{x:s,y:r,width:a,height:o}=n.div.getBoundingClientRect();if(t>=s&&t<=s+a&&e>=r&&e<=r+o)return n}return null}disableUserSelect(t=!1){c(this,xc).classList.toggle("noUserSelect",t)}addShouldRescale(t){c(this,fr).add(t)}removeShouldRescale(t){c(this,fr).delete(t)}onScaleChanging({scale:t}){this.commitOrRemove(),this.viewParameters.realScale=t*Vs.PDF_TO_CSS_UNITS;for(const e of c(this,fr))e.onScaleChanging()}onRotationChanging({pagesRotation:t}){this.commitOrRemove(),this.viewParameters.rotation=t}highlightSelection(t=""){const e=document.getSelection();if(!e||e.isCollapsed)return;const{anchorNode:n,anchorOffset:s,focusNode:r,focusOffset:a}=e,o=e.toString(),h=x(this,H,pu).call(this,e).closest(".textLayer"),u=this.getSelectionBoxes(h);if(!u)return;e.empty();const d=x(this,H,tp).call(this,h),f=c(this,le)===et.NONE,p=()=>{d==null||d.createAndAddNewEditor({x:0,y:0},!1,{methodOfCreation:t,boxes:u,anchorNode:n,anchorOffset:s,focusNode:r,focusOffset:a,text:o}),f&&this.showAllEditors("highlight",!0,!0)};if(f){this.switchToMode(et.HIGHLIGHT,p);return}p()}addToAnnotationStorage(t){!t.isEmpty()&&c(this,Ei)&&!c(this,Ei).has(t.id)&&c(this,Ei).setValue(t.id,t)}blur(){if(this.isShiftKeyDown=!1,c(this,ms)&&(b(this,ms,!1),x(this,H,gu).call(this,"main_toolbar")),!this.hasSelection)return;const{activeElement:t}=document;for(const e of c(this,xt))if(e.div.contains(t)){b(this,pr,[e,t]),e._focusEventsAllowed=!1;break}}focus(){if(!c(this,pr))return;const[t,e]=c(this,pr);b(this,pr,null),e.addEventListener("focusin",()=>{t._focusEventsAllowed=!0},{once:!0,signal:this._signal}),e.focus()}addEditListeners(){x(this,H,ep).call(this),x(this,H,np).call(this)}removeEditListeners(){x(this,H,I0).call(this),x(this,H,ip).call(this)}dragOver(t){for(const{type:e}of t.dataTransfer.items)for(const n of c(this,Dn))if(n.isHandlingMimeForPasting(e)){t.dataTransfer.dropEffect="copy",t.preventDefault();return}}drop(t){for(const e of t.dataTransfer.items)for(const n of c(this,Dn))if(n.isHandlingMimeForPasting(e.type)){n.paste(e,this.currentLayer),t.preventDefault();return}}copy(t){var n;if(t.preventDefault(),(n=c(this,tn))==null||n.commitOrRemove(),!this.hasSelection)return;const e=[];for(const s of c(this,xt)){const r=s.serialize(!0);r&&e.push(r)}e.length!==0&&t.clipboardData.setData("application/pdfjs",JSON.stringify(e))}cut(t){this.copy(t),this.delete()}async paste(t){t.preventDefault();const{clipboardData:e}=t;for(const r of e.items)for(const a of c(this,Dn))if(a.isHandlingMimeForPasting(r.type)){a.paste(r,this.currentLayer);return}let n=e.getData("application/pdfjs");if(!n)return;try{n=JSON.parse(n)}catch(r){at(`paste: "${r.message}".`);return}if(!Array.isArray(n))return;this.unselectAll();const s=this.currentLayer;try{const r=[];for(const l of n){const h=await s.deserialize(l);if(!h)return;r.push(h)}const a=()=>{for(const l of r)x(this,H,sp).call(this,l);x(this,H,rp).call(this,r)},o=()=>{for(const l of r)l.remove()};this.addCommands({cmd:a,undo:o,mustExec:!0})}catch(r){at(`paste: "${r.message}".`)}}keydown(t){!this.isShiftKeyDown&&t.key==="Shift"&&(this.isShiftKeyDown=!0),c(this,le)!==et.NONE&&!this.isEditorHandlingKeyboard&&Fa._keyboardManager.exec(this,t)}keyup(t){this.isShiftKeyDown&&t.key==="Shift"&&(this.isShiftKeyDown=!1,c(this,ms)&&(b(this,ms,!1),x(this,H,gu).call(this,"main_toolbar")))}onEditingAction({name:t}){switch(t){case"undo":case"redo":case"delete":case"selectAll":this[t]();break;case"highlightSelection":this.highlightSelection("context_menu");break}}setEditingState(t){t?(x(this,H,M0).call(this),x(this,H,np).call(this),x(this,H,Me).call(this,{isEditing:c(this,le)!==et.NONE,isEmpty:x(this,H,Sl).call(this),hasSomethingToUndo:c(this,In).hasSomethingToUndo(),hasSomethingToRedo:c(this,In).hasSomethingToRedo(),hasSelectedEditor:!1})):(x(this,H,L0).call(this),x(this,H,ip).call(this),x(this,H,Me).call(this,{isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(t){if(!c(this,Dn)){b(this,Dn,t);for(const e of c(this,Dn))x(this,H,ls).call(this,e.defaultPropertiesToUpdate)}}getId(){return c(this,dd).id}get currentLayer(){return c(this,fe).get(c(this,Xa))}getLayer(t){return c(this,fe).get(t)}get currentPageIndex(){return c(this,Xa)}addLayer(t){c(this,fe).set(t.pageIndex,t),c(this,ys)?t.enable():t.disable()}removeLayer(t){c(this,fe).delete(t.pageIndex)}async updateMode(t,e=null,n=!1){if(c(this,le)!==t&&!(c(this,yn)&&(await c(this,yn).promise,!c(this,yn)))){if(b(this,yn,Promise.withResolvers()),b(this,le,t),t===et.NONE){this.setEditingState(!1),x(this,H,F0).call(this),c(this,yn).resolve();return}this.setEditingState(!0),await x(this,H,O0).call(this),this.unselectAll();for(const s of c(this,fe).values())s.updateMode(t);if(!e){n&&this.addNewEditorFromKeyboard(),c(this,yn).resolve();return}for(const s of c(this,te).values())s.annotationElementId===e?(this.setSelected(s),s.enterInEditMode()):s.unselect();c(this,yn).resolve()}}addNewEditorFromKeyboard(){this.currentLayer.canCreateNewEmptyEditor()&&this.currentLayer.addNewEditor()}updateToolbar(t){t!==c(this,le)&&this._eventBus.dispatch("switchannotationeditormode",{source:this,mode:t})}updateParams(t,e){var n;if(c(this,Dn)){switch(t){case Q.CREATE:this.currentLayer.addNewEditor();return;case Q.HIGHLIGHT_DEFAULT_COLOR:(n=c(this,mc))==null||n.updateColor(e);break;case Q.HIGHLIGHT_SHOW_ALL:this._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:{type:"highlight",action:"toggle_visibility"}}}),(c(this,vc)||b(this,vc,new Map)).set(t,e),this.showAllEditors("highlight",e);break}for(const s of c(this,xt))s.updateParams(t,e);for(const s of c(this,Dn))s.updateDefaultParams(t,e)}}showAllEditors(t,e,n=!1){var r;for(const a of c(this,te).values())a.editorType===t&&a.show(e);(((r=c(this,vc))==null?void 0:r.get(Q.HIGHLIGHT_SHOW_ALL))??!0)!==e&&x(this,H,ls).call(this,[[Q.HIGHLIGHT_SHOW_ALL,e]])}enableWaiting(t=!1){if(c(this,gc)!==t){b(this,gc,t);for(const e of c(this,fe).values())t?e.disableClick():e.enableClick(),e.div.classList.toggle("waiting",t)}}getEditors(t){const e=[];for(const n of c(this,te).values())n.pageIndex===t&&e.push(n);return e}getEditor(t){return c(this,te).get(t)}addEditor(t){c(this,te).set(t.id,t)}removeEditor(t){var e;t.div.contains(document.activeElement)&&(c(this,Yn)&&clearTimeout(c(this,Yn)),b(this,Yn,setTimeout(()=>{this.focusMainContainer(),b(this,Yn,null)},0))),c(this,te).delete(t.id),this.unselect(t),(!t.annotationElementId||!c(this,dr).has(t.annotationElementId))&&((e=c(this,Ei))==null||e.remove(t.id))}addDeletedAnnotationElement(t){c(this,dr).add(t.annotationElementId),this.addChangedExistingAnnotation(t),t.deleted=!0}isDeletedAnnotationElement(t){return c(this,dr).has(t)}removeDeletedAnnotationElement(t){c(this,dr).delete(t.annotationElementId),this.removeChangedExistingAnnotation(t),t.deleted=!1}setActiveEditor(t){c(this,tn)!==t&&(b(this,tn,t),t&&x(this,H,ls).call(this,t.propertiesToUpdate))}updateUI(t){c(this,H,N0)===t&&x(this,H,ls).call(this,t.propertiesToUpdate)}toggleSelected(t){if(c(this,xt).has(t)){c(this,xt).delete(t),t.unselect(),x(this,H,Me).call(this,{hasSelectedEditor:this.hasSelection});return}c(this,xt).add(t),t.select(),x(this,H,ls).call(this,t.propertiesToUpdate),x(this,H,Me).call(this,{hasSelectedEditor:!0})}setSelected(t){for(const e of c(this,xt))e!==t&&e.unselect();c(this,xt).clear(),c(this,xt).add(t),t.select(),x(this,H,ls).call(this,t.propertiesToUpdate),x(this,H,Me).call(this,{hasSelectedEditor:!0})}isSelected(t){return c(this,xt).has(t)}get firstSelectedEditor(){return c(this,xt).values().next().value}unselect(t){t.unselect(),c(this,xt).delete(t),x(this,H,Me).call(this,{hasSelectedEditor:this.hasSelection})}get hasSelection(){return c(this,xt).size!==0}get isEnterHandled(){return c(this,xt).size===1&&this.firstSelectedEditor.isEnterHandled}undo(){c(this,In).undo(),x(this,H,Me).call(this,{hasSomethingToUndo:c(this,In).hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:x(this,H,Sl).call(this)})}redo(){c(this,In).redo(),x(this,H,Me).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:c(this,In).hasSomethingToRedo(),isEmpty:x(this,H,Sl).call(this)})}addCommands(t){c(this,In).add(t),x(this,H,Me).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:x(this,H,Sl).call(this)})}delete(){if(this.commitOrRemove(),!this.hasSelection)return;const t=[...c(this,xt)],e=()=>{for(const s of t)s.remove()},n=()=>{for(const s of t)x(this,H,sp).call(this,s)};this.addCommands({cmd:e,undo:n,mustExec:!0})}commitOrRemove(){var t;(t=c(this,tn))==null||t.commitOrRemove()}hasSomethingToControl(){return c(this,tn)||this.hasSelection}selectAll(){for(const t of c(this,xt))t.commit();x(this,H,rp).call(this,c(this,te).values())}unselectAll(){if(!(c(this,tn)&&(c(this,tn).commitOrRemove(),c(this,le)!==et.NONE))&&this.hasSelection){for(const t of c(this,xt))t.unselect();c(this,xt).clear(),x(this,H,Me).call(this,{hasSelectedEditor:!1})}}translateSelectedEditors(t,e,n=!1){if(n||this.commitOrRemove(),!this.hasSelection)return;c(this,bs)[0]+=t,c(this,bs)[1]+=e;const[s,r]=c(this,bs),a=[...c(this,xt)],o=1e3;c(this,Zn)&&clearTimeout(c(this,Zn)),b(this,Zn,setTimeout(()=>{b(this,Zn,null),c(this,bs)[0]=c(this,bs)[1]=0,this.addCommands({cmd:()=>{for(const l of a)c(this,te).has(l.id)&&l.translateInPage(s,r)},undo:()=>{for(const l of a)c(this,te).has(l.id)&&l.translateInPage(-s,-r)},mustExec:!1})},o));for(const l of a)l.translateInPage(t,e)}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),b(this,Kn,new Map);for(const t of c(this,xt))c(this,Kn).set(t,{savedX:t.x,savedY:t.y,savedPageIndex:t.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!c(this,Kn))return!1;this.disableUserSelect(!1);const t=c(this,Kn);b(this,Kn,null);let e=!1;for(const[{x:s,y:r,pageIndex:a},o]of t)o.newX=s,o.newY=r,o.newPageIndex=a,e||(e=s!==o.savedX||r!==o.savedY||a!==o.savedPageIndex);if(!e)return!1;const n=(s,r,a,o)=>{if(c(this,te).has(s.id)){const l=c(this,fe).get(o);l?s._setParentAndPosition(l,r,a):(s.pageIndex=o,s.x=r,s.y=a)}};return this.addCommands({cmd:()=>{for(const[s,{newX:r,newY:a,newPageIndex:o}]of t)n(s,r,a,o)},undo:()=>{for(const[s,{savedX:r,savedY:a,savedPageIndex:o}]of t)n(s,r,a,o)},mustExec:!0}),!0}dragSelectedEditors(t,e){if(c(this,Kn))for(const n of c(this,Kn).keys())n.drag(t,e)}rebuild(t){if(t.parent===null){const e=this.getLayer(t.pageIndex);e?(e.changeParent(t),e.addOrRebuild(t)):(this.addEditor(t),this.addToAnnotationStorage(t),t.rebuild())}else t.parent.addOrRebuild(t)}get isEditorHandlingKeyboard(){var t;return((t=this.getActive())==null?void 0:t.shouldGetKeyboardEvents())||c(this,xt).size===1&&this.firstSelectedEditor.shouldGetKeyboardEvents()}isActive(t){return c(this,tn)===t}getActive(){return c(this,tn)}getMode(){return c(this,le)}get imageManager(){return ht(this,"imageManager",new Zf)}getSelectionBoxes(t){if(!t)return null;const e=document.getSelection();for(let h=0,u=e.rangeCount;h<u;h++)if(!t.contains(e.getRangeAt(h).commonAncestorContainer))return null;const{x:n,y:s,width:r,height:a}=t.getBoundingClientRect();let o;switch(t.getAttribute("data-main-rotation")){case"90":o=(h,u,d,f)=>({x:(u-s)/a,y:1-(h+d-n)/r,width:f/a,height:d/r});break;case"180":o=(h,u,d,f)=>({x:1-(h+d-n)/r,y:1-(u+f-s)/a,width:d/r,height:f/a});break;case"270":o=(h,u,d,f)=>({x:1-(u+f-s)/a,y:(h-n)/r,width:f/a,height:d/r});break;default:o=(h,u,d,f)=>({x:(h-n)/r,y:(u-s)/a,width:d/r,height:f/a});break}const l=[];for(let h=0,u=e.rangeCount;h<u;h++){const d=e.getRangeAt(h);if(!d.collapsed)for(const{x:f,y:p,width:g,height:m}of d.getClientRects())g===0||m===0||l.push(o(f,p,g,m))}return l.length===0?null:l}addChangedExistingAnnotation({annotationElementId:t,id:e}){(c(this,qa)||b(this,qa,new Map)).set(t,e)}removeChangedExistingAnnotation({annotationElementId:t}){var e;(e=c(this,qa))==null||e.delete(t)}renderAnnotationElement(t){var s;const e=(s=c(this,qa))==null?void 0:s.get(t.data.id);if(!e)return;const n=c(this,Ei).getRawValue(e);n&&(c(this,le)===et.NONE&&!n.hasBeenModified||n.renderAnnotationElement(t))}};za=new WeakMap,tn=new WeakMap,te=new WeakMap,fe=new WeakMap,Ga=new WeakMap,Ei=new WeakMap,qa=new WeakMap,In=new WeakMap,ps=new WeakMap,Xa=new WeakMap,dr=new WeakMap,Kn=new WeakMap,Dn=new WeakMap,fr=new WeakMap,dc=new WeakMap,fc=new WeakMap,Ka=new WeakMap,pc=new WeakMap,Yn=new WeakMap,gs=new WeakMap,Ya=new WeakMap,ms=new WeakMap,Qn=new WeakMap,dd=new WeakMap,ys=new WeakMap,gc=new WeakMap,vs=new WeakMap,pr=new WeakMap,mc=new WeakMap,yc=new WeakMap,le=new WeakMap,xt=new WeakMap,_i=new WeakMap,gr=new WeakMap,vc=new WeakMap,bc=new WeakMap,bs=new WeakMap,Zn=new WeakMap,Ti=new WeakMap,xc=new WeakMap,yn=new WeakMap,H=new WeakSet,pu=function({anchorNode:t}){return t.nodeType===Node.TEXT_NODE?t.parentElement:t},tp=function(t){const{currentLayer:e}=this;if(e.hasTextLayer(t))return e;for(const n of c(this,fe).values())if(n.hasTextLayer(t))return n;return null},P0=function(){const t=document.getSelection();if(!t||t.isCollapsed)return;const n=x(this,H,pu).call(this,t).closest(".textLayer"),s=this.getSelectionBoxes(n);s&&(c(this,Qn)||b(this,Qn,new M1(this)),c(this,Qn).show(n,s,this.direction==="ltr"))},R0=function(){var r,a,o;const t=document.getSelection();if(!t||t.isCollapsed){c(this,_i)&&((r=c(this,Qn))==null||r.hide(),b(this,_i,null),x(this,H,Me).call(this,{hasSelectedText:!1}));return}const{anchorNode:e}=t;if(e===c(this,_i))return;const s=x(this,H,pu).call(this,t).closest(".textLayer");if(!s){c(this,_i)&&((a=c(this,Qn))==null||a.hide(),b(this,_i,null),x(this,H,Me).call(this,{hasSelectedText:!1}));return}if((o=c(this,Qn))==null||o.hide(),b(this,_i,e),x(this,H,Me).call(this,{hasSelectedText:!0}),!(c(this,le)!==et.HIGHLIGHT&&c(this,le)!==et.NONE)&&(c(this,le)===et.HIGHLIGHT&&this.showAllEditors("highlight",!0,!0),b(this,ms,this.isShiftKeyDown),!this.isShiftKeyDown)){const l=c(this,le)===et.HIGHLIGHT?x(this,H,tp).call(this,s):null;l==null||l.toggleDrawing();const h=new AbortController,u=this.combinedSignal(h),d=f=>{f.type==="pointerup"&&f.button!==0||(h.abort(),l==null||l.toggleDrawing(!0),f.type==="pointerup"&&x(this,H,gu).call(this,"main_toolbar"))};window.addEventListener("pointerup",d,{signal:u}),window.addEventListener("blur",d,{signal:u})}},gu=function(t=""){c(this,le)===et.HIGHLIGHT?this.highlightSelection(t):c(this,dc)&&x(this,H,P0).call(this)},k0=function(){document.addEventListener("selectionchange",x(this,H,R0).bind(this),{signal:this._signal})},M0=function(){if(c(this,gs))return;b(this,gs,new AbortController);const t=this.combinedSignal(c(this,gs));window.addEventListener("focus",this.focus.bind(this),{signal:t}),window.addEventListener("blur",this.blur.bind(this),{signal:t})},L0=function(){var t;(t=c(this,gs))==null||t.abort(),b(this,gs,null)},ep=function(){if(c(this,vs))return;b(this,vs,new AbortController);const t=this.combinedSignal(c(this,vs));window.addEventListener("keydown",this.keydown.bind(this),{signal:t}),window.addEventListener("keyup",this.keyup.bind(this),{signal:t})},I0=function(){var t;(t=c(this,vs))==null||t.abort(),b(this,vs,null)},np=function(){if(c(this,ps))return;b(this,ps,new AbortController);const t=this.combinedSignal(c(this,ps));document.addEventListener("copy",this.copy.bind(this),{signal:t}),document.addEventListener("cut",this.cut.bind(this),{signal:t}),document.addEventListener("paste",this.paste.bind(this),{signal:t})},ip=function(){var t;(t=c(this,ps))==null||t.abort(),b(this,ps,null)},D0=function(){const t=this._signal;document.addEventListener("dragover",this.dragOver.bind(this),{signal:t}),document.addEventListener("drop",this.drop.bind(this),{signal:t})},Me=function(t){Object.entries(t).some(([n,s])=>c(this,bc)[n]!==s)&&(this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(c(this,bc),t)}),c(this,le)===et.HIGHLIGHT&&t.hasSelectedEditor===!1&&x(this,H,ls).call(this,[[Q.HIGHLIGHT_FREE,!0]]))},ls=function(t){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:t})},O0=async function(){if(!c(this,ys)){b(this,ys,!0);const t=[];for(const e of c(this,fe).values())t.push(e.enable());await Promise.all(t);for(const e of c(this,te).values())e.enable()}},F0=function(){if(this.unselectAll(),c(this,ys)){b(this,ys,!1);for(const t of c(this,fe).values())t.disable();for(const t of c(this,te).values())t.disable()}},sp=function(t){const e=c(this,fe).get(t.pageIndex);e?e.addOrRebuild(t):(this.addEditor(t),this.addToAnnotationStorage(t))},N0=function(){let t=null;for(t of c(this,xt));return t},Sl=function(){if(c(this,te).size===0)return!0;if(c(this,te).size===1)for(const t of c(this,te).values())return t.isEmpty();return!1},rp=function(t){for(const e of c(this,xt))e.unselect();c(this,xt).clear();for(const e of t)e.isEmpty()||(c(this,xt).add(e),e.select());x(this,H,Me).call(this,{hasSelectedEditor:this.hasSelection})},K(Fa,"TRANSLATE_SMALL",1),K(Fa,"TRANSLATE_BIG",10);let ca=Fa;var ce,Jn,On,Qa,ti,en,Za,ei,He,Ci,mr,ni,xs,zn,El,mu;const Le=class Le{constructor(t){w(this,zn);w(this,ce,null);w(this,Jn,!1);w(this,On,null);w(this,Qa,null);w(this,ti,null);w(this,en,null);w(this,Za,!1);w(this,ei,null);w(this,He,null);w(this,Ci,null);w(this,mr,null);w(this,ni,!1);b(this,He,t),b(this,ni,t._uiManager.useNewAltTextFlow),c(Le,xs)||b(Le,xs,Object.freeze({added:"pdfjs-editor-new-alt-text-added-button","added-label":"pdfjs-editor-new-alt-text-added-button-label",missing:"pdfjs-editor-new-alt-text-missing-button","missing-label":"pdfjs-editor-new-alt-text-missing-button-label",review:"pdfjs-editor-new-alt-text-to-review-button","review-label":"pdfjs-editor-new-alt-text-to-review-button-label"}))}static initialize(t){Le._l10n??(Le._l10n=t)}async render(){const t=b(this,On,document.createElement("button"));t.className="altText",t.tabIndex="0";const e=b(this,Qa,document.createElement("span"));t.append(e),c(this,ni)?(t.classList.add("new"),t.setAttribute("data-l10n-id",c(Le,xs).missing),e.setAttribute("data-l10n-id",c(Le,xs)["missing-label"])):(t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button"),e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button-label"));const n=c(this,He)._uiManager._signal;t.addEventListener("contextmenu",Cn,{signal:n}),t.addEventListener("pointerdown",r=>r.stopPropagation(),{signal:n});const s=r=>{r.preventDefault(),c(this,He)._uiManager.editAltText(c(this,He)),c(this,ni)&&c(this,He)._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_clicked",data:{label:c(this,zn,El)}})};return t.addEventListener("click",s,{capture:!0,signal:n}),t.addEventListener("keydown",r=>{r.target===t&&r.key==="Enter"&&(b(this,Za,!0),s(r))},{signal:n}),await x(this,zn,mu).call(this),t}finish(){c(this,On)&&(c(this,On).focus({focusVisible:c(this,Za)}),b(this,Za,!1))}isEmpty(){return c(this,ni)?c(this,ce)===null:!c(this,ce)&&!c(this,Jn)}hasData(){return c(this,ni)?c(this,ce)!==null||!!c(this,Ci):this.isEmpty()}get guessedText(){return c(this,Ci)}async setGuessedText(t){c(this,ce)===null&&(b(this,Ci,t),b(this,mr,await Le._l10n.get("pdfjs-editor-new-alt-text-generated-alt-text-with-disclaimer",{generatedAltText:t})),x(this,zn,mu).call(this))}toggleAltTextBadge(t=!1){var e;if(!c(this,ni)||c(this,ce)){(e=c(this,ei))==null||e.remove(),b(this,ei,null);return}if(!c(this,ei)){const n=b(this,ei,document.createElement("div"));n.className="noAltTextBadge",c(this,He).div.append(n)}c(this,ei).classList.toggle("hidden",!t)}serialize(t){let e=c(this,ce);return!t&&c(this,Ci)===e&&(e=c(this,mr)),{altText:e,decorative:c(this,Jn),guessedText:c(this,Ci),textWithDisclaimer:c(this,mr)}}get data(){return{altText:c(this,ce),decorative:c(this,Jn)}}set data({altText:t,decorative:e,guessedText:n,textWithDisclaimer:s,cancel:r=!1}){n&&(b(this,Ci,n),b(this,mr,s)),!(c(this,ce)===t&&c(this,Jn)===e)&&(r||(b(this,ce,t),b(this,Jn,e)),x(this,zn,mu).call(this))}toggle(t=!1){c(this,On)&&(!t&&c(this,en)&&(clearTimeout(c(this,en)),b(this,en,null)),c(this,On).disabled=!t)}shown(){c(this,He)._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_displayed",data:{label:c(this,zn,El)}})}destroy(){var t,e;(t=c(this,On))==null||t.remove(),b(this,On,null),b(this,Qa,null),b(this,ti,null),(e=c(this,ei))==null||e.remove(),b(this,ei,null)}};ce=new WeakMap,Jn=new WeakMap,On=new WeakMap,Qa=new WeakMap,ti=new WeakMap,en=new WeakMap,Za=new WeakMap,ei=new WeakMap,He=new WeakMap,Ci=new WeakMap,mr=new WeakMap,ni=new WeakMap,xs=new WeakMap,zn=new WeakSet,El=function(){return c(this,ce)&&"added"||c(this,ce)===null&&this.guessedText&&"review"||"missing"},mu=async function(){var s,r,a;const t=c(this,On);if(!t)return;if(c(this,ni)){if(t.classList.toggle("done",!!c(this,ce)),t.setAttribute("data-l10n-id",c(Le,xs)[c(this,zn,El)]),(s=c(this,Qa))==null||s.setAttribute("data-l10n-id",c(Le,xs)[`${c(this,zn,El)}-label`]),!c(this,ce)){(r=c(this,ti))==null||r.remove();return}}else{if(!c(this,ce)&&!c(this,Jn)){t.classList.remove("done"),(a=c(this,ti))==null||a.remove();return}t.classList.add("done"),t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-edit-button")}let e=c(this,ti);if(!e){b(this,ti,e=document.createElement("span")),e.className="tooltip",e.setAttribute("role","tooltip"),e.id=`alt-text-tooltip-${c(this,He).id}`;const o=100,l=c(this,He)._uiManager._signal;l.addEventListener("abort",()=>{clearTimeout(c(this,en)),b(this,en,null)},{once:!0}),t.addEventListener("mouseenter",()=>{b(this,en,setTimeout(()=>{b(this,en,null),c(this,ti).classList.add("show"),c(this,He)._reportTelemetry({action:"alt_text_tooltip"})},o))},{signal:l}),t.addEventListener("mouseleave",()=>{var h;c(this,en)&&(clearTimeout(c(this,en)),b(this,en,null)),(h=c(this,ti))==null||h.classList.remove("show")},{signal:l})}c(this,Jn)?e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-decorative-tooltip"):(e.removeAttribute("data-l10n-id"),e.textContent=c(this,ce)),e.parentNode||t.append(e);const n=c(this,He).getImageForAltText();n==null||n.setAttribute("aria-describedby",e.id)},w(Le,xs,null),K(Le,"_l10n",null);let Yu=Le;var yr,Fn,Ft,Ja,vr,pe,br,As,Ac,xr,ws,wc,Ar,Pi,ii,to,eo,vn,Sc,fd,it,ap,Ec,op,lp,j0,B0,cp,hp,up,V0,dp,H0,$0,U0,fp,_l;const bt=class bt{constructor(t){w(this,it);w(this,yr,null);w(this,Fn,null);w(this,Ft,null);w(this,Ja,!1);w(this,vr,!1);w(this,pe,null);w(this,br,null);w(this,As,null);w(this,Ac,"");w(this,xr,!1);w(this,ws,null);w(this,wc,!1);w(this,Ar,!1);w(this,Pi,!1);w(this,ii,null);w(this,to,0);w(this,eo,0);w(this,vn,null);K(this,"_editToolbar",null);K(this,"_initialOptions",Object.create(null));K(this,"_initialData",null);K(this,"_isVisible",!0);K(this,"_uiManager",null);K(this,"_focusEventsAllowed",!0);w(this,Sc,!1);w(this,fd,bt._zIndex++);this.parent=t.parent,this.id=t.id,this.width=this.height=null,this.pageIndex=t.parent.pageIndex,this.name=t.name,this.div=null,this._uiManager=t.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=t.isCentered,this._structTreeParentId=null;const{rotation:e,rawDims:{pageWidth:n,pageHeight:s,pageX:r,pageY:a}}=this.parent.viewport;this.rotation=e,this.pageRotation=(360+e-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[n,s],this.pageTranslation=[r,a];const[o,l]=this.parentDimensions;this.x=t.x/o,this.y=t.y/l,this.isAttachedToDOM=!1,this.deleted=!1}static get _resizerKeyboardManager(){const t=bt.prototype._resizeWithKeyboard,e=ca.TRANSLATE_SMALL,n=ca.TRANSLATE_BIG;return ht(this,"_resizerKeyboardManager",new Sh([[["ArrowLeft","mac+ArrowLeft"],t,{args:[-e,0]}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t,{args:[-n,0]}],[["ArrowRight","mac+ArrowRight"],t,{args:[e,0]}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t,{args:[n,0]}],[["ArrowUp","mac+ArrowUp"],t,{args:[0,-e]}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t,{args:[0,-n]}],[["ArrowDown","mac+ArrowDown"],t,{args:[0,e]}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t,{args:[0,n]}],[["Escape","mac+Escape"],bt.prototype._stopResizingWithKeyboard]]))}get editorType(){return Object.getPrototypeOf(this).constructor._type}static get _defaultLineColor(){return ht(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(t){const e=new O1({id:t.parent.getNextId(),parent:t.parent,uiManager:t._uiManager});e.annotationElementId=t.annotationElementId,e.deleted=!0,e._uiManager.addToAnnotationStorage(e)}static initialize(t,e){if(bt._l10n??(bt._l10n=t),bt._l10nResizer||(bt._l10nResizer=Object.freeze({topLeft:"pdfjs-editor-resizer-top-left",topMiddle:"pdfjs-editor-resizer-top-middle",topRight:"pdfjs-editor-resizer-top-right",middleRight:"pdfjs-editor-resizer-middle-right",bottomRight:"pdfjs-editor-resizer-bottom-right",bottomMiddle:"pdfjs-editor-resizer-bottom-middle",bottomLeft:"pdfjs-editor-resizer-bottom-left",middleLeft:"pdfjs-editor-resizer-middle-left"})),bt._borderLineWidth!==-1)return;const n=getComputedStyle(document.documentElement);bt._borderLineWidth=parseFloat(n.getPropertyValue("--outline-width"))||0}static updateDefaultParams(t,e){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(t){return!1}static paste(t,e){Rt("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return c(this,Sc)}set _isDraggable(t){var e;b(this,Sc,t),(e=this.div)==null||e.classList.toggle("draggable",t)}get isEnterHandled(){return!0}center(){const[t,e]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*e/(t*2),this.y+=this.width*t/(e*2);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*e/(t*2),this.y-=this.width*t/(e*2);break;default:this.x-=this.width/2,this.y-=this.height/2;break}this.fixAndSetPosition()}addCommands(t){this._uiManager.addCommands(t)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=c(this,fd)}setParent(t){t!==null?(this.pageIndex=t.pageIndex,this.pageDimensions=t.pageDimensions):x(this,it,_l).call(this),this.parent=t}focusin(t){this._focusEventsAllowed&&(c(this,xr)?b(this,xr,!1):this.parent.setSelected(this))}focusout(t){var n;if(!this._focusEventsAllowed||!this.isAttachedToDOM)return;const e=t.relatedTarget;e!=null&&e.closest(`#${this.id}`)||(t.preventDefault(),(n=this.parent)!=null&&n.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(t,e,n,s){const[r,a]=this.parentDimensions;[n,s]=this.screenToPageTranslation(n,s),this.x=(t+n)/r,this.y=(e+s)/a,this.fixAndSetPosition()}translate(t,e){x(this,it,ap).call(this,this.parentDimensions,t,e)}translateInPage(t,e){c(this,ws)||b(this,ws,[this.x,this.y]),x(this,it,ap).call(this,this.pageDimensions,t,e),this.div.scrollIntoView({block:"nearest"})}drag(t,e){c(this,ws)||b(this,ws,[this.x,this.y]);const[n,s]=this.parentDimensions;if(this.x+=t/n,this.y+=e/s,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){const{x:h,y:u}=this.div.getBoundingClientRect();this.parent.findNewParent(this,h,u)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:r,y:a}=this;const[o,l]=this.getBaseTranslation();r+=o,a+=l,this.div.style.left=`${(100*r).toFixed(2)}%`,this.div.style.top=`${(100*a).toFixed(2)}%`,this.div.scrollIntoView({block:"nearest"})}get _hasBeenMoved(){return!!c(this,ws)&&(c(this,ws)[0]!==this.x||c(this,ws)[1]!==this.y)}getBaseTranslation(){const[t,e]=this.parentDimensions,{_borderLineWidth:n}=bt,s=n/t,r=n/e;switch(this.rotation){case 90:return[-s,r];case 180:return[s,r];case 270:return[s,-r];default:return[-s,-r]}}get _mustFixPosition(){return!0}fixAndSetPosition(t=this.rotation){const[e,n]=this.pageDimensions;let{x:s,y:r,width:a,height:o}=this;if(a*=e,o*=n,s*=e,r*=n,this._mustFixPosition)switch(t){case 0:s=Math.max(0,Math.min(e-a,s)),r=Math.max(0,Math.min(n-o,r));break;case 90:s=Math.max(0,Math.min(e-o,s)),r=Math.min(n,Math.max(a,r));break;case 180:s=Math.min(e,Math.max(a,s)),r=Math.min(n,Math.max(o,r));break;case 270:s=Math.min(e,Math.max(o,s)),r=Math.max(0,Math.min(n-a,r));break}this.x=s/=e,this.y=r/=n;const[l,h]=this.getBaseTranslation();s+=l,r+=h;const{style:u}=this.div;u.left=`${(100*s).toFixed(2)}%`,u.top=`${(100*r).toFixed(2)}%`,this.moveInDOM()}screenToPageTranslation(t,e){var n;return x(n=bt,Ec,op).call(n,t,e,this.parentRotation)}pageTranslationToScreen(t,e){var n;return x(n=bt,Ec,op).call(n,t,e,360-this.parentRotation)}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{parentScale:t,pageDimensions:[e,n]}=this;return[e*t,n*t]}setDims(t,e){const[n,s]=this.parentDimensions;this.div.style.width=`${(100*t/n).toFixed(2)}%`,c(this,vr)||(this.div.style.height=`${(100*e/s).toFixed(2)}%`)}fixDims(){const{style:t}=this.div,{height:e,width:n}=t,s=n.endsWith("%"),r=!c(this,vr)&&e.endsWith("%");if(s&&r)return;const[a,o]=this.parentDimensions;s||(t.width=`${(100*parseFloat(n)/a).toFixed(2)}%`),!c(this,vr)&&!r&&(t.height=`${(100*parseFloat(e)/o).toFixed(2)}%`)}getInitialTranslation(){return[0,0]}altTextFinish(){var t;(t=c(this,Ft))==null||t.finish()}async addEditToolbar(){return this._editToolbar||c(this,Ar)?this._editToolbar:(this._editToolbar=new Yf(this),this.div.append(this._editToolbar.render()),c(this,Ft)&&await this._editToolbar.addAltText(c(this,Ft)),this._editToolbar)}removeEditToolbar(){var t;this._editToolbar&&(this._editToolbar.remove(),this._editToolbar=null,(t=c(this,Ft))==null||t.destroy())}addContainer(t){var n;const e=(n=this._editToolbar)==null?void 0:n.div;e?e.before(t):this.div.append(t)}getClientDimensions(){return this.div.getBoundingClientRect()}async addAltTextButton(){c(this,Ft)||(Yu.initialize(bt._l10n),b(this,Ft,new Yu(this)),c(this,yr)&&(c(this,Ft).data=c(this,yr),b(this,yr,null)),await this.addEditToolbar())}get altTextData(){var t;return(t=c(this,Ft))==null?void 0:t.data}set altTextData(t){c(this,Ft)&&(c(this,Ft).data=t)}get guessedAltText(){var t;return(t=c(this,Ft))==null?void 0:t.guessedText}async setGuessedAltText(t){var e;await((e=c(this,Ft))==null?void 0:e.setGuessedText(t))}serializeAltText(t){var e;return(e=c(this,Ft))==null?void 0:e.serialize(t)}hasAltText(){return!!c(this,Ft)&&!c(this,Ft).isEmpty()}hasAltTextData(){var t;return((t=c(this,Ft))==null?void 0:t.hasData())??!1}render(){this.div=document.createElement("div"),this.div.setAttribute("data-editor-rotation",(360-this.rotation)%360),this.div.className=this.name,this.div.setAttribute("id",this.id),this.div.tabIndex=c(this,Ja)?-1:0,this._isVisible||this.div.classList.add("hidden"),this.setInForeground(),x(this,it,dp).call(this);const[t,e]=this.parentDimensions;this.parentRotation%180!==0&&(this.div.style.maxWidth=`${(100*e/t).toFixed(2)}%`,this.div.style.maxHeight=`${(100*t/e).toFixed(2)}%`);const[n,s]=this.getInitialTranslation();return this.translate(n,s),Ku(this,this.div,["pointerdown"]),this.div}pointerdown(t){const{isMac:e}=De.platform;if(t.button!==0||t.ctrlKey&&e){t.preventDefault();return}if(b(this,xr,!0),this._isDraggable){x(this,it,V0).call(this,t);return}x(this,it,up).call(this,t)}get isSelected(){return this._uiManager.isSelected(this)}moveInDOM(){c(this,ii)&&clearTimeout(c(this,ii)),b(this,ii,setTimeout(()=>{var t;b(this,ii,null),(t=this.parent)==null||t.moveEditorInDOM(this)},0))}_setParentAndPosition(t,e,n){t.changeParent(this),this.x=e,this.y=n,this.fixAndSetPosition()}getRect(t,e,n=this.rotation){const s=this.parentScale,[r,a]=this.pageDimensions,[o,l]=this.pageTranslation,h=t/s,u=e/s,d=this.x*r,f=this.y*a,p=this.width*r,g=this.height*a;switch(n){case 0:return[d+h+o,a-f-u-g+l,d+h+p+o,a-f-u+l];case 90:return[d+u+o,a-f+h+l,d+u+g+o,a-f+h+p+l];case 180:return[d-h-p+o,a-f+u+l,d-h+o,a-f+u+g+l];case 270:return[d-u-g+o,a-f-h-p+l,d-u+o,a-f-h+l];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(t,e){const[n,s,r,a]=t,o=r-n,l=a-s;switch(this.rotation){case 0:return[n,e-a,o,l];case 90:return[n,e-s,l,o];case 180:return[r,e-s,o,l];case 270:return[r,e-a,l,o];default:throw new Error("Invalid rotation")}}onceAdded(){}isEmpty(){return!1}enableEditMode(){b(this,Ar,!0)}disableEditMode(){b(this,Ar,!1)}isInEditMode(){return c(this,Ar)}shouldGetKeyboardEvents(){return c(this,Pi)}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}rebuild(){x(this,it,dp).call(this)}rotate(t){}serializeDeleted(){var t;return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex,popupRef:((t=this._initialData)==null?void 0:t.popupRef)||""}}serialize(t=!1,e=null){Rt("An editor must be serializable")}static async deserialize(t,e,n){const s=new this.prototype.constructor({parent:e,id:e.getNextId(),uiManager:n});s.rotation=t.rotation,b(s,yr,t.accessibilityData);const[r,a]=s.pageDimensions,[o,l,h,u]=s.getRectInCurrentCoords(t.rect,a);return s.x=o/r,s.y=l/a,s.width=h/r,s.height=u/a,s}get hasBeenModified(){return!!this.annotationElementId&&(this.deleted||this.serialize()!==null)}remove(){var t;if((t=c(this,As))==null||t.abort(),b(this,As,null),this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),c(this,ii)&&(clearTimeout(c(this,ii)),b(this,ii,null)),x(this,it,_l).call(this),this.removeEditToolbar(),c(this,vn)){for(const e of c(this,vn).values())clearTimeout(e);b(this,vn,null)}this.parent=null}get isResizable(){return!1}makeResizable(){this.isResizable&&(x(this,it,j0).call(this),c(this,pe).classList.remove("hidden"),Ku(this,this.div,["keydown"]))}get toolbarPosition(){return null}keydown(t){if(!this.isResizable||t.target!==this.div||t.key!=="Enter")return;this._uiManager.setSelected(this),b(this,br,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height});const e=c(this,pe).children;if(!c(this,Fn)){b(this,Fn,Array.from(e));const a=x(this,it,H0).bind(this),o=x(this,it,$0).bind(this),l=this._uiManager._signal;for(const h of c(this,Fn)){const u=h.getAttribute("data-resizer-name");h.setAttribute("role","spinbutton"),h.addEventListener("keydown",a,{signal:l}),h.addEventListener("blur",o,{signal:l}),h.addEventListener("focus",x(this,it,U0).bind(this,u),{signal:l}),h.setAttribute("data-l10n-id",bt._l10nResizer[u])}}const n=c(this,Fn)[0];let s=0;for(const a of e){if(a===n)break;s++}const r=(360-this.rotation+this.parentRotation)%360/90*(c(this,Fn).length/4);if(r!==s){if(r<s)for(let o=0;o<s-r;o++)c(this,pe).append(c(this,pe).firstChild);else if(r>s)for(let o=0;o<r-s;o++)c(this,pe).firstChild.before(c(this,pe).lastChild);let a=0;for(const o of e){const h=c(this,Fn)[a++].getAttribute("data-resizer-name");o.setAttribute("data-l10n-id",bt._l10nResizer[h])}}x(this,it,fp).call(this,0),b(this,Pi,!0),c(this,pe).firstChild.focus({focusVisible:!0}),t.preventDefault(),t.stopImmediatePropagation()}_resizeWithKeyboard(t,e){c(this,Pi)&&x(this,it,hp).call(this,c(this,Ac),{movementX:t,movementY:e})}_stopResizingWithKeyboard(){x(this,it,_l).call(this),this.div.focus()}select(){var t,e,n;if(this.makeResizable(),(t=this.div)==null||t.classList.add("selectedEditor"),!this._editToolbar){this.addEditToolbar().then(()=>{var s,r;(s=this.div)!=null&&s.classList.contains("selectedEditor")&&((r=this._editToolbar)==null||r.show())});return}(e=this._editToolbar)==null||e.show(),(n=c(this,Ft))==null||n.toggleAltTextBadge(!1)}unselect(){var t,e,n,s,r;(t=c(this,pe))==null||t.classList.add("hidden"),(e=this.div)==null||e.classList.remove("selectedEditor"),(n=this.div)!=null&&n.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus({preventScroll:!0}),(s=this._editToolbar)==null||s.hide(),(r=c(this,Ft))==null||r.toggleAltTextBadge(!0)}updateParams(t,e){}disableEditing(){}enableEditing(){}enterInEditMode(){}getImageForAltText(){return null}get contentDiv(){return this.div}get isEditing(){return c(this,wc)}set isEditing(t){b(this,wc,t),this.parent&&(t?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}setAspectRatio(t,e){b(this,vr,!0);const n=t/e,{style:s}=this.div;s.aspectRatio=n,s.height="auto"}static get MIN_SIZE(){return 16}static canCreateNewEmptyEditor(){return!0}get telemetryInitialData(){return{action:"added"}}get telemetryFinalData(){return null}_reportTelemetry(t,e=!1){if(e){c(this,vn)||b(this,vn,new Map);const{action:n}=t;let s=c(this,vn).get(n);s&&clearTimeout(s),s=setTimeout(()=>{this._reportTelemetry(t),c(this,vn).delete(n),c(this,vn).size===0&&b(this,vn,null)},bt._telemetryTimeout),c(this,vn).set(n,s);return}t.type||(t.type=this.editorType),this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:t}})}show(t=this._isVisible){this.div.classList.toggle("hidden",!t),this._isVisible=t}enable(){this.div&&(this.div.tabIndex=0),b(this,Ja,!1)}disable(){this.div&&(this.div.tabIndex=-1),b(this,Ja,!0)}renderAnnotationElement(t){let e=t.container.querySelector(".annotationContent");if(!e)e=document.createElement("div"),e.classList.add("annotationContent",this.editorType),t.container.prepend(e);else if(e.nodeName==="CANVAS"){const n=e;e=document.createElement("div"),e.classList.add("annotationContent",this.editorType),n.before(e)}return e}resetAnnotationElement(t){const{firstChild:e}=t.container;(e==null?void 0:e.nodeName)==="DIV"&&e.classList.contains("annotationContent")&&e.remove()}};yr=new WeakMap,Fn=new WeakMap,Ft=new WeakMap,Ja=new WeakMap,vr=new WeakMap,pe=new WeakMap,br=new WeakMap,As=new WeakMap,Ac=new WeakMap,xr=new WeakMap,ws=new WeakMap,wc=new WeakMap,Ar=new WeakMap,Pi=new WeakMap,ii=new WeakMap,to=new WeakMap,eo=new WeakMap,vn=new WeakMap,Sc=new WeakMap,fd=new WeakMap,it=new WeakSet,ap=function([t,e],n,s){[n,s]=this.screenToPageTranslation(n,s),this.x+=n/t,this.y+=s/e,this.fixAndSetPosition()},Ec=new WeakSet,op=function(t,e,n){switch(n){case 90:return[e,-t];case 180:return[-t,-e];case 270:return[-e,t];default:return[t,e]}},lp=function(t){switch(t){case 90:{const[e,n]=this.pageDimensions;return[0,-e/n,n/e,0]}case 180:return[-1,0,0,-1];case 270:{const[e,n]=this.pageDimensions;return[0,e/n,-n/e,0]}default:return[1,0,0,1]}},j0=function(){if(c(this,pe))return;b(this,pe,document.createElement("div")),c(this,pe).classList.add("resizers");const t=this._willKeepAspectRatio?["topLeft","topRight","bottomRight","bottomLeft"]:["topLeft","topMiddle","topRight","middleRight","bottomRight","bottomMiddle","bottomLeft","middleLeft"],e=this._uiManager._signal;for(const n of t){const s=document.createElement("div");c(this,pe).append(s),s.classList.add("resizer",n),s.setAttribute("data-resizer-name",n),s.addEventListener("pointerdown",x(this,it,B0).bind(this,n),{signal:e}),s.addEventListener("contextmenu",Cn,{signal:e}),s.tabIndex=-1}this.div.prepend(c(this,pe))},B0=function(t,e){var g;e.preventDefault();const{isMac:n}=De.platform;if(e.button!==0||e.ctrlKey&&n)return;(g=c(this,Ft))==null||g.toggle(!1);const s=this._isDraggable;this._isDraggable=!1;const r=new AbortController,a=this._uiManager.combinedSignal(r);this.parent.togglePointerEvents(!1),window.addEventListener("pointermove",x(this,it,hp).bind(this,t),{passive:!0,capture:!0,signal:a}),window.addEventListener("contextmenu",Cn,{signal:a});const o=this.x,l=this.y,h=this.width,u=this.height,d=this.parent.div.style.cursor,f=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(e.target).cursor;const p=()=>{var m;r.abort(),this.parent.togglePointerEvents(!0),(m=c(this,Ft))==null||m.toggle(!0),this._isDraggable=s,this.parent.div.style.cursor=d,this.div.style.cursor=f,x(this,it,cp).call(this,o,l,h,u)};window.addEventListener("pointerup",p,{signal:a}),window.addEventListener("blur",p,{signal:a})},cp=function(t,e,n,s){const r=this.x,a=this.y,o=this.width,l=this.height;r===t&&a===e&&o===n&&l===s||this.addCommands({cmd:()=>{this.width=o,this.height=l,this.x=r,this.y=a;const[h,u]=this.parentDimensions;this.setDims(h*o,u*l),this.fixAndSetPosition()},undo:()=>{this.width=n,this.height=s,this.x=t,this.y=e;const[h,u]=this.parentDimensions;this.setDims(h*n,u*s),this.fixAndSetPosition()},mustExec:!0})},hp=function(t,e){const[n,s]=this.parentDimensions,r=this.x,a=this.y,o=this.width,l=this.height,h=bt.MIN_SIZE/n,u=bt.MIN_SIZE/s,d=j=>Math.round(j*1e4)/1e4,f=x(this,it,lp).call(this,this.rotation),p=(j,V)=>[f[0]*j+f[2]*V,f[1]*j+f[3]*V],g=x(this,it,lp).call(this,360-this.rotation),m=(j,V)=>[g[0]*j+g[2]*V,g[1]*j+g[3]*V];let v,y,A=!1,S=!1;switch(t){case"topLeft":A=!0,v=(j,V)=>[0,0],y=(j,V)=>[j,V];break;case"topMiddle":v=(j,V)=>[j/2,0],y=(j,V)=>[j/2,V];break;case"topRight":A=!0,v=(j,V)=>[j,0],y=(j,V)=>[0,V];break;case"middleRight":S=!0,v=(j,V)=>[j,V/2],y=(j,V)=>[0,V/2];break;case"bottomRight":A=!0,v=(j,V)=>[j,V],y=(j,V)=>[0,0];break;case"bottomMiddle":v=(j,V)=>[j/2,V],y=(j,V)=>[j/2,0];break;case"bottomLeft":A=!0,v=(j,V)=>[0,V],y=(j,V)=>[j,0];break;case"middleLeft":S=!0,v=(j,V)=>[0,V/2],y=(j,V)=>[j,V/2];break}const E=v(o,l),T=y(o,l);let _=p(...T);const R=d(r+_[0]),k=d(a+_[1]);let I=1,D=1,[M,L]=this.screenToPageTranslation(e.movementX,e.movementY);if([M,L]=m(M/n,L/s),A){const j=Math.hypot(o,l);I=D=Math.max(Math.min(Math.hypot(T[0]-E[0]-M,T[1]-E[1]-L)/j,1/o,1/l),h/o,u/l)}else S?I=Math.max(h,Math.min(1,Math.abs(T[0]-E[0]-M)))/o:D=Math.max(u,Math.min(1,Math.abs(T[1]-E[1]-L)))/l;const N=d(o*I),O=d(l*D);_=p(...y(N,O));const U=R-_[0],z=k-_[1];this.width=N,this.height=O,this.x=U,this.y=z,this.setDims(n*N,s*O),this.fixAndSetPosition()},up=function(t){const{isMac:e}=De.platform;t.ctrlKey&&!e||t.shiftKey||t.metaKey&&e?this.parent.toggleSelected(this):this.parent.setSelected(this)},V0=function(t){const{isSelected:e}=this;this._uiManager.setUpDragSession();const n=new AbortController,s=this._uiManager.combinedSignal(n);if(e){this.div.classList.add("moving"),b(this,to,t.clientX),b(this,eo,t.clientY);const a=o=>{const{clientX:l,clientY:h}=o,[u,d]=this.screenToPageTranslation(l-c(this,to),h-c(this,eo));b(this,to,l),b(this,eo,h),this._uiManager.dragSelectedEditors(u,d)};window.addEventListener("pointermove",a,{passive:!0,capture:!0,signal:s})}const r=()=>{n.abort(),e&&this.div.classList.remove("moving"),b(this,xr,!1),this._uiManager.endDragSession()||x(this,it,up).call(this,t)};window.addEventListener("pointerup",r,{signal:s}),window.addEventListener("blur",r,{signal:s})},dp=function(){if(c(this,As)||!this.div)return;b(this,As,new AbortController);const t=this._uiManager.combinedSignal(c(this,As));this.div.addEventListener("focusin",this.focusin.bind(this),{signal:t}),this.div.addEventListener("focusout",this.focusout.bind(this),{signal:t})},H0=function(t){bt._resizerKeyboardManager.exec(this,t)},$0=function(t){var e;c(this,Pi)&&((e=t.relatedTarget)==null?void 0:e.parentNode)!==c(this,pe)&&x(this,it,_l).call(this)},U0=function(t){b(this,Ac,c(this,Pi)?t:"")},fp=function(t){if(c(this,Fn))for(const e of c(this,Fn))e.tabIndex=t},_l=function(){if(b(this,Pi,!1),x(this,it,fp).call(this,-1),c(this,br)){const{savedX:t,savedY:e,savedWidth:n,savedHeight:s}=c(this,br);x(this,it,cp).call(this,t,e,n,s),b(this,br,null)}},w(bt,Ec),K(bt,"_l10n",null),K(bt,"_l10nResizer",null),K(bt,"_borderLineWidth",-1),K(bt,"_colorManager",new Jf),K(bt,"_zIndex",1),K(bt,"_telemetryTimeout",1e3);let St=bt;class O1 extends St{constructor(t){super(t),this.annotationElementId=t.annotationElementId,this.deleted=!0}serialize(){return this.serializeDeleted()}}const hy=3285377520,pn=4294901760,Xn=65535;class W0{constructor(t){this.h1=t?t&4294967295:hy,this.h2=t?t&4294967295:hy}update(t){let e,n;if(typeof t=="string"){e=new Uint8Array(t.length*2),n=0;for(let m=0,v=t.length;m<v;m++){const y=t.charCodeAt(m);y<=255?e[n++]=y:(e[n++]=y>>>8,e[n++]=y&255)}}else if(ArrayBuffer.isView(t))e=t.slice(),n=e.byteLength;else throw new Error("Invalid data format, must be a string or TypedArray.");const s=n>>2,r=n-s*4,a=new Uint32Array(e.buffer,0,s);let o=0,l=0,h=this.h1,u=this.h2;const d=3432918353,f=461845907,p=d&Xn,g=f&Xn;for(let m=0;m<s;m++)m&1?(o=a[m],o=o*d&pn|o*p&Xn,o=o<<15|o>>>17,o=o*f&pn|o*g&Xn,h^=o,h=h<<13|h>>>19,h=h*5+3864292196):(l=a[m],l=l*d&pn|l*p&Xn,l=l<<15|l>>>17,l=l*f&pn|l*g&Xn,u^=l,u=u<<13|u>>>19,u=u*5+3864292196);switch(o=0,r){case 3:o^=e[s*4+2]<<16;case 2:o^=e[s*4+1]<<8;case 1:o^=e[s*4],o=o*d&pn|o*p&Xn,o=o<<15|o>>>17,o=o*f&pn|o*g&Xn,s&1?h^=o:u^=o}this.h1=h,this.h2=u}hexdigest(){let t=this.h1,e=this.h2;return t^=e>>>1,t=t*3981806797&pn|t*36045&Xn,e=e*4283543511&pn|((e<<16|t>>>16)*2950163797&pn)>>>16,t^=e>>>1,t=t*444984403&pn|t*60499&Xn,e=e*3301882366&pn|((e<<16|t>>>16)*3120437893&pn)>>>16,t^=e>>>1,(t>>>0).toString(16).padStart(8,"0")+(e>>>0).toString(16).padStart(8,"0")}}const pp=Object.freeze({map:null,hash:"",transfer:void 0});var wr,Sr,he,pd,z0;class Hg{constructor(){w(this,pd);w(this,wr,!1);w(this,Sr,null);w(this,he,new Map);this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(t,e){const n=c(this,he).get(t);return n===void 0?e:Object.assign(e,n)}getRawValue(t){return c(this,he).get(t)}remove(t){if(c(this,he).delete(t),c(this,he).size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function"){for(const e of c(this,he).values())if(e instanceof St)return;this.onAnnotationEditor(null)}}setValue(t,e){const n=c(this,he).get(t);let s=!1;if(n!==void 0)for(const[r,a]of Object.entries(e))n[r]!==a&&(s=!0,n[r]=a);else s=!0,c(this,he).set(t,e);s&&x(this,pd,z0).call(this),e instanceof St&&typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(e.constructor._type)}has(t){return c(this,he).has(t)}getAll(){return c(this,he).size>0?Og(c(this,he)):null}setAll(t){for(const[e,n]of Object.entries(t))this.setValue(e,n)}get size(){return c(this,he).size}resetModified(){c(this,wr)&&(b(this,wr,!1),typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new G0(this)}get serializable(){if(c(this,he).size===0)return pp;const t=new Map,e=new W0,n=[],s=Object.create(null);let r=!1;for(const[a,o]of c(this,he)){const l=o instanceof St?o.serialize(!1,s):o;l&&(t.set(a,l),e.update(`${a}:${JSON.stringify(l)}`),r||(r=!!l.bitmap))}if(r)for(const a of t.values())a.bitmap&&n.push(a.bitmap);return t.size>0?{map:t,hash:e.hexdigest(),transfer:n}:pp}get editorStats(){let t=null;const e=new Map;for(const n of c(this,he).values()){if(!(n instanceof St))continue;const s=n.telemetryFinalData;if(!s)continue;const{type:r}=s;e.has(r)||e.set(r,Object.getPrototypeOf(n).constructor),t||(t=Object.create(null));const a=t[r]||(t[r]=new Map);for(const[o,l]of Object.entries(s)){if(o==="type")continue;let h=a.get(o);h||(h=new Map,a.set(o,h));const u=h.get(l)??0;h.set(l,u+1)}}for(const[n,s]of e)t[n]=s.computeTelemetryFinalData(t[n]);return t}resetModifiedIds(){b(this,Sr,null)}get modifiedIds(){if(c(this,Sr))return c(this,Sr);const t=[];for(const e of c(this,he).values())!(e instanceof St)||!e.annotationElementId||!e.serialize()||t.push(e.annotationElementId);return b(this,Sr,{ids:new Set(t),hash:t.join(",")})}}wr=new WeakMap,Sr=new WeakMap,he=new WeakMap,pd=new WeakSet,z0=function(){c(this,wr)||(b(this,wr,!0),typeof this.onSetModified=="function"&&this.onSetModified())};var _c;class G0 extends Hg{constructor(e){super();w(this,_c);const{map:n,hash:s,transfer:r}=e.serializable,a=structuredClone(n,r?{transfer:r}:null);b(this,_c,{map:a,hash:s,transfer:r})}get print(){Rt("Should not call PrintAnnotationStorage.print")}get serializable(){return c(this,_c)}get modifiedIds(){return ht(this,"modifiedIds",{ids:new Set,hash:""})}}_c=new WeakMap;var no;class F1{constructor({ownerDocument:t=globalThis.document,styleElement:e=null}){w(this,no,new Set);this._document=t,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(t){this.nativeFontFaces.add(t),this._document.fonts.add(t)}removeNativeFontFace(t){this.nativeFontFaces.delete(t),this._document.fonts.delete(t)}insertRule(t){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const e=this.styleElement.sheet;e.insertRule(t,e.cssRules.length)}clear(){for(const t of this.nativeFontFaces)this._document.fonts.delete(t);this.nativeFontFaces.clear(),c(this,no).clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async loadSystemFont({systemFontInfo:t,_inspectFont:e}){if(!(!t||c(this,no).has(t.loadedName))){if(ie(!this.disableFontFace,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){const{loadedName:n,src:s,style:r}=t,a=new FontFace(n,s,r);this.addNativeFontFace(a);try{await a.load(),c(this,no).add(n),e==null||e(t)}catch{at(`Cannot load system font: ${t.baseFontName}, installing it could help to improve PDF rendering.`),this.removeNativeFontFace(a)}return}Rt("Not implemented: loadSystemFont without the Font Loading API.")}}async bind(t){if(t.attached||t.missingFile&&!t.systemFontInfo)return;if(t.attached=!0,t.systemFontInfo){await this.loadSystemFont(t);return}if(this.isFontLoadingAPISupported){const n=t.createNativeFontFace();if(n){this.addNativeFontFace(n);try{await n.loaded}catch(s){throw at(`Failed to load font '${n.family}': '${s}'.`),t.disableFontFace=!0,s}}return}const e=t.createFontFaceRule();if(e){if(this.insertRule(e),this.isSyncFontLoadingSupported)return;await new Promise(n=>{const s=this._queueLoadingCallback(n);this._prepareFontLoadEvent(t,s)})}}get isFontLoadingAPISupported(){var e;const t=!!((e=this._document)!=null&&e.fonts);return ht(this,"isFontLoadingAPISupported",t)}get isSyncFontLoadingSupported(){let t=!1;return(Ce||typeof navigator<"u"&&typeof(navigator==null?void 0:navigator.userAgent)=="string"&&/Mozilla\/5.0.*?rv:\d+.*? Gecko/.test(navigator.userAgent))&&(t=!0),ht(this,"isSyncFontLoadingSupported",t)}_queueLoadingCallback(t){function e(){for(ie(!s.done,"completeRequest() cannot be called twice."),s.done=!0;n.length>0&&n[0].done;){const r=n.shift();setTimeout(r.callback,0)}}const{loadingRequests:n}=this,s={done:!1,complete:e,callback:t};return n.push(s),s}get _loadTestFont(){const t=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return ht(this,"_loadTestFont",t)}_prepareFontLoadEvent(t,e){function n(E,T){return E.charCodeAt(T)<<24|E.charCodeAt(T+1)<<16|E.charCodeAt(T+2)<<8|E.charCodeAt(T+3)&255}function s(E,T,_,R){const k=E.substring(0,T),I=E.substring(T+_);return k+R+I}let r,a;const o=this._document.createElement("canvas");o.width=1,o.height=1;const l=o.getContext("2d");let h=0;function u(E,T){if(++h>30){at("Load test font never loaded."),T();return}if(l.font="30px "+E,l.fillText(".",0,20),l.getImageData(0,0,1,1).data[3]>0){T();return}setTimeout(u.bind(null,E,T))}const d=`lt${Date.now()}${this.loadTestFontId++}`;let f=this._loadTestFont;f=s(f,976,d.length,d);const g=16,m=1482184792;let v=n(f,g);for(r=0,a=d.length-3;r<a;r+=4)v=v-m+n(d,r)|0;r<d.length&&(v=v-m+n(d+"XXX",r)|0),f=s(f,g,4,x1(v));const y=`url(data:font/opentype;base64,${btoa(f)});`,A=`@font-face {font-family:"${d}";src:${y}}`;this.insertRule(A);const S=this._document.createElement("div");S.style.visibility="hidden",S.style.width=S.style.height="10px",S.style.position="absolute",S.style.top=S.style.left="0px";for(const E of[t.loadedName,d]){const T=this._document.createElement("span");T.textContent="Hi",T.style.fontFamily=E,S.append(T)}this._document.body.append(S),u(d,()=>{S.remove(),e.complete()})}}no=new WeakMap;class N1{constructor(t,{disableFontFace:e=!1,inspectFont:n=null}){this.compiledGlyphs=Object.create(null);for(const s in t)this[s]=t[s];this.disableFontFace=e===!0,this._inspectFont=n}createNativeFontFace(){var e;if(!this.data||this.disableFontFace)return null;let t;if(!this.cssFontInfo)t=new FontFace(this.loadedName,this.data,{});else{const n={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(n.style=`oblique ${this.cssFontInfo.italicAngle}deg`),t=new FontFace(this.cssFontInfo.fontFamily,this.data,n)}return(e=this._inspectFont)==null||e.call(this,this),t}createFontFaceRule(){var n;if(!this.data||this.disableFontFace)return null;const t=`url(data:${this.mimetype};base64,${T1(this.data)});`;let e;if(!this.cssFontInfo)e=`@font-face {font-family:"${this.loadedName}";src:${t}}`;else{let s=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(s+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),e=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${s}src:${t}}`}return(n=this._inspectFont)==null||n.call(this,this,t),e}getPathGenerator(t,e){if(this.compiledGlyphs[e]!==void 0)return this.compiledGlyphs[e];let n;try{n=t.get(this.loadedName+"_path_"+e)}catch(r){at(`getPathGenerator - ignoring character: "${r}".`)}if(!Array.isArray(n)||n.length===0)return this.compiledGlyphs[e]=function(r,a){};const s=[];for(let r=0,a=n.length;r<a;)switch(n[r++]){case vi.BEZIER_CURVE_TO:{const[o,l,h,u,d,f]=n.slice(r,r+6);s.push(p=>p.bezierCurveTo(o,l,h,u,d,f)),r+=6}break;case vi.MOVE_TO:{const[o,l]=n.slice(r,r+2);s.push(h=>h.moveTo(o,l)),r+=2}break;case vi.LINE_TO:{const[o,l]=n.slice(r,r+2);s.push(h=>h.lineTo(o,l)),r+=2}break;case vi.QUADRATIC_CURVE_TO:{const[o,l,h,u]=n.slice(r,r+4);s.push(d=>d.quadraticCurveTo(o,l,h,u)),r+=4}break;case vi.RESTORE:s.push(o=>o.restore());break;case vi.SAVE:s.push(o=>o.save());break;case vi.SCALE:ie(s.length===2,"Scale command is only valid at the third position.");break;case vi.TRANSFORM:{const[o,l,h,u,d,f]=n.slice(r,r+6);s.push(p=>p.transform(o,l,h,u,d,f)),r+=6}break;case vi.TRANSLATE:{const[o,l]=n.slice(r,r+2);s.push(h=>h.translate(o,l)),r+=2}break}return this.compiledGlyphs[e]=function(a,o){s[0](a),s[1](a),a.scale(o,-o);for(let l=2,h=s.length;l<h;l++)s[l](a)}}}var Tc;class q0{constructor({enableHWA:t=!1}){w(this,Tc,!1);b(this,Tc,t)}create(t,e){if(t<=0||e<=0)throw new Error("Invalid canvas size");const n=this._createCanvas(t,e);return{canvas:n,context:n.getContext("2d",{willReadFrequently:!c(this,Tc)})}}reset(t,e,n){if(!t.canvas)throw new Error("Canvas is not specified");if(e<=0||n<=0)throw new Error("Invalid canvas size");t.canvas.width=e,t.canvas.height=n}destroy(t){if(!t.canvas)throw new Error("Canvas is not specified");t.canvas.width=0,t.canvas.height=0,t.canvas=null,t.context=null}_createCanvas(t,e){Rt("Abstract method `_createCanvas` called.")}}Tc=new WeakMap;class j1 extends q0{constructor({ownerDocument:t=globalThis.document,enableHWA:e=!1}){super({enableHWA:e}),this._document=t}_createCanvas(t,e){const n=this._document.createElement("canvas");return n.width=t,n.height=e,n}}class X0{constructor({baseUrl:t=null,isCompressed:e=!0}){this.baseUrl=t,this.isCompressed=e}async fetch({name:t}){if(!this.baseUrl)throw new Error("Ensure that the `cMapUrl` and `cMapPacked` API parameters are provided.");if(!t)throw new Error("CMap name must be specified.");const e=this.baseUrl+t+(this.isCompressed?".bcmap":"");return this._fetch(e).then(n=>({cMapData:n,isCompressed:this.isCompressed})).catch(n=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${e}`)})}async _fetch(t){Rt("Abstract method `_fetch` called.")}}class K0 extends X0{async _fetch(t){const e=await $d(t,this.isCompressed?"arraybuffer":"text");return e instanceof ArrayBuffer?new Uint8Array(e):Hd(e)}}class Y0{addFilter(t){return"none"}addHCMFilter(t,e){return"none"}addAlphaFilter(t){return"none"}addLuminosityFilter(t){return"none"}addHighlightHCMFilter(t,e,n,s,r){return"none"}destroy(t=!1){}}var Er,_r,si,Ri,Se,gd,Tr,$,Ae,wa,Sa,yu,Ea,Q0,gp,_a,Tl,Cl,mp,Pl;class B1 extends Y0{constructor({docId:e,ownerDocument:n=globalThis.document}){super();w(this,$);w(this,Er);w(this,_r);w(this,si);w(this,Ri);w(this,Se);w(this,gd);w(this,Tr,0);b(this,Ri,e),b(this,Se,n)}addFilter(e){if(!e)return"none";let n=c(this,$,Ae).get(e);if(n)return n;const[s,r,a]=x(this,$,yu).call(this,e),o=e.length===1?s:`${s}${r}${a}`;if(n=c(this,$,Ae).get(o),n)return c(this,$,Ae).set(e,n),n;const l=`g_${c(this,Ri)}_transfer_map_${ke(this,Tr)._++}`,h=x(this,$,Ea).call(this,l);c(this,$,Ae).set(e,h),c(this,$,Ae).set(o,h);const u=x(this,$,_a).call(this,l);return x(this,$,Cl).call(this,s,r,a,u),h}addHCMFilter(e,n){var g;const s=`${e}-${n}`,r="base";let a=c(this,$,wa).get(r);if((a==null?void 0:a.key)===s||(a?((g=a.filter)==null||g.remove(),a.key=s,a.url="none",a.filter=null):(a={key:s,url:"none",filter:null},c(this,$,wa).set(r,a)),!e||!n))return a.url;const o=x(this,$,Pl).call(this,e);e=W.makeHexColor(...o);const l=x(this,$,Pl).call(this,n);if(n=W.makeHexColor(...l),c(this,$,Sa).style.color="",e==="#000000"&&n==="#ffffff"||e===n)return a.url;const h=new Array(256);for(let m=0;m<=255;m++){const v=m/255;h[m]=v<=.03928?v/12.92:((v+.055)/1.055)**2.4}const u=h.join(","),d=`g_${c(this,Ri)}_hcm_filter`,f=a.filter=x(this,$,_a).call(this,d);x(this,$,Cl).call(this,u,u,u,f),x(this,$,gp).call(this,f);const p=(m,v)=>{const y=o[m]/255,A=l[m]/255,S=new Array(v+1);for(let E=0;E<=v;E++)S[E]=y+E/v*(A-y);return S.join(",")};return x(this,$,Cl).call(this,p(0,5),p(1,5),p(2,5),f),a.url=x(this,$,Ea).call(this,d),a.url}addAlphaFilter(e){let n=c(this,$,Ae).get(e);if(n)return n;const[s]=x(this,$,yu).call(this,[e]),r=`alpha_${s}`;if(n=c(this,$,Ae).get(r),n)return c(this,$,Ae).set(e,n),n;const a=`g_${c(this,Ri)}_alpha_map_${ke(this,Tr)._++}`,o=x(this,$,Ea).call(this,a);c(this,$,Ae).set(e,o),c(this,$,Ae).set(r,o);const l=x(this,$,_a).call(this,a);return x(this,$,mp).call(this,s,l),o}addLuminosityFilter(e){let n=c(this,$,Ae).get(e||"luminosity");if(n)return n;let s,r;if(e?([s]=x(this,$,yu).call(this,[e]),r=`luminosity_${s}`):r="luminosity",n=c(this,$,Ae).get(r),n)return c(this,$,Ae).set(e,n),n;const a=`g_${c(this,Ri)}_luminosity_map_${ke(this,Tr)._++}`,o=x(this,$,Ea).call(this,a);c(this,$,Ae).set(e,o),c(this,$,Ae).set(r,o);const l=x(this,$,_a).call(this,a);return x(this,$,Q0).call(this,l),e&&x(this,$,mp).call(this,s,l),o}addHighlightHCMFilter(e,n,s,r,a){var A;const o=`${n}-${s}-${r}-${a}`;let l=c(this,$,wa).get(e);if((l==null?void 0:l.key)===o||(l?((A=l.filter)==null||A.remove(),l.key=o,l.url="none",l.filter=null):(l={key:o,url:"none",filter:null},c(this,$,wa).set(e,l)),!n||!s))return l.url;const[h,u]=[n,s].map(x(this,$,Pl).bind(this));let d=Math.round(.2126*h[0]+.7152*h[1]+.0722*h[2]),f=Math.round(.2126*u[0]+.7152*u[1]+.0722*u[2]),[p,g]=[r,a].map(x(this,$,Pl).bind(this));f<d&&([d,f,p,g]=[f,d,g,p]),c(this,$,Sa).style.color="";const m=(S,E,T)=>{const _=new Array(256),R=(f-d)/T,k=S/255,I=(E-S)/(255*T);let D=0;for(let M=0;M<=T;M++){const L=Math.round(d+M*R),N=k+M*I;for(let O=D;O<=L;O++)_[O]=N;D=L+1}for(let M=D;M<256;M++)_[M]=_[D-1];return _.join(",")},v=`g_${c(this,Ri)}_hcm_${e}_filter`,y=l.filter=x(this,$,_a).call(this,v);return x(this,$,gp).call(this,y),x(this,$,Cl).call(this,m(p[0],g[0],5),m(p[1],g[1],5),m(p[2],g[2],5),y),l.url=x(this,$,Ea).call(this,v),l.url}destroy(e=!1){e&&c(this,$,wa).size!==0||(c(this,si)&&(c(this,si).parentNode.parentNode.remove(),b(this,si,null)),c(this,_r)&&(c(this,_r).clear(),b(this,_r,null)),b(this,Tr,0))}}Er=new WeakMap,_r=new WeakMap,si=new WeakMap,Ri=new WeakMap,Se=new WeakMap,gd=new WeakMap,Tr=new WeakMap,$=new WeakSet,Ae=function(){return c(this,_r)||b(this,_r,new Map)},wa=function(){return c(this,gd)||b(this,gd,new Map)},Sa=function(){if(!c(this,si)){const e=c(this,Se).createElement("div"),{style:n}=e;n.visibility="hidden",n.contain="strict",n.width=n.height=0,n.position="absolute",n.top=n.left=0,n.zIndex=-1;const s=c(this,Se).createElementNS(xi,"svg");s.setAttribute("width",0),s.setAttribute("height",0),b(this,si,c(this,Se).createElementNS(xi,"defs")),e.append(s),s.append(c(this,si)),c(this,Se).body.append(e)}return c(this,si)},yu=function(e){if(e.length===1){const h=e[0],u=new Array(256);for(let f=0;f<256;f++)u[f]=h[f]/255;const d=u.join(",");return[d,d,d]}const[n,s,r]=e,a=new Array(256),o=new Array(256),l=new Array(256);for(let h=0;h<256;h++)a[h]=n[h]/255,o[h]=s[h]/255,l[h]=r[h]/255;return[a.join(","),o.join(","),l.join(",")]},Ea=function(e){if(c(this,Er)===void 0){b(this,Er,"");const n=c(this,Se).URL;n!==c(this,Se).baseURI&&(Ud(n)?at('#createUrl: ignore "data:"-URL for performance reasons.'):b(this,Er,n.split("#",1)[0]))}return`url(${c(this,Er)}#${e})`},Q0=function(e){const n=c(this,Se).createElementNS(xi,"feColorMatrix");n.setAttribute("type","matrix"),n.setAttribute("values","0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.3 0.59 0.11 0 0"),e.append(n)},gp=function(e){const n=c(this,Se).createElementNS(xi,"feColorMatrix");n.setAttribute("type","matrix"),n.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),e.append(n)},_a=function(e){const n=c(this,Se).createElementNS(xi,"filter");return n.setAttribute("color-interpolation-filters","sRGB"),n.setAttribute("id",e),c(this,$,Sa).append(n),n},Tl=function(e,n,s){const r=c(this,Se).createElementNS(xi,n);r.setAttribute("type","discrete"),r.setAttribute("tableValues",s),e.append(r)},Cl=function(e,n,s,r){const a=c(this,Se).createElementNS(xi,"feComponentTransfer");r.append(a),x(this,$,Tl).call(this,a,"feFuncR",e),x(this,$,Tl).call(this,a,"feFuncG",n),x(this,$,Tl).call(this,a,"feFuncB",s)},mp=function(e,n){const s=c(this,Se).createElementNS(xi,"feComponentTransfer");n.append(s),x(this,$,Tl).call(this,s,"feFuncA",e)},Pl=function(e){return c(this,$,Sa).style.color=e,Vg(getComputedStyle(c(this,$,Sa)).getPropertyValue("color"))};class Z0{constructor({baseUrl:t=null}){this.baseUrl=t}async fetch({filename:t}){if(!this.baseUrl)throw new Error("Ensure that the `standardFontDataUrl` API parameter is provided.");if(!t)throw new Error("Font filename must be specified.");const e=`${this.baseUrl}${t}`;return this._fetch(e).catch(n=>{throw new Error(`Unable to load font data at: ${e}`)})}async _fetch(t){Rt("Abstract method `_fetch` called.")}}class J0 extends Z0{async _fetch(t){const e=await $d(t,"arraybuffer");return new Uint8Array(e)}}if(Ce){var yp=Promise.withResolvers(),zl=null;(async()=>{const t=await Mh(()=>import("./__vite-browser-external-BIHI7g3E.js"),[]),e=await Mh(()=>import("./__vite-browser-external-BIHI7g3E.js"),[]),n=await Mh(()=>import("./__vite-browser-external-BIHI7g3E.js"),[]),s=await Mh(()=>import("./__vite-browser-external-BIHI7g3E.js"),[]);let r,a;return new Map(Object.entries({fs:t,http:e,https:n,url:s,canvas:r,path2d:a}))})().then(t=>{zl=t,yp.resolve()},t=>{at(`loadPackages: ${t}`),zl=new Map,yp.resolve()})}class Hs{static get promise(){return yp.promise}static get(t){return zl==null?void 0:zl.get(t)}}async function tx(i){const e=await Hs.get("fs").promises.readFile(i);return new Uint8Array(e)}class V1 extends Y0{}class H1 extends q0{_createCanvas(t,e){return Hs.get("canvas").createCanvas(t,e)}}class $1 extends X0{async _fetch(t){return tx(t)}}class U1 extends Z0{async _fetch(t){return tx(t)}}const Ie={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};function vp(i,t){if(!t)return;const e=t[2]-t[0],n=t[3]-t[1],s=new Path2D;s.rect(t[0],t[1],e,n),i.clip(s)}class $g{getPattern(){Rt("Abstract method `getPattern` called.")}}class W1 extends $g{constructor(t){super(),this._type=t[1],this._bbox=t[2],this._colorStops=t[3],this._p0=t[4],this._p1=t[5],this._r0=t[6],this._r1=t[7],this.matrix=null}_createGradient(t){let e;this._type==="axial"?e=t.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):this._type==="radial"&&(e=t.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const n of this._colorStops)e.addColorStop(n[0],n[1]);return e}getPattern(t,e,n,s){let r;if(s===Ie.STROKE||s===Ie.FILL){const a=e.current.getClippedPathBoundingBox(s,jt(t))||[0,0,0,0],o=Math.ceil(a[2]-a[0])||1,l=Math.ceil(a[3]-a[1])||1,h=e.cachedCanvases.getCanvas("pattern",o,l),u=h.context;u.clearRect(0,0,u.canvas.width,u.canvas.height),u.beginPath(),u.rect(0,0,u.canvas.width,u.canvas.height),u.translate(-a[0],-a[1]),n=W.transform(n,[1,0,0,1,a[0],a[1]]),u.transform(...e.baseTransform),this.matrix&&u.transform(...this.matrix),vp(u,this._bbox),u.fillStyle=this._createGradient(u),u.fill(),r=t.createPattern(h.canvas,"no-repeat");const d=new DOMMatrix(n);r.setTransform(d)}else vp(t,this._bbox),r=this._createGradient(t);return r}}function ff(i,t,e,n,s,r,a,o){const l=t.coords,h=t.colors,u=i.data,d=i.width*4;let f;l[e+1]>l[n+1]&&(f=e,e=n,n=f,f=r,r=a,a=f),l[n+1]>l[s+1]&&(f=n,n=s,s=f,f=a,a=o,o=f),l[e+1]>l[n+1]&&(f=e,e=n,n=f,f=r,r=a,a=f);const p=(l[e]+t.offsetX)*t.scaleX,g=(l[e+1]+t.offsetY)*t.scaleY,m=(l[n]+t.offsetX)*t.scaleX,v=(l[n+1]+t.offsetY)*t.scaleY,y=(l[s]+t.offsetX)*t.scaleX,A=(l[s+1]+t.offsetY)*t.scaleY;if(g>=A)return;const S=h[r],E=h[r+1],T=h[r+2],_=h[a],R=h[a+1],k=h[a+2],I=h[o],D=h[o+1],M=h[o+2],L=Math.round(g),N=Math.round(A);let O,U,z,j,V,tt,yt,ft;for(let st=L;st<=N;st++){if(st<v){const Y=st<g?0:(g-st)/(g-v);O=p-(p-m)*Y,U=S-(S-_)*Y,z=E-(E-R)*Y,j=T-(T-k)*Y}else{let Y;st>A?Y=1:v===A?Y=0:Y=(v-st)/(v-A),O=m-(m-y)*Y,U=_-(_-I)*Y,z=R-(R-D)*Y,j=k-(k-M)*Y}let lt;st<g?lt=0:st>A?lt=1:lt=(g-st)/(g-A),V=p-(p-y)*lt,tt=S-(S-I)*lt,yt=E-(E-D)*lt,ft=T-(T-M)*lt;const It=Math.round(Math.min(O,V)),Wt=Math.round(Math.max(O,V));let gt=d*st+It*4;for(let Y=It;Y<=Wt;Y++)lt=(O-Y)/(O-V),lt<0?lt=0:lt>1&&(lt=1),u[gt++]=U-(U-tt)*lt|0,u[gt++]=z-(z-yt)*lt|0,u[gt++]=j-(j-ft)*lt|0,u[gt++]=255}}function z1(i,t,e){const n=t.coords,s=t.colors;let r,a;switch(t.type){case"lattice":const o=t.verticesPerRow,l=Math.floor(n.length/o)-1,h=o-1;for(r=0;r<l;r++){let u=r*o;for(let d=0;d<h;d++,u++)ff(i,e,n[u],n[u+1],n[u+o],s[u],s[u+1],s[u+o]),ff(i,e,n[u+o+1],n[u+1],n[u+o],s[u+o+1],s[u+1],s[u+o])}break;case"triangles":for(r=0,a=n.length;r<a;r+=3)ff(i,e,n[r],n[r+1],n[r+2],s[r],s[r+1],s[r+2]);break;default:throw new Error("illegal figure")}}class G1 extends $g{constructor(t){super(),this._coords=t[2],this._colors=t[3],this._figures=t[4],this._bounds=t[5],this._bbox=t[7],this._background=t[8],this.matrix=null}_createMeshCanvas(t,e,n){const o=Math.floor(this._bounds[0]),l=Math.floor(this._bounds[1]),h=Math.ceil(this._bounds[2])-o,u=Math.ceil(this._bounds[3])-l,d=Math.min(Math.ceil(Math.abs(h*t[0]*1.1)),3e3),f=Math.min(Math.ceil(Math.abs(u*t[1]*1.1)),3e3),p=h/d,g=u/f,m={coords:this._coords,colors:this._colors,offsetX:-o,offsetY:-l,scaleX:1/p,scaleY:1/g},v=d+4,y=f+4,A=n.getCanvas("mesh",v,y),S=A.context,E=S.createImageData(d,f);if(e){const _=E.data;for(let R=0,k=_.length;R<k;R+=4)_[R]=e[0],_[R+1]=e[1],_[R+2]=e[2],_[R+3]=255}for(const _ of this._figures)z1(E,_,m);return S.putImageData(E,2,2),{canvas:A.canvas,offsetX:o-2*p,offsetY:l-2*g,scaleX:p,scaleY:g}}getPattern(t,e,n,s){vp(t,this._bbox);let r;if(s===Ie.SHADING)r=W.singularValueDecompose2dScale(jt(t));else if(r=W.singularValueDecompose2dScale(e.baseTransform),this.matrix){const o=W.singularValueDecompose2dScale(this.matrix);r=[r[0]*o[0],r[1]*o[1]]}const a=this._createMeshCanvas(r,s===Ie.SHADING?null:this._background,e.cachedCanvases);return s!==Ie.SHADING&&(t.setTransform(...e.baseTransform),this.matrix&&t.transform(...this.matrix)),t.translate(a.offsetX,a.offsetY),t.scale(a.scaleX,a.scaleY),t.createPattern(a.canvas,"no-repeat")}}class q1 extends $g{getPattern(){return"hotpink"}}function X1(i){switch(i[0]){case"RadialAxial":return new W1(i);case"Mesh":return new G1(i);case"Dummy":return new q1}throw new Error(`Unknown IR type: ${i[0]}`)}const uy={COLORED:1,UNCOLORED:2},md=class md{constructor(t,e,n,s,r){this.operatorList=t[2],this.matrix=t[3],this.bbox=t[4],this.xstep=t[5],this.ystep=t[6],this.paintType=t[7],this.tilingType=t[8],this.color=e,this.ctx=n,this.canvasGraphicsFactory=s,this.baseTransform=r}createPatternCanvas(t){const{bbox:e,operatorList:n,paintType:s,tilingType:r,color:a,canvasGraphicsFactory:o}=this;let{xstep:l,ystep:h}=this;l=Math.abs(l),h=Math.abs(h),Bd("TilingType: "+r);const u=e[0],d=e[1],f=e[2],p=e[3],g=f-u,m=p-d,v=W.singularValueDecompose2dScale(this.matrix),y=W.singularValueDecompose2dScale(this.baseTransform),A=v[0]*y[0],S=v[1]*y[1];let E=g,T=m,_=!1,R=!1;const k=Math.ceil(l*A),I=Math.ceil(h*S),D=Math.ceil(g*A),M=Math.ceil(m*S);k>=D?E=l:_=!0,I>=M?T=h:R=!0;const L=this.getSizeAndScale(E,this.ctx.canvas.width,A),N=this.getSizeAndScale(T,this.ctx.canvas.height,S),O=t.cachedCanvases.getCanvas("pattern",L.size,N.size),U=O.context,z=o.createCanvasGraphics(U);if(z.groupLevel=t.groupLevel,this.setFillAndStrokeStyleToContext(z,s,a),U.translate(-L.scale*u,-N.scale*d),z.transform(L.scale,0,0,N.scale,0,0),U.save(),this.clipBbox(z,u,d,f,p),z.baseTransform=jt(z.ctx),z.executeOperatorList(n),z.endDrawing(),U.restore(),_||R){const j=O.canvas;_&&(E=l),R&&(T=h);const V=this.getSizeAndScale(E,this.ctx.canvas.width,A),tt=this.getSizeAndScale(T,this.ctx.canvas.height,S),yt=V.size,ft=tt.size,st=t.cachedCanvases.getCanvas("pattern-workaround",yt,ft),lt=st.context,It=_?Math.floor(g/l):0,Wt=R?Math.floor(m/h):0;for(let gt=0;gt<=It;gt++)for(let Y=0;Y<=Wt;Y++)lt.drawImage(j,yt*gt,ft*Y,yt,ft,0,0,yt,ft);return{canvas:st.canvas,scaleX:V.scale,scaleY:tt.scale,offsetX:u,offsetY:d}}return{canvas:O.canvas,scaleX:L.scale,scaleY:N.scale,offsetX:u,offsetY:d}}getSizeAndScale(t,e,n){const s=Math.max(md.MAX_PATTERN_SIZE,e);let r=Math.ceil(t*n);return r>=s?r=s:n=r/t,{scale:n,size:r}}clipBbox(t,e,n,s,r){const a=s-e,o=r-n;t.ctx.rect(e,n,a,o),t.current.updateRectMinMax(jt(t.ctx),[e,n,s,r]),t.clip(),t.endPath()}setFillAndStrokeStyleToContext(t,e,n){const s=t.ctx,r=t.current;switch(e){case uy.COLORED:const a=this.ctx;s.fillStyle=a.fillStyle,s.strokeStyle=a.strokeStyle,r.fillColor=a.fillStyle,r.strokeColor=a.strokeStyle;break;case uy.UNCOLORED:const o=W.makeHexColor(n[0],n[1],n[2]);s.fillStyle=o,s.strokeStyle=o,r.fillColor=o,r.strokeColor=o;break;default:throw new b1(`Unsupported paint type: ${e}`)}}getPattern(t,e,n,s){let r=n;s!==Ie.SHADING&&(r=W.transform(r,e.baseTransform),this.matrix&&(r=W.transform(r,this.matrix)));const a=this.createPatternCanvas(e);let o=new DOMMatrix(r);o=o.translate(a.offsetX,a.offsetY),o=o.scale(1/a.scaleX,1/a.scaleY);const l=t.createPattern(a.canvas,"repeat");return l.setTransform(o),l}};K(md,"MAX_PATTERN_SIZE",3e3);let bp=md;function K1({src:i,srcPos:t=0,dest:e,width:n,height:s,nonBlackColor:r=4294967295,inverseDecode:a=!1}){const o=De.isLittleEndian?4278190080:255,[l,h]=a?[r,o]:[o,r],u=n>>3,d=n&7,f=i.length;e=new Uint32Array(e.buffer);let p=0;for(let g=0;g<s;g++){for(const v=t+u;t<v;t++){const y=t<f?i[t]:255;e[p++]=y&128?h:l,e[p++]=y&64?h:l,e[p++]=y&32?h:l,e[p++]=y&16?h:l,e[p++]=y&8?h:l,e[p++]=y&4?h:l,e[p++]=y&2?h:l,e[p++]=y&1?h:l}if(d===0)continue;const m=t<f?i[t++]:255;for(let v=0;v<d;v++)e[p++]=m&1<<7-v?h:l}return{srcPos:t,destPos:p}}const dy=16,fy=100,Y1=15,py=10,gy=1e3,We=16;function Q1(i,t){if(i._removeMirroring)throw new Error("Context is already forwarding operations.");i.__originalSave=i.save,i.__originalRestore=i.restore,i.__originalRotate=i.rotate,i.__originalScale=i.scale,i.__originalTranslate=i.translate,i.__originalTransform=i.transform,i.__originalSetTransform=i.setTransform,i.__originalResetTransform=i.resetTransform,i.__originalClip=i.clip,i.__originalMoveTo=i.moveTo,i.__originalLineTo=i.lineTo,i.__originalBezierCurveTo=i.bezierCurveTo,i.__originalRect=i.rect,i.__originalClosePath=i.closePath,i.__originalBeginPath=i.beginPath,i._removeMirroring=()=>{i.save=i.__originalSave,i.restore=i.__originalRestore,i.rotate=i.__originalRotate,i.scale=i.__originalScale,i.translate=i.__originalTranslate,i.transform=i.__originalTransform,i.setTransform=i.__originalSetTransform,i.resetTransform=i.__originalResetTransform,i.clip=i.__originalClip,i.moveTo=i.__originalMoveTo,i.lineTo=i.__originalLineTo,i.bezierCurveTo=i.__originalBezierCurveTo,i.rect=i.__originalRect,i.closePath=i.__originalClosePath,i.beginPath=i.__originalBeginPath,delete i._removeMirroring},i.save=function(){t.save(),this.__originalSave()},i.restore=function(){t.restore(),this.__originalRestore()},i.translate=function(n,s){t.translate(n,s),this.__originalTranslate(n,s)},i.scale=function(n,s){t.scale(n,s),this.__originalScale(n,s)},i.transform=function(n,s,r,a,o,l){t.transform(n,s,r,a,o,l),this.__originalTransform(n,s,r,a,o,l)},i.setTransform=function(n,s,r,a,o,l){t.setTransform(n,s,r,a,o,l),this.__originalSetTransform(n,s,r,a,o,l)},i.resetTransform=function(){t.resetTransform(),this.__originalResetTransform()},i.rotate=function(n){t.rotate(n),this.__originalRotate(n)},i.clip=function(n){t.clip(n),this.__originalClip(n)},i.moveTo=function(e,n){t.moveTo(e,n),this.__originalMoveTo(e,n)},i.lineTo=function(e,n){t.lineTo(e,n),this.__originalLineTo(e,n)},i.bezierCurveTo=function(e,n,s,r,a,o){t.bezierCurveTo(e,n,s,r,a,o),this.__originalBezierCurveTo(e,n,s,r,a,o)},i.rect=function(e,n,s,r){t.rect(e,n,s,r),this.__originalRect(e,n,s,r)},i.closePath=function(){t.closePath(),this.__originalClosePath()},i.beginPath=function(){t.beginPath(),this.__originalBeginPath()}}class Z1{constructor(t){this.canvasFactory=t,this.cache=Object.create(null)}getCanvas(t,e,n){let s;return this.cache[t]!==void 0?(s=this.cache[t],this.canvasFactory.reset(s,e,n)):(s=this.canvasFactory.create(e,n),this.cache[t]=s),s}delete(t){delete this.cache[t]}clear(){for(const t in this.cache){const e=this.cache[t];this.canvasFactory.destroy(e),delete this.cache[t]}}}function Oh(i,t,e,n,s,r,a,o,l,h){const[u,d,f,p,g,m]=jt(i);if(d===0&&f===0){const A=a*u+g,S=Math.round(A),E=o*p+m,T=Math.round(E),_=(a+l)*u+g,R=Math.abs(Math.round(_)-S)||1,k=(o+h)*p+m,I=Math.abs(Math.round(k)-T)||1;return i.setTransform(Math.sign(u),0,0,Math.sign(p),S,T),i.drawImage(t,e,n,s,r,0,0,R,I),i.setTransform(u,d,f,p,g,m),[R,I]}if(u===0&&p===0){const A=o*f+g,S=Math.round(A),E=a*d+m,T=Math.round(E),_=(o+h)*f+g,R=Math.abs(Math.round(_)-S)||1,k=(a+l)*d+m,I=Math.abs(Math.round(k)-T)||1;return i.setTransform(0,Math.sign(d),Math.sign(f),0,S,T),i.drawImage(t,e,n,s,r,0,0,I,R),i.setTransform(u,d,f,p,g,m),[I,R]}i.drawImage(t,e,n,s,r,a,o,l,h);const v=Math.hypot(u,d),y=Math.hypot(f,p);return[v*l,y*h]}function J1(i){const{width:t,height:e}=i;if(t>gy||e>gy)return null;const n=1e3,s=new Uint8Array([0,2,4,0,1,0,5,4,8,10,0,8,0,2,1,0]),r=t+1;let a=new Uint8Array(r*(e+1)),o,l,h;const u=t+7&-8;let d=new Uint8Array(u*e),f=0;for(const y of i.data){let A=128;for(;A>0;)d[f++]=y&A?0:255,A>>=1}let p=0;for(f=0,d[f]!==0&&(a[0]=1,++p),l=1;l<t;l++)d[f]!==d[f+1]&&(a[l]=d[f]?2:1,++p),f++;for(d[f]!==0&&(a[l]=2,++p),o=1;o<e;o++){f=o*u,h=o*r,d[f-u]!==d[f]&&(a[h]=d[f]?1:8,++p);let y=(d[f]?4:0)+(d[f-u]?8:0);for(l=1;l<t;l++)y=(y>>2)+(d[f+1]?4:0)+(d[f-u+1]?8:0),s[y]&&(a[h+l]=s[y],++p),f++;if(d[f-u]!==d[f]&&(a[h+l]=d[f]?2:4,++p),p>n)return null}for(f=u*(e-1),h=o*r,d[f]!==0&&(a[h]=8,++p),l=1;l<t;l++)d[f]!==d[f+1]&&(a[h+l]=d[f]?4:8,++p),f++;if(d[f]!==0&&(a[h+l]=4,++p),p>n)return null;const g=new Int32Array([0,r,-1,0,-r,0,0,0,1]),m=new Path2D;for(o=0;p&&o<=e;o++){let y=o*r;const A=y+t;for(;y<A&&!a[y];)y++;if(y===A)continue;m.moveTo(y%r,o);const S=y;let E=a[y];do{const T=g[E];do y+=T;while(!a[y]);const _=a[y];_!==5&&_!==10?(E=_,a[y]=0):(E=_&51*E>>4,a[y]&=E>>2|E<<2),m.lineTo(y%r,y/r|0),a[y]||--p}while(S!==y);--o}return d=null,a=null,function(y){y.save(),y.scale(1/t,-1/e),y.translate(0,-e),y.fill(m),y.beginPath(),y.restore()}}class my{constructor(t,e){this.alphaIsShape=!1,this.fontSize=0,this.fontSizeScale=1,this.textMatrix=y0,this.textMatrixScale=1,this.fontMatrix=zf,this.leading=0,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRenderingMode=xe.FILL,this.textRise=0,this.fillColor="#000000",this.strokeColor="#000000",this.patternFill=!1,this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.activeSMask=null,this.transferMaps="none",this.startNewPathAndClipBox([0,0,t,e])}clone(){const t=Object.create(this);return t.clipBox=this.clipBox.slice(),t}setCurrentPoint(t,e){this.x=t,this.y=e}updatePathMinMax(t,e,n){[e,n]=W.applyTransform([e,n],t),this.minX=Math.min(this.minX,e),this.minY=Math.min(this.minY,n),this.maxX=Math.max(this.maxX,e),this.maxY=Math.max(this.maxY,n)}updateRectMinMax(t,e){const n=W.applyTransform(e,t),s=W.applyTransform(e.slice(2),t),r=W.applyTransform([e[0],e[3]],t),a=W.applyTransform([e[2],e[1]],t);this.minX=Math.min(this.minX,n[0],s[0],r[0],a[0]),this.minY=Math.min(this.minY,n[1],s[1],r[1],a[1]),this.maxX=Math.max(this.maxX,n[0],s[0],r[0],a[0]),this.maxY=Math.max(this.maxY,n[1],s[1],r[1],a[1])}updateScalingPathMinMax(t,e){W.scaleMinMax(t,e),this.minX=Math.min(this.minX,e[0]),this.minY=Math.min(this.minY,e[1]),this.maxX=Math.max(this.maxX,e[2]),this.maxY=Math.max(this.maxY,e[3])}updateCurvePathMinMax(t,e,n,s,r,a,o,l,h,u){const d=W.bezierBoundingBox(e,n,s,r,a,o,l,h,u);u||this.updateRectMinMax(t,d)}getPathBoundingBox(t=Ie.FILL,e=null){const n=[this.minX,this.minY,this.maxX,this.maxY];if(t===Ie.STROKE){e||Rt("Stroke bounding box must include transform.");const s=W.singularValueDecompose2dScale(e),r=s[0]*this.lineWidth/2,a=s[1]*this.lineWidth/2;n[0]-=r,n[1]-=a,n[2]+=r,n[3]+=a}return n}updateClipFromPath(){const t=W.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(t||[0,0,0,0])}isEmptyClip(){return this.minX===1/0}startNewPathAndClipBox(t){this.clipBox=t,this.minX=1/0,this.minY=1/0,this.maxX=0,this.maxY=0}getClippedPathBoundingBox(t=Ie.FILL,e=null){return W.intersect(this.clipBox,this.getPathBoundingBox(t,e))}}function yy(i,t){if(typeof ImageData<"u"&&t instanceof ImageData){i.putImageData(t,0,0);return}const e=t.height,n=t.width,s=e%We,r=(e-s)/We,a=s===0?r:r+1,o=i.createImageData(n,We);let l=0,h;const u=t.data,d=o.data;let f,p,g,m;if(t.kind===hu.GRAYSCALE_1BPP){const v=u.byteLength,y=new Uint32Array(d.buffer,0,d.byteLength>>2),A=y.length,S=n+7>>3,E=4294967295,T=De.isLittleEndian?4278190080:255;for(f=0;f<a;f++){for(g=f<r?We:s,h=0,p=0;p<g;p++){const _=v-l;let R=0;const k=_>S?n:_*8-7,I=k&-8;let D=0,M=0;for(;R<I;R+=8)M=u[l++],y[h++]=M&128?E:T,y[h++]=M&64?E:T,y[h++]=M&32?E:T,y[h++]=M&16?E:T,y[h++]=M&8?E:T,y[h++]=M&4?E:T,y[h++]=M&2?E:T,y[h++]=M&1?E:T;for(;R<k;R++)D===0&&(M=u[l++],D=128),y[h++]=M&D?E:T,D>>=1}for(;h<A;)y[h++]=0;i.putImageData(o,0,f*We)}}else if(t.kind===hu.RGBA_32BPP){for(p=0,m=n*We*4,f=0;f<r;f++)d.set(u.subarray(l,l+m)),l+=m,i.putImageData(o,0,p),p+=We;f<a&&(m=n*s*4,d.set(u.subarray(l,l+m)),i.putImageData(o,0,p))}else if(t.kind===hu.RGB_24BPP)for(g=We,m=n*g,f=0;f<a;f++){for(f>=r&&(g=s,m=n*g),h=0,p=m;p--;)d[h++]=u[l++],d[h++]=u[l++],d[h++]=u[l++],d[h++]=255;i.putImageData(o,0,f*We)}else throw new Error(`bad image kind: ${t.kind}`)}function vy(i,t){if(t.bitmap){i.drawImage(t.bitmap,0,0);return}const e=t.height,n=t.width,s=e%We,r=(e-s)/We,a=s===0?r:r+1,o=i.createImageData(n,We);let l=0;const h=t.data,u=o.data;for(let d=0;d<a;d++){const f=d<r?We:s;({srcPos:l}=K1({src:h,srcPos:l,dest:u,width:n,height:f,nonBlackColor:0})),i.putImageData(o,0,d*We)}}function al(i,t){const e=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const n of e)i[n]!==void 0&&(t[n]=i[n]);i.setLineDash!==void 0&&(t.setLineDash(i.getLineDash()),t.lineDashOffset=i.lineDashOffset)}function Fh(i){if(i.strokeStyle=i.fillStyle="#000000",i.fillRule="nonzero",i.globalAlpha=1,i.lineWidth=1,i.lineCap="butt",i.lineJoin="miter",i.miterLimit=10,i.globalCompositeOperation="source-over",i.font="10px sans-serif",i.setLineDash!==void 0&&(i.setLineDash([]),i.lineDashOffset=0),!Ce){const{filter:t}=i;t!=="none"&&t!==""&&(i.filter="none")}}function by(i,t){if(t)return!0;const e=W.singularValueDecompose2dScale(i);e[0]=Math.fround(e[0]),e[1]=Math.fround(e[1]);const n=Math.fround((globalThis.devicePixelRatio||1)*Vs.PDF_TO_CSS_UNITS);return e[0]<=n&&e[1]<=n}const tT=["butt","round","square"],eT=["miter","round","bevel"],nT={},xy={};var Gs,xp,Ap;const Mm=class Mm{constructor(t,e,n,s,r,{optionalContentConfig:a,markedContentStack:o=null},l,h){w(this,Gs);this.ctx=t,this.current=new my(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=e,this.objs=n,this.canvasFactory=s,this.filterFactory=r,this.groupStack=[],this.processingType3=null,this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=o||[],this.optionalContentConfig=a,this.cachedCanvases=new Z1(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=l,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=h,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map}getObject(t,e=null){return typeof t=="string"?t.startsWith("g_")?this.commonObjs.get(t):this.objs.get(t):e}beginDrawing({transform:t,viewport:e,transparency:n=!1,background:s=null}){const r=this.ctx.canvas.width,a=this.ctx.canvas.height,o=this.ctx.fillStyle;if(this.ctx.fillStyle=s||"#ffffff",this.ctx.fillRect(0,0,r,a),this.ctx.fillStyle=o,n){const l=this.cachedCanvases.getCanvas("transparent",r,a);this.compositeCtx=this.ctx,this.transparentCanvas=l.canvas,this.ctx=l.context,this.ctx.save(),this.ctx.transform(...jt(this.compositeCtx))}this.ctx.save(),Fh(this.ctx),t&&(this.ctx.transform(...t),this.outputScaleX=t[0],this.outputScaleY=t[0]),this.ctx.transform(...e.transform),this.viewportScale=e.scale,this.baseTransform=jt(this.ctx)}executeOperatorList(t,e,n,s){const r=t.argsArray,a=t.fnArray;let o=e||0;const l=r.length;if(l===o)return o;const h=l-o>py&&typeof n=="function",u=h?Date.now()+Y1:0;let d=0;const f=this.commonObjs,p=this.objs;let g;for(;;){if(s!==void 0&&o===s.nextBreakPoint)return s.breakIt(o,n),o;if(g=a[o],g!==Mn.dependency)this[g].apply(this,r[o]);else for(const m of r[o]){const v=m.startsWith("g_")?f:p;if(!v.has(m))return v.get(m,n),o}if(o++,o===l)return o;if(h&&++d>py){if(Date.now()>u)return n(),o;d=0}}}endDrawing(){x(this,Gs,xp).call(this),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const t of this._cachedBitmapsMap.values()){for(const e of t.values())typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement&&(e.width=e.height=0);t.clear()}this._cachedBitmapsMap.clear(),x(this,Gs,Ap).call(this)}_scaleImage(t,e){const n=t.width??t.displayWidth,s=t.height??t.displayHeight;let r=Math.max(Math.hypot(e[0],e[1]),1),a=Math.max(Math.hypot(e[2],e[3]),1),o=n,l=s,h="prescale1",u,d;for(;r>2&&o>1||a>2&&l>1;){let f=o,p=l;r>2&&o>1&&(f=o>=16384?Math.floor(o/2)-1||1:Math.ceil(o/2),r/=o/f),a>2&&l>1&&(p=l>=16384?Math.floor(l/2)-1||1:Math.ceil(l)/2,a/=l/p),u=this.cachedCanvases.getCanvas(h,f,p),d=u.context,d.clearRect(0,0,f,p),d.drawImage(t,0,0,o,l,0,0,f,p),t=u.canvas,o=f,l=p,h=h==="prescale1"?"prescale2":"prescale1"}return{img:t,paintWidth:o,paintHeight:l}}_createMaskCanvas(t){const e=this.ctx,{width:n,height:s}=t,r=this.current.fillColor,a=this.current.patternFill,o=jt(e);let l,h,u,d;if((t.bitmap||t.data)&&t.count>1){const k=t.bitmap||t.data.buffer;h=JSON.stringify(a?o:[o.slice(0,4),r]),l=this._cachedBitmapsMap.get(k),l||(l=new Map,this._cachedBitmapsMap.set(k,l));const I=l.get(h);if(I&&!a){const D=Math.round(Math.min(o[0],o[2])+o[4]),M=Math.round(Math.min(o[1],o[3])+o[5]);return{canvas:I,offsetX:D,offsetY:M}}u=I}u||(d=this.cachedCanvases.getCanvas("maskCanvas",n,s),vy(d.context,t));let f=W.transform(o,[1/n,0,0,-1/s,0,0]);f=W.transform(f,[1,0,0,1,0,-s]);const[p,g,m,v]=W.getAxialAlignedBoundingBox([0,0,n,s],f),y=Math.round(m-p)||1,A=Math.round(v-g)||1,S=this.cachedCanvases.getCanvas("fillCanvas",y,A),E=S.context,T=p,_=g;E.translate(-T,-_),E.transform(...f),u||(u=this._scaleImage(d.canvas,bi(E)),u=u.img,l&&a&&l.set(h,u)),E.imageSmoothingEnabled=by(jt(E),t.interpolate),Oh(E,u,0,0,u.width,u.height,0,0,n,s),E.globalCompositeOperation="source-in";const R=W.transform(bi(E),[1,0,0,1,-T,-_]);return E.fillStyle=a?r.getPattern(e,this,R,Ie.FILL):r,E.fillRect(0,0,n,s),l&&!a&&(this.cachedCanvases.delete("fillCanvas"),l.set(h,S.canvas)),{canvas:S.canvas,offsetX:Math.round(T),offsetY:Math.round(_)}}setLineWidth(t){t!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=t,this.ctx.lineWidth=t}setLineCap(t){this.ctx.lineCap=tT[t]}setLineJoin(t){this.ctx.lineJoin=eT[t]}setMiterLimit(t){this.ctx.miterLimit=t}setDash(t,e){const n=this.ctx;n.setLineDash!==void 0&&(n.setLineDash(t),n.lineDashOffset=e)}setRenderingIntent(t){}setFlatness(t){}setGState(t){for(const[e,n]of t)switch(e){case"LW":this.setLineWidth(n);break;case"LC":this.setLineCap(n);break;case"LJ":this.setLineJoin(n);break;case"ML":this.setMiterLimit(n);break;case"D":this.setDash(n[0],n[1]);break;case"RI":this.setRenderingIntent(n);break;case"FL":this.setFlatness(n);break;case"Font":this.setFont(n[0],n[1]);break;case"CA":this.current.strokeAlpha=n;break;case"ca":this.current.fillAlpha=n,this.ctx.globalAlpha=n;break;case"BM":this.ctx.globalCompositeOperation=n;break;case"SMask":this.current.activeSMask=n?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(n);break}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const t=this.inSMaskMode;this.current.activeSMask&&!t?this.beginSMaskMode():!this.current.activeSMask&&t&&this.endSMaskMode()}beginSMaskMode(){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const t=this.ctx.canvas.width,e=this.ctx.canvas.height,n="smaskGroupAt"+this.groupLevel,s=this.cachedCanvases.getCanvas(n,t,e);this.suspendedCtx=this.ctx,this.ctx=s.context;const r=this.ctx;r.setTransform(...jt(this.suspendedCtx)),al(this.suspendedCtx,r),Q1(r,this.suspendedCtx),this.setGState([["BM","source-over"],["ca",1],["CA",1]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),al(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(t){if(!this.current.activeSMask)return;t?(t[0]=Math.floor(t[0]),t[1]=Math.floor(t[1]),t[2]=Math.ceil(t[2]),t[3]=Math.ceil(t[3])):t=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const e=this.current.activeSMask,n=this.suspendedCtx;this.composeSMask(n,e,this.ctx,t),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}composeSMask(t,e,n,s){const r=s[0],a=s[1],o=s[2]-r,l=s[3]-a;o===0||l===0||(this.genericComposeSMask(e.context,n,o,l,e.subtype,e.backdrop,e.transferMap,r,a,e.offsetX,e.offsetY),t.save(),t.globalAlpha=1,t.globalCompositeOperation="source-over",t.setTransform(1,0,0,1,0,0),t.drawImage(n.canvas,0,0),t.restore())}genericComposeSMask(t,e,n,s,r,a,o,l,h,u,d){let f=t.canvas,p=l-u,g=h-d;if(a){const v=W.makeHexColor(...a);if(p<0||g<0||p+n>f.width||g+s>f.height){const y=this.cachedCanvases.getCanvas("maskExtension",n,s),A=y.context;A.drawImage(f,-p,-g),A.globalCompositeOperation="destination-atop",A.fillStyle=v,A.fillRect(0,0,n,s),A.globalCompositeOperation="source-over",f=y.canvas,p=g=0}else{t.save(),t.globalAlpha=1,t.setTransform(1,0,0,1,0,0);const y=new Path2D;y.rect(p,g,n,s),t.clip(y),t.globalCompositeOperation="destination-atop",t.fillStyle=v,t.fillRect(p,g,n,s),t.restore()}}e.save(),e.globalAlpha=1,e.setTransform(1,0,0,1,0,0),r==="Alpha"&&o?e.filter=this.filterFactory.addAlphaFilter(o):r==="Luminosity"&&(e.filter=this.filterFactory.addLuminosityFilter(o));const m=new Path2D;m.rect(l,h,n,s),e.clip(m),e.globalCompositeOperation="destination-in",e.drawImage(f,p,g,n,s,l,h,n,s),e.restore()}save(){this.inSMaskMode?(al(this.ctx,this.suspendedCtx),this.suspendedCtx.save()):this.ctx.save();const t=this.current;this.stateStack.push(t),this.current=t.clone()}restore(){this.stateStack.length===0&&this.inSMaskMode&&this.endSMaskMode(),this.stateStack.length!==0&&(this.current=this.stateStack.pop(),this.inSMaskMode?(this.suspendedCtx.restore(),al(this.suspendedCtx,this.ctx)):this.ctx.restore(),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null)}transform(t,e,n,s,r,a){this.ctx.transform(t,e,n,s,r,a),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(t,e,n){const s=this.ctx,r=this.current;let a=r.x,o=r.y,l,h;const u=jt(s),d=u[0]===0&&u[3]===0||u[1]===0&&u[2]===0,f=d?n.slice(0):null;for(let p=0,g=0,m=t.length;p<m;p++)switch(t[p]|0){case Mn.rectangle:a=e[g++],o=e[g++];const v=e[g++],y=e[g++],A=a+v,S=o+y;s.moveTo(a,o),v===0||y===0?s.lineTo(A,S):(s.lineTo(A,o),s.lineTo(A,S),s.lineTo(a,S)),d||r.updateRectMinMax(u,[a,o,A,S]),s.closePath();break;case Mn.moveTo:a=e[g++],o=e[g++],s.moveTo(a,o),d||r.updatePathMinMax(u,a,o);break;case Mn.lineTo:a=e[g++],o=e[g++],s.lineTo(a,o),d||r.updatePathMinMax(u,a,o);break;case Mn.curveTo:l=a,h=o,a=e[g+4],o=e[g+5],s.bezierCurveTo(e[g],e[g+1],e[g+2],e[g+3],a,o),r.updateCurvePathMinMax(u,l,h,e[g],e[g+1],e[g+2],e[g+3],a,o,f),g+=6;break;case Mn.curveTo2:l=a,h=o,s.bezierCurveTo(a,o,e[g],e[g+1],e[g+2],e[g+3]),r.updateCurvePathMinMax(u,l,h,a,o,e[g],e[g+1],e[g+2],e[g+3],f),a=e[g+2],o=e[g+3],g+=4;break;case Mn.curveTo3:l=a,h=o,a=e[g+2],o=e[g+3],s.bezierCurveTo(e[g],e[g+1],a,o,a,o),r.updateCurvePathMinMax(u,l,h,e[g],e[g+1],a,o,a,o,f),g+=4;break;case Mn.closePath:s.closePath();break}d&&r.updateScalingPathMinMax(u,f),r.setCurrentPoint(a,o)}closePath(){this.ctx.closePath()}stroke(t=!0){const e=this.ctx,n=this.current.strokeColor;e.globalAlpha=this.current.strokeAlpha,this.contentVisible&&(typeof n=="object"&&(n!=null&&n.getPattern)?(e.save(),e.strokeStyle=n.getPattern(e,this,bi(e),Ie.STROKE),this.rescaleAndStroke(!1),e.restore()):this.rescaleAndStroke(!0)),t&&this.consumePath(this.current.getClippedPathBoundingBox()),e.globalAlpha=this.current.fillAlpha}closeStroke(){this.closePath(),this.stroke()}fill(t=!0){const e=this.ctx,n=this.current.fillColor,s=this.current.patternFill;let r=!1;s&&(e.save(),e.fillStyle=n.getPattern(e,this,bi(e),Ie.FILL),r=!0);const a=this.current.getClippedPathBoundingBox();this.contentVisible&&a!==null&&(this.pendingEOFill?(e.fill("evenodd"),this.pendingEOFill=!1):e.fill()),r&&e.restore(),t&&this.consumePath(a)}eoFill(){this.pendingEOFill=!0,this.fill()}fillStroke(){this.fill(!1),this.stroke(!1),this.consumePath()}eoFillStroke(){this.pendingEOFill=!0,this.fillStroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.pendingEOFill=!0,this.closePath(),this.fillStroke()}endPath(){this.consumePath()}clip(){this.pendingClip=nT}eoClip(){this.pendingClip=xy}beginText(){this.current.textMatrix=y0,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}endText(){const t=this.pendingTextPaths,e=this.ctx;if(t===void 0){e.beginPath();return}e.save(),e.beginPath();for(const n of t)e.setTransform(...n.transform),e.translate(n.x,n.y),n.addToPath(e,n.fontSize);e.restore(),e.clip(),e.beginPath(),delete this.pendingTextPaths}setCharSpacing(t){this.current.charSpacing=t}setWordSpacing(t){this.current.wordSpacing=t}setHScale(t){this.current.textHScale=t/100}setLeading(t){this.current.leading=-t}setFont(t,e){var u;const n=this.commonObjs.get(t),s=this.current;if(!n)throw new Error(`Can't find font for ${t}`);if(s.fontMatrix=n.fontMatrix||zf,(s.fontMatrix[0]===0||s.fontMatrix[3]===0)&&at("Invalid font matrix for font "+t),e<0?(e=-e,s.fontDirection=-1):s.fontDirection=1,this.current.font=n,this.current.fontSize=e,n.isType3Font)return;const r=n.loadedName||"sans-serif",a=((u=n.systemFontInfo)==null?void 0:u.css)||`"${r}", ${n.fallbackName}`;let o="normal";n.black?o="900":n.bold&&(o="bold");const l=n.italic?"italic":"normal";let h=e;e<dy?h=dy:e>fy&&(h=fy),this.current.fontSizeScale=e/h,this.ctx.font=`${l} ${o} ${h}px ${a}`}setTextRenderingMode(t){this.current.textRenderingMode=t}setTextRise(t){this.current.textRise=t}moveText(t,e){this.current.x=this.current.lineX+=t,this.current.y=this.current.lineY+=e}setLeadingMoveText(t,e){this.setLeading(-e),this.moveText(t,e)}setTextMatrix(t,e,n,s,r,a){this.current.textMatrix=[t,e,n,s,r,a],this.current.textMatrixScale=Math.hypot(t,e),this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}nextLine(){this.moveText(0,this.current.leading)}paintChar(t,e,n,s){const r=this.ctx,a=this.current,o=a.font,l=a.textRenderingMode,h=a.fontSize/a.fontSizeScale,u=l&xe.FILL_STROKE_MASK,d=!!(l&xe.ADD_TO_PATH_FLAG),f=a.patternFill&&!o.missingFile;let p;(o.disableFontFace||d||f)&&(p=o.getPathGenerator(this.commonObjs,t)),o.disableFontFace||f?(r.save(),r.translate(e,n),r.beginPath(),p(r,h),s&&r.setTransform(...s),(u===xe.FILL||u===xe.FILL_STROKE)&&r.fill(),(u===xe.STROKE||u===xe.FILL_STROKE)&&r.stroke(),r.restore()):((u===xe.FILL||u===xe.FILL_STROKE)&&r.fillText(t,e,n),(u===xe.STROKE||u===xe.FILL_STROKE)&&r.strokeText(t,e,n)),d&&(this.pendingTextPaths||(this.pendingTextPaths=[])).push({transform:jt(r),x:e,y:n,fontSize:h,addToPath:p})}get isFontSubpixelAAEnabled(){const{context:t}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);t.scale(1.5,1),t.fillText("I",0,10);const e=t.getImageData(0,0,10,10).data;let n=!1;for(let s=3;s<e.length;s+=4)if(e[s]>0&&e[s]<255){n=!0;break}return ht(this,"isFontSubpixelAAEnabled",n)}showText(t){const e=this.current,n=e.font;if(n.isType3Font)return this.showType3Text(t);const s=e.fontSize;if(s===0)return;const r=this.ctx,a=e.fontSizeScale,o=e.charSpacing,l=e.wordSpacing,h=e.fontDirection,u=e.textHScale*h,d=t.length,f=n.vertical,p=f?1:-1,g=n.defaultVMetrics,m=s*e.fontMatrix[0],v=e.textRenderingMode===xe.FILL&&!n.disableFontFace&&!e.patternFill;r.save(),r.transform(...e.textMatrix),r.translate(e.x,e.y+e.textRise),h>0?r.scale(u,-1):r.scale(u,1);let y;if(e.patternFill){r.save();const _=e.fillColor.getPattern(r,this,bi(r),Ie.FILL);y=jt(r),r.restore(),r.fillStyle=_}let A=e.lineWidth;const S=e.textMatrixScale;if(S===0||A===0){const _=e.textRenderingMode&xe.FILL_STROKE_MASK;(_===xe.STROKE||_===xe.FILL_STROKE)&&(A=this.getSinglePixelWidth())}else A/=S;if(a!==1&&(r.scale(a,a),A/=a),r.lineWidth=A,n.isInvalidPDFjsFont){const _=[];let R=0;for(const k of t)_.push(k.unicode),R+=k.width;r.fillText(_.join(""),0,0),e.x+=R*m*u,r.restore(),this.compose();return}let E=0,T;for(T=0;T<d;++T){const _=t[T];if(typeof _=="number"){E+=p*_*s/1e3;continue}let R=!1;const k=(_.isSpace?l:0)+o,I=_.fontChar,D=_.accent;let M,L,N=_.width;if(f){const U=_.vmetric||g,z=-(_.vmetric?U[1]:N*.5)*m,j=U[2]*m;N=U?-U[0]:N,M=z/a,L=(E+j)/a}else M=E/a,L=0;if(n.remeasure&&N>0){const U=r.measureText(I).width*1e3/s*a;if(N<U&&this.isFontSubpixelAAEnabled){const z=N/U;R=!0,r.save(),r.scale(z,1),M/=z}else N!==U&&(M+=(N-U)/2e3*s/a)}if(this.contentVisible&&(_.isInFont||n.missingFile)){if(v&&!D)r.fillText(I,M,L);else if(this.paintChar(I,M,L,y),D){const U=M+s*D.offset.x/a,z=L-s*D.offset.y/a;this.paintChar(D.fontChar,U,z,y)}}const O=f?N*m-k*h:N*m+k*h;E+=O,R&&r.restore()}f?e.y-=E:e.x+=E*u,r.restore(),this.compose()}showType3Text(t){const e=this.ctx,n=this.current,s=n.font,r=n.fontSize,a=n.fontDirection,o=s.vertical?1:-1,l=n.charSpacing,h=n.wordSpacing,u=n.textHScale*a,d=n.fontMatrix||zf,f=t.length,p=n.textRenderingMode===xe.INVISIBLE;let g,m,v,y;if(!(p||r===0)){for(this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,e.save(),e.transform(...n.textMatrix),e.translate(n.x,n.y),e.scale(u,a),g=0;g<f;++g){if(m=t[g],typeof m=="number"){y=o*m*r/1e3,this.ctx.translate(y,0),n.x+=y*u;continue}const A=(m.isSpace?h:0)+l,S=s.charProcOperatorList[m.operatorListId];if(!S){at(`Type3 character "${m.operatorListId}" is not available.`);continue}this.contentVisible&&(this.processingType3=m,this.save(),e.scale(r,r),e.transform(...d),this.executeOperatorList(S),this.restore()),v=W.applyTransform([m.width,0],d)[0]*r+A,e.translate(v,0),n.x+=v*u}e.restore(),this.processingType3=null}}setCharWidth(t,e){}setCharWidthAndBounds(t,e,n,s,r,a){this.ctx.rect(n,s,r-n,a-s),this.ctx.clip(),this.endPath()}getColorN_Pattern(t){let e;if(t[0]==="TilingPattern"){const n=t[1],s=this.baseTransform||jt(this.ctx),r={createCanvasGraphics:a=>new Mm(a,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack})};e=new bp(t,n,this.ctx,r,s)}else e=this._getPattern(t[1],t[2]);return e}setStrokeColorN(){this.current.strokeColor=this.getColorN_Pattern(arguments)}setFillColorN(){this.current.fillColor=this.getColorN_Pattern(arguments),this.current.patternFill=!0}setStrokeRGBColor(t,e,n){this.ctx.strokeStyle=this.current.strokeColor=W.makeHexColor(t,e,n)}setStrokeTransparent(){this.ctx.strokeStyle=this.current.strokeColor="transparent"}setFillRGBColor(t,e,n){this.ctx.fillStyle=this.current.fillColor=W.makeHexColor(t,e,n),this.current.patternFill=!1}setFillTransparent(){this.ctx.fillStyle=this.current.fillColor="transparent",this.current.patternFill=!1}_getPattern(t,e=null){let n;return this.cachedPatterns.has(t)?n=this.cachedPatterns.get(t):(n=X1(this.getObject(t)),this.cachedPatterns.set(t,n)),e&&(n.matrix=e),n}shadingFill(t){if(!this.contentVisible)return;const e=this.ctx;this.save();const n=this._getPattern(t);e.fillStyle=n.getPattern(e,this,bi(e),Ie.SHADING);const s=bi(e);if(s){const{width:r,height:a}=e.canvas,[o,l,h,u]=W.getAxialAlignedBoundingBox([0,0,r,a],s);this.ctx.fillRect(o,l,h-o,u-l)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.compose(this.current.getClippedPathBoundingBox()),this.restore()}beginInlineImage(){Rt("Should not call beginInlineImage")}beginImageData(){Rt("Should not call beginImageData")}paintFormXObjectBegin(t,e){if(this.contentVisible&&(this.save(),this.baseTransformStack.push(this.baseTransform),t&&this.transform(...t),this.baseTransform=jt(this.ctx),e)){const n=e[2]-e[0],s=e[3]-e[1];this.ctx.rect(e[0],e[1],n,s),this.current.updateRectMinMax(jt(this.ctx),e),this.clip(),this.endPath()}}paintFormXObjectEnd(){this.contentVisible&&(this.restore(),this.baseTransform=this.baseTransformStack.pop())}beginGroup(t){if(!this.contentVisible)return;this.save(),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const e=this.ctx;t.isolated||Bd("TODO: Support non-isolated groups."),t.knockout&&at("Knockout groups not supported.");const n=jt(e);if(t.matrix&&e.transform(...t.matrix),!t.bbox)throw new Error("Bounding box is required.");let s=W.getAxialAlignedBoundingBox(t.bbox,jt(e));const r=[0,0,e.canvas.width,e.canvas.height];s=W.intersect(s,r)||[0,0,0,0];const a=Math.floor(s[0]),o=Math.floor(s[1]),l=Math.max(Math.ceil(s[2])-a,1),h=Math.max(Math.ceil(s[3])-o,1);this.current.startNewPathAndClipBox([0,0,l,h]);let u="groupAt"+this.groupLevel;t.smask&&(u+="_smask_"+this.smaskCounter++%2);const d=this.cachedCanvases.getCanvas(u,l,h),f=d.context;f.translate(-a,-o),f.transform(...n),t.smask?this.smaskStack.push({canvas:d.canvas,context:f,offsetX:a,offsetY:o,subtype:t.smask.subtype,backdrop:t.smask.backdrop,transferMap:t.smask.transferMap||null,startTransformInverse:null}):(e.setTransform(1,0,0,1,0,0),e.translate(a,o),e.save()),al(e,f),this.ctx=f,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(e),this.groupLevel++}endGroup(t){if(!this.contentVisible)return;this.groupLevel--;const e=this.ctx,n=this.groupStack.pop();if(this.ctx=n,this.ctx.imageSmoothingEnabled=!1,t.smask)this.tempSMask=this.smaskStack.pop(),this.restore();else{this.ctx.restore();const s=jt(this.ctx);this.restore(),this.ctx.save(),this.ctx.setTransform(...s);const r=W.getAxialAlignedBoundingBox([0,0,e.canvas.width,e.canvas.height],s);this.ctx.drawImage(e.canvas,0,0),this.ctx.restore(),this.compose(r)}}beginAnnotation(t,e,n,s,r){if(x(this,Gs,xp).call(this),Fh(this.ctx),this.ctx.save(),this.save(),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),e){const a=e[2]-e[0],o=e[3]-e[1];if(r&&this.annotationCanvasMap){n=n.slice(),n[4]-=e[0],n[5]-=e[1],e=e.slice(),e[0]=e[1]=0,e[2]=a,e[3]=o;const[l,h]=W.singularValueDecompose2dScale(jt(this.ctx)),{viewportScale:u}=this,d=Math.ceil(a*this.outputScaleX*u),f=Math.ceil(o*this.outputScaleY*u);this.annotationCanvas=this.canvasFactory.create(d,f);const{canvas:p,context:g}=this.annotationCanvas;this.annotationCanvasMap.set(t,p),this.annotationCanvas.savedCtx=this.ctx,this.ctx=g,this.ctx.save(),this.ctx.setTransform(l,0,0,-h,0,o*h),Fh(this.ctx)}else Fh(this.ctx),this.endPath(),this.ctx.rect(e[0],e[1],a,o),this.ctx.clip(),this.ctx.beginPath()}this.current=new my(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(...n),this.transform(...s)}endAnnotation(){this.annotationCanvas&&(this.ctx.restore(),x(this,Gs,Ap).call(this),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(t){if(!this.contentVisible)return;const e=t.count;t=this.getObject(t.data,t),t.count=e;const n=this.ctx,s=this.processingType3;if(s&&(s.compiled===void 0&&(s.compiled=J1(t)),s.compiled)){s.compiled(n);return}const r=this._createMaskCanvas(t),a=r.canvas;n.save(),n.setTransform(1,0,0,1,0,0),n.drawImage(a,r.offsetX,r.offsetY),n.restore(),this.compose()}paintImageMaskXObjectRepeat(t,e,n=0,s=0,r,a){if(!this.contentVisible)return;t=this.getObject(t.data,t);const o=this.ctx;o.save();const l=jt(o);o.transform(e,n,s,r,0,0);const h=this._createMaskCanvas(t);o.setTransform(1,0,0,1,h.offsetX-l[4],h.offsetY-l[5]);for(let u=0,d=a.length;u<d;u+=2){const f=W.transform(l,[e,n,s,r,a[u],a[u+1]]),[p,g]=W.applyTransform([0,0],f);o.drawImage(h.canvas,p,g)}o.restore(),this.compose()}paintImageMaskXObjectGroup(t){if(!this.contentVisible)return;const e=this.ctx,n=this.current.fillColor,s=this.current.patternFill;for(const r of t){const{data:a,width:o,height:l,transform:h}=r,u=this.cachedCanvases.getCanvas("maskCanvas",o,l),d=u.context;d.save();const f=this.getObject(a,r);vy(d,f),d.globalCompositeOperation="source-in",d.fillStyle=s?n.getPattern(d,this,bi(e),Ie.FILL):n,d.fillRect(0,0,o,l),d.restore(),e.save(),e.transform(...h),e.scale(1,-1),Oh(e,u.canvas,0,0,o,l,0,-1,1,1),e.restore()}this.compose()}paintImageXObject(t){if(!this.contentVisible)return;const e=this.getObject(t);if(!e){at("Dependent image isn't ready yet");return}this.paintInlineImageXObject(e)}paintImageXObjectRepeat(t,e,n,s){if(!this.contentVisible)return;const r=this.getObject(t);if(!r){at("Dependent image isn't ready yet");return}const a=r.width,o=r.height,l=[];for(let h=0,u=s.length;h<u;h+=2)l.push({transform:[e,0,0,n,s[h],s[h+1]],x:0,y:0,w:a,h:o});this.paintInlineImageXObjectGroup(r,l)}applyTransferMapsToCanvas(t){return this.current.transferMaps!=="none"&&(t.filter=this.current.transferMaps,t.drawImage(t.canvas,0,0),t.filter="none"),t.canvas}applyTransferMapsToBitmap(t){if(this.current.transferMaps==="none")return t.bitmap;const{bitmap:e,width:n,height:s}=t,r=this.cachedCanvases.getCanvas("inlineImage",n,s),a=r.context;return a.filter=this.current.transferMaps,a.drawImage(e,0,0),a.filter="none",r.canvas}paintInlineImageXObject(t){if(!this.contentVisible)return;const e=t.width,n=t.height,s=this.ctx;if(this.save(),!Ce){const{filter:o}=s;o!=="none"&&o!==""&&(s.filter="none")}s.scale(1/e,-1/n);let r;if(t.bitmap)r=this.applyTransferMapsToBitmap(t);else if(typeof HTMLElement=="function"&&t instanceof HTMLElement||!t.data)r=t;else{const l=this.cachedCanvases.getCanvas("inlineImage",e,n).context;yy(l,t),r=this.applyTransferMapsToCanvas(l)}const a=this._scaleImage(r,bi(s));s.imageSmoothingEnabled=by(jt(s),t.interpolate),Oh(s,a.img,0,0,a.paintWidth,a.paintHeight,0,-n,e,n),this.compose(),this.restore()}paintInlineImageXObjectGroup(t,e){if(!this.contentVisible)return;const n=this.ctx;let s;if(t.bitmap)s=t.bitmap;else{const r=t.width,a=t.height,l=this.cachedCanvases.getCanvas("inlineImage",r,a).context;yy(l,t),s=this.applyTransferMapsToCanvas(l)}for(const r of e)n.save(),n.transform(...r.transform),n.scale(1,-1),Oh(n,s,r.x,r.y,r.w,r.h,0,-1,1,1),n.restore();this.compose()}paintSolidColorImageMask(){this.contentVisible&&(this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(t){}markPointProps(t,e){}beginMarkedContent(t){this.markedContentStack.push({visible:!0})}beginMarkedContentProps(t,e){t==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(e)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(){this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(){}endCompat(){}consumePath(t){const e=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(t);const n=this.ctx;this.pendingClip&&(e||(this.pendingClip===xy?n.clip("evenodd"):n.clip()),this.pendingClip=null),this.current.startNewPathAndClipBox(this.current.clipBox),n.beginPath()}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const t=jt(this.ctx);if(t[1]===0&&t[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(t[0]),Math.abs(t[3]));else{const e=Math.abs(t[0]*t[3]-t[2]*t[1]),n=Math.hypot(t[0],t[2]),s=Math.hypot(t[1],t[3]);this._cachedGetSinglePixelWidth=Math.max(n,s)/e}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(this._cachedScaleForStroking[0]===-1){const{lineWidth:t}=this.current,{a:e,b:n,c:s,d:r}=this.ctx.getTransform();let a,o;if(n===0&&s===0){const l=Math.abs(e),h=Math.abs(r);if(l===h)if(t===0)a=o=1/l;else{const u=l*t;a=o=u<1?1/u:1}else if(t===0)a=1/l,o=1/h;else{const u=l*t,d=h*t;a=u<1?1/u:1,o=d<1?1/d:1}}else{const l=Math.abs(e*r-n*s),h=Math.hypot(e,n),u=Math.hypot(s,r);if(t===0)a=u/l,o=h/l;else{const d=t*l;a=u>d?u/d:1,o=h>d?h/d:1}}this._cachedScaleForStroking[0]=a,this._cachedScaleForStroking[1]=o}return this._cachedScaleForStroking}rescaleAndStroke(t){const{ctx:e}=this,{lineWidth:n}=this.current,[s,r]=this.getScaleForStroking();if(e.lineWidth=n||1,s===1&&r===1){e.stroke();return}const a=e.getLineDash();if(t&&e.save(),e.scale(s,r),a.length>0){const o=Math.max(s,r);e.setLineDash(a.map(l=>l/o)),e.lineDashOffset/=o}e.stroke(),t&&e.restore()}isContentVisible(){for(let t=this.markedContentStack.length-1;t>=0;t--)if(!this.markedContentStack[t].visible)return!1;return!0}};Gs=new WeakSet,xp=function(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.current.activeSMask=null,this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)},Ap=function(){if(this.pageColors){const t=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if(t!=="none"){const e=this.ctx.filter;this.ctx.filter=t,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=e}}};let ja=Mm;for(const i in Mn)ja.prototype[i]!==void 0&&(ja.prototype[Mn[i]]=ja.prototype[i]);var Cc,Pc;class Xi{static get workerPort(){return c(this,Cc)}static set workerPort(t){if(!(typeof Worker<"u"&&t instanceof Worker)&&t!==null)throw new Error("Invalid `workerPort` type.");b(this,Cc,t)}static get workerSrc(){return c(this,Pc)}static set workerSrc(t){if(typeof t!="string")throw new Error("Invalid `workerSrc` type.");b(this,Pc,t)}}Cc=new WeakMap,Pc=new WeakMap,w(Xi,Cc,null),w(Xi,Pc,"");const Nh={DATA:1,ERROR:2},Kt={CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function Ze(i){switch(i instanceof Error||typeof i=="object"&&i!==null||Rt('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),i.name){case"AbortException":return new ga(i.message);case"MissingPDFException":return new pa(i.message);case"PasswordException":return new Gf(i.message,i.code);case"UnexpectedResponseException":return new Vd(i.message,i.status);case"UnknownErrorException":return new qf(i.message,i.details);default:return new qf(i.message,i.toString())}}var io,En,ex,nx,ix,vu;class Rl{constructor(t,e,n){w(this,En);w(this,io,new AbortController);this.sourceName=t,this.targetName=e,this.comObj=n,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),n.addEventListener("message",x(this,En,ex).bind(this),{signal:c(this,io).signal})}on(t,e){const n=this.actionHandler;if(n[t])throw new Error(`There is already an actionName called "${t}"`);n[t]=e}send(t,e,n){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:t,data:e},n)}sendWithPromise(t,e,n){const s=this.callbackId++,r=Promise.withResolvers();this.callbackCapabilities[s]=r;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:t,callbackId:s,data:e},n)}catch(a){r.reject(a)}return r.promise}sendWithStream(t,e,n,s){const r=this.streamId++,a=this.sourceName,o=this.targetName,l=this.comObj;return new ReadableStream({start:h=>{const u=Promise.withResolvers();return this.streamControllers[r]={controller:h,startCall:u,pullCall:null,cancelCall:null,isClosed:!1},l.postMessage({sourceName:a,targetName:o,action:t,streamId:r,data:e,desiredSize:h.desiredSize},s),u.promise},pull:h=>{const u=Promise.withResolvers();return this.streamControllers[r].pullCall=u,l.postMessage({sourceName:a,targetName:o,stream:Kt.PULL,streamId:r,desiredSize:h.desiredSize}),u.promise},cancel:h=>{ie(h instanceof Error,"cancel must have a valid reason");const u=Promise.withResolvers();return this.streamControllers[r].cancelCall=u,this.streamControllers[r].isClosed=!0,l.postMessage({sourceName:a,targetName:o,stream:Kt.CANCEL,streamId:r,reason:Ze(h)}),u.promise}},n)}destroy(){var t;(t=c(this,io))==null||t.abort(),b(this,io,null)}}io=new WeakMap,En=new WeakSet,ex=function({data:t}){if(t.targetName!==this.sourceName)return;if(t.stream){x(this,En,ix).call(this,t);return}if(t.callback){const n=t.callbackId,s=this.callbackCapabilities[n];if(!s)throw new Error(`Cannot resolve callback ${n}`);if(delete this.callbackCapabilities[n],t.callback===Nh.DATA)s.resolve(t.data);else if(t.callback===Nh.ERROR)s.reject(Ze(t.reason));else throw new Error("Unexpected callback case");return}const e=this.actionHandler[t.action];if(!e)throw new Error(`Unknown action from worker: ${t.action}`);if(t.callbackId){const n=this.sourceName,s=t.sourceName,r=this.comObj;new Promise(function(a){a(e(t.data))}).then(function(a){r.postMessage({sourceName:n,targetName:s,callback:Nh.DATA,callbackId:t.callbackId,data:a})},function(a){r.postMessage({sourceName:n,targetName:s,callback:Nh.ERROR,callbackId:t.callbackId,reason:Ze(a)})});return}if(t.streamId){x(this,En,nx).call(this,t);return}e(t.data)},nx=function(t){const e=t.streamId,n=this.sourceName,s=t.sourceName,r=this.comObj,a=this,o=this.actionHandler[t.action],l={enqueue(h,u=1,d){if(this.isCancelled)return;const f=this.desiredSize;this.desiredSize-=u,f>0&&this.desiredSize<=0&&(this.sinkCapability=Promise.withResolvers(),this.ready=this.sinkCapability.promise),r.postMessage({sourceName:n,targetName:s,stream:Kt.ENQUEUE,streamId:e,chunk:h},d)},close(){this.isCancelled||(this.isCancelled=!0,r.postMessage({sourceName:n,targetName:s,stream:Kt.CLOSE,streamId:e}),delete a.streamSinks[e])},error(h){ie(h instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,r.postMessage({sourceName:n,targetName:s,stream:Kt.ERROR,streamId:e,reason:Ze(h)}))},sinkCapability:Promise.withResolvers(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:t.desiredSize,ready:null};l.sinkCapability.resolve(),l.ready=l.sinkCapability.promise,this.streamSinks[e]=l,new Promise(function(h){h(o(t.data,l))}).then(function(){r.postMessage({sourceName:n,targetName:s,stream:Kt.START_COMPLETE,streamId:e,success:!0})},function(h){r.postMessage({sourceName:n,targetName:s,stream:Kt.START_COMPLETE,streamId:e,reason:Ze(h)})})},ix=function(t){const e=t.streamId,n=this.sourceName,s=t.sourceName,r=this.comObj,a=this.streamControllers[e],o=this.streamSinks[e];switch(t.stream){case Kt.START_COMPLETE:t.success?a.startCall.resolve():a.startCall.reject(Ze(t.reason));break;case Kt.PULL_COMPLETE:t.success?a.pullCall.resolve():a.pullCall.reject(Ze(t.reason));break;case Kt.PULL:if(!o){r.postMessage({sourceName:n,targetName:s,stream:Kt.PULL_COMPLETE,streamId:e,success:!0});break}o.desiredSize<=0&&t.desiredSize>0&&o.sinkCapability.resolve(),o.desiredSize=t.desiredSize,new Promise(function(l){var h;l((h=o.onPull)==null?void 0:h.call(o))}).then(function(){r.postMessage({sourceName:n,targetName:s,stream:Kt.PULL_COMPLETE,streamId:e,success:!0})},function(l){r.postMessage({sourceName:n,targetName:s,stream:Kt.PULL_COMPLETE,streamId:e,reason:Ze(l)})});break;case Kt.ENQUEUE:if(ie(a,"enqueue should have stream controller"),a.isClosed)break;a.controller.enqueue(t.chunk);break;case Kt.CLOSE:if(ie(a,"close should have stream controller"),a.isClosed)break;a.isClosed=!0,a.controller.close(),x(this,En,vu).call(this,a,e);break;case Kt.ERROR:ie(a,"error should have stream controller"),a.controller.error(Ze(t.reason)),x(this,En,vu).call(this,a,e);break;case Kt.CANCEL_COMPLETE:t.success?a.cancelCall.resolve():a.cancelCall.reject(Ze(t.reason)),x(this,En,vu).call(this,a,e);break;case Kt.CANCEL:if(!o)break;new Promise(function(l){var h;l((h=o.onCancel)==null?void 0:h.call(o,Ze(t.reason)))}).then(function(){r.postMessage({sourceName:n,targetName:s,stream:Kt.CANCEL_COMPLETE,streamId:e,success:!0})},function(l){r.postMessage({sourceName:n,targetName:s,stream:Kt.CANCEL_COMPLETE,streamId:e,reason:Ze(l)})}),o.sinkCapability.reject(Ze(t.reason)),o.isCancelled=!0,delete this.streamSinks[e];break;default:throw new Error("Unexpected stream case")}},vu=async function(t,e){var n,s,r;await Promise.allSettled([(n=t.startCall)==null?void 0:n.promise,(s=t.pullCall)==null?void 0:s.promise,(r=t.cancelCall)==null?void 0:r.promise]),delete this.streamControllers[e]};var Cr,Rc;class iT{constructor({parsedData:t,rawData:e}){w(this,Cr);w(this,Rc);b(this,Cr,t),b(this,Rc,e)}getRaw(){return c(this,Rc)}get(t){return c(this,Cr).get(t)??null}getAll(){return Og(c(this,Cr))}has(t){return c(this,Cr).has(t)}}Cr=new WeakMap,Rc=new WeakMap;const Ta=Symbol("INTERNAL");var kc,Mc,Lc,so;class sT{constructor(t,{name:e,intent:n,usage:s,rbGroups:r}){w(this,kc,!1);w(this,Mc,!1);w(this,Lc,!1);w(this,so,!0);b(this,kc,!!(t&cn.DISPLAY)),b(this,Mc,!!(t&cn.PRINT)),this.name=e,this.intent=n,this.usage=s,this.rbGroups=r}get visible(){if(c(this,Lc))return c(this,so);if(!c(this,so))return!1;const{print:t,view:e}=this.usage;return c(this,kc)?(e==null?void 0:e.viewState)!=="OFF":c(this,Mc)?(t==null?void 0:t.printState)!=="OFF":!0}_setVisible(t,e,n=!1){t!==Ta&&Rt("Internal method `_setVisible` called."),b(this,Lc,n),b(this,so,e)}}kc=new WeakMap,Mc=new WeakMap,Lc=new WeakMap,so=new WeakMap;var Ss,At,ro,ao,Ic,wp;class rT{constructor(t,e=cn.DISPLAY){w(this,Ic);w(this,Ss,null);w(this,At,new Map);w(this,ro,null);w(this,ao,null);if(this.renderingIntent=e,this.name=null,this.creator=null,t!==null){this.name=t.name,this.creator=t.creator,b(this,ao,t.order);for(const n of t.groups)c(this,At).set(n.id,new sT(e,n));if(t.baseState==="OFF")for(const n of c(this,At).values())n._setVisible(Ta,!1);for(const n of t.on)c(this,At).get(n)._setVisible(Ta,!0);for(const n of t.off)c(this,At).get(n)._setVisible(Ta,!1);b(this,ro,this.getHash())}}isVisible(t){if(c(this,At).size===0)return!0;if(!t)return Bd("Optional content group not defined."),!0;if(t.type==="OCG")return c(this,At).has(t.id)?c(this,At).get(t.id).visible:(at(`Optional content group not found: ${t.id}`),!0);if(t.type==="OCMD"){if(t.expression)return x(this,Ic,wp).call(this,t.expression);if(!t.policy||t.policy==="AnyOn"){for(const e of t.ids){if(!c(this,At).has(e))return at(`Optional content group not found: ${e}`),!0;if(c(this,At).get(e).visible)return!0}return!1}else if(t.policy==="AllOn"){for(const e of t.ids){if(!c(this,At).has(e))return at(`Optional content group not found: ${e}`),!0;if(!c(this,At).get(e).visible)return!1}return!0}else if(t.policy==="AnyOff"){for(const e of t.ids){if(!c(this,At).has(e))return at(`Optional content group not found: ${e}`),!0;if(!c(this,At).get(e).visible)return!0}return!1}else if(t.policy==="AllOff"){for(const e of t.ids){if(!c(this,At).has(e))return at(`Optional content group not found: ${e}`),!0;if(c(this,At).get(e).visible)return!1}return!0}return at(`Unknown optional content policy ${t.policy}.`),!0}return at(`Unknown group type ${t.type}.`),!0}setVisibility(t,e=!0,n=!0){var r;const s=c(this,At).get(t);if(!s){at(`Optional content group not found: ${t}`);return}if(n&&e&&s.rbGroups.length)for(const a of s.rbGroups)for(const o of a)o!==t&&((r=c(this,At).get(o))==null||r._setVisible(Ta,!1,!0));s._setVisible(Ta,!!e,!0),b(this,Ss,null)}setOCGState({state:t,preserveRB:e}){let n;for(const s of t){switch(s){case"ON":case"OFF":case"Toggle":n=s;continue}const r=c(this,At).get(s);if(r)switch(n){case"ON":this.setVisibility(s,!0,e);break;case"OFF":this.setVisibility(s,!1,e);break;case"Toggle":this.setVisibility(s,!r.visible,e);break}}b(this,Ss,null)}get hasInitialVisibility(){return c(this,ro)===null||this.getHash()===c(this,ro)}getOrder(){return c(this,At).size?c(this,ao)?c(this,ao).slice():[...c(this,At).keys()]:null}getGroups(){return c(this,At).size>0?Og(c(this,At)):null}getGroup(t){return c(this,At).get(t)||null}getHash(){if(c(this,Ss)!==null)return c(this,Ss);const t=new W0;for(const[e,n]of c(this,At))t.update(`${e}:${n.visible}`);return b(this,Ss,t.hexdigest())}}Ss=new WeakMap,At=new WeakMap,ro=new WeakMap,ao=new WeakMap,Ic=new WeakSet,wp=function(t){const e=t.length;if(e<2)return!0;const n=t[0];for(let s=1;s<e;s++){const r=t[s];let a;if(Array.isArray(r))a=x(this,Ic,wp).call(this,r);else if(c(this,At).has(r))a=c(this,At).get(r).visible;else return at(`Optional content group not found: ${r}`),!0;switch(n){case"And":if(!a)return!1;break;case"Or":if(a)return!0;break;case"Not":return!a;default:return!0}}return n==="And"};class aT{constructor(t,{disableRange:e=!1,disableStream:n=!1}){ie(t,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.');const{length:s,initialData:r,progressiveDone:a,contentDispositionFilename:o}=t;if(this._queuedChunks=[],this._progressiveDone=a,this._contentDispositionFilename=o,(r==null?void 0:r.length)>0){const l=r instanceof Uint8Array&&r.byteLength===r.buffer.byteLength?r.buffer:new Uint8Array(r).buffer;this._queuedChunks.push(l)}this._pdfDataRangeTransport=t,this._isStreamingSupported=!n,this._isRangeSupported=!e,this._contentLength=s,this._fullRequestReader=null,this._rangeReaders=[],t.addRangeListener((l,h)=>{this._onReceiveData({begin:l,chunk:h})}),t.addProgressListener((l,h)=>{this._onProgress({loaded:l,total:h})}),t.addProgressiveReadListener(l=>{this._onReceiveData({chunk:l})}),t.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),t.transportReady()}_onReceiveData({begin:t,chunk:e}){const n=e instanceof Uint8Array&&e.byteLength===e.buffer.byteLength?e.buffer:new Uint8Array(e).buffer;if(t===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(n):this._queuedChunks.push(n);else{const s=this._rangeReaders.some(function(r){return r._begin!==t?!1:(r._enqueue(n),!0)});ie(s,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){var t;return((t=this._fullRequestReader)==null?void 0:t._loaded)??0}_onProgress(t){var e,n,s,r;t.total===void 0?(n=(e=this._rangeReaders[0])==null?void 0:e.onProgress)==null||n.call(e,{loaded:t.loaded}):(r=(s=this._fullRequestReader)==null?void 0:s.onProgress)==null||r.call(s,{loaded:t.loaded,total:t.total})}_onProgressiveDone(){var t;(t=this._fullRequestReader)==null||t.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(t){const e=this._rangeReaders.indexOf(t);e>=0&&this._rangeReaders.splice(e,1)}getFullReader(){ie(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const t=this._queuedChunks;return this._queuedChunks=null,new oT(this,t,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(t,e){if(e<=this._progressiveDataLength)return null;const n=new lT(this,t,e);return this._pdfDataRangeTransport.requestDataRange(t,e),this._rangeReaders.push(n),n}cancelAllRequests(t){var e;(e=this._fullRequestReader)==null||e.cancel(t);for(const n of this._rangeReaders.slice(0))n.cancel(t);this._pdfDataRangeTransport.abort()}}class oT{constructor(t,e,n=!1,s=null){this._stream=t,this._done=n||!1,this._filename=jg(s)?s:null,this._queuedChunks=e||[],this._loaded=0;for(const r of this._queuedChunks)this._loaded+=r.byteLength;this._requests=[],this._headersReady=Promise.resolve(),t._fullRequestReader=this,this.onProgress=null}_enqueue(t){this._done||(this._requests.length>0?this._requests.shift().resolve({value:t,done:!1}):this._queuedChunks.push(t),this._loaded+=t.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0;for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class lT{constructor(t,e,n){this._stream=t,this._begin=e,this._end=n,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(t){if(!this._done){if(this._requests.length===0)this._queuedChunk=t;else{this._requests.shift().resolve({value:t,done:!1});for(const n of this._requests)n.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const e=this._queuedChunk;return this._queuedChunk=null,{value:e,done:!1}}if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0;for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}function cT(i){let t=!0,e=n("filename\\*","i").exec(i);if(e){e=e[1];let u=o(e);return u=unescape(u),u=l(u),u=h(u),r(u)}if(e=a(i),e){const u=h(e);return r(u)}if(e=n("filename","i").exec(i),e){e=e[1];let u=o(e);return u=h(u),r(u)}function n(u,d){return new RegExp("(?:^|;)\\s*"+u+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',d)}function s(u,d){if(u){if(!/^[\x00-\xFF]+$/.test(d))return d;try{const f=new TextDecoder(u,{fatal:!0}),p=Hd(d);d=f.decode(p),t=!1}catch{}}return d}function r(u){return t&&/[\x80-\xff]/.test(u)&&(u=s("utf-8",u),t&&(u=s("iso-8859-1",u))),u}function a(u){const d=[];let f;const p=n("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(f=p.exec(u))!==null;){let[,m,v,y]=f;if(m=parseInt(m,10),m in d){if(m===0)break;continue}d[m]=[v,y]}const g=[];for(let m=0;m<d.length&&m in d;++m){let[v,y]=d[m];y=o(y),v&&(y=unescape(y),m===0&&(y=l(y))),g.push(y)}return g.join("")}function o(u){if(u.startsWith('"')){const d=u.slice(1).split('\\"');for(let f=0;f<d.length;++f){const p=d[f].indexOf('"');p!==-1&&(d[f]=d[f].slice(0,p),d.length=f+1),d[f]=d[f].replaceAll(/\\(.)/g,"$1")}u=d.join('"')}return u}function l(u){const d=u.indexOf("'");if(d===-1)return u;const f=u.slice(0,d),g=u.slice(d+1).replace(/^[^']*'/,"");return s(f,g)}function h(u){return!u.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(u)?u:u.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(d,f,p,g){if(p==="q"||p==="Q")return g=g.replaceAll("_"," "),g=g.replaceAll(/=([0-9a-fA-F]{2})/g,function(m,v){return String.fromCharCode(parseInt(v,16))}),s(f,g);try{g=atob(g)}catch{}return s(f,g)})}return""}function Ug(i,t){const e=new Headers;if(!i||!t||typeof t!="object")return e;for(const n in t){const s=t[n];s!==void 0&&e.append(n,s)}return e}function Wg({responseHeaders:i,isHttp:t,rangeChunkSize:e,disableRange:n}){const s={allowRangeRequests:!1,suggestedLength:void 0},r=parseInt(i.get("Content-Length"),10);return!Number.isInteger(r)||(s.suggestedLength=r,r<=2*e)||n||!t||i.get("Accept-Ranges")!=="bytes"||(i.get("Content-Encoding")||"identity")!=="identity"||(s.allowRangeRequests=!0),s}function zg(i){const t=i.get("Content-Disposition");if(t){let e=cT(t);if(e.includes("%"))try{e=decodeURIComponent(e)}catch{}if(jg(e))return e}return null}function Wd(i,t){return i===404||i===0&&t.startsWith("file:")?new pa('Missing PDF "'+t+'".'):new Vd(`Unexpected server response (${i}) while retrieving PDF "${t}".`,i)}function sx(i){return i===200||i===206}function rx(i,t,e){return{method:"GET",headers:i,signal:e.signal,mode:"cors",credentials:t?"include":"same-origin",redirect:"follow"}}function ax(i){return i instanceof Uint8Array?i.buffer:i instanceof ArrayBuffer?i:(at(`getArrayBuffer - unexpected data format: ${i}`),new Uint8Array(i).buffer)}class Ay{constructor(t){this.source=t,this.isHttp=/^https?:/i.test(t.url),this.headers=Ug(this.isHttp,t.httpHeaders),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var t;return((t=this._fullRequestReader)==null?void 0:t._loaded)??0}getFullReader(){return ie(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new hT(this),this._fullRequestReader}getRangeReader(t,e){if(e<=this._progressiveDataLength)return null;const n=new uT(this,t,e);return this._rangeRequestReaders.push(n),n}cancelAllRequests(t){var e;(e=this._fullRequestReader)==null||e.cancel(t);for(const n of this._rangeRequestReaders.slice(0))n.cancel(t)}}class hT{constructor(t){this._stream=t,this._reader=null,this._loaded=0,this._filename=null;const e=t.source;this._withCredentials=e.withCredentials||!1,this._contentLength=e.length,this._headersCapability=Promise.withResolvers(),this._disableRange=e.disableRange||!1,this._rangeChunkSize=e.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!e.disableStream,this._isRangeSupported=!e.disableRange;const n=new Headers(t.headers),s=e.url;fetch(s,rx(n,this._withCredentials,this._abortController)).then(r=>{if(!sx(r.status))throw Wd(r.status,s);this._reader=r.body.getReader(),this._headersCapability.resolve();const a=r.headers,{allowRangeRequests:o,suggestedLength:l}=Wg({responseHeaders:a,isHttp:t.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=o,this._contentLength=l||this._contentLength,this._filename=zg(a),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new ga("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var n;await this._headersCapability.promise;const{value:t,done:e}=await this._reader.read();return e?{value:t,done:e}:(this._loaded+=t.byteLength,(n=this.onProgress)==null||n.call(this,{loaded:this._loaded,total:this._contentLength}),{value:ax(t),done:!1})}cancel(t){var e;(e=this._reader)==null||e.cancel(t),this._abortController.abort()}}class uT{constructor(t,e,n){this._stream=t,this._reader=null,this._loaded=0;const s=t.source;this._withCredentials=s.withCredentials||!1,this._readCapability=Promise.withResolvers(),this._isStreamingSupported=!s.disableStream,this._abortController=new AbortController;const r=new Headers(t.headers);r.append("Range",`bytes=${e}-${n-1}`);const a=s.url;fetch(a,rx(r,this._withCredentials,this._abortController)).then(o=>{if(!sx(o.status))throw Wd(o.status,a);this._readCapability.resolve(),this._reader=o.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){var n;await this._readCapability.promise;const{value:t,done:e}=await this._reader.read();return e?{value:t,done:e}:(this._loaded+=t.byteLength,(n=this.onProgress)==null||n.call(this,{loaded:this._loaded}),{value:ax(t),done:!1})}cancel(t){var e;(e=this._reader)==null||e.cancel(t),this._abortController.abort()}}const pf=200,gf=206;function dT(i){const t=i.response;return typeof t!="string"?t:Hd(t).buffer}class fT{constructor({url:t,httpHeaders:e,withCredentials:n}){this.url=t,this.isHttp=/^https?:/i.test(t),this.headers=Ug(this.isHttp,e),this.withCredentials=n||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}requestRange(t,e,n){const s={begin:t,end:e};for(const r in n)s[r]=n[r];return this.request(s)}requestFull(t){return this.request(t)}request(t){const e=new XMLHttpRequest,n=this.currXhrId++,s=this.pendingRequests[n]={xhr:e};e.open("GET",this.url),e.withCredentials=this.withCredentials;for(const[r,a]of this.headers)e.setRequestHeader(r,a);return this.isHttp&&"begin"in t&&"end"in t?(e.setRequestHeader("Range",`bytes=${t.begin}-${t.end-1}`),s.expectedStatus=gf):s.expectedStatus=pf,e.responseType="arraybuffer",t.onError&&(e.onerror=function(r){t.onError(e.status)}),e.onreadystatechange=this.onStateChange.bind(this,n),e.onprogress=this.onProgress.bind(this,n),s.onHeadersReceived=t.onHeadersReceived,s.onDone=t.onDone,s.onError=t.onError,s.onProgress=t.onProgress,e.send(null),n}onProgress(t,e){var s;const n=this.pendingRequests[t];n&&((s=n.onProgress)==null||s.call(n,e))}onStateChange(t,e){var l,h,u;const n=this.pendingRequests[t];if(!n)return;const s=n.xhr;if(s.readyState>=2&&n.onHeadersReceived&&(n.onHeadersReceived(),delete n.onHeadersReceived),s.readyState!==4||!(t in this.pendingRequests))return;if(delete this.pendingRequests[t],s.status===0&&this.isHttp){(l=n.onError)==null||l.call(n,s.status);return}const r=s.status||pf;if(!(r===pf&&n.expectedStatus===gf)&&r!==n.expectedStatus){(h=n.onError)==null||h.call(n,s.status);return}const o=dT(s);if(r===gf){const d=s.getResponseHeader("Content-Range"),f=/bytes (\d+)-(\d+)\/(\d+)/.exec(d);n.onDone({begin:parseInt(f[1],10),chunk:o})}else o?n.onDone({begin:0,chunk:o}):(u=n.onError)==null||u.call(n,s.status)}getRequestXhr(t){return this.pendingRequests[t].xhr}isPendingRequest(t){return t in this.pendingRequests}abortRequest(t){const e=this.pendingRequests[t].xhr;delete this.pendingRequests[t],e.abort()}}class pT{constructor(t){this._source=t,this._manager=new fT(t),this._rangeChunkSize=t.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(t){const e=this._rangeRequestReaders.indexOf(t);e>=0&&this._rangeRequestReaders.splice(e,1)}getFullReader(){return ie(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new gT(this._manager,this._source),this._fullRequestReader}getRangeReader(t,e){const n=new mT(this._manager,t,e);return n.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(n),n}cancelAllRequests(t){var e;(e=this._fullRequestReader)==null||e.cancel(t);for(const n of this._rangeRequestReaders.slice(0))n.cancel(t)}}class gT{constructor(t,e){this._manager=t;const n={onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=e.url,this._fullRequestId=t.requestFull(n),this._headersCapability=Promise.withResolvers(),this._disableRange=e.disableRange||!1,this._contentLength=e.length,this._rangeChunkSize=e.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const t=this._fullRequestId,e=this._manager.getRequestXhr(t),n=new Headers(e.getAllResponseHeaders().trim().split(/[\r\n]+/).map(a=>{const[o,...l]=a.split(": ");return[o,l.join(": ")]})),{allowRangeRequests:s,suggestedLength:r}=Wg({responseHeaders:n,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});s&&(this._isRangeSupported=!0),this._contentLength=r||this._contentLength,this._filename=zg(n),this._isRangeSupported&&this._manager.abortRequest(t),this._headersCapability.resolve()}_onDone(t){if(t&&(this._requests.length>0?this._requests.shift().resolve({value:t.chunk,done:!1}):this._cachedChunks.push(t.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(t){this._storedError=Wd(t,this._url),this._headersCapability.reject(this._storedError);for(const e of this._requests)e.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(t){var e;(e=this.onProgress)==null||e.call(this,{loaded:t.loaded,total:t.lengthComputable?t.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersCapability.promise}async read(){if(this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0,this._headersCapability.reject(t);for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class mT{constructor(t,e,n){this._manager=t;const s={onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=t.url,this._requestId=t.requestRange(e,n,s),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_close(){var t;(t=this.onClosed)==null||t.call(this,this)}_onDone(t){const e=t.chunk;this._requests.length>0?this._requests.shift().resolve({value:e,done:!1}):this._queuedChunk=e,this._done=!0;for(const n of this._requests)n.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(t){this._storedError=Wd(t,this._url);for(const e of this._requests)e.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(t){var e;this.isStreamingSupported||(e=this.onProgress)==null||e.call(this,{loaded:t.loaded})}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const e=this._queuedChunk;return this._queuedChunk=null,{value:e,done:!1}}if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0;for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}const yT=/^[a-z][a-z0-9\-+.]+:/i;function vT(i){if(yT.test(i))return new URL(i);const t=Hs.get("url");return new URL(t.pathToFileURL(i))}function ox(i,t,e){return i.protocol==="http:"?Hs.get("http").request(i,{headers:t},e):Hs.get("https").request(i,{headers:t},e)}class bT{constructor(t){this.source=t,this.url=vT(t.url),this.isHttp=this.url.protocol==="http:"||this.url.protocol==="https:",this.isFsUrl=this.url.protocol==="file:",this.headers=Ug(this.isHttp,t.httpHeaders),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var t;return((t=this._fullRequestReader)==null?void 0:t._loaded)??0}getFullReader(){return ie(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=this.isFsUrl?new wT(this):new xT(this),this._fullRequestReader}getRangeReader(t,e){if(e<=this._progressiveDataLength)return null;const n=this.isFsUrl?new ST(this,t,e):new AT(this,t,e);return this._rangeRequestReaders.push(n),n}cancelAllRequests(t){var e;(e=this._fullRequestReader)==null||e.cancel(t);for(const n of this._rangeRequestReaders.slice(0))n.cancel(t)}}class lx{constructor(t){this._url=t.url,this._done=!1,this._storedError=null,this.onProgress=null;const e=t.source;this._contentLength=e.length,this._loaded=0,this._filename=null,this._disableRange=e.disableRange||!1,this._rangeChunkSize=e.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!e.disableStream,this._isRangeSupported=!e.disableRange,this._readableStream=null,this._readCapability=Promise.withResolvers(),this._headersCapability=Promise.withResolvers()}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var n;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const t=this._readableStream.read();return t===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=t.length,(n=this.onProgress)==null||n.call(this,{loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(t).buffer,done:!1})}cancel(t){if(!this._readableStream){this._error(t);return}this._readableStream.destroy(t)}_error(t){this._storedError=t,this._readCapability.resolve()}_setReadableStream(t){this._readableStream=t,t.on("readable",()=>{this._readCapability.resolve()}),t.on("end",()=>{t.destroy(),this._done=!0,this._readCapability.resolve()}),t.on("error",e=>{this._error(e)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new ga("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class cx{constructor(t){this._url=t.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=Promise.withResolvers();const e=t.source;this._isStreamingSupported=!e.disableStream}get isStreamingSupported(){return this._isStreamingSupported}async read(){var n;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const t=this._readableStream.read();return t===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=t.length,(n=this.onProgress)==null||n.call(this,{loaded:this._loaded}),{value:new Uint8Array(t).buffer,done:!1})}cancel(t){if(!this._readableStream){this._error(t);return}this._readableStream.destroy(t)}_error(t){this._storedError=t,this._readCapability.resolve()}_setReadableStream(t){this._readableStream=t,t.on("readable",()=>{this._readCapability.resolve()}),t.on("end",()=>{t.destroy(),this._done=!0,this._readCapability.resolve()}),t.on("error",e=>{this._error(e)}),this._storedError&&this._readableStream.destroy(this._storedError)}}class xT extends lx{constructor(t){super(t);const e=Object.fromEntries(t.headers),n=s=>{if(s.statusCode===404){const l=new pa(`Missing PDF "${this._url}".`);this._storedError=l,this._headersCapability.reject(l);return}this._headersCapability.resolve(),this._setReadableStream(s);const r=new Headers(this._readableStream.headers),{allowRangeRequests:a,suggestedLength:o}=Wg({responseHeaders:r,isHttp:t.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=a,this._contentLength=o||this._contentLength,this._filename=zg(r)};this._request=ox(this._url,e,n),this._request.on("error",s=>{this._storedError=s,this._headersCapability.reject(s)}),this._request.end()}}class AT extends cx{constructor(t,e,n){super(t);const s=Object.fromEntries(t.headers);s.Range=`bytes=${e}-${n-1}`;const r=a=>{if(a.statusCode===404){const o=new pa(`Missing PDF "${this._url}".`);this._storedError=o;return}this._setReadableStream(a)};this._request=ox(this._url,s,r),this._request.on("error",a=>{this._storedError=a}),this._request.end()}}class wT extends lx{constructor(t){super(t);const e=Hs.get("fs");e.promises.lstat(this._url).then(n=>{this._contentLength=n.size,this._setReadableStream(e.createReadStream(this._url)),this._headersCapability.resolve()},n=>{n.code==="ENOENT"&&(n=new pa(`Missing PDF "${this._url}".`)),this._storedError=n,this._headersCapability.reject(n)})}}class ST extends cx{constructor(t,e,n){super(t);const s=Hs.get("fs");this._setReadableStream(s.createReadStream(this._url,{start:e,end:n-1}))}}const ET=1e5,Be=30,_T=.8;var Tb,Es,$e,Dc,Oc,Pr,ki,Fc,Nc,Rr,oo,lo,_s,co,jc,ho,kr,Bc,Vc,$t,Mr,Lr,Hc,Ts,uo,es,hx,ux,Ep,dn,bu,_p,dx,fx;let Sp=($t=class{constructor({textContentSource:t,container:e,viewport:n}){w(this,es);w(this,Es,Promise.withResolvers());w(this,$e,null);w(this,Dc,!1);w(this,Oc,!!((Tb=globalThis.FontInspector)!=null&&Tb.enabled));w(this,Pr,null);w(this,ki,null);w(this,Fc,0);w(this,Nc,0);w(this,Rr,null);w(this,oo,null);w(this,lo,0);w(this,_s,0);w(this,co,Object.create(null));w(this,jc,[]);w(this,ho,null);w(this,kr,[]);w(this,Bc,new WeakMap);w(this,Vc,null);var l;if(t instanceof ReadableStream)b(this,ho,t);else if(typeof t=="object")b(this,ho,new ReadableStream({start(h){h.enqueue(t),h.close()}}));else throw new Error('No "textContentSource" parameter specified.');b(this,$e,b(this,oo,e)),b(this,_s,n.scale*(globalThis.devicePixelRatio||1)),b(this,lo,n.rotation),b(this,ki,{div:null,properties:null,ctx:null});const{pageWidth:s,pageHeight:r,pageX:a,pageY:o}=n.rawDims;b(this,Vc,[1,0,0,-1,-a,o+r]),b(this,Nc,s),b(this,Fc,r),x(l=$t,dn,dx).call(l),la(e,n),c(this,Es).promise.finally(()=>{c($t,uo).delete(this),b(this,ki,null),b(this,co,null)}).catch(()=>{})}static get fontFamilyMap(){const{isWindows:t,isFirefox:e}=De.platform;return ht(this,"fontFamilyMap",new Map([["sans-serif",`${t&&e?"Calibri, ":""}sans-serif`],["monospace",`${t&&e?"Lucida Console, ":""}monospace`]]))}render(){const t=()=>{c(this,Rr).read().then(({value:e,done:n})=>{if(n){c(this,Es).resolve();return}c(this,Pr)??b(this,Pr,e.lang),Object.assign(c(this,co),e.styles),x(this,es,hx).call(this,e.items),t()},c(this,Es).reject)};return b(this,Rr,c(this,ho).getReader()),c($t,uo).add(this),t(),c(this,Es).promise}update({viewport:t,onBefore:e=null}){var r;const n=t.scale*(globalThis.devicePixelRatio||1),s=t.rotation;if(s!==c(this,lo)&&(e==null||e(),b(this,lo,s),la(c(this,oo),{rotation:s})),n!==c(this,_s)){e==null||e(),b(this,_s,n);const a={div:null,properties:null,ctx:x(r=$t,dn,bu).call(r,c(this,Pr))};for(const o of c(this,kr))a.properties=c(this,Bc).get(o),a.div=o,x(this,es,Ep).call(this,a)}}cancel(){var e;const t=new ga("TextLayer task cancelled.");(e=c(this,Rr))==null||e.cancel(t).catch(()=>{}),b(this,Rr,null),c(this,Es).reject(t)}get textDivs(){return c(this,kr)}get textContentItemsStr(){return c(this,jc)}static cleanup(){if(!(c(this,uo).size>0)){c(this,Mr).clear();for(const{canvas:t}of c(this,Lr).values())t.remove();c(this,Lr).clear()}}},Es=new WeakMap,$e=new WeakMap,Dc=new WeakMap,Oc=new WeakMap,Pr=new WeakMap,ki=new WeakMap,Fc=new WeakMap,Nc=new WeakMap,Rr=new WeakMap,oo=new WeakMap,lo=new WeakMap,_s=new WeakMap,co=new WeakMap,jc=new WeakMap,ho=new WeakMap,kr=new WeakMap,Bc=new WeakMap,Vc=new WeakMap,Mr=new WeakMap,Lr=new WeakMap,Hc=new WeakMap,Ts=new WeakMap,uo=new WeakMap,es=new WeakSet,hx=function(t){var s,r;if(c(this,Dc))return;(r=c(this,ki)).ctx??(r.ctx=x(s=$t,dn,bu).call(s,c(this,Pr)));const e=c(this,kr),n=c(this,jc);for(const a of t){if(e.length>ET){at("Ignoring additional textDivs for performance reasons."),b(this,Dc,!0);return}if(a.str===void 0){if(a.type==="beginMarkedContentProps"||a.type==="beginMarkedContent"){const o=c(this,$e);b(this,$e,document.createElement("span")),c(this,$e).classList.add("markedContent"),a.id!==null&&c(this,$e).setAttribute("id",`${a.id}`),o.append(c(this,$e))}else a.type==="endMarkedContent"&&b(this,$e,c(this,$e).parentNode);continue}n.push(a.str),x(this,es,ux).call(this,a)}},ux=function(t){var m;const e=document.createElement("span"),n={angle:0,canvasWidth:0,hasText:t.str!=="",hasEOL:t.hasEOL,fontSize:0};c(this,kr).push(e);const s=W.transform(c(this,Vc),t.transform);let r=Math.atan2(s[1],s[0]);const a=c(this,co)[t.fontName];a.vertical&&(r+=Math.PI/2);let o=c(this,Oc)&&a.fontSubstitution||a.fontFamily;o=$t.fontFamilyMap.get(o)||o;const l=Math.hypot(s[2],s[3]),h=l*x(m=$t,dn,fx).call(m,o,c(this,Pr));let u,d;r===0?(u=s[4],d=s[5]-h):(u=s[4]+h*Math.sin(r),d=s[5]-h*Math.cos(r));const f="calc(var(--scale-factor)*",p=e.style;c(this,$e)===c(this,oo)?(p.left=`${(100*u/c(this,Nc)).toFixed(2)}%`,p.top=`${(100*d/c(this,Fc)).toFixed(2)}%`):(p.left=`${f}${u.toFixed(2)}px)`,p.top=`${f}${d.toFixed(2)}px)`),p.fontSize=`${f}${(c($t,Ts)*l).toFixed(2)}px)`,p.fontFamily=o,n.fontSize=l,e.setAttribute("role","presentation"),e.textContent=t.str,e.dir=t.dir,c(this,Oc)&&(e.dataset.fontName=a.fontSubstitutionLoadedName||t.fontName),r!==0&&(n.angle=r*(180/Math.PI));let g=!1;if(t.str.length>1)g=!0;else if(t.str!==" "&&t.transform[0]!==t.transform[3]){const v=Math.abs(t.transform[0]),y=Math.abs(t.transform[3]);v!==y&&Math.max(v,y)/Math.min(v,y)>1.5&&(g=!0)}if(g&&(n.canvasWidth=a.vertical?t.height:t.width),c(this,Bc).set(e,n),c(this,ki).div=e,c(this,ki).properties=n,x(this,es,Ep).call(this,c(this,ki)),n.hasText&&c(this,$e).append(e),n.hasEOL){const v=document.createElement("br");v.setAttribute("role","presentation"),c(this,$e).append(v)}},Ep=function(t){var o;const{div:e,properties:n,ctx:s}=t,{style:r}=e;let a="";if(c($t,Ts)>1&&(a=`scale(${1/c($t,Ts)})`),n.canvasWidth!==0&&n.hasText){const{fontFamily:l}=r,{canvasWidth:h,fontSize:u}=n;x(o=$t,dn,_p).call(o,s,u*c(this,_s),l);const{width:d}=s.measureText(e.textContent);d>0&&(a=`scaleX(${h*c(this,_s)/d}) ${a}`)}n.angle!==0&&(a=`rotate(${n.angle}deg) ${a}`),a.length>0&&(r.transform=a)},dn=new WeakSet,bu=function(t=null){let e=c(this,Lr).get(t||(t=""));if(!e){const n=document.createElement("canvas");n.className="hiddenCanvasElement",n.lang=t,document.body.append(n),e=n.getContext("2d",{alpha:!1,willReadFrequently:!0}),c(this,Lr).set(t,e),c(this,Hc).set(e,{size:0,family:""})}return e},_p=function(t,e,n){const s=c(this,Hc).get(t);e===s.size&&n===s.family||(t.font=`${e}px ${n}`,s.size=e,s.family=n)},dx=function(){if(c(this,Ts)!==null)return;const t=document.createElement("div");t.style.opacity=0,t.style.lineHeight=1,t.style.fontSize="1px",t.style.position="absolute",t.textContent="X",document.body.append(t),b(this,Ts,t.getBoundingClientRect().height),t.remove()},fx=function(t,e){const n=c(this,Mr).get(t);if(n)return n;const s=x(this,dn,bu).call(this,e);s.canvas.width=s.canvas.height=Be,x(this,dn,_p).call(this,s,Be,t);const r=s.measureText("");let a=r.fontBoundingBoxAscent,o=Math.abs(r.fontBoundingBoxDescent);if(a){const u=a/(a+o);return c(this,Mr).set(t,u),s.canvas.width=s.canvas.height=0,u}s.strokeStyle="red",s.clearRect(0,0,Be,Be),s.strokeText("g",0,0);let l=s.getImageData(0,0,Be,Be).data;o=0;for(let u=l.length-1-3;u>=0;u-=4)if(l[u]>0){o=Math.ceil(u/4/Be);break}s.clearRect(0,0,Be,Be),s.strokeText("A",0,Be),l=s.getImageData(0,0,Be,Be).data,a=0;for(let u=0,d=l.length;u<d;u+=4)if(l[u]>0){a=Be-Math.floor(u/4/Be);break}s.canvas.width=s.canvas.height=0;const h=a?a/(a+o):_T;return c(this,Mr).set(t,h),h},w($t,dn),w($t,Mr,new Map),w($t,Lr,new Map),w($t,Hc,new WeakMap),w($t,Ts,null),w($t,uo,new Set),$t);class tc{static textContent(t){const e=[],n={items:e,styles:Object.create(null)};function s(r){var l;if(!r)return;let a=null;const o=r.name;if(o==="#text")a=r.value;else if(tc.shouldBuildText(o))(l=r==null?void 0:r.attributes)!=null&&l.textContent?a=r.attributes.textContent:r.value&&(a=r.value);else return;if(a!==null&&e.push({str:a}),!!r.children)for(const h of r.children)s(h)}return s(t),n}static shouldBuildText(t){return!(t==="textarea"||t==="input"||t==="option"||t==="select")}}const TT=65536,CT=100,PT=5e3,RT=Ce?H1:j1,kT=Ce?$1:K0,MT=Ce?V1:B1,LT=Ce?U1:J0;function IT(i={}){typeof i=="string"||i instanceof URL?i={url:i}:(i instanceof ArrayBuffer||ArrayBuffer.isView(i))&&(i={data:i});const t=new Tp,{docId:e}=t,n=i.url?DT(i.url):null,s=i.data?OT(i.data):null,r=i.httpHeaders||null,a=i.withCredentials===!0,o=i.password??null,l=i.range instanceof px?i.range:null,h=Number.isInteger(i.rangeChunkSize)&&i.rangeChunkSize>0?i.rangeChunkSize:TT;let u=i.worker instanceof Ba?i.worker:null;const d=i.verbosity,f=typeof i.docBaseUrl=="string"&&!Ud(i.docBaseUrl)?i.docBaseUrl:null,p=typeof i.cMapUrl=="string"?i.cMapUrl:null,g=i.cMapPacked!==!1,m=i.CMapReaderFactory||kT,v=typeof i.standardFontDataUrl=="string"?i.standardFontDataUrl:null,y=i.StandardFontDataFactory||LT,A=i.stopAtErrors!==!0,S=Number.isInteger(i.maxImageSize)&&i.maxImageSize>-1?i.maxImageSize:-1,E=i.isEvalSupported!==!1,T=typeof i.isOffscreenCanvasSupported=="boolean"?i.isOffscreenCanvasSupported:!Ce,_=typeof i.isChrome=="boolean"?i.isChrome:!De.platform.isFirefox&&typeof window<"u"&&!!(window!=null&&window.chrome),R=Number.isInteger(i.canvasMaxAreaInBytes)?i.canvasMaxAreaInBytes:-1,k=typeof i.disableFontFace=="boolean"?i.disableFontFace:Ce,I=i.fontExtraProperties===!0,D=i.enableXfa===!0,M=i.ownerDocument||globalThis.document,L=i.disableRange===!0,N=i.disableStream===!0,O=i.disableAutoFetch===!0,U=i.pdfBug===!0,z=i.CanvasFactory||RT,j=i.FilterFactory||MT,V=i.enableHWA===!0,tt=l?l.length:i.length??NaN,yt=typeof i.useSystemFonts=="boolean"?i.useSystemFonts:!Ce&&!k,ft=typeof i.useWorkerFetch=="boolean"?i.useWorkerFetch:m===K0&&y===J0&&p&&v&&wl(p,document.baseURI)&&wl(v,document.baseURI);i.canvasFactory&&cy("`canvasFactory`-instance option, please use `CanvasFactory` instead."),i.filterFactory&&cy("`filterFactory`-instance option, please use `FilterFactory` instead.");const st=null;g1(d);const lt={canvasFactory:new z({ownerDocument:M,enableHWA:V}),filterFactory:new j({docId:e,ownerDocument:M}),cMapReaderFactory:ft?null:new m({baseUrl:p,isCompressed:g}),standardFontDataFactory:ft?null:new y({baseUrl:v})};if(!u){const gt={verbosity:d,port:Xi.workerPort};u=gt.port?Ba.fromPort(gt):new Ba(gt),t._worker=u}const It={docId:e,apiVersion:"4.8.69",data:s,password:o,disableAutoFetch:O,rangeChunkSize:h,length:tt,docBaseUrl:f,enableXfa:D,evaluatorOptions:{maxImageSize:S,disableFontFace:k,ignoreErrors:A,isEvalSupported:E,isOffscreenCanvasSupported:T,isChrome:_,canvasMaxAreaInBytes:R,fontExtraProperties:I,useSystemFonts:yt,cMapUrl:ft?p:null,standardFontDataUrl:ft?v:null}},Wt={disableFontFace:k,fontExtraProperties:I,ownerDocument:M,pdfBug:U,styleElement:st,loadingParams:{disableAutoFetch:O,enableXfa:D}};return u.promise.then(function(){if(t.destroyed)throw new Error("Loading aborted");if(u.destroyed)throw new Error("Worker was destroyed");const gt=u.messageHandler.sendWithPromise("GetDocRequest",It,s?[s.buffer]:null);let Y;if(l)Y=new aT(l,{disableRange:L,disableStream:N});else if(!s){if(!n)throw new Error("getDocument - no `url` parameter provided.");let rt;Ce?rt=typeof fetch<"u"&&typeof Response<"u"&&"body"in Response.prototype&&wl(n)?Ay:bT:rt=wl(n)?Ay:pT,Y=new rt({url:n,length:tt,httpHeaders:r,withCredentials:a,rangeChunkSize:h,disableRange:L,disableStream:N})}return gt.then(rt=>{if(t.destroyed)throw new Error("Loading aborted");if(u.destroyed)throw new Error("Worker was destroyed");const Tt=new Rl(e,rt,u.port),zt=new BT(Tt,t,Y,Wt,lt);t._transport=zt,Tt.send("Ready",null)})}).catch(t._capability.reject),t}function DT(i){if(i instanceof URL)return i.href;try{return new URL(i,window.location).href}catch{if(Ce&&typeof i=="string")return i}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}function OT(i){if(Ce&&typeof Buffer<"u"&&i instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(i instanceof Uint8Array&&i.byteLength===i.buffer.byteLength)return i;if(typeof i=="string")return Hd(i);if(i instanceof ArrayBuffer||ArrayBuffer.isView(i)||typeof i=="object"&&!isNaN(i==null?void 0:i.length))return new Uint8Array(i);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}function wy(i){return typeof i=="object"&&Number.isInteger(i==null?void 0:i.num)&&i.num>=0&&Number.isInteger(i==null?void 0:i.gen)&&i.gen>=0}var yd;const vd=class vd{constructor(){this._capability=Promise.withResolvers(),this._transport=null,this._worker=null,this.docId=`d${ke(vd,yd)._++}`,this.destroyed=!1,this.onPassword=null,this.onProgress=null}get promise(){return this._capability.promise}async destroy(){var t,e,n;this.destroyed=!0;try{(t=this._worker)!=null&&t.port&&(this._worker._pendingDestroy=!0),await((e=this._transport)==null?void 0:e.destroy())}catch(s){throw(n=this._worker)!=null&&n.port&&delete this._worker._pendingDestroy,s}this._transport=null,this._worker&&(this._worker.destroy(),this._worker=null)}};yd=new WeakMap,w(vd,yd,0);let Tp=vd,px=class{constructor(t,e,n=!1,s=null){this.length=t,this.initialData=e,this.progressiveDone=n,this.contentDispositionFilename=s,this._rangeListeners=[],this._progressListeners=[],this._progressiveReadListeners=[],this._progressiveDoneListeners=[],this._readyCapability=Promise.withResolvers()}addRangeListener(t){this._rangeListeners.push(t)}addProgressListener(t){this._progressListeners.push(t)}addProgressiveReadListener(t){this._progressiveReadListeners.push(t)}addProgressiveDoneListener(t){this._progressiveDoneListeners.push(t)}onDataRange(t,e){for(const n of this._rangeListeners)n(t,e)}onDataProgress(t,e){this._readyCapability.promise.then(()=>{for(const n of this._progressListeners)n(t,e)})}onDataProgressiveRead(t){this._readyCapability.promise.then(()=>{for(const e of this._progressiveReadListeners)e(t)})}onDataProgressiveDone(){this._readyCapability.promise.then(()=>{for(const t of this._progressiveDoneListeners)t()})}transportReady(){this._readyCapability.resolve()}requestDataRange(t,e){Rt("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}};class FT{constructor(t,e){this._pdfInfo=t,this._transport=e}get annotationStorage(){return this._transport.annotationStorage}get canvasFactory(){return this._transport.canvasFactory}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return ht(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(t){return this._transport.getPage(t)}getPageIndex(t){return this._transport.getPageIndex(t)}getDestinations(){return this._transport.getDestinations()}getDestination(t){return this._transport.getDestination(t)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig({intent:t="display"}={}){const{renderingIntent:e}=this._transport.getRenderingIntent(t);return this._transport.getOptionalContentConfig(e)}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(t=!1){return this._transport.startCleanup(t||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}cachedPageNumber(t){return this._transport.cachedPageNumber(t)}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}var Cs,Mi,wn,Ca,xu;class NT{constructor(t,e,n,s=!1){w(this,wn);w(this,Cs,null);w(this,Mi,!1);this._pageIndex=t,this._pageInfo=e,this._transport=n,this._stats=s?new ly:null,this._pdfBug=s,this.commonObjs=n.commonObjs,this.objs=new gx,this._maybeCleanupAfterRender=!1,this._intentStates=new Map,this.destroyed=!1}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:t,rotation:e=this.rotate,offsetX:n=0,offsetY:s=0,dontFlip:r=!1}={}){return new wh({viewBox:this.view,scale:t,rotation:e,offsetX:n,offsetY:s,dontFlip:r})}getAnnotations({intent:t="display"}={}){const{renderingIntent:e}=this._transport.getRenderingIntent(t);return this._transport.getAnnotations(this._pageIndex,e)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return ht(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){var t;return((t=this._transport._htmlForXfa)==null?void 0:t.children[this._pageIndex])||null}render({canvasContext:t,viewport:e,intent:n="display",annotationMode:s=us.ENABLE,transform:r=null,background:a=null,optionalContentConfigPromise:o=null,annotationCanvasMap:l=null,pageColors:h=null,printAnnotationStorage:u=null,isEditing:d=!1}){var E,T;(E=this._stats)==null||E.time("Overall");const f=this._transport.getRenderingIntent(n,s,u,d),{renderingIntent:p,cacheKey:g}=f;b(this,Mi,!1),x(this,wn,xu).call(this),o||(o=this._transport.getOptionalContentConfig(p));let m=this._intentStates.get(g);m||(m=Object.create(null),this._intentStates.set(g,m)),m.streamReaderCancelTimeout&&(clearTimeout(m.streamReaderCancelTimeout),m.streamReaderCancelTimeout=null);const v=!!(p&cn.PRINT);m.displayReadyCapability||(m.displayReadyCapability=Promise.withResolvers(),m.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(T=this._stats)==null||T.time("Page Request"),this._pumpOperatorList(f));const y=_=>{var R;m.renderTasks.delete(A),(this._maybeCleanupAfterRender||v)&&b(this,Mi,!0),x(this,wn,Ca).call(this,!v),_?(A.capability.reject(_),this._abortOperatorList({intentState:m,reason:_ instanceof Error?_:new Error(_)})):A.capability.resolve(),this._stats&&(this._stats.timeEnd("Rendering"),this._stats.timeEnd("Overall"),(R=globalThis.Stats)!=null&&R.enabled&&globalThis.Stats.add(this.pageNumber,this._stats))},A=new Pp({callback:y,params:{canvasContext:t,viewport:e,transform:r,background:a},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:l,operatorList:m.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!v,pdfBug:this._pdfBug,pageColors:h});(m.renderTasks||(m.renderTasks=new Set)).add(A);const S=A.task;return Promise.all([m.displayReadyCapability.promise,o]).then(([_,R])=>{var k;if(this.destroyed){y();return}if((k=this._stats)==null||k.time("Rendering"),!(R.renderingIntent&p))throw new Error("Must use the same `intent`-argument when calling the `PDFPageProxy.render` and `PDFDocumentProxy.getOptionalContentConfig` methods.");A.initializeGraphics({transparency:_,optionalContentConfig:R}),A.operatorListChanged()}).catch(y),S}getOperatorList({intent:t="display",annotationMode:e=us.ENABLE,printAnnotationStorage:n=null,isEditing:s=!1}={}){var h;function r(){o.operatorList.lastChunk&&(o.opListReadCapability.resolve(o.operatorList),o.renderTasks.delete(l))}const a=this._transport.getRenderingIntent(t,e,n,s,!0);let o=this._intentStates.get(a.cacheKey);o||(o=Object.create(null),this._intentStates.set(a.cacheKey,o));let l;return o.opListReadCapability||(l=Object.create(null),l.operatorListChanged=r,o.opListReadCapability=Promise.withResolvers(),(o.renderTasks||(o.renderTasks=new Set)).add(l),o.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(h=this._stats)==null||h.time("Page Request"),this._pumpOperatorList(a)),o.opListReadCapability.promise}streamTextContent({includeMarkedContent:t=!1,disableNormalization:e=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:t===!0,disableNormalization:e===!0},{highWaterMark:100,size(s){return s.items.length}})}getTextContent(t={}){if(this._transport._htmlForXfa)return this.getXfa().then(n=>tc.textContent(n));const e=this.streamTextContent(t);return new Promise(function(n,s){function r(){a.read().then(function({value:l,done:h}){if(h){n(o);return}o.lang??(o.lang=l.lang),Object.assign(o.styles,l.styles),o.items.push(...l.items),r()},s)}const a=e.getReader(),o={items:[],styles:Object.create(null),lang:null};r()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const t=[];for(const e of this._intentStates.values())if(this._abortOperatorList({intentState:e,reason:new Error("Page was destroyed."),force:!0}),!e.opListReadCapability)for(const n of e.renderTasks)t.push(n.completed),n.cancel();return this.objs.clear(),b(this,Mi,!1),x(this,wn,xu).call(this),Promise.all(t)}cleanup(t=!1){b(this,Mi,!0);const e=x(this,wn,Ca).call(this,!1);return t&&e&&this._stats&&(this._stats=new ly),e}_startRenderPage(t,e){var s,r;const n=this._intentStates.get(e);n&&((s=this._stats)==null||s.timeEnd("Page Request"),(r=n.displayReadyCapability)==null||r.resolve(t))}_renderPageChunk(t,e){for(let n=0,s=t.length;n<s;n++)e.operatorList.fnArray.push(t.fnArray[n]),e.operatorList.argsArray.push(t.argsArray[n]);e.operatorList.lastChunk=t.lastChunk,e.operatorList.separateAnnots=t.separateAnnots;for(const n of e.renderTasks)n.operatorListChanged();t.lastChunk&&x(this,wn,Ca).call(this,!0)}_pumpOperatorList({renderingIntent:t,cacheKey:e,annotationStorageSerializable:n,modifiedIds:s}){const{map:r,transfer:a}=n,l=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:t,cacheKey:e,annotationStorage:r,modifiedIds:s},a).getReader(),h=this._intentStates.get(e);h.streamReader=l;const u=()=>{l.read().then(({value:d,done:f})=>{if(f){h.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(d,h),u())},d=>{if(h.streamReader=null,!this._transport.destroyed){if(h.operatorList){h.operatorList.lastChunk=!0;for(const f of h.renderTasks)f.operatorListChanged();x(this,wn,Ca).call(this,!0)}if(h.displayReadyCapability)h.displayReadyCapability.reject(d);else if(h.opListReadCapability)h.opListReadCapability.reject(d);else throw d}})};u()}_abortOperatorList({intentState:t,reason:e,force:n=!1}){if(t.streamReader){if(t.streamReaderCancelTimeout&&(clearTimeout(t.streamReaderCancelTimeout),t.streamReaderCancelTimeout=null),!n){if(t.renderTasks.size>0)return;if(e instanceof Ng){let s=CT;e.extraDelay>0&&e.extraDelay<1e3&&(s+=e.extraDelay),t.streamReaderCancelTimeout=setTimeout(()=>{t.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:t,reason:e,force:!0})},s);return}}if(t.streamReader.cancel(new ga(e.message)).catch(()=>{}),t.streamReader=null,!this._transport.destroyed){for(const[s,r]of this._intentStates)if(r===t){this._intentStates.delete(s);break}this.cleanup()}}}get stats(){return this._stats}}Cs=new WeakMap,Mi=new WeakMap,wn=new WeakSet,Ca=function(t=!1){if(x(this,wn,xu).call(this),!c(this,Mi)||this.destroyed)return!1;if(t)return b(this,Cs,setTimeout(()=>{b(this,Cs,null),x(this,wn,Ca).call(this,!1)},PT)),!1;for(const{renderTasks:e,operatorList:n}of this._intentStates.values())if(e.size>0||!n.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),b(this,Mi,!1),!0},xu=function(){c(this,Cs)&&(clearTimeout(c(this,Cs)),b(this,Cs,null))};var Li,bd;class jT{constructor(){w(this,Li,new Map);w(this,bd,Promise.resolve())}postMessage(t,e){const n={data:structuredClone(t,e?{transfer:e}:null)};c(this,bd).then(()=>{for(const[s]of c(this,Li))s.call(this,n)})}addEventListener(t,e,n=null){let s=null;if((n==null?void 0:n.signal)instanceof AbortSignal){const{signal:r}=n;if(r.aborted){at("LoopbackPort - cannot use an `aborted` signal.");return}const a=()=>this.removeEventListener(t,e);s=()=>r.removeEventListener("abort",a),r.addEventListener("abort",a)}c(this,Li).set(e,s)}removeEventListener(t,e){const n=c(this,Li).get(e);n==null||n(),c(this,Li).delete(e)}terminate(){for(const[,t]of c(this,Li))t==null||t();c(this,Li).clear()}}Li=new WeakMap,bd=new WeakMap;var xd,Ir,Dr,fo,Au,po,wu;const Lt=class Lt{constructor({name:t=null,port:e=null,verbosity:n=m1()}={}){w(this,fo);var s;if(this.name=t,this.destroyed=!1,this.verbosity=n,this._readyCapability=Promise.withResolvers(),this._port=null,this._webWorker=null,this._messageHandler=null,e){if((s=c(Lt,Dr))!=null&&s.has(e))throw new Error("Cannot use more than one PDFWorker per port.");(c(Lt,Dr)||b(Lt,Dr,new WeakMap)).set(e,this),this._initializeFromPort(e);return}this._initialize()}get promise(){return Ce?Promise.all([Hs.promise,this._readyCapability.promise]):this._readyCapability.promise}get port(){return this._port}get messageHandler(){return this._messageHandler}_initializeFromPort(t){this._port=t,this._messageHandler=new Rl("main","worker",t),this._messageHandler.on("ready",function(){}),x(this,fo,Au).call(this)}_initialize(){if(c(Lt,Ir)||c(Lt,po,wu)){this._setupFakeWorker();return}let{workerSrc:t}=Lt;try{Lt._isSameOrigin(window.location.href,t)||(t=Lt._createCDNWrapper(new URL(t,window.location).href));const e=new Worker(t,{type:"module"}),n=new Rl("main","worker",e),s=()=>{r.abort(),n.destroy(),e.terminate(),this.destroyed?this._readyCapability.reject(new Error("Worker was destroyed")):this._setupFakeWorker()},r=new AbortController;e.addEventListener("error",()=>{this._webWorker||s()},{signal:r.signal}),n.on("test",o=>{if(r.abort(),this.destroyed||!o){s();return}this._messageHandler=n,this._port=e,this._webWorker=e,x(this,fo,Au).call(this)}),n.on("ready",o=>{if(r.abort(),this.destroyed){s();return}try{a()}catch{this._setupFakeWorker()}});const a=()=>{const o=new Uint8Array;n.send("test",o,[o.buffer])};a();return}catch{Bd("The worker has been disabled.")}this._setupFakeWorker()}_setupFakeWorker(){c(Lt,Ir)||(at("Setting up fake worker."),b(Lt,Ir,!0)),Lt._setupFakeWorkerGlobal.then(t=>{if(this.destroyed){this._readyCapability.reject(new Error("Worker was destroyed"));return}const e=new jT;this._port=e;const n=`fake${ke(Lt,xd)._++}`,s=new Rl(n+"_worker",n,e);t.setup(s,e),this._messageHandler=new Rl(n,n+"_worker",e),x(this,fo,Au).call(this)}).catch(t=>{this._readyCapability.reject(new Error(`Setting up fake worker failed: "${t.message}".`))})}destroy(){var t;this.destroyed=!0,this._webWorker&&(this._webWorker.terminate(),this._webWorker=null),(t=c(Lt,Dr))==null||t.delete(this._port),this._port=null,this._messageHandler&&(this._messageHandler.destroy(),this._messageHandler=null)}static fromPort(t){var n;if(!(t!=null&&t.port))throw new Error("PDFWorker.fromPort - invalid method signature.");const e=(n=c(this,Dr))==null?void 0:n.get(t.port);if(e){if(e._pendingDestroy)throw new Error("PDFWorker.fromPort - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return e}return new Lt(t)}static get workerSrc(){if(Xi.workerSrc)return Xi.workerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _setupFakeWorkerGlobal(){return ht(this,"_setupFakeWorkerGlobal",(async()=>c(this,po,wu)?c(this,po,wu):(await import(this.workerSrc)).WorkerMessageHandler)())}};xd=new WeakMap,Ir=new WeakMap,Dr=new WeakMap,fo=new WeakSet,Au=function(){this._readyCapability.resolve(),this._messageHandler.send("configure",{verbosity:this.verbosity})},po=new WeakSet,wu=function(){var t;try{return((t=globalThis.pdfjsWorker)==null?void 0:t.WorkerMessageHandler)||null}catch{return null}},w(Lt,po),w(Lt,xd,0),w(Lt,Ir,!1),w(Lt,Dr),Ce&&(b(Lt,Ir,!0),Xi.workerSrc||(Xi.workerSrc="./pdf.worker.mjs")),Lt._isSameOrigin=(t,e)=>{let n;try{if(n=new URL(t),!n.origin||n.origin==="null")return!1}catch{return!1}const s=new URL(e,n);return n.origin===s.origin},Lt._createCDNWrapper=t=>{const e=`await import("${t}");`;return URL.createObjectURL(new Blob([e],{type:"text/javascript"}))};let Ba=Lt;var Ii,ri,go,mo,ai,Or,kl;class BT{constructor(t,e,n,s,r){w(this,Or);w(this,Ii,new Map);w(this,ri,new Map);w(this,go,new Map);w(this,mo,new Map);w(this,ai,null);this.messageHandler=t,this.loadingTask=e,this.commonObjs=new gx,this.fontLoader=new F1({ownerDocument:s.ownerDocument,styleElement:s.styleElement}),this.loadingParams=s.loadingParams,this._params=s,this.canvasFactory=r.canvasFactory,this.filterFactory=r.filterFactory,this.cMapReaderFactory=r.cMapReaderFactory,this.standardFontDataFactory=r.standardFontDataFactory,this.destroyed=!1,this.destroyCapability=null,this._networkStream=n,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=Promise.withResolvers(),this.setupMessageHandler()}get annotationStorage(){return ht(this,"annotationStorage",new Hg)}getRenderingIntent(t,e=us.ENABLE,n=null,s=!1,r=!1){let a=cn.DISPLAY,o=pp;switch(t){case"any":a=cn.ANY;break;case"display":break;case"print":a=cn.PRINT;break;default:at(`getRenderingIntent - invalid intent: ${t}`)}const l=a&cn.PRINT&&n instanceof G0?n:this.annotationStorage;switch(e){case us.DISABLE:a+=cn.ANNOTATIONS_DISABLE;break;case us.ENABLE:break;case us.ENABLE_FORMS:a+=cn.ANNOTATIONS_FORMS;break;case us.ENABLE_STORAGE:a+=cn.ANNOTATIONS_STORAGE,o=l.serializable;break;default:at(`getRenderingIntent - invalid annotationMode: ${e}`)}s&&(a+=cn.IS_EDITING),r&&(a+=cn.OPLIST);const{ids:h,hash:u}=l.modifiedIds,d=[a,o.hash,u];return{renderingIntent:a,cacheKey:d.join("_"),annotationStorageSerializable:o,modifiedIds:h}}destroy(){var n;if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=Promise.withResolvers(),(n=c(this,ai))==null||n.reject(new Error("Worker was destroyed during onPassword callback"));const t=[];for(const s of c(this,ri).values())t.push(s._destroy());c(this,ri).clear(),c(this,go).clear(),c(this,mo).clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const e=this.messageHandler.sendWithPromise("Terminate",null);return t.push(e),Promise.all(t).then(()=>{var s;this.commonObjs.clear(),this.fontLoader.clear(),c(this,Ii).clear(),this.filterFactory.destroy(),Sp.cleanup(),(s=this._networkStream)==null||s.cancelAllRequests(new ga("Worker was terminated.")),this.messageHandler&&(this.messageHandler.destroy(),this.messageHandler=null),this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:t,loadingTask:e}=this;t.on("GetReader",(n,s)=>{ie(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=r=>{this._lastProgress={loaded:r.loaded,total:r.total}},s.onPull=()=>{this._fullReader.read().then(function({value:r,done:a}){if(a){s.close();return}ie(r instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),s.enqueue(new Uint8Array(r),1,[r])}).catch(r=>{s.error(r)})},s.onCancel=r=>{this._fullReader.cancel(r),s.ready.catch(a=>{if(!this.destroyed)throw a})}}),t.on("ReaderHeadersReady",async n=>{var o;await this._fullReader.headersReady;const{isStreamingSupported:s,isRangeSupported:r,contentLength:a}=this._fullReader;return(!s||!r)&&(this._lastProgress&&((o=e.onProgress)==null||o.call(e,this._lastProgress)),this._fullReader.onProgress=l=>{var h;(h=e.onProgress)==null||h.call(e,{loaded:l.loaded,total:l.total})}),{isStreamingSupported:s,isRangeSupported:r,contentLength:a}}),t.on("GetRangeReader",(n,s)=>{ie(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const r=this._networkStream.getRangeReader(n.begin,n.end);if(!r){s.close();return}s.onPull=()=>{r.read().then(function({value:a,done:o}){if(o){s.close();return}ie(a instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),s.enqueue(new Uint8Array(a),1,[a])}).catch(a=>{s.error(a)})},s.onCancel=a=>{r.cancel(a),s.ready.catch(o=>{if(!this.destroyed)throw o})}}),t.on("GetDoc",({pdfInfo:n})=>{this._numPages=n.numPages,this._htmlForXfa=n.htmlForXfa,delete n.htmlForXfa,e._capability.resolve(new FT(n,this))}),t.on("DocException",function(n){let s;switch(n.name){case"PasswordException":s=new Gf(n.message,n.code);break;case"InvalidPDFException":s=new v0(n.message);break;case"MissingPDFException":s=new pa(n.message);break;case"UnexpectedResponseException":s=new Vd(n.message,n.status);break;case"UnknownErrorException":s=new qf(n.message,n.details);break;default:Rt("DocException - expected a valid Error.")}e._capability.reject(s)}),t.on("PasswordRequest",n=>{if(b(this,ai,Promise.withResolvers()),e.onPassword){const s=r=>{r instanceof Error?c(this,ai).reject(r):c(this,ai).resolve({password:r})};try{e.onPassword(s,n.code)}catch(r){c(this,ai).reject(r)}}else c(this,ai).reject(new Gf(n.message,n.code));return c(this,ai).promise}),t.on("DataLoaded",n=>{var s;(s=e.onProgress)==null||s.call(e,{loaded:n.length,total:n.length}),this.downloadInfoCapability.resolve(n)}),t.on("StartRenderPage",n=>{if(this.destroyed)return;c(this,ri).get(n.pageIndex)._startRenderPage(n.transparency,n.cacheKey)}),t.on("commonobj",([n,s,r])=>{var a;if(this.destroyed||this.commonObjs.has(n))return null;switch(s){case"Font":const{disableFontFace:o,fontExtraProperties:l,pdfBug:h}=this._params;if("error"in r){const p=r.error;at(`Error during font loading: ${p}`),this.commonObjs.resolve(n,p);break}const u=h&&((a=globalThis.FontInspector)!=null&&a.enabled)?(p,g)=>globalThis.FontInspector.fontAdded(p,g):null,d=new N1(r,{disableFontFace:o,inspectFont:u});this.fontLoader.bind(d).catch(()=>t.sendWithPromise("FontFallback",{id:n})).finally(()=>{!l&&d.data&&(d.data=null),this.commonObjs.resolve(n,d)});break;case"CopyLocalImage":const{imageRef:f}=r;ie(f,"The imageRef must be defined.");for(const p of c(this,ri).values())for(const[,g]of p.objs)if((g==null?void 0:g.ref)===f)return g.dataLen?(this.commonObjs.resolve(n,structuredClone(g)),g.dataLen):null;break;case"FontPath":case"Image":case"Pattern":this.commonObjs.resolve(n,r);break;default:throw new Error(`Got unknown common object type ${s}`)}return null}),t.on("obj",([n,s,r,a])=>{var l;if(this.destroyed)return;const o=c(this,ri).get(s);if(!o.objs.has(n)){if(o._intentStates.size===0){(l=a==null?void 0:a.bitmap)==null||l.close();return}switch(r){case"Image":o.objs.resolve(n,a),(a==null?void 0:a.dataLen)>u1&&(o._maybeCleanupAfterRender=!0);break;case"Pattern":o.objs.resolve(n,a);break;default:throw new Error(`Got unknown object type ${r}`)}}}),t.on("DocProgress",n=>{var s;this.destroyed||(s=e.onProgress)==null||s.call(e,{loaded:n.loaded,total:n.total})}),t.on("FetchBuiltInCMap",async n=>{if(this.destroyed)throw new Error("Worker was destroyed.");if(!this.cMapReaderFactory)throw new Error("CMapReaderFactory not initialized, see the `useWorkerFetch` parameter.");return this.cMapReaderFactory.fetch(n)}),t.on("FetchStandardFontData",async n=>{if(this.destroyed)throw new Error("Worker was destroyed.");if(!this.standardFontDataFactory)throw new Error("StandardFontDataFactory not initialized, see the `useWorkerFetch` parameter.");return this.standardFontDataFactory.fetch(n)})}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){var n;this.annotationStorage.size<=0&&at("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");const{map:t,transfer:e}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:t,filename:((n=this._fullReader)==null?void 0:n.filename)??null},e).finally(()=>{this.annotationStorage.resetModified()})}getPage(t){if(!Number.isInteger(t)||t<=0||t>this._numPages)return Promise.reject(new Error("Invalid page request."));const e=t-1,n=c(this,go).get(e);if(n)return n;const s=this.messageHandler.sendWithPromise("GetPage",{pageIndex:e}).then(r=>{if(this.destroyed)throw new Error("Transport destroyed");r.refStr&&c(this,mo).set(r.refStr,t);const a=new NT(e,r,this,this._params.pdfBug);return c(this,ri).set(e,a),a});return c(this,go).set(e,s),s}getPageIndex(t){return wy(t)?this.messageHandler.sendWithPromise("GetPageIndex",{num:t.num,gen:t.gen}):Promise.reject(new Error("Invalid pageIndex request."))}getAnnotations(t,e){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:t,intent:e})}getFieldObjects(){return x(this,Or,kl).call(this,"GetFieldObjects")}hasJSActions(){return x(this,Or,kl).call(this,"HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(t){return typeof t!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:t})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getDocJSActions(){return x(this,Or,kl).call(this,"GetDocJSActions")}getPageJSActions(t){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:t})}getStructTree(t){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:t})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(t){return x(this,Or,kl).call(this,"GetOptionalContentConfig").then(e=>new rT(e,t))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const t="GetMetadata",e=c(this,Ii).get(t);if(e)return e;const n=this.messageHandler.sendWithPromise(t,null).then(s=>{var r,a;return{info:s[0],metadata:s[1]?new iT(s[1]):null,contentDispositionFilename:((r=this._fullReader)==null?void 0:r.filename)??null,contentLength:((a=this._fullReader)==null?void 0:a.contentLength)??null}});return c(this,Ii).set(t,n),n}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(t=!1){if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const e of c(this,ri).values())if(!e.cleanup())throw new Error(`startCleanup: Page ${e.pageNumber} is currently rendering.`);this.commonObjs.clear(),t||this.fontLoader.clear(),c(this,Ii).clear(),this.filterFactory.destroy(!0),Sp.cleanup()}}cachedPageNumber(t){if(!wy(t))return null;const e=t.gen===0?`${t.num}R`:`${t.num}R${t.gen}`;return c(this,mo).get(e)??null}}Ii=new WeakMap,ri=new WeakMap,go=new WeakMap,mo=new WeakMap,ai=new WeakMap,Or=new WeakSet,kl=function(t,e=null){const n=c(this,Ii).get(t);if(n)return n;const s=this.messageHandler.sendWithPromise(t,e);return c(this,Ii).set(t,s),s};const jh=Symbol("INITIAL_DATA");var Nn,$c,Cp;class gx{constructor(){w(this,$c);w(this,Nn,Object.create(null))}get(t,e=null){if(e){const s=x(this,$c,Cp).call(this,t);return s.promise.then(()=>e(s.data)),null}const n=c(this,Nn)[t];if(!n||n.data===jh)throw new Error(`Requesting object that isn't resolved yet ${t}.`);return n.data}has(t){const e=c(this,Nn)[t];return!!e&&e.data!==jh}resolve(t,e=null){const n=x(this,$c,Cp).call(this,t);n.data=e,n.resolve()}clear(){var t;for(const e in c(this,Nn)){const{data:n}=c(this,Nn)[e];(t=n==null?void 0:n.bitmap)==null||t.close()}b(this,Nn,Object.create(null))}*[Symbol.iterator](){for(const t in c(this,Nn)){const{data:e}=c(this,Nn)[t];e!==jh&&(yield[t,e])}}}Nn=new WeakMap,$c=new WeakSet,Cp=function(t){var e;return(e=c(this,Nn))[t]||(e[t]={...Promise.withResolvers(),data:jh})};var Ps;class VT{constructor(t){w(this,Ps,null);b(this,Ps,t),this.onContinue=null}get promise(){return c(this,Ps).capability.promise}cancel(t=0){c(this,Ps).cancel(null,t)}get separateAnnots(){const{separateAnnots:t}=c(this,Ps).operatorList;if(!t)return!1;const{annotationCanvasMap:e}=c(this,Ps);return t.form||t.canvas&&(e==null?void 0:e.size)>0}}Ps=new WeakMap;var Rs,Fr;const rr=class rr{constructor({callback:t,params:e,objs:n,commonObjs:s,annotationCanvasMap:r,operatorList:a,pageIndex:o,canvasFactory:l,filterFactory:h,useRequestAnimationFrame:u=!1,pdfBug:d=!1,pageColors:f=null}){w(this,Rs,null);this.callback=t,this.params=e,this.objs=n,this.commonObjs=s,this.annotationCanvasMap=r,this.operatorListIdx=null,this.operatorList=a,this._pageIndex=o,this.canvasFactory=l,this.filterFactory=h,this._pdfBug=d,this.pageColors=f,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=u===!0&&typeof window<"u",this.cancelled=!1,this.capability=Promise.withResolvers(),this.task=new VT(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=e.canvasContext.canvas}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:t=!1,optionalContentConfig:e}){var o,l;if(this.cancelled)return;if(this._canvas){if(c(rr,Fr).has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");c(rr,Fr).add(this._canvas)}this._pdfBug&&((o=globalThis.StepperManager)!=null&&o.enabled)&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{canvasContext:n,viewport:s,transform:r,background:a}=this.params;this.gfx=new ja(n,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:e},this.annotationCanvasMap,this.pageColors),this.gfx.beginDrawing({transform:r,viewport:s,transparency:t,background:a}),this.operatorListIdx=0,this.graphicsReady=!0,(l=this.graphicsReadyCallback)==null||l.call(this)}cancel(t=null,e=0){var n;this.running=!1,this.cancelled=!0,(n=this.gfx)==null||n.endDrawing(),c(this,Rs)&&(window.cancelAnimationFrame(c(this,Rs)),b(this,Rs,null)),c(rr,Fr).delete(this._canvas),this.callback(t||new Ng(`Rendering cancelled, page ${this._pageIndex+1}`,e))}operatorListChanged(){var t;if(!this.graphicsReady){this.graphicsReadyCallback||(this.graphicsReadyCallback=this._continueBound);return}(t=this.stepper)==null||t.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?b(this,Rs,window.requestAnimationFrame(()=>{b(this,Rs,null),this._nextBound().catch(this._cancelBound)})):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),c(rr,Fr).delete(this._canvas),this.callback())))}};Rs=new WeakMap,Fr=new WeakMap,w(rr,Fr,new WeakSet);let Pp=rr;const HT="4.8.69",$T="3634dab10";function Sy(i){return Math.floor(Math.max(0,Math.min(1,i))*255).toString(16).padStart(2,"0")}function ol(i){return Math.max(0,Math.min(255,255*i))}class Ey{static CMYK_G([t,e,n,s]){return["G",1-Math.min(1,.3*t+.59*n+.11*e+s)]}static G_CMYK([t]){return["CMYK",0,0,0,1-t]}static G_RGB([t]){return["RGB",t,t,t]}static G_rgb([t]){return t=ol(t),[t,t,t]}static G_HTML([t]){const e=Sy(t);return`#${e}${e}${e}`}static RGB_G([t,e,n]){return["G",.3*t+.59*e+.11*n]}static RGB_rgb(t){return t.map(ol)}static RGB_HTML(t){return`#${t.map(Sy).join("")}`}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB([t,e,n,s]){return["RGB",1-Math.min(1,t+s),1-Math.min(1,n+s),1-Math.min(1,e+s)]}static CMYK_rgb([t,e,n,s]){return[ol(1-Math.min(1,t+s)),ol(1-Math.min(1,n+s)),ol(1-Math.min(1,e+s))]}static CMYK_HTML(t){const e=this.CMYK_RGB(t).slice(1);return this.RGB_HTML(e)}static RGB_CMYK([t,e,n]){const s=1-t,r=1-e,a=1-n,o=Math.min(s,r,a);return["CMYK",s,r,a,o]}}class UT{create(t,e,n=!1){if(t<=0||e<=0)throw new Error("Invalid SVG dimensions");const s=this._createSVG("svg:svg");return s.setAttribute("version","1.1"),n||(s.setAttribute("width",`${t}px`),s.setAttribute("height",`${e}px`)),s.setAttribute("preserveAspectRatio","none"),s.setAttribute("viewBox",`0 0 ${t} ${e}`),s}createElement(t){if(typeof t!="string")throw new Error("Invalid SVG element type");return this._createSVG(t)}_createSVG(t){Rt("Abstract method `_createSVG` called.")}}class Gg extends UT{_createSVG(t){return document.createElementNS(xi,t)}}class mx{static setupStorage(t,e,n,s,r){const a=s.getValue(e,{value:null});switch(n.name){case"textarea":if(a.value!==null&&(t.textContent=a.value),r==="print")break;t.addEventListener("input",o=>{s.setValue(e,{value:o.target.value})});break;case"input":if(n.attributes.type==="radio"||n.attributes.type==="checkbox"){if(a.value===n.attributes.xfaOn?t.setAttribute("checked",!0):a.value===n.attributes.xfaOff&&t.removeAttribute("checked"),r==="print")break;t.addEventListener("change",o=>{s.setValue(e,{value:o.target.checked?o.target.getAttribute("xfaOn"):o.target.getAttribute("xfaOff")})})}else{if(a.value!==null&&t.setAttribute("value",a.value),r==="print")break;t.addEventListener("input",o=>{s.setValue(e,{value:o.target.value})})}break;case"select":if(a.value!==null){t.setAttribute("value",a.value);for(const o of n.children)o.attributes.value===a.value?o.attributes.selected=!0:o.attributes.hasOwnProperty("selected")&&delete o.attributes.selected}t.addEventListener("input",o=>{const l=o.target.options,h=l.selectedIndex===-1?"":l[l.selectedIndex].value;s.setValue(e,{value:h})});break}}static setAttributes({html:t,element:e,storage:n=null,intent:s,linkService:r}){const{attributes:a}=e,o=t instanceof HTMLAnchorElement;a.type==="radio"&&(a.name=`${a.name}-${s}`);for(const[l,h]of Object.entries(a))if(h!=null)switch(l){case"class":h.length&&t.setAttribute(l,h.join(" "));break;case"dataId":break;case"id":t.setAttribute("data-element-id",h);break;case"style":Object.assign(t.style,h);break;case"textContent":t.textContent=h;break;default:(!o||l!=="href"&&l!=="newWindow")&&t.setAttribute(l,h)}o&&r.addLinkAttributes(t,a.href,a.newWindow),n&&a.dataId&&this.setupStorage(t,a.dataId,e,n)}static render(t){var d,f;const e=t.annotationStorage,n=t.linkService,s=t.xfaHtml,r=t.intent||"display",a=document.createElement(s.name);s.attributes&&this.setAttributes({html:a,element:s,intent:r,linkService:n});const o=r!=="richText",l=t.div;if(l.append(a),t.viewport){const p=`matrix(${t.viewport.transform.join(",")})`;l.style.transform=p}o&&l.setAttribute("class","xfaLayer xfaFont");const h=[];if(s.children.length===0){if(s.value){const p=document.createTextNode(s.value);a.append(p),o&&tc.shouldBuildText(s.name)&&h.push(p)}return{textDivs:h}}const u=[[s,-1,a]];for(;u.length>0;){const[p,g,m]=u.at(-1);if(g+1===p.children.length){u.pop();continue}const v=p.children[++u.at(-1)[1]];if(v===null)continue;const{name:y}=v;if(y==="#text"){const S=document.createTextNode(v.value);h.push(S),m.append(S);continue}const A=(d=v==null?void 0:v.attributes)!=null&&d.xmlns?document.createElementNS(v.attributes.xmlns,y):document.createElement(y);if(m.append(A),v.attributes&&this.setAttributes({html:A,element:v,storage:e,intent:r,linkService:n}),((f=v.children)==null?void 0:f.length)>0)u.push([v,-1,A]);else if(v.value){const S=document.createTextNode(v.value);o&&tc.shouldBuildText(y)&&h.push(S),A.append(S)}}for(const p of l.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))p.setAttribute("readOnly",!0);return{textDivs:h}}static update(t){const e=`matrix(${t.viewport.transform.join(",")})`;t.div.style.transform=e,t.div.hidden=!1}}const Eh=1e3,WT=9,ha=new WeakSet;function Ki(i){return{width:i[2]-i[0],height:i[3]-i[1]}}class zT{static create(t){switch(t.data.annotationType){case Jt.LINK:return new yx(t);case Jt.TEXT:return new GT(t);case Jt.WIDGET:switch(t.data.fieldType){case"Tx":return new qT(t);case"Btn":return t.data.radioButton?new xx(t):t.data.checkBox?new KT(t):new YT(t);case"Ch":return new QT(t);case"Sig":return new XT(t)}return new ma(t);case Jt.POPUP:return new kp(t);case Jt.FREETEXT:return new _x(t);case Jt.LINE:return new JT(t);case Jt.SQUARE:return new tC(t);case Jt.CIRCLE:return new eC(t);case Jt.POLYLINE:return new Tx(t);case Jt.CARET:return new iC(t);case Jt.INK:return new qg(t);case Jt.POLYGON:return new nC(t);case Jt.HIGHLIGHT:return new Cx(t);case Jt.UNDERLINE:return new sC(t);case Jt.SQUIGGLY:return new rC(t);case Jt.STRIKEOUT:return new aC(t);case Jt.STAMP:return new Px(t);case Jt.FILEATTACHMENT:return new oC(t);default:return new Xt(t)}}}var Nr,yo,vo,Uc,Rp;const Lm=class Lm{constructor(t,{isRenderable:e=!1,ignoreBorder:n=!1,createQuadrilaterals:s=!1}={}){w(this,Uc);w(this,Nr,null);w(this,yo,!1);w(this,vo,null);this.isRenderable=e,this.data=t.data,this.layer=t.layer,this.linkService=t.linkService,this.downloadManager=t.downloadManager,this.imageResourcesPath=t.imageResourcesPath,this.renderForms=t.renderForms,this.svgFactory=t.svgFactory,this.annotationStorage=t.annotationStorage,this.enableScripting=t.enableScripting,this.hasJSActions=t.hasJSActions,this._fieldObjects=t.fieldObjects,this.parent=t.parent,e&&(this.container=this._createContainer(n)),s&&this._createQuadrilaterals()}static _hasPopupData({titleObj:t,contentsObj:e,richText:n}){return!!(t!=null&&t.str||e!=null&&e.str||n!=null&&n.str)}get _isEditable(){return this.data.isEditable}get hasPopupData(){return Lm._hasPopupData(this.data)}updateEdited(t){var n;if(!this.container)return;c(this,Nr)||b(this,Nr,{rect:this.data.rect.slice(0)});const{rect:e}=t;e&&x(this,Uc,Rp).call(this,e),(n=c(this,vo))==null||n.popup.updateEdited(t)}resetEdited(){var t;c(this,Nr)&&(x(this,Uc,Rp).call(this,c(this,Nr).rect),(t=c(this,vo))==null||t.popup.resetEdited(),b(this,Nr,null))}_createContainer(t){const{data:e,parent:{page:n,viewport:s}}=this,r=document.createElement("section");r.setAttribute("data-annotation-id",e.id),this instanceof ma||(r.tabIndex=Eh);const{style:a}=r;if(a.zIndex=this.parent.zIndex++,e.alternativeText&&(r.title=e.alternativeText),e.noRotate&&r.classList.add("norotate"),!e.rect||this instanceof kp){const{rotation:m}=e;return!e.hasOwnCanvas&&m!==0&&this.setRotation(m,r),r}const{width:o,height:l}=Ki(e.rect);if(!t&&e.borderStyle.width>0){a.borderWidth=`${e.borderStyle.width}px`;const m=e.borderStyle.horizontalCornerRadius,v=e.borderStyle.verticalCornerRadius;if(m>0||v>0){const A=`calc(${m}px * var(--scale-factor)) / calc(${v}px * var(--scale-factor))`;a.borderRadius=A}else if(this instanceof xx){const A=`calc(${o}px * var(--scale-factor)) / calc(${l}px * var(--scale-factor))`;a.borderRadius=A}switch(e.borderStyle.style){case rl.SOLID:a.borderStyle="solid";break;case rl.DASHED:a.borderStyle="dashed";break;case rl.BEVELED:at("Unimplemented border style: beveled");break;case rl.INSET:at("Unimplemented border style: inset");break;case rl.UNDERLINE:a.borderBottomStyle="solid";break}const y=e.borderColor||null;y?(b(this,yo,!0),a.borderColor=W.makeHexColor(y[0]|0,y[1]|0,y[2]|0)):a.borderWidth=0}const h=W.normalizeRect([e.rect[0],n.view[3]-e.rect[1]+n.view[1],e.rect[2],n.view[3]-e.rect[3]+n.view[1]]),{pageWidth:u,pageHeight:d,pageX:f,pageY:p}=s.rawDims;a.left=`${100*(h[0]-f)/u}%`,a.top=`${100*(h[1]-p)/d}%`;const{rotation:g}=e;return e.hasOwnCanvas||g===0?(a.width=`${100*o/u}%`,a.height=`${100*l/d}%`):this.setRotation(g,r),r}setRotation(t,e=this.container){if(!this.data.rect)return;const{pageWidth:n,pageHeight:s}=this.parent.viewport.rawDims,{width:r,height:a}=Ki(this.data.rect);let o,l;t%180===0?(o=100*r/n,l=100*a/s):(o=100*a/n,l=100*r/s),e.style.width=`${o}%`,e.style.height=`${l}%`,e.setAttribute("data-main-rotation",(360-t)%360)}get _commonActions(){const t=(e,n,s)=>{const r=s.detail[e],a=r[0],o=r.slice(1);s.target.style[n]=Ey[`${a}_HTML`](o),this.annotationStorage.setValue(this.data.id,{[n]:Ey[`${a}_rgb`](o)})};return ht(this,"_commonActions",{display:e=>{const{display:n}=e.detail,s=n%2===1;this.container.style.visibility=s?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:s,noPrint:n===1||n===2})},print:e=>{this.annotationStorage.setValue(this.data.id,{noPrint:!e.detail.print})},hidden:e=>{const{hidden:n}=e.detail;this.container.style.visibility=n?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:n,noView:n})},focus:e=>{setTimeout(()=>e.target.focus({preventScroll:!1}),0)},userName:e=>{e.target.title=e.detail.userName},readonly:e=>{e.target.disabled=e.detail.readonly},required:e=>{this._setRequired(e.target,e.detail.required)},bgColor:e=>{t("bgColor","backgroundColor",e)},fillColor:e=>{t("fillColor","backgroundColor",e)},fgColor:e=>{t("fgColor","color",e)},textColor:e=>{t("textColor","color",e)},borderColor:e=>{t("borderColor","borderColor",e)},strokeColor:e=>{t("strokeColor","borderColor",e)},rotation:e=>{const n=e.detail.rotation;this.setRotation(n),this.annotationStorage.setValue(this.data.id,{rotation:n})}})}_dispatchEventFromSandbox(t,e){const n=this._commonActions;for(const s of Object.keys(e.detail)){const r=t[s]||n[s];r==null||r(e)}}_setDefaultPropertiesFromJS(t){if(!this.enableScripting)return;const e=this.annotationStorage.getRawValue(this.data.id);if(!e)return;const n=this._commonActions;for(const[s,r]of Object.entries(e)){const a=n[s];if(a){const o={detail:{[s]:r},target:t};a(o),delete e[s]}}}_createQuadrilaterals(){if(!this.container)return;const{quadPoints:t}=this.data;if(!t)return;const[e,n,s,r]=this.data.rect.map(m=>Math.fround(m));if(t.length===8){const[m,v,y,A]=t.subarray(2,6);if(s===m&&r===v&&e===y&&n===A)return}const{style:a}=this.container;let o;if(c(this,yo)){const{borderColor:m,borderWidth:v}=a;a.borderWidth=0,o=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">',`<g fill="transparent" stroke="${m}" stroke-width="${v}">`],this.container.classList.add("hasBorder")}const l=s-e,h=r-n,{svgFactory:u}=this,d=u.createElement("svg");d.classList.add("quadrilateralsContainer"),d.setAttribute("width",0),d.setAttribute("height",0);const f=u.createElement("defs");d.append(f);const p=u.createElement("clipPath"),g=`clippath_${this.data.id}`;p.setAttribute("id",g),p.setAttribute("clipPathUnits","objectBoundingBox"),f.append(p);for(let m=2,v=t.length;m<v;m+=8){const y=t[m],A=t[m+1],S=t[m+2],E=t[m+3],T=u.createElement("rect"),_=(S-e)/l,R=(r-A)/h,k=(y-S)/l,I=(A-E)/h;T.setAttribute("x",_),T.setAttribute("y",R),T.setAttribute("width",k),T.setAttribute("height",I),p.append(T),o==null||o.push(`<rect vector-effect="non-scaling-stroke" x="${_}" y="${R}" width="${k}" height="${I}"/>`)}c(this,yo)&&(o.push("</g></svg>')"),a.backgroundImage=o.join("")),this.container.append(d),this.container.style.clipPath=`url(#${g})`}_createPopup(){const{data:t}=this,e=b(this,vo,new kp({data:{color:t.color,titleObj:t.titleObj,modificationDate:t.modificationDate,contentsObj:t.contentsObj,richText:t.richText,parentRect:t.rect,borderStyle:0,id:`popup_${t.id}`,rotation:t.rotation},parent:this.parent,elements:[this]}));this.parent.div.append(e.render())}render(){Rt("Abstract method `AnnotationElement.render` called")}_getElementsByName(t,e=null){const n=[];if(this._fieldObjects){const s=this._fieldObjects[t];if(s)for(const{page:r,id:a,exportValues:o}of s){if(r===-1||a===e)continue;const l=typeof o=="string"?o:null,h=document.querySelector(`[data-element-id="${a}"]`);if(h&&!ha.has(h)){at(`_getElementsByName - element not allowed: ${a}`);continue}n.push({id:a,exportValue:l,domElement:h})}return n}for(const s of document.getElementsByName(t)){const{exportValue:r}=s,a=s.getAttribute("data-element-id");a!==e&&ha.has(s)&&n.push({id:a,exportValue:r,domElement:s})}return n}show(){var t;this.container&&(this.container.hidden=!1),(t=this.popup)==null||t.maybeShow()}hide(){var t;this.container&&(this.container.hidden=!0),(t=this.popup)==null||t.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){const t=this.getElementsToTriggerPopup();if(Array.isArray(t))for(const e of t)e.classList.add("highlightArea");else t.classList.add("highlightArea")}_editOnDoubleClick(){if(!this._isEditable)return;const{annotationEditorType:t,data:{id:e}}=this;this.container.addEventListener("dblclick",()=>{var n;(n=this.linkService.eventBus)==null||n.dispatch("switchannotationeditormode",{source:this,mode:t,editId:e})})}};Nr=new WeakMap,yo=new WeakMap,vo=new WeakMap,Uc=new WeakSet,Rp=function(t){const{container:{style:e},data:{rect:n,rotation:s},parent:{viewport:{rawDims:{pageWidth:r,pageHeight:a,pageX:o,pageY:l}}}}=this;n==null||n.splice(0,4,...t);const{width:h,height:u}=Ki(t);e.left=`${100*(t[0]-o)/r}%`,e.top=`${100*(a-t[3]+l)/a}%`,s===0?(e.width=`${100*h/r}%`,e.height=`${100*u/a}%`):this.setRotation(s)};let Xt=Lm;var hn,Zs,vx,bx;class yx extends Xt{constructor(e,n=null){super(e,{isRenderable:!0,ignoreBorder:!!(n!=null&&n.ignoreBorder),createQuadrilaterals:!0});w(this,hn);this.isTooltipOnly=e.data.isTooltipOnly}render(){const{data:e,linkService:n}=this,s=document.createElement("a");s.setAttribute("data-element-id",e.id);let r=!1;return e.url?(n.addLinkAttributes(s,e.url,e.newWindow),r=!0):e.action?(this._bindNamedAction(s,e.action),r=!0):e.attachment?(x(this,hn,vx).call(this,s,e.attachment,e.attachmentDest),r=!0):e.setOCGState?(x(this,hn,bx).call(this,s,e.setOCGState),r=!0):e.dest?(this._bindLink(s,e.dest),r=!0):(e.actions&&(e.actions.Action||e.actions["Mouse Up"]||e.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(s,e),r=!0),e.resetForm?(this._bindResetFormAction(s,e.resetForm),r=!0):this.isTooltipOnly&&!r&&(this._bindLink(s,""),r=!0)),this.container.classList.add("linkAnnotation"),r&&this.container.append(s),this.container}_bindLink(e,n){e.href=this.linkService.getDestinationHash(n),e.onclick=()=>(n&&this.linkService.goToDestination(n),!1),(n||n==="")&&x(this,hn,Zs).call(this)}_bindNamedAction(e,n){e.href=this.linkService.getAnchorUrl(""),e.onclick=()=>(this.linkService.executeNamedAction(n),!1),x(this,hn,Zs).call(this)}_bindJSAction(e,n){e.href=this.linkService.getAnchorUrl("");const s=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const r of Object.keys(n.actions)){const a=s.get(r);a&&(e[a]=()=>{var o;return(o=this.linkService.eventBus)==null||o.dispatch("dispatcheventinsandbox",{source:this,detail:{id:n.id,name:r}}),!1})}e.onclick||(e.onclick=()=>!1),x(this,hn,Zs).call(this)}_bindResetFormAction(e,n){const s=e.onclick;if(s||(e.href=this.linkService.getAnchorUrl("")),x(this,hn,Zs).call(this),!this._fieldObjects){at('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),s||(e.onclick=()=>!1);return}e.onclick=()=>{var d;s==null||s();const{fields:r,refs:a,include:o}=n,l=[];if(r.length!==0||a.length!==0){const f=new Set(a);for(const p of r){const g=this._fieldObjects[p]||[];for(const{id:m}of g)f.add(m)}for(const p of Object.values(this._fieldObjects))for(const g of p)f.has(g.id)===o&&l.push(g)}else for(const f of Object.values(this._fieldObjects))l.push(...f);const h=this.annotationStorage,u=[];for(const f of l){const{id:p}=f;switch(u.push(p),f.type){case"text":{const m=f.defaultValue||"";h.setValue(p,{value:m});break}case"checkbox":case"radiobutton":{const m=f.defaultValue===f.exportValues;h.setValue(p,{value:m});break}case"combobox":case"listbox":{const m=f.defaultValue||"";h.setValue(p,{value:m});break}default:continue}const g=document.querySelector(`[data-element-id="${p}"]`);if(g){if(!ha.has(g)){at(`_bindResetFormAction - element not allowed: ${p}`);continue}}else continue;g.dispatchEvent(new Event("resetform"))}return this.enableScripting&&((d=this.linkService.eventBus)==null||d.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:u,name:"ResetForm"}})),!1}}}hn=new WeakSet,Zs=function(){this.container.setAttribute("data-internal-link","")},vx=function(e,n,s=null){e.href=this.linkService.getAnchorUrl(""),n.description&&(e.title=n.description),e.onclick=()=>{var r;return(r=this.downloadManager)==null||r.openOrDownloadData(n.content,n.filename,s),!1},x(this,hn,Zs).call(this)},bx=function(e,n){e.href=this.linkService.getAnchorUrl(""),e.onclick=()=>(this.linkService.executeSetOCGState(n),!1),x(this,hn,Zs).call(this)};class GT extends Xt{constructor(t){super(t,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");const t=document.createElement("img");return t.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",t.setAttribute("data-l10n-id","pdfjs-text-annotation-type"),t.setAttribute("data-l10n-args",JSON.stringify({type:this.data.name})),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.append(t),this.container}}class ma extends Xt{render(){return this.container}showElementAndHideCanvas(t){var e;this.data.hasOwnCanvas&&(((e=t.previousSibling)==null?void 0:e.nodeName)==="CANVAS"&&(t.previousSibling.hidden=!0),t.hidden=!1)}_getKeyModifier(t){return De.platform.isMac?t.metaKey:t.ctrlKey}_setEventListener(t,e,n,s,r){n.includes("mouse")?t.addEventListener(n,a=>{var o;(o=this.linkService.eventBus)==null||o.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:s,value:r(a),shift:a.shiftKey,modifier:this._getKeyModifier(a)}})}):t.addEventListener(n,a=>{var o;if(n==="blur"){if(!e.focused||!a.relatedTarget)return;e.focused=!1}else if(n==="focus"){if(e.focused)return;e.focused=!0}r&&((o=this.linkService.eventBus)==null||o.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:s,value:r(a)}}))})}_setEventListeners(t,e,n,s){var r,a,o;for(const[l,h]of n)(h==="Action"||(r=this.data.actions)!=null&&r[h])&&((h==="Focus"||h==="Blur")&&(e||(e={focused:!1})),this._setEventListener(t,e,l,h,s),h==="Focus"&&!((a=this.data.actions)!=null&&a.Blur)?this._setEventListener(t,e,"blur","Blur",null):h==="Blur"&&!((o=this.data.actions)!=null&&o.Focus)&&this._setEventListener(t,e,"focus","Focus",null))}_setBackgroundColor(t){const e=this.data.backgroundColor||null;t.style.backgroundColor=e===null?"transparent":W.makeHexColor(e[0],e[1],e[2])}_setTextStyle(t){const e=["left","center","right"],{fontColor:n}=this.data.defaultAppearanceData,s=this.data.defaultAppearanceData.fontSize||WT,r=t.style;let a;const o=2,l=h=>Math.round(10*h)/10;if(this.data.multiLine){const h=Math.abs(this.data.rect[3]-this.data.rect[1]-o),u=Math.round(h/(hf*s))||1,d=h/u;a=Math.min(s,l(d/hf))}else{const h=Math.abs(this.data.rect[3]-this.data.rect[1]-o);a=Math.min(s,l(h/hf))}r.fontSize=`calc(${a}px * var(--scale-factor))`,r.color=W.makeHexColor(n[0],n[1],n[2]),this.data.textAlignment!==null&&(r.textAlign=e[this.data.textAlignment])}_setRequired(t,e){e?t.setAttribute("required",!0):t.removeAttribute("required"),t.setAttribute("aria-required",e)}}class qT extends ma{constructor(t){const e=t.renderForms||t.data.hasOwnCanvas||!t.data.hasAppearance&&!!t.data.fieldValue;super(t,{isRenderable:e})}setPropertyOnSiblings(t,e,n,s){const r=this.annotationStorage;for(const a of this._getElementsByName(t.name,t.id))a.domElement&&(a.domElement[e]=n),r.setValue(a.id,{[s]:n})}render(){var s,r;const t=this.annotationStorage,e=this.data.id;this.container.classList.add("textWidgetAnnotation");let n=null;if(this.renderForms){const a=t.getValue(e,{value:this.data.fieldValue});let o=a.value||"";const l=t.getValue(e,{charLimit:this.data.maxLen}).charLimit;l&&o.length>l&&(o=o.slice(0,l));let h=a.formattedValue||((s=this.data.textContent)==null?void 0:s.join(`
`))||null;h&&this.data.comb&&(h=h.replaceAll(/\s+/g,""));const u={userValue:o,formattedValue:h,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?(n=document.createElement("textarea"),n.textContent=h??o,this.data.doNotScroll&&(n.style.overflowY="hidden")):(n=document.createElement("input"),n.type="text",n.setAttribute("value",h??o),this.data.doNotScroll&&(n.style.overflowX="hidden")),this.data.hasOwnCanvas&&(n.hidden=!0),ha.add(n),n.setAttribute("data-element-id",e),n.disabled=this.data.readOnly,n.name=this.data.fieldName,n.tabIndex=Eh,this._setRequired(n,this.data.required),l&&(n.maxLength=l),n.addEventListener("input",f=>{t.setValue(e,{value:f.target.value}),this.setPropertyOnSiblings(n,"value",f.target.value,"value"),u.formattedValue=null}),n.addEventListener("resetform",f=>{const p=this.data.defaultFieldValue??"";n.value=u.userValue=p,u.formattedValue=null});let d=f=>{const{formattedValue:p}=u;p!=null&&(f.target.value=p),f.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){n.addEventListener("focus",p=>{var m;if(u.focused)return;const{target:g}=p;u.userValue&&(g.value=u.userValue),u.lastCommittedValue=g.value,u.commitKey=1,(m=this.data.actions)!=null&&m.Focus||(u.focused=!0)}),n.addEventListener("updatefromsandbox",p=>{this.showElementAndHideCanvas(p.target);const g={value(m){u.userValue=m.detail.value??"",t.setValue(e,{value:u.userValue.toString()}),m.target.value=u.userValue},formattedValue(m){const{formattedValue:v}=m.detail;u.formattedValue=v,v!=null&&m.target!==document.activeElement&&(m.target.value=v),t.setValue(e,{formattedValue:v})},selRange(m){m.target.setSelectionRange(...m.detail.selRange)},charLimit:m=>{var S;const{charLimit:v}=m.detail,{target:y}=m;if(v===0){y.removeAttribute("maxLength");return}y.setAttribute("maxLength",v);let A=u.userValue;!A||A.length<=v||(A=A.slice(0,v),y.value=u.userValue=A,t.setValue(e,{value:A}),(S=this.linkService.eventBus)==null||S.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:A,willCommit:!0,commitKey:1,selStart:y.selectionStart,selEnd:y.selectionEnd}}))}};this._dispatchEventFromSandbox(g,p)}),n.addEventListener("keydown",p=>{var v;u.commitKey=1;let g=-1;if(p.key==="Escape"?g=0:p.key==="Enter"&&!this.data.multiLine?g=2:p.key==="Tab"&&(u.commitKey=3),g===-1)return;const{value:m}=p.target;u.lastCommittedValue!==m&&(u.lastCommittedValue=m,u.userValue=m,(v=this.linkService.eventBus)==null||v.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:m,willCommit:!0,commitKey:g,selStart:p.target.selectionStart,selEnd:p.target.selectionEnd}}))});const f=d;d=null,n.addEventListener("blur",p=>{var m,v;if(!u.focused||!p.relatedTarget)return;(m=this.data.actions)!=null&&m.Blur||(u.focused=!1);const{value:g}=p.target;u.userValue=g,u.lastCommittedValue!==g&&((v=this.linkService.eventBus)==null||v.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:g,willCommit:!0,commitKey:u.commitKey,selStart:p.target.selectionStart,selEnd:p.target.selectionEnd}})),f(p)}),(r=this.data.actions)!=null&&r.Keystroke&&n.addEventListener("beforeinput",p=>{var T;u.lastCommittedValue=null;const{data:g,target:m}=p,{value:v,selectionStart:y,selectionEnd:A}=m;let S=y,E=A;switch(p.inputType){case"deleteWordBackward":{const _=v.substring(0,y).match(/\w*[^\w]*$/);_&&(S-=_[0].length);break}case"deleteWordForward":{const _=v.substring(y).match(/^[^\w]*\w*/);_&&(E+=_[0].length);break}case"deleteContentBackward":y===A&&(S-=1);break;case"deleteContentForward":y===A&&(E+=1);break}p.preventDefault(),(T=this.linkService.eventBus)==null||T.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:v,change:g||"",willCommit:!1,selStart:S,selEnd:E}})}),this._setEventListeners(n,u,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],p=>p.target.value)}if(d&&n.addEventListener("blur",d),this.data.comb){const p=(this.data.rect[2]-this.data.rect[0])/l;n.classList.add("comb"),n.style.letterSpacing=`calc(${p}px * var(--scale-factor) - 1ch)`}}else n=document.createElement("div"),n.textContent=this.data.fieldValue,n.style.verticalAlign="middle",n.style.display="table-cell",this.data.hasOwnCanvas&&(n.hidden=!0);return this._setTextStyle(n),this._setBackgroundColor(n),this._setDefaultPropertiesFromJS(n),this.container.append(n),this.container}}class XT extends ma{constructor(t){super(t,{isRenderable:!!t.data.hasOwnCanvas})}}class KT extends ma{constructor(t){super(t,{isRenderable:t.renderForms})}render(){const t=this.annotationStorage,e=this.data,n=e.id;let s=t.getValue(n,{value:e.exportValue===e.fieldValue}).value;typeof s=="string"&&(s=s!=="Off",t.setValue(n,{value:s})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const r=document.createElement("input");return ha.add(r),r.setAttribute("data-element-id",n),r.disabled=e.readOnly,this._setRequired(r,this.data.required),r.type="checkbox",r.name=e.fieldName,s&&r.setAttribute("checked",!0),r.setAttribute("exportValue",e.exportValue),r.tabIndex=Eh,r.addEventListener("change",a=>{const{name:o,checked:l}=a.target;for(const h of this._getElementsByName(o,n)){const u=l&&h.exportValue===e.exportValue;h.domElement&&(h.domElement.checked=u),t.setValue(h.id,{value:u})}t.setValue(n,{value:l})}),r.addEventListener("resetform",a=>{const o=e.defaultFieldValue||"Off";a.target.checked=o===e.exportValue}),this.enableScripting&&this.hasJSActions&&(r.addEventListener("updatefromsandbox",a=>{const o={value(l){l.target.checked=l.detail.value!=="Off",t.setValue(n,{value:l.target.checked})}};this._dispatchEventFromSandbox(o,a)}),this._setEventListeners(r,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],a=>a.target.checked)),this._setBackgroundColor(r),this._setDefaultPropertiesFromJS(r),this.container.append(r),this.container}}class xx extends ma{constructor(t){super(t,{isRenderable:t.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const t=this.annotationStorage,e=this.data,n=e.id;let s=t.getValue(n,{value:e.fieldValue===e.buttonValue}).value;if(typeof s=="string"&&(s=s!==e.buttonValue,t.setValue(n,{value:s})),s)for(const a of this._getElementsByName(e.fieldName,n))t.setValue(a.id,{value:!1});const r=document.createElement("input");if(ha.add(r),r.setAttribute("data-element-id",n),r.disabled=e.readOnly,this._setRequired(r,this.data.required),r.type="radio",r.name=e.fieldName,s&&r.setAttribute("checked",!0),r.tabIndex=Eh,r.addEventListener("change",a=>{const{name:o,checked:l}=a.target;for(const h of this._getElementsByName(o,n))t.setValue(h.id,{value:!1});t.setValue(n,{value:l})}),r.addEventListener("resetform",a=>{const o=e.defaultFieldValue;a.target.checked=o!=null&&o===e.buttonValue}),this.enableScripting&&this.hasJSActions){const a=e.buttonValue;r.addEventListener("updatefromsandbox",o=>{const l={value:h=>{const u=a===h.detail.value;for(const d of this._getElementsByName(h.target.name)){const f=u&&d.id===n;d.domElement&&(d.domElement.checked=f),t.setValue(d.id,{value:f})}}};this._dispatchEventFromSandbox(l,o)}),this._setEventListeners(r,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],o=>o.target.checked)}return this._setBackgroundColor(r),this._setDefaultPropertiesFromJS(r),this.container.append(r),this.container}}class YT extends yx{constructor(t){super(t,{ignoreBorder:t.data.hasAppearance})}render(){const t=super.render();t.classList.add("buttonWidgetAnnotation","pushButton");const e=t.lastChild;return this.enableScripting&&this.hasJSActions&&e&&(this._setDefaultPropertiesFromJS(e),e.addEventListener("updatefromsandbox",n=>{this._dispatchEventFromSandbox({},n)})),t}}class QT extends ma{constructor(t){super(t,{isRenderable:t.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const t=this.annotationStorage,e=this.data.id,n=t.getValue(e,{value:this.data.fieldValue}),s=document.createElement("select");ha.add(s),s.setAttribute("data-element-id",e),s.disabled=this.data.readOnly,this._setRequired(s,this.data.required),s.name=this.data.fieldName,s.tabIndex=Eh;let r=this.data.combo&&this.data.options.length>0;this.data.combo||(s.size=this.data.options.length,this.data.multiSelect&&(s.multiple=!0)),s.addEventListener("resetform",u=>{const d=this.data.defaultFieldValue;for(const f of s.options)f.selected=f.value===d});for(const u of this.data.options){const d=document.createElement("option");d.textContent=u.displayValue,d.value=u.exportValue,n.value.includes(u.exportValue)&&(d.setAttribute("selected",!0),r=!1),s.append(d)}let a=null;if(r){const u=document.createElement("option");u.value=" ",u.setAttribute("hidden",!0),u.setAttribute("selected",!0),s.prepend(u),a=()=>{u.remove(),s.removeEventListener("input",a),a=null},s.addEventListener("input",a)}const o=u=>{const d=u?"value":"textContent",{options:f,multiple:p}=s;return p?Array.prototype.filter.call(f,g=>g.selected).map(g=>g[d]):f.selectedIndex===-1?null:f[f.selectedIndex][d]};let l=o(!1);const h=u=>{const d=u.target.options;return Array.prototype.map.call(d,f=>({displayValue:f.textContent,exportValue:f.value}))};return this.enableScripting&&this.hasJSActions?(s.addEventListener("updatefromsandbox",u=>{const d={value(f){a==null||a();const p=f.detail.value,g=new Set(Array.isArray(p)?p:[p]);for(const m of s.options)m.selected=g.has(m.value);t.setValue(e,{value:o(!0)}),l=o(!1)},multipleSelection(f){s.multiple=!0},remove(f){const p=s.options,g=f.detail.remove;p[g].selected=!1,s.remove(g),p.length>0&&Array.prototype.findIndex.call(p,v=>v.selected)===-1&&(p[0].selected=!0),t.setValue(e,{value:o(!0),items:h(f)}),l=o(!1)},clear(f){for(;s.length!==0;)s.remove(0);t.setValue(e,{value:null,items:[]}),l=o(!1)},insert(f){const{index:p,displayValue:g,exportValue:m}=f.detail.insert,v=s.children[p],y=document.createElement("option");y.textContent=g,y.value=m,v?v.before(y):s.append(y),t.setValue(e,{value:o(!0),items:h(f)}),l=o(!1)},items(f){const{items:p}=f.detail;for(;s.length!==0;)s.remove(0);for(const g of p){const{displayValue:m,exportValue:v}=g,y=document.createElement("option");y.textContent=m,y.value=v,s.append(y)}s.options.length>0&&(s.options[0].selected=!0),t.setValue(e,{value:o(!0),items:h(f)}),l=o(!1)},indices(f){const p=new Set(f.detail.indices);for(const g of f.target.options)g.selected=p.has(g.index);t.setValue(e,{value:o(!0)}),l=o(!1)},editable(f){f.target.disabled=!f.detail.editable}};this._dispatchEventFromSandbox(d,u)}),s.addEventListener("input",u=>{var p;const d=o(!0),f=o(!1);t.setValue(e,{value:d}),u.preventDefault(),(p=this.linkService.eventBus)==null||p.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:l,change:f,changeEx:d,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(s,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],u=>u.target.value)):s.addEventListener("input",function(u){t.setValue(e,{value:o(!0)})}),this.data.combo&&this._setTextStyle(s),this._setBackgroundColor(s),this._setDefaultPropertiesFromJS(s),this.container.append(s),this.container}}class kp extends Xt{constructor(t){const{data:e,elements:n}=t;super(t,{isRenderable:Xt._hasPopupData(e)}),this.elements=n,this.popup=null}render(){this.container.classList.add("popupAnnotation");const t=this.popup=new ZT({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open}),e=[];for(const n of this.elements)n.popup=t,n.container.ariaHasPopup="dialog",e.push(n.data.id),n.addHighlightArea();return this.container.setAttribute("aria-controls",e.map(n=>`${Fg}${n}`).join(",")),this.container}}var bo,Ad,wd,xo,jr,Ht,Di,Ao,Wc,zc,wo,Oi,jn,Fi,Gc,Ni,qc,Br,Vr,_t,Su,Mp,Ax,wx,Sx,Ex,Eu,_u,Lp;class ZT{constructor({container:t,color:e,elements:n,titleObj:s,modificationDate:r,contentsObj:a,richText:o,parent:l,rect:h,parentRect:u,open:d}){w(this,_t);w(this,bo,x(this,_t,Sx).bind(this));w(this,Ad,x(this,_t,Lp).bind(this));w(this,wd,x(this,_t,_u).bind(this));w(this,xo,x(this,_t,Eu).bind(this));w(this,jr,null);w(this,Ht,null);w(this,Di,null);w(this,Ao,null);w(this,Wc,null);w(this,zc,null);w(this,wo,null);w(this,Oi,!1);w(this,jn,null);w(this,Fi,null);w(this,Gc,null);w(this,Ni,null);w(this,qc,null);w(this,Br,null);w(this,Vr,!1);var f;b(this,Ht,t),b(this,qc,s),b(this,Di,a),b(this,Ni,o),b(this,zc,l),b(this,jr,e),b(this,Gc,h),b(this,wo,u),b(this,Wc,n),b(this,Ao,Bg.toDateObject(r)),this.trigger=n.flatMap(p=>p.getElementsToTriggerPopup());for(const p of this.trigger)p.addEventListener("click",c(this,xo)),p.addEventListener("mouseenter",c(this,wd)),p.addEventListener("mouseleave",c(this,Ad)),p.classList.add("popupTriggerArea");for(const p of n)(f=p.container)==null||f.addEventListener("keydown",c(this,bo));c(this,Ht).hidden=!0,d&&x(this,_t,Eu).call(this)}render(){if(c(this,jn))return;const t=b(this,jn,document.createElement("div"));if(t.className="popup",c(this,jr)){const r=t.style.outlineColor=W.makeHexColor(...c(this,jr));CSS.supports("background-color","color-mix(in srgb, red 30%, white)")?t.style.backgroundColor=`color-mix(in srgb, ${r} 30%, white)`:t.style.backgroundColor=W.makeHexColor(...c(this,jr).map(o=>Math.floor(.7*(255-o)+o)))}const e=document.createElement("span");e.className="header";const n=document.createElement("h1");if(e.append(n),{dir:n.dir,str:n.textContent}=c(this,qc),t.append(e),c(this,Ao)){const r=document.createElement("span");r.classList.add("popupDate"),r.setAttribute("data-l10n-id","pdfjs-annotation-date-time-string"),r.setAttribute("data-l10n-args",JSON.stringify({dateObj:c(this,Ao).valueOf()})),e.append(r)}const s=c(this,_t,Su);if(s)mx.render({xfaHtml:s,intent:"richText",div:t}),t.lastChild.classList.add("richText","popupContent");else{const r=this._formatContents(c(this,Di));t.append(r)}c(this,Ht).append(t)}_formatContents({str:t,dir:e}){const n=document.createElement("p");n.classList.add("popupContent"),n.dir=e;const s=t.split(/(?:\r\n?|\n)/);for(let r=0,a=s.length;r<a;++r){const o=s[r];n.append(document.createTextNode(o)),r<a-1&&n.append(document.createElement("br"))}return n}updateEdited({rect:t,popupContent:e}){var n;c(this,Br)||b(this,Br,{contentsObj:c(this,Di),richText:c(this,Ni)}),t&&b(this,Fi,null),e&&(b(this,Ni,x(this,_t,wx).call(this,e)),b(this,Di,null)),(n=c(this,jn))==null||n.remove(),b(this,jn,null)}resetEdited(){var t;c(this,Br)&&({contentsObj:ke(this,Di)._,richText:ke(this,Ni)._}=c(this,Br),b(this,Br,null),(t=c(this,jn))==null||t.remove(),b(this,jn,null),b(this,Fi,null))}forceHide(){b(this,Vr,this.isVisible),c(this,Vr)&&(c(this,Ht).hidden=!0)}maybeShow(){c(this,Vr)&&(c(this,jn)||x(this,_t,_u).call(this),b(this,Vr,!1),c(this,Ht).hidden=!1)}get isVisible(){return c(this,Ht).hidden===!1}}bo=new WeakMap,Ad=new WeakMap,wd=new WeakMap,xo=new WeakMap,jr=new WeakMap,Ht=new WeakMap,Di=new WeakMap,Ao=new WeakMap,Wc=new WeakMap,zc=new WeakMap,wo=new WeakMap,Oi=new WeakMap,jn=new WeakMap,Fi=new WeakMap,Gc=new WeakMap,Ni=new WeakMap,qc=new WeakMap,Br=new WeakMap,Vr=new WeakMap,_t=new WeakSet,Su=function(){const t=c(this,Ni),e=c(this,Di);return t!=null&&t.str&&(!(e!=null&&e.str)||e.str===t.str)&&c(this,Ni).html||null},Mp=function(){var t,e,n;return((n=(e=(t=c(this,_t,Su))==null?void 0:t.attributes)==null?void 0:e.style)==null?void 0:n.fontSize)||0},Ax=function(){var t,e,n;return((n=(e=(t=c(this,_t,Su))==null?void 0:t.attributes)==null?void 0:e.style)==null?void 0:n.color)||null},wx=function(t){const e=[],n={str:t,html:{name:"div",attributes:{dir:"auto"},children:[{name:"p",children:e}]}},s={style:{color:c(this,_t,Ax),fontSize:c(this,_t,Mp)?`calc(${c(this,_t,Mp)}px * var(--scale-factor))`:""}};for(const r of t.split(`
`))e.push({name:"span",value:r,attributes:s});return n},Sx=function(t){t.altKey||t.shiftKey||t.ctrlKey||t.metaKey||(t.key==="Enter"||t.key==="Escape"&&c(this,Oi))&&x(this,_t,Eu).call(this)},Ex=function(){if(c(this,Fi)!==null)return;const{page:{view:t},viewport:{rawDims:{pageWidth:e,pageHeight:n,pageX:s,pageY:r}}}=c(this,zc);let a=!!c(this,wo),o=a?c(this,wo):c(this,Gc);for(const g of c(this,Wc))if(!o||W.intersect(g.data.rect,o)!==null){o=g.data.rect,a=!0;break}const l=W.normalizeRect([o[0],t[3]-o[1]+t[1],o[2],t[3]-o[3]+t[1]]),u=a?o[2]-o[0]+5:0,d=l[0]+u,f=l[1];b(this,Fi,[100*(d-s)/e,100*(f-r)/n]);const{style:p}=c(this,Ht);p.left=`${c(this,Fi)[0]}%`,p.top=`${c(this,Fi)[1]}%`},Eu=function(){b(this,Oi,!c(this,Oi)),c(this,Oi)?(x(this,_t,_u).call(this),c(this,Ht).addEventListener("click",c(this,xo)),c(this,Ht).addEventListener("keydown",c(this,bo))):(x(this,_t,Lp).call(this),c(this,Ht).removeEventListener("click",c(this,xo)),c(this,Ht).removeEventListener("keydown",c(this,bo)))},_u=function(){c(this,jn)||this.render(),this.isVisible?c(this,Oi)&&c(this,Ht).classList.add("focused"):(x(this,_t,Ex).call(this),c(this,Ht).hidden=!1,c(this,Ht).style.zIndex=parseInt(c(this,Ht).style.zIndex)+1e3)},Lp=function(){c(this,Ht).classList.remove("focused"),!(c(this,Oi)||!this.isVisible)&&(c(this,Ht).hidden=!0,c(this,Ht).style.zIndex=parseInt(c(this,Ht).style.zIndex)-1e3)};class _x extends Xt{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.textContent=t.data.textContent,this.textPosition=t.data.textPosition,this.annotationEditorType=et.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const t=document.createElement("div");t.classList.add("annotationTextContent"),t.setAttribute("role","comment");for(const e of this.textContent){const n=document.createElement("span");n.textContent=e,t.append(n)}this.container.append(t)}return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}var Xc;class JT extends Xt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0});w(this,Xc,null)}render(){this.container.classList.add("lineAnnotation");const e=this.data,{width:n,height:s}=Ki(e.rect),r=this.svgFactory.create(n,s,!0),a=b(this,Xc,this.svgFactory.createElement("svg:line"));return a.setAttribute("x1",e.rect[2]-e.lineCoordinates[0]),a.setAttribute("y1",e.rect[3]-e.lineCoordinates[1]),a.setAttribute("x2",e.rect[2]-e.lineCoordinates[2]),a.setAttribute("y2",e.rect[3]-e.lineCoordinates[3]),a.setAttribute("stroke-width",e.borderStyle.width||1),a.setAttribute("stroke","transparent"),a.setAttribute("fill","transparent"),r.append(a),this.container.append(r),!e.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return c(this,Xc)}addHighlightArea(){this.container.classList.add("highlightArea")}}Xc=new WeakMap;var Kc;class tC extends Xt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0});w(this,Kc,null)}render(){this.container.classList.add("squareAnnotation");const e=this.data,{width:n,height:s}=Ki(e.rect),r=this.svgFactory.create(n,s,!0),a=e.borderStyle.width,o=b(this,Kc,this.svgFactory.createElement("svg:rect"));return o.setAttribute("x",a/2),o.setAttribute("y",a/2),o.setAttribute("width",n-a),o.setAttribute("height",s-a),o.setAttribute("stroke-width",a||1),o.setAttribute("stroke","transparent"),o.setAttribute("fill","transparent"),r.append(o),this.container.append(r),!e.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return c(this,Kc)}addHighlightArea(){this.container.classList.add("highlightArea")}}Kc=new WeakMap;var Yc;class eC extends Xt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0});w(this,Yc,null)}render(){this.container.classList.add("circleAnnotation");const e=this.data,{width:n,height:s}=Ki(e.rect),r=this.svgFactory.create(n,s,!0),a=e.borderStyle.width,o=b(this,Yc,this.svgFactory.createElement("svg:ellipse"));return o.setAttribute("cx",n/2),o.setAttribute("cy",s/2),o.setAttribute("rx",n/2-a/2),o.setAttribute("ry",s/2-a/2),o.setAttribute("stroke-width",a||1),o.setAttribute("stroke","transparent"),o.setAttribute("fill","transparent"),r.append(o),this.container.append(r),!e.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return c(this,Yc)}addHighlightArea(){this.container.classList.add("highlightArea")}}Yc=new WeakMap;var Qc;class Tx extends Xt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0});w(this,Qc,null);this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const{data:{rect:e,vertices:n,borderStyle:s,popupRef:r}}=this;if(!n)return this.container;const{width:a,height:o}=Ki(e),l=this.svgFactory.create(a,o,!0);let h=[];for(let d=0,f=n.length;d<f;d+=2){const p=n[d]-e[0],g=e[3]-n[d+1];h.push(`${p},${g}`)}h=h.join(" ");const u=b(this,Qc,this.svgFactory.createElement(this.svgElementName));return u.setAttribute("points",h),u.setAttribute("stroke-width",s.width||1),u.setAttribute("stroke","transparent"),u.setAttribute("fill","transparent"),l.append(u),this.container.append(l),!r&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return c(this,Qc)}addHighlightArea(){this.container.classList.add("highlightArea")}}Qc=new WeakMap;class nC extends Tx{constructor(t){super(t),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class iC extends Xt{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}var Zc;class qg extends Xt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0});w(this,Zc,[]);this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType=this.data.it==="InkHighlight"?et.HIGHLIGHT:et.INK}render(){this.container.classList.add(this.containerClassName);const{data:{rect:e,inkLists:n,borderStyle:s,popupRef:r}}=this,{width:a,height:o}=Ki(e),l=this.svgFactory.create(a,o,!0);for(const h of n){let u=[];for(let f=0,p=h.length;f<p;f+=2){const g=h[f]-e[0],m=e[3]-h[f+1];u.push(`${g},${m}`)}u=u.join(" ");const d=this.svgFactory.createElement(this.svgElementName);c(this,Zc).push(d),d.setAttribute("points",u),d.setAttribute("stroke-width",s.width||1),d.setAttribute("stroke","transparent"),d.setAttribute("fill","transparent"),l.append(d)}return!r&&this.hasPopupData&&this._createPopup(),this.container.append(l),this._editOnDoubleClick(),this.container}getElementsToTriggerPopup(){return c(this,Zc)}addHighlightArea(){this.container.classList.add("highlightArea")}}Zc=new WeakMap;class Cx extends Xt{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0}),this.annotationEditorType=et.HIGHLIGHT}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("highlightAnnotation"),this._editOnDoubleClick(),this.container}}class sC extends Xt{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("underlineAnnotation"),this.container}}class rC extends Xt{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("squigglyAnnotation"),this.container}}class aC extends Xt{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("strikeoutAnnotation"),this.container}}class Px extends Xt{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.annotationEditorType=et.STAMP}render(){return this.container.classList.add("stampAnnotation"),this.container.setAttribute("role","img"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}var Jc,th,Ip;class oC extends Xt{constructor(e){var s;super(e,{isRenderable:!0});w(this,th);w(this,Jc,null);const{file:n}=this.data;this.filename=n.filename,this.content=n.content,(s=this.linkService.eventBus)==null||s.dispatch("fileattachmentannotation",{source:this,...n})}render(){this.container.classList.add("fileAttachmentAnnotation");const{container:e,data:n}=this;let s;n.hasAppearance||n.fillAlpha===0?s=document.createElement("div"):(s=document.createElement("img"),s.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(n.name)?"paperclip":"pushpin"}.svg`,n.fillAlpha&&n.fillAlpha<1&&(s.style=`filter: opacity(${Math.round(n.fillAlpha*100)}%);`)),s.addEventListener("dblclick",x(this,th,Ip).bind(this)),b(this,Jc,s);const{isMac:r}=De.platform;return e.addEventListener("keydown",a=>{a.key==="Enter"&&(r?a.metaKey:a.ctrlKey)&&x(this,th,Ip).call(this)}),!n.popupRef&&this.hasPopupData?this._createPopup():s.classList.add("popupTriggerArea"),e.append(s),e}getElementsToTriggerPopup(){return c(this,Jc)}addHighlightArea(){this.container.classList.add("highlightArea")}}Jc=new WeakMap,th=new WeakSet,Ip=function(){var e;(e=this.downloadManager)==null||e.openOrDownloadData(this.content,this.filename)};var eh,Hr,$r,nh,da,Rx,Dp,Cb;let lC=(Cb=class{constructor({div:t,accessibilityManager:e,annotationCanvasMap:n,annotationEditorUIManager:s,page:r,viewport:a,structTreeLayer:o}){w(this,da);w(this,eh,null);w(this,Hr,null);w(this,$r,new Map);w(this,nh,null);this.div=t,b(this,eh,e),b(this,Hr,n),b(this,nh,o||null),this.page=r,this.viewport=a,this.zIndex=0,this._annotationEditorUIManager=s}hasEditableAnnotations(){return c(this,$r).size>0}async render(t){var a;const{annotations:e}=t,n=this.div;la(n,this.viewport);const s=new Map,r={data:null,layer:n,linkService:t.linkService,downloadManager:t.downloadManager,imageResourcesPath:t.imageResourcesPath||"",renderForms:t.renderForms!==!1,svgFactory:new Gg,annotationStorage:t.annotationStorage||new Hg,enableScripting:t.enableScripting===!0,hasJSActions:t.hasJSActions,fieldObjects:t.fieldObjects,parent:this,elements:null};for(const o of e){if(o.noHTML)continue;const l=o.annotationType===Jt.POPUP;if(l){const d=s.get(o.id);if(!d)continue;r.elements=d}else{const{width:d,height:f}=Ki(o.rect);if(d<=0||f<=0)continue}r.data=o;const h=zT.create(r);if(!h.isRenderable)continue;if(!l&&o.popupRef){const d=s.get(o.popupRef);d?d.push(h):s.set(o.popupRef,[h])}const u=h.render();o.hidden&&(u.style.visibility="hidden"),await x(this,da,Rx).call(this,u,o.id),h._isEditable&&(c(this,$r).set(h.data.id,h),(a=this._annotationEditorUIManager)==null||a.renderAnnotationElement(h))}x(this,da,Dp).call(this)}update({viewport:t}){const e=this.div;this.viewport=t,la(e,{rotation:t.rotation}),x(this,da,Dp).call(this),e.hidden=!1}getEditableAnnotations(){return Array.from(c(this,$r).values())}getEditableAnnotation(t){return c(this,$r).get(t)}},eh=new WeakMap,Hr=new WeakMap,$r=new WeakMap,nh=new WeakMap,da=new WeakSet,Rx=async function(t,e){var a,o;const n=t.firstChild||t,s=n.id=`${Fg}${e}`,r=await((a=c(this,nh))==null?void 0:a.getAriaAttributes(s));if(r)for(const[l,h]of r)n.setAttribute(l,h);this.div.append(t),(o=c(this,eh))==null||o.moveElementInDOM(this.div,t,n,!1)},Dp=function(){if(!c(this,Hr))return;const t=this.div;for(const[e,n]of c(this,Hr)){const s=t.querySelector(`[data-annotation-id="${e}"]`);if(!s)continue;n.className="annotationContent";const{firstChild:r}=s;r?r.nodeName==="CANVAS"?r.replaceWith(n):r.classList.contains("annotationContent")?r.after(n):r.before(n):s.append(n)}c(this,Hr).clear()},Cb);const Bh=/\r\n?|\n/g;var Bn,nn,ih,Ur,sn,Zt,kx,Mx,Lx,Tu,Ji,Cu,Pu,Ix,Fp,Dx;const Ct=class Ct extends St{constructor(e){super({...e,name:"freeTextEditor"});w(this,Zt);w(this,Bn);w(this,nn,"");w(this,ih,`${this.id}-editor`);w(this,Ur,null);w(this,sn);b(this,Bn,e.color||Ct._defaultColor||St._defaultLineColor),b(this,sn,e.fontSize||Ct._defaultFontSize)}static get _keyboardManager(){const e=Ct.prototype,n=a=>a.isEmpty(),s=ca.TRANSLATE_SMALL,r=ca.TRANSLATE_BIG;return ht(this,"_keyboardManager",new Sh([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],e.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],e.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],e._translateEmpty,{args:[-s,0],checker:n}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e._translateEmpty,{args:[-r,0],checker:n}],[["ArrowRight","mac+ArrowRight"],e._translateEmpty,{args:[s,0],checker:n}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e._translateEmpty,{args:[r,0],checker:n}],[["ArrowUp","mac+ArrowUp"],e._translateEmpty,{args:[0,-s],checker:n}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e._translateEmpty,{args:[0,-r],checker:n}],[["ArrowDown","mac+ArrowDown"],e._translateEmpty,{args:[0,s],checker:n}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e._translateEmpty,{args:[0,r],checker:n}]]))}static initialize(e,n){St.initialize(e,n);const s=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(s.getPropertyValue("--freetext-padding"))}static updateDefaultParams(e,n){switch(e){case Q.FREETEXT_SIZE:Ct._defaultFontSize=n;break;case Q.FREETEXT_COLOR:Ct._defaultColor=n;break}}updateParams(e,n){switch(e){case Q.FREETEXT_SIZE:x(this,Zt,kx).call(this,n);break;case Q.FREETEXT_COLOR:x(this,Zt,Mx).call(this,n);break}}static get defaultPropertiesToUpdate(){return[[Q.FREETEXT_SIZE,Ct._defaultFontSize],[Q.FREETEXT_COLOR,Ct._defaultColor||St._defaultLineColor]]}get propertiesToUpdate(){return[[Q.FREETEXT_SIZE,c(this,sn)],[Q.FREETEXT_COLOR,c(this,Bn)]]}_translateEmpty(e,n){this._uiManager.translateSelectedEditors(e,n,!0)}getInitialTranslation(){const e=this.parentScale;return[-Ct._internalPadding*e,-(Ct._internalPadding+c(this,sn))*e]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){if(this.isInEditMode())return;this.parent.setEditingState(!1),this.parent.updateToolbar(et.FREETEXT),super.enableEditMode(),this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant"),b(this,Ur,new AbortController);const e=this._uiManager.combinedSignal(c(this,Ur));this.editorDiv.addEventListener("keydown",this.editorDivKeydown.bind(this),{signal:e}),this.editorDiv.addEventListener("focus",this.editorDivFocus.bind(this),{signal:e}),this.editorDiv.addEventListener("blur",this.editorDivBlur.bind(this),{signal:e}),this.editorDiv.addEventListener("input",this.editorDivInput.bind(this),{signal:e}),this.editorDiv.addEventListener("paste",this.editorDivPaste.bind(this),{signal:e})}disableEditMode(){var e;this.isInEditMode()&&(this.parent.setEditingState(!0),super.disableEditMode(),this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",c(this,ih)),this._isDraggable=!0,(e=c(this,Ur))==null||e.abort(),b(this,Ur,null),this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freetextEditing"))}focusin(e){this._focusEventsAllowed&&(super.focusin(e),e.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(){var e;this.width||(this.enableEditMode(),this.editorDiv.focus(),(e=this._initialOptions)!=null&&e.isCentered&&this.center(),this._initialOptions=null)}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freetextEditing")),super.remove()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();const e=c(this,nn),n=b(this,nn,x(this,Zt,Lx).call(this).trimEnd());if(e===n)return;const s=r=>{if(b(this,nn,r),!r){this.remove();return}x(this,Zt,Pu).call(this),this._uiManager.rebuild(this),x(this,Zt,Tu).call(this)};this.addCommands({cmd:()=>{s(n)},undo:()=>{s(e)},mustExec:!1}),x(this,Zt,Tu).call(this)}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}dblclick(e){this.enterInEditMode()}keydown(e){e.target===this.div&&e.key==="Enter"&&(this.enterInEditMode(),e.preventDefault())}editorDivKeydown(e){Ct._keyboardManager.exec(this,e)}editorDivFocus(e){this.isEditing=!0}editorDivBlur(e){this.isEditing=!1}editorDivInput(e){this.parent.div.classList.toggle("freetextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}render(){if(this.div)return this.div;let e,n;this.width&&(e=this.x,n=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",c(this,ih)),this.editorDiv.setAttribute("data-l10n-id","pdfjs-free-text2"),this.editorDiv.setAttribute("data-l10n-attrs","default-content"),this.enableEditing(),this.editorDiv.contentEditable=!0;const{style:s}=this.editorDiv;if(s.fontSize=`calc(${c(this,sn)}px * var(--scale-factor))`,s.color=c(this,Bn),this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),Ku(this,this.div,["dblclick","keydown"]),this.width){const[r,a]=this.parentDimensions;if(this.annotationElementId){const{position:o}=this._initialData;let[l,h]=this.getInitialTranslation();[l,h]=this.pageTranslationToScreen(l,h);const[u,d]=this.pageDimensions,[f,p]=this.pageTranslation;let g,m;switch(this.rotation){case 0:g=e+(o[0]-f)/u,m=n+this.height-(o[1]-p)/d;break;case 90:g=e+(o[0]-f)/u,m=n-(o[1]-p)/d,[l,h]=[h,-l];break;case 180:g=e-this.width+(o[0]-f)/u,m=n-(o[1]-p)/d,[l,h]=[-l,-h];break;case 270:g=e+(o[0]-f-this.height*d)/u,m=n+(o[1]-p-this.width*u)/d,[l,h]=[-h,l];break}this.setAt(g*r,m*a,l,h)}else this.setAt(e*r,n*a,this.width*r,this.height*a);x(this,Zt,Pu).call(this),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}editorDivPaste(e){var g,m,v;const n=e.clipboardData||window.clipboardData,{types:s}=n;if(s.length===1&&s[0]==="text/plain")return;e.preventDefault();const r=x(g=Ct,Ji,Fp).call(g,n.getData("text")||"").replaceAll(Bh,`
`);if(!r)return;const a=window.getSelection();if(!a.rangeCount)return;this.editorDiv.normalize(),a.deleteFromDocument();const o=a.getRangeAt(0);if(!r.includes(`
`)){o.insertNode(document.createTextNode(r)),this.editorDiv.normalize(),a.collapseToStart();return}const{startContainer:l,startOffset:h}=o,u=[],d=[];if(l.nodeType===Node.TEXT_NODE){const y=l.parentElement;if(d.push(l.nodeValue.slice(h).replaceAll(Bh,"")),y!==this.editorDiv){let A=u;for(const S of this.editorDiv.childNodes){if(S===y){A=d;continue}A.push(x(m=Ct,Ji,Cu).call(m,S))}}u.push(l.nodeValue.slice(0,h).replaceAll(Bh,""))}else if(l===this.editorDiv){let y=u,A=0;for(const S of this.editorDiv.childNodes)A++===h&&(y=d),y.push(x(v=Ct,Ji,Cu).call(v,S))}b(this,nn,`${u.join(`
`)}${r}${d.join(`
`)}`),x(this,Zt,Pu).call(this);const f=new Range;let p=u.reduce((y,A)=>y+A.length,0);for(const{firstChild:y}of this.editorDiv.childNodes)if(y.nodeType===Node.TEXT_NODE){const A=y.nodeValue.length;if(p<=A){f.setStart(y,p),f.setEnd(y,p);break}p-=A}a.removeAllRanges(),a.addRange(f)}get contentDiv(){return this.editorDiv}static async deserialize(e,n,s){var o;let r=null;if(e instanceof _x){const{data:{defaultAppearanceData:{fontSize:l,fontColor:h},rect:u,rotation:d,id:f,popupRef:p},textContent:g,textPosition:m,parent:{page:{pageNumber:v}}}=e;if(!g||g.length===0)return null;r=e={annotationType:et.FREETEXT,color:Array.from(h),fontSize:l,value:g.join(`
`),position:m,pageIndex:v-1,rect:u.slice(0),rotation:d,id:f,deleted:!1,popupRef:p}}const a=await super.deserialize(e,n,s);return b(a,sn,e.fontSize),b(a,Bn,W.makeHexColor(...e.color)),b(a,nn,x(o=Ct,Ji,Fp).call(o,e.value)),a.annotationElementId=e.id||null,a._initialData=r,a}serialize(e=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const n=Ct._internalPadding*this.parentScale,s=this.getRect(n,n),r=St._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:c(this,Bn)),a={annotationType:et.FREETEXT,color:r,fontSize:c(this,sn),value:x(this,Zt,Ix).call(this),pageIndex:this.pageIndex,rect:s,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return e?a:this.annotationElementId&&!x(this,Zt,Dx).call(this,a)?null:(a.id=this.annotationElementId,a)}renderAnnotationElement(e){const n=super.renderAnnotationElement(e);if(this.deleted)return n;const{style:s}=n;s.fontSize=`calc(${c(this,sn)}px * var(--scale-factor))`,s.color=c(this,Bn),n.replaceChildren();for(const a of c(this,nn).split(`
`)){const o=document.createElement("div");o.append(a?document.createTextNode(a):document.createElement("br")),n.append(o)}const r=Ct._internalPadding*this.parentScale;return e.updateEdited({rect:this.getRect(r,r),popupContent:c(this,nn)}),n}resetAnnotationElement(e){super.resetAnnotationElement(e),e.resetEdited()}};Bn=new WeakMap,nn=new WeakMap,ih=new WeakMap,Ur=new WeakMap,sn=new WeakMap,Zt=new WeakSet,kx=function(e){const n=r=>{this.editorDiv.style.fontSize=`calc(${r}px * var(--scale-factor))`,this.translate(0,-(r-c(this,sn))*this.parentScale),b(this,sn,r),x(this,Zt,Tu).call(this)},s=c(this,sn);this.addCommands({cmd:n.bind(this,e),undo:n.bind(this,s),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Q.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})},Mx=function(e){const n=r=>{b(this,Bn,this.editorDiv.style.color=r)},s=c(this,Bn);this.addCommands({cmd:n.bind(this,e),undo:n.bind(this,s),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Q.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})},Lx=function(){var s;const e=[];this.editorDiv.normalize();let n=null;for(const r of this.editorDiv.childNodes)(n==null?void 0:n.nodeType)===Node.TEXT_NODE&&r.nodeName==="BR"||(e.push(x(s=Ct,Ji,Cu).call(s,r)),n=r);return e.join(`
`)},Tu=function(){const[e,n]=this.parentDimensions;let s;if(this.isAttachedToDOM)s=this.div.getBoundingClientRect();else{const{currentLayer:r,div:a}=this,o=a.style.display,l=a.classList.contains("hidden");a.classList.remove("hidden"),a.style.display="hidden",r.div.append(this.div),s=a.getBoundingClientRect(),a.remove(),a.style.display=o,a.classList.toggle("hidden",l)}this.rotation%180===this.parentRotation%180?(this.width=s.width/e,this.height=s.height/n):(this.width=s.height/e,this.height=s.width/n),this.fixAndSetPosition()},Ji=new WeakSet,Cu=function(e){return(e.nodeType===Node.TEXT_NODE?e.nodeValue:e.innerText).replaceAll(Bh,"")},Pu=function(){if(this.editorDiv.replaceChildren(),!!c(this,nn))for(const e of c(this,nn).split(`
`)){const n=document.createElement("div");n.append(e?document.createTextNode(e):document.createElement("br")),this.editorDiv.append(n)}},Ix=function(){return c(this,nn).replaceAll(""," ")},Fp=function(e){return e.replaceAll(" ","")},Dx=function(e){const{value:n,fontSize:s,color:r,pageIndex:a}=this._initialData;return this._hasBeenMoved||e.value!==n||e.fontSize!==s||e.color.some((o,l)=>o!==r[l])||e.pageIndex!==a},w(Ct,Ji),K(Ct,"_freeTextDefaultContent",""),K(Ct,"_internalPadding",0),K(Ct,"_defaultColor",null),K(Ct,"_defaultFontSize",10),K(Ct,"_type","freetext"),K(Ct,"_editorType",et.FREETEXT);let Op=Ct;class Ox{toSVGPath(){Rt("Abstract method `toSVGPath` must be implemented.")}get box(){Rt("Abstract getter `box` must be implemented.")}serialize(t,e){Rt("Abstract method `serialize` must be implemented.")}get classNamesForDrawing(){Rt("Abstract getter `classNamesForDrawing` must be implemented.")}get classNamesForOutlining(){Rt("Abstract getter `classNamesForOutlining` must be implemented.")}get mustRemoveSelfIntersections(){return!1}}var rn,Vn,So,Eo,oi,ot,Wr,zr,sh,rh,_o,To,ks,ah,Sd,Ed,se,Ml,Fx,Nx,jx,Bx,Vx,Hx;const Si=class Si{constructor({x:t,y:e},n,s,r,a,o=0){w(this,se);w(this,rn);w(this,Vn,[]);w(this,So);w(this,Eo);w(this,oi,[]);w(this,ot,new Float64Array(18));w(this,Wr);w(this,zr);w(this,sh);w(this,rh);w(this,_o);w(this,To);w(this,ks,[]);b(this,rn,n),b(this,To,r*s),b(this,Eo,a),c(this,ot).set([NaN,NaN,NaN,NaN,t,e],6),b(this,So,o),b(this,rh,c(Si,ah)*s),b(this,sh,c(Si,Ed)*s),b(this,_o,s),c(this,ks).push(t,e)}isEmpty(){return isNaN(c(this,ot)[8])}add({x:t,y:e}){var I;b(this,Wr,t),b(this,zr,e);const[n,s,r,a]=c(this,rn);let[o,l,h,u]=c(this,ot).subarray(8,12);const d=t-h,f=e-u,p=Math.hypot(d,f);if(p<c(this,sh))return!1;const g=p-c(this,rh),m=g/p,v=m*d,y=m*f;let A=o,S=l;o=h,l=u,h+=v,u+=y,(I=c(this,ks))==null||I.push(t,e);const E=-y/g,T=v/g,_=E*c(this,To),R=T*c(this,To);return c(this,ot).set(c(this,ot).subarray(2,8),0),c(this,ot).set([h+_,u+R],4),c(this,ot).set(c(this,ot).subarray(14,18),12),c(this,ot).set([h-_,u-R],16),isNaN(c(this,ot)[6])?(c(this,oi).length===0&&(c(this,ot).set([o+_,l+R],2),c(this,oi).push(NaN,NaN,NaN,NaN,(o+_-n)/r,(l+R-s)/a),c(this,ot).set([o-_,l-R],14),c(this,Vn).push(NaN,NaN,NaN,NaN,(o-_-n)/r,(l-R-s)/a)),c(this,ot).set([A,S,o,l,h,u],6),!this.isEmpty()):(c(this,ot).set([A,S,o,l,h,u],6),Math.abs(Math.atan2(S-l,A-o)-Math.atan2(y,v))<Math.PI/2?([o,l,h,u]=c(this,ot).subarray(2,6),c(this,oi).push(NaN,NaN,NaN,NaN,((o+h)/2-n)/r,((l+u)/2-s)/a),[o,l,A,S]=c(this,ot).subarray(14,18),c(this,Vn).push(NaN,NaN,NaN,NaN,((A+o)/2-n)/r,((S+l)/2-s)/a),!0):([A,S,o,l,h,u]=c(this,ot).subarray(0,6),c(this,oi).push(((A+5*o)/6-n)/r,((S+5*l)/6-s)/a,((5*o+h)/6-n)/r,((5*l+u)/6-s)/a,((o+h)/2-n)/r,((l+u)/2-s)/a),[h,u,o,l,A,S]=c(this,ot).subarray(12,18),c(this,Vn).push(((A+5*o)/6-n)/r,((S+5*l)/6-s)/a,((5*o+h)/6-n)/r,((5*l+u)/6-s)/a,((o+h)/2-n)/r,((l+u)/2-s)/a),!0))}toSVGPath(){if(this.isEmpty())return"";const t=c(this,oi),e=c(this,Vn);if(isNaN(c(this,ot)[6])&&!this.isEmpty())return x(this,se,Fx).call(this);const n=[];n.push(`M${t[4]} ${t[5]}`);for(let s=6;s<t.length;s+=6)isNaN(t[s])?n.push(`L${t[s+4]} ${t[s+5]}`):n.push(`C${t[s]} ${t[s+1]} ${t[s+2]} ${t[s+3]} ${t[s+4]} ${t[s+5]}`);x(this,se,jx).call(this,n);for(let s=e.length-6;s>=6;s-=6)isNaN(e[s])?n.push(`L${e[s+4]} ${e[s+5]}`):n.push(`C${e[s]} ${e[s+1]} ${e[s+2]} ${e[s+3]} ${e[s+4]} ${e[s+5]}`);return x(this,se,Nx).call(this,n),n.join(" ")}newFreeDrawOutline(t,e,n,s,r,a){return new $x(t,e,n,s,r,a)}getOutlines(){var d;const t=c(this,oi),e=c(this,Vn),n=c(this,ot),[s,r,a,o]=c(this,rn),l=new Float64Array((((d=c(this,ks))==null?void 0:d.length)??0)+2);for(let f=0,p=l.length-2;f<p;f+=2)l[f]=(c(this,ks)[f]-s)/a,l[f+1]=(c(this,ks)[f+1]-r)/o;if(l[l.length-2]=(c(this,Wr)-s)/a,l[l.length-1]=(c(this,zr)-r)/o,isNaN(n[6])&&!this.isEmpty())return x(this,se,Bx).call(this,l);const h=new Float64Array(c(this,oi).length+24+c(this,Vn).length);let u=t.length;for(let f=0;f<u;f+=2){if(isNaN(t[f])){h[f]=h[f+1]=NaN;continue}h[f]=t[f],h[f+1]=t[f+1]}u=x(this,se,Hx).call(this,h,u);for(let f=e.length-6;f>=6;f-=6)for(let p=0;p<6;p+=2){if(isNaN(e[f+p])){h[u]=h[u+1]=NaN,u+=2;continue}h[u]=e[f+p],h[u+1]=e[f+p+1],u+=2}return x(this,se,Vx).call(this,h,u),this.newFreeDrawOutline(h,l,c(this,rn),c(this,_o),c(this,So),c(this,Eo))}};rn=new WeakMap,Vn=new WeakMap,So=new WeakMap,Eo=new WeakMap,oi=new WeakMap,ot=new WeakMap,Wr=new WeakMap,zr=new WeakMap,sh=new WeakMap,rh=new WeakMap,_o=new WeakMap,To=new WeakMap,ks=new WeakMap,ah=new WeakMap,Sd=new WeakMap,Ed=new WeakMap,se=new WeakSet,Ml=function(){const t=c(this,ot).subarray(4,6),e=c(this,ot).subarray(16,18),[n,s,r,a]=c(this,rn);return[(c(this,Wr)+(t[0]-e[0])/2-n)/r,(c(this,zr)+(t[1]-e[1])/2-s)/a,(c(this,Wr)+(e[0]-t[0])/2-n)/r,(c(this,zr)+(e[1]-t[1])/2-s)/a]},Fx=function(){const[t,e,n,s]=c(this,rn),[r,a,o,l]=x(this,se,Ml).call(this);return`M${(c(this,ot)[2]-t)/n} ${(c(this,ot)[3]-e)/s} L${(c(this,ot)[4]-t)/n} ${(c(this,ot)[5]-e)/s} L${r} ${a} L${o} ${l} L${(c(this,ot)[16]-t)/n} ${(c(this,ot)[17]-e)/s} L${(c(this,ot)[14]-t)/n} ${(c(this,ot)[15]-e)/s} Z`},Nx=function(t){const e=c(this,Vn);t.push(`L${e[4]} ${e[5]} Z`)},jx=function(t){const[e,n,s,r]=c(this,rn),a=c(this,ot).subarray(4,6),o=c(this,ot).subarray(16,18),[l,h,u,d]=x(this,se,Ml).call(this);t.push(`L${(a[0]-e)/s} ${(a[1]-n)/r} L${l} ${h} L${u} ${d} L${(o[0]-e)/s} ${(o[1]-n)/r}`)},Bx=function(t){const e=c(this,ot),[n,s,r,a]=c(this,rn),[o,l,h,u]=x(this,se,Ml).call(this),d=new Float64Array(36);return d.set([NaN,NaN,NaN,NaN,(e[2]-n)/r,(e[3]-s)/a,NaN,NaN,NaN,NaN,(e[4]-n)/r,(e[5]-s)/a,NaN,NaN,NaN,NaN,o,l,NaN,NaN,NaN,NaN,h,u,NaN,NaN,NaN,NaN,(e[16]-n)/r,(e[17]-s)/a,NaN,NaN,NaN,NaN,(e[14]-n)/r,(e[15]-s)/a],0),this.newFreeDrawOutline(d,t,c(this,rn),c(this,_o),c(this,So),c(this,Eo))},Vx=function(t,e){const n=c(this,Vn);return t.set([NaN,NaN,NaN,NaN,n[4],n[5]],e),e+=6},Hx=function(t,e){const n=c(this,ot).subarray(4,6),s=c(this,ot).subarray(16,18),[r,a,o,l]=c(this,rn),[h,u,d,f]=x(this,se,Ml).call(this);return t.set([NaN,NaN,NaN,NaN,(n[0]-r)/o,(n[1]-a)/l,NaN,NaN,NaN,NaN,h,u,NaN,NaN,NaN,NaN,d,f,NaN,NaN,NaN,NaN,(s[0]-r)/o,(s[1]-a)/l],e),e+=24},w(Si,ah,8),w(Si,Sd,2),w(Si,Ed,c(Si,ah)+c(Si,Sd));let Qu=Si;var Co,Gr,ji,oh,an,lh,Gt,qe,Ll,Il,Ux;class $x extends Ox{constructor(e,n,s,r,a,o){super();w(this,qe);w(this,Co);w(this,Gr,null);w(this,ji);w(this,oh);w(this,an);w(this,lh);w(this,Gt);b(this,Gt,e),b(this,an,n),b(this,Co,s),b(this,lh,r),b(this,ji,a),b(this,oh,o),x(this,qe,Ux).call(this,o);const{x:l,y:h,width:u,height:d}=c(this,Gr);for(let f=0,p=e.length;f<p;f+=2)e[f]=(e[f]-l)/u,e[f+1]=(e[f+1]-h)/d;for(let f=0,p=n.length;f<p;f+=2)n[f]=(n[f]-l)/u,n[f+1]=(n[f+1]-h)/d}toSVGPath(){const e=[`M${c(this,Gt)[4]} ${c(this,Gt)[5]}`];for(let n=6,s=c(this,Gt).length;n<s;n+=6){if(isNaN(c(this,Gt)[n])){e.push(`L${c(this,Gt)[n+4]} ${c(this,Gt)[n+5]}`);continue}e.push(`C${c(this,Gt)[n]} ${c(this,Gt)[n+1]} ${c(this,Gt)[n+2]} ${c(this,Gt)[n+3]} ${c(this,Gt)[n+4]} ${c(this,Gt)[n+5]}`)}return e.push("Z"),e.join(" ")}serialize([e,n,s,r],a){const o=s-e,l=r-n;let h,u;switch(a){case 0:h=x(this,qe,Ll).call(this,c(this,Gt),e,r,o,-l),u=x(this,qe,Ll).call(this,c(this,an),e,r,o,-l);break;case 90:h=x(this,qe,Il).call(this,c(this,Gt),e,n,o,l),u=x(this,qe,Il).call(this,c(this,an),e,n,o,l);break;case 180:h=x(this,qe,Ll).call(this,c(this,Gt),s,n,-o,l),u=x(this,qe,Ll).call(this,c(this,an),s,n,-o,l);break;case 270:h=x(this,qe,Il).call(this,c(this,Gt),s,r,-o,-l),u=x(this,qe,Il).call(this,c(this,an),s,r,-o,-l);break}return{outline:Array.from(h),points:[Array.from(u)]}}get box(){return c(this,Gr)}newOutliner(e,n,s,r,a,o=0){return new Qu(e,n,s,r,a,o)}getNewOutline(e,n){const{x:s,y:r,width:a,height:o}=c(this,Gr),[l,h,u,d]=c(this,Co),f=a*u,p=o*d,g=s*u+l,m=r*d+h,v=this.newOutliner({x:c(this,an)[0]*f+g,y:c(this,an)[1]*p+m},c(this,Co),c(this,lh),e,c(this,oh),n??c(this,ji));for(let y=2;y<c(this,an).length;y+=2)v.add({x:c(this,an)[y]*f+g,y:c(this,an)[y+1]*p+m});return v.getOutlines()}get mustRemoveSelfIntersections(){return!0}}Co=new WeakMap,Gr=new WeakMap,ji=new WeakMap,oh=new WeakMap,an=new WeakMap,lh=new WeakMap,Gt=new WeakMap,qe=new WeakSet,Ll=function(e,n,s,r,a){const o=new Float64Array(e.length);for(let l=0,h=e.length;l<h;l+=2)o[l]=n+e[l]*r,o[l+1]=s+e[l+1]*a;return o},Il=function(e,n,s,r,a){const o=new Float64Array(e.length);for(let l=0,h=e.length;l<h;l+=2)o[l]=n+e[l+1]*r,o[l+1]=s+e[l]*a;return o},Ux=function(e){const n=c(this,Gt);let s=n[4],r=n[5],a=s,o=r,l=s,h=r,u=s,d=r;const f=e?Math.max:Math.min;for(let y=6,A=n.length;y<A;y+=6){if(isNaN(n[y]))a=Math.min(a,n[y+4]),o=Math.min(o,n[y+5]),l=Math.max(l,n[y+4]),h=Math.max(h,n[y+5]),d<n[y+5]?(u=n[y+4],d=n[y+5]):d===n[y+5]&&(u=f(u,n[y+4]));else{const S=W.bezierBoundingBox(s,r,...n.slice(y,y+6));a=Math.min(a,S[0]),o=Math.min(o,S[1]),l=Math.max(l,S[2]),h=Math.max(h,S[3]),d<S[3]?(u=S[2],d=S[3]):d===S[3]&&(u=f(u,S[2]))}s=n[y+4],r=n[y+5]}const p=a-c(this,ji),g=o-c(this,ji),m=l-a+2*c(this,ji),v=h-o+2*c(this,ji);b(this,Gr,{x:p,y:g,width:m,height:v,lastPoint:[u,d]})};var ch,Ms,Hn,Fe,Wx,Ru,zx,Gx,Np;class _y{constructor(t,e=0,n=0,s=!0){w(this,Fe);w(this,ch);w(this,Ms,[]);w(this,Hn,[]);let r=1/0,a=-1/0,o=1/0,l=-1/0;const h=10**-4;for(const{x:v,y,width:A,height:S}of t){const E=Math.floor((v-e)/h)*h,T=Math.ceil((v+A+e)/h)*h,_=Math.floor((y-e)/h)*h,R=Math.ceil((y+S+e)/h)*h,k=[E,_,R,!0],I=[T,_,R,!1];c(this,Ms).push(k,I),r=Math.min(r,E),a=Math.max(a,T),o=Math.min(o,_),l=Math.max(l,R)}const u=a-r+2*n,d=l-o+2*n,f=r-n,p=o-n,g=c(this,Ms).at(s?-1:-2),m=[g[0],g[2]];for(const v of c(this,Ms)){const[y,A,S]=v;v[0]=(y-f)/u,v[1]=(A-p)/d,v[2]=(S-p)/d}b(this,ch,{x:f,y:p,width:u,height:d,lastPoint:m})}getOutlines(){c(this,Ms).sort((e,n)=>e[0]-n[0]||e[1]-n[1]||e[2]-n[2]);const t=[];for(const e of c(this,Ms))e[3]?(t.push(...x(this,Fe,Np).call(this,e)),x(this,Fe,zx).call(this,e)):(x(this,Fe,Gx).call(this,e),t.push(...x(this,Fe,Np).call(this,e)));return x(this,Fe,Wx).call(this,t)}}ch=new WeakMap,Ms=new WeakMap,Hn=new WeakMap,Fe=new WeakSet,Wx=function(t){const e=[],n=new Set;for(const a of t){const[o,l,h]=a;e.push([o,l,a],[o,h,a])}e.sort((a,o)=>a[1]-o[1]||a[0]-o[0]);for(let a=0,o=e.length;a<o;a+=2){const l=e[a][2],h=e[a+1][2];l.push(h),h.push(l),n.add(l),n.add(h)}const s=[];let r;for(;n.size>0;){const a=n.values().next().value;let[o,l,h,u,d]=a;n.delete(a);let f=o,p=l;for(r=[o,h],s.push(r);;){let g;if(n.has(u))g=u;else if(n.has(d))g=d;else break;n.delete(g),[o,l,h,u,d]=g,f!==o&&(r.push(f,p,o,p===l?l:h),f=o),p=p===l?h:l}r.push(f,p)}return new cC(s,c(this,ch))},Ru=function(t){const e=c(this,Hn);let n=0,s=e.length-1;for(;n<=s;){const r=n+s>>1,a=e[r][0];if(a===t)return r;a<t?n=r+1:s=r-1}return s+1},zx=function([,t,e]){const n=x(this,Fe,Ru).call(this,t);c(this,Hn).splice(n,0,[t,e])},Gx=function([,t,e]){const n=x(this,Fe,Ru).call(this,t);for(let s=n;s<c(this,Hn).length;s++){const[r,a]=c(this,Hn)[s];if(r!==t)break;if(r===t&&a===e){c(this,Hn).splice(s,1);return}}for(let s=n-1;s>=0;s--){const[r,a]=c(this,Hn)[s];if(r!==t)break;if(r===t&&a===e){c(this,Hn).splice(s,1);return}}},Np=function(t){const[e,n,s]=t,r=[[e,n,s]],a=x(this,Fe,Ru).call(this,s);for(let o=0;o<a;o++){const[l,h]=c(this,Hn)[o];for(let u=0,d=r.length;u<d;u++){const[,f,p]=r[u];if(!(h<=f||p<=l)){if(f>=l){if(p>h)r[u][1]=h;else{if(d===1)return[];r.splice(u,1),u--,d--}continue}r[u][2]=l,p>h&&r.push([e,h,p])}}}return r};var hh,Po;class cC extends Ox{constructor(e,n){super();w(this,hh);w(this,Po);b(this,Po,e),b(this,hh,n)}toSVGPath(){const e=[];for(const n of c(this,Po)){let[s,r]=n;e.push(`M${s} ${r}`);for(let a=2;a<n.length;a+=2){const o=n[a],l=n[a+1];o===s?(e.push(`V${l}`),r=l):l===r&&(e.push(`H${o}`),s=o)}e.push("Z")}return e.join(" ")}serialize([e,n,s,r],a){const o=[],l=s-e,h=r-n;for(const u of c(this,Po)){const d=new Array(u.length);for(let f=0;f<u.length;f+=2)d[f]=e+u[f]*l,d[f+1]=r-u[f+1]*h;o.push(d)}return o}get box(){return c(this,hh)}get classNamesForDrawing(){return["highlight"]}get classNamesForOutlining(){return["highlightOutline"]}}hh=new WeakMap,Po=new WeakMap;class jp extends Qu{newFreeDrawOutline(t,e,n,s,r,a){return new hC(t,e,n,s,r,a)}get classNamesForDrawing(){return["highlight","free"]}}class hC extends $x{get classNamesForDrawing(){return["highlight","free"]}get classNamesForOutlining(){return["highlightOutline","free"]}newOutliner(t,e,n,s,r,a=0){return new jp(t,e,n,s,r,a)}}var $n,qr,Ro,ee,uh,ko,dh,fh,Ls,Un,Mo,ph,Et,Bp,Vp,Hp,Js,qx,cs;const Ve=class Ve{constructor({editor:t=null,uiManager:e=null}){w(this,Et);w(this,$n,null);w(this,qr,null);w(this,Ro);w(this,ee,null);w(this,uh,!1);w(this,ko,!1);w(this,dh,null);w(this,fh);w(this,Ls,null);w(this,Un,null);w(this,Mo);var n;t?(b(this,ko,!1),b(this,Mo,Q.HIGHLIGHT_COLOR),b(this,dh,t)):(b(this,ko,!0),b(this,Mo,Q.HIGHLIGHT_DEFAULT_COLOR)),b(this,Un,(t==null?void 0:t._uiManager)||e),b(this,fh,c(this,Un)._eventBus),b(this,Ro,(t==null?void 0:t.color)||((n=c(this,Un))==null?void 0:n.highlightColors.values().next().value)||"#FFFF98"),c(Ve,ph)||b(Ve,ph,Object.freeze({blue:"pdfjs-editor-colorpicker-blue",green:"pdfjs-editor-colorpicker-green",pink:"pdfjs-editor-colorpicker-pink",red:"pdfjs-editor-colorpicker-red",yellow:"pdfjs-editor-colorpicker-yellow"}))}static get _keyboardManager(){return ht(this,"_keyboardManager",new Sh([[["Escape","mac+Escape"],Ve.prototype._hideDropdownFromKeyboard],[[" ","mac+ "],Ve.prototype._colorSelectFromKeyboard],[["ArrowDown","ArrowRight","mac+ArrowDown","mac+ArrowRight"],Ve.prototype._moveToNext],[["ArrowUp","ArrowLeft","mac+ArrowUp","mac+ArrowLeft"],Ve.prototype._moveToPrevious],[["Home","mac+Home"],Ve.prototype._moveToBeginning],[["End","mac+End"],Ve.prototype._moveToEnd]]))}renderButton(){const t=b(this,$n,document.createElement("button"));t.className="colorPicker",t.tabIndex="0",t.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-button"),t.setAttribute("aria-haspopup",!0);const e=c(this,Un)._signal;t.addEventListener("click",x(this,Et,Js).bind(this),{signal:e}),t.addEventListener("keydown",x(this,Et,Hp).bind(this),{signal:e});const n=b(this,qr,document.createElement("span"));return n.className="swatch",n.setAttribute("aria-hidden",!0),n.style.backgroundColor=c(this,Ro),t.append(n),t}renderMainDropdown(){const t=b(this,ee,x(this,Et,Bp).call(this));return t.setAttribute("aria-orientation","horizontal"),t.setAttribute("aria-labelledby","highlightColorPickerLabel"),t}_colorSelectFromKeyboard(t){if(t.target===c(this,$n)){x(this,Et,Js).call(this,t);return}const e=t.target.getAttribute("data-color");e&&x(this,Et,Vp).call(this,e,t)}_moveToNext(t){var e,n;if(!c(this,Et,cs)){x(this,Et,Js).call(this,t);return}if(t.target===c(this,$n)){(e=c(this,ee).firstChild)==null||e.focus();return}(n=t.target.nextSibling)==null||n.focus()}_moveToPrevious(t){var e,n;if(t.target===((e=c(this,ee))==null?void 0:e.firstChild)||t.target===c(this,$n)){c(this,Et,cs)&&this._hideDropdownFromKeyboard();return}c(this,Et,cs)||x(this,Et,Js).call(this,t),(n=t.target.previousSibling)==null||n.focus()}_moveToBeginning(t){var e;if(!c(this,Et,cs)){x(this,Et,Js).call(this,t);return}(e=c(this,ee).firstChild)==null||e.focus()}_moveToEnd(t){var e;if(!c(this,Et,cs)){x(this,Et,Js).call(this,t);return}(e=c(this,ee).lastChild)==null||e.focus()}hideDropdown(){var t,e;(t=c(this,ee))==null||t.classList.add("hidden"),(e=c(this,Ls))==null||e.abort(),b(this,Ls,null)}_hideDropdownFromKeyboard(){var t;if(!c(this,ko)){if(!c(this,Et,cs)){(t=c(this,dh))==null||t.unselect();return}this.hideDropdown(),c(this,$n).focus({preventScroll:!0,focusVisible:c(this,uh)})}}updateColor(t){if(c(this,qr)&&(c(this,qr).style.backgroundColor=t),!c(this,ee))return;const e=c(this,Un).highlightColors.values();for(const n of c(this,ee).children)n.setAttribute("aria-selected",e.next().value===t)}destroy(){var t,e;(t=c(this,$n))==null||t.remove(),b(this,$n,null),b(this,qr,null),(e=c(this,ee))==null||e.remove(),b(this,ee,null)}};$n=new WeakMap,qr=new WeakMap,Ro=new WeakMap,ee=new WeakMap,uh=new WeakMap,ko=new WeakMap,dh=new WeakMap,fh=new WeakMap,Ls=new WeakMap,Un=new WeakMap,Mo=new WeakMap,ph=new WeakMap,Et=new WeakSet,Bp=function(){const t=document.createElement("div"),e=c(this,Un)._signal;t.addEventListener("contextmenu",Cn,{signal:e}),t.className="dropdown",t.role="listbox",t.setAttribute("aria-multiselectable",!1),t.setAttribute("aria-orientation","vertical"),t.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-dropdown");for(const[n,s]of c(this,Un).highlightColors){const r=document.createElement("button");r.tabIndex="0",r.role="option",r.setAttribute("data-color",s),r.title=n,r.setAttribute("data-l10n-id",c(Ve,ph)[n]);const a=document.createElement("span");r.append(a),a.className="swatch",a.style.backgroundColor=s,r.setAttribute("aria-selected",s===c(this,Ro)),r.addEventListener("click",x(this,Et,Vp).bind(this,s),{signal:e}),t.append(r)}return t.addEventListener("keydown",x(this,Et,Hp).bind(this),{signal:e}),t},Vp=function(t,e){e.stopPropagation(),c(this,fh).dispatch("switchannotationeditorparams",{source:this,type:c(this,Mo),value:t})},Hp=function(t){Ve._keyboardManager.exec(this,t)},Js=function(t){if(c(this,Et,cs)){this.hideDropdown();return}if(b(this,uh,t.detail===0),c(this,Ls)||(b(this,Ls,new AbortController),window.addEventListener("pointerdown",x(this,Et,qx).bind(this),{signal:c(this,Un).combinedSignal(c(this,Ls))})),c(this,ee)){c(this,ee).classList.remove("hidden");return}const e=b(this,ee,x(this,Et,Bp).call(this));c(this,$n).append(e)},qx=function(t){var e;(e=c(this,ee))!=null&&e.contains(t.target)||this.hideDropdown()},cs=function(){return c(this,ee)&&!c(this,ee).classList.contains("hidden")},w(Ve,ph,null);let Zu=Ve;var Lo,gh,Bi,Xr,Io,bn,mh,yh,Kr,Wn,Ee,Ue,Do,Vi,ne,Oo,xn,vh,J,$p,ku,Xx,Kx,Yx,Up,tr,Sn,Pa,Qx,Mu,Dl,Zx,Jx,tA,eA,nA;const mt=class mt extends St{constructor(e){super({...e,name:"highlightEditor"});w(this,J);w(this,Lo,null);w(this,gh,0);w(this,Bi);w(this,Xr,null);w(this,Io,null);w(this,bn,null);w(this,mh,null);w(this,yh,0);w(this,Kr,null);w(this,Wn,null);w(this,Ee,null);w(this,Ue,!1);w(this,Do,null);w(this,Vi);w(this,ne,null);w(this,Oo,"");w(this,xn);w(this,vh,"");this.color=e.color||mt._defaultColor,b(this,xn,e.thickness||mt._defaultThickness),b(this,Vi,e.opacity||mt._defaultOpacity),b(this,Bi,e.boxes||null),b(this,vh,e.methodOfCreation||""),b(this,Oo,e.text||""),this._isDraggable=!1,e.highlightId>-1?(b(this,Ue,!0),x(this,J,ku).call(this,e),x(this,J,tr).call(this)):c(this,Bi)&&(b(this,Lo,e.anchorNode),b(this,gh,e.anchorOffset),b(this,mh,e.focusNode),b(this,yh,e.focusOffset),x(this,J,$p).call(this),x(this,J,tr).call(this),this.rotate(this.rotation))}static get _keyboardManager(){const e=mt.prototype;return ht(this,"_keyboardManager",new Sh([[["ArrowLeft","mac+ArrowLeft"],e._moveCaret,{args:[0]}],[["ArrowRight","mac+ArrowRight"],e._moveCaret,{args:[1]}],[["ArrowUp","mac+ArrowUp"],e._moveCaret,{args:[2]}],[["ArrowDown","mac+ArrowDown"],e._moveCaret,{args:[3]}]]))}get telemetryInitialData(){return{action:"added",type:c(this,Ue)?"free_highlight":"highlight",color:this._uiManager.highlightColorNames.get(this.color),thickness:c(this,xn),methodOfCreation:c(this,vh)}}get telemetryFinalData(){return{type:"highlight",color:this._uiManager.highlightColorNames.get(this.color)}}static computeTelemetryFinalData(e){return{numberOfColors:e.get("color").size}}static initialize(e,n){var s;St.initialize(e,n),mt._defaultColor||(mt._defaultColor=((s=n.highlightColors)==null?void 0:s.values().next().value)||"#fff066")}static updateDefaultParams(e,n){switch(e){case Q.HIGHLIGHT_DEFAULT_COLOR:mt._defaultColor=n;break;case Q.HIGHLIGHT_THICKNESS:mt._defaultThickness=n;break}}translateInPage(e,n){}get toolbarPosition(){return c(this,Do)}updateParams(e,n){switch(e){case Q.HIGHLIGHT_COLOR:x(this,J,Xx).call(this,n);break;case Q.HIGHLIGHT_THICKNESS:x(this,J,Kx).call(this,n);break}}static get defaultPropertiesToUpdate(){return[[Q.HIGHLIGHT_DEFAULT_COLOR,mt._defaultColor],[Q.HIGHLIGHT_THICKNESS,mt._defaultThickness]]}get propertiesToUpdate(){return[[Q.HIGHLIGHT_COLOR,this.color||mt._defaultColor],[Q.HIGHLIGHT_THICKNESS,c(this,xn)||mt._defaultThickness],[Q.HIGHLIGHT_FREE,c(this,Ue)]]}async addEditToolbar(){const e=await super.addEditToolbar();return e?(this._uiManager.highlightColors&&(b(this,Io,new Zu({editor:this})),e.addColorPicker(c(this,Io))),e):null}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}fixAndSetPosition(){return super.fixAndSetPosition(x(this,J,Dl).call(this))}getBaseTranslation(){return[0,0]}getRect(e,n){return super.getRect(e,n,x(this,J,Dl).call(this))}onceAdded(){this.annotationElementId||this.parent.addUndoableEditor(this),this.div.focus()}remove(){x(this,J,Up).call(this),this._reportTelemetry({action:"deleted"}),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(x(this,J,tr).call(this),this.isAttachedToDOM||this.parent.add(this)))}setParent(e){var s;let n=!1;this.parent&&!e?x(this,J,Up).call(this):e&&(x(this,J,tr).call(this,e),n=!this.parent&&((s=this.div)==null?void 0:s.classList.contains("selectedEditor"))),super.setParent(e),this.show(this._isVisible),n&&this.select()}rotate(e){var r,a,o;const{drawLayer:n}=this.parent;let s;c(this,Ue)?(e=(e-this.rotation+360)%360,s=x(r=mt,Sn,Pa).call(r,c(this,Wn).box,e)):s=x(a=mt,Sn,Pa).call(a,this,e),n.rotate(c(this,Ee),e),n.rotate(c(this,ne),e),n.updateBox(c(this,Ee),s),n.updateBox(c(this,ne),x(o=mt,Sn,Pa).call(o,c(this,bn).box,e))}render(){if(this.div)return this.div;const e=super.render();c(this,Oo)&&(e.setAttribute("aria-label",c(this,Oo)),e.setAttribute("role","mark")),c(this,Ue)?e.classList.add("free"):this.div.addEventListener("keydown",x(this,J,Qx).bind(this),{signal:this._uiManager._signal});const n=b(this,Kr,document.createElement("div"));e.append(n),n.setAttribute("aria-hidden","true"),n.className="internal",n.style.clipPath=c(this,Xr);const[s,r]=this.parentDimensions;return this.setDims(this.width*s,this.height*r),Ku(this,c(this,Kr),["pointerover","pointerleave"]),this.enableEditing(),e}pointerover(){this.isSelected||this.parent.drawLayer.addClass(c(this,ne),"hovered")}pointerleave(){this.isSelected||this.parent.drawLayer.removeClass(c(this,ne),"hovered")}_moveCaret(e){switch(this.parent.unselect(this),e){case 0:case 2:x(this,J,Mu).call(this,!0);break;case 1:case 3:x(this,J,Mu).call(this,!1);break}}select(){var e,n;super.select(),c(this,ne)&&((e=this.parent)==null||e.drawLayer.removeClass(c(this,ne),"hovered"),(n=this.parent)==null||n.drawLayer.addClass(c(this,ne),"selected"))}unselect(){var e;super.unselect(),c(this,ne)&&((e=this.parent)==null||e.drawLayer.removeClass(c(this,ne),"selected"),c(this,Ue)||x(this,J,Mu).call(this,!1))}get _mustFixPosition(){return!c(this,Ue)}show(e=this._isVisible){super.show(e),this.parent&&(this.parent.drawLayer.show(c(this,Ee),e),this.parent.drawLayer.show(c(this,ne),e))}static startHighlighting(e,n,{target:s,x:r,y:a}){const{x:o,y:l,width:h,height:u}=s.getBoundingClientRect(),d=new AbortController,f=e.combinedSignal(d),p=m=>{m.preventDefault(),m.stopPropagation()},g=m=>{d.abort(),x(this,Sn,eA).call(this,e,m)};window.addEventListener("blur",g,{signal:f}),window.addEventListener("pointerup",g,{signal:f}),window.addEventListener("pointerdown",p,{capture:!0,passive:!1,signal:f}),window.addEventListener("contextmenu",Cn,{signal:f}),s.addEventListener("pointermove",x(this,Sn,tA).bind(this,e),{signal:f}),this._freeHighlight=new jp({x:r,y:a},[o,l,h,u],e.scale,this._defaultThickness/2,n,.001),{id:this._freeHighlightId,clipPathId:this._freeHighlightClipId}=e.drawLayer.draw(this._freeHighlight,this._defaultColor,this._defaultOpacity,!0)}static async deserialize(e,n,s){var m,v,y,A;let r=null;if(e instanceof Cx){const{data:{quadPoints:S,rect:E,rotation:T,id:_,color:R,opacity:k,popupRef:I},parent:{page:{pageNumber:D}}}=e;r=e={annotationType:et.HIGHLIGHT,color:Array.from(R),opacity:k,quadPoints:S,boxes:null,pageIndex:D-1,rect:E.slice(0),rotation:T,id:_,deleted:!1,popupRef:I}}else if(e instanceof qg){const{data:{inkLists:S,rect:E,rotation:T,id:_,color:R,borderStyle:{rawWidth:k},popupRef:I},parent:{page:{pageNumber:D}}}=e;r=e={annotationType:et.HIGHLIGHT,color:Array.from(R),thickness:k,inkLists:S,boxes:null,pageIndex:D-1,rect:E.slice(0),rotation:T,id:_,deleted:!1,popupRef:I}}const{color:a,quadPoints:o,inkLists:l,opacity:h}=e,u=await super.deserialize(e,n,s);u.color=W.makeHexColor(...a),b(u,Vi,h||1),l&&b(u,xn,e.thickness),u.annotationElementId=e.id||null,u._initialData=r;const[d,f]=u.pageDimensions,[p,g]=u.pageTranslation;if(o){const S=b(u,Bi,[]);for(let E=0;E<o.length;E+=8)S.push({x:(o[E]-p)/d,y:1-(o[E+1]-g)/f,width:(o[E+2]-o[E])/d,height:(o[E+1]-o[E+5])/f});x(m=u,J,$p).call(m),x(v=u,J,tr).call(v),u.rotate(u.rotation)}else if(l){b(u,Ue,!0);const S=l[0],E={x:S[0]-p,y:f-(S[1]-g)},T=new jp(E,[0,0,d,f],1,c(u,xn)/2,!0,.001);for(let k=0,I=S.length;k<I;k+=2)E.x=S[k]-p,E.y=f-(S[k+1]-g),T.add(E);const{id:_,clipPathId:R}=n.drawLayer.draw(T,u.color,u._defaultOpacity,!0);x(y=u,J,ku).call(y,{highlightOutlines:T.getOutlines(),highlightId:_,clipPathId:R}),x(A=u,J,tr).call(A)}return u}serialize(e=!1){if(this.isEmpty()||e)return null;if(this.deleted)return this.serializeDeleted();const n=this.getRect(0,0),s=St._colorManager.convert(this.color),r={annotationType:et.HIGHLIGHT,color:s,opacity:c(this,Vi),thickness:c(this,xn),quadPoints:x(this,J,Zx).call(this),outlines:x(this,J,Jx).call(this,n),pageIndex:this.pageIndex,rect:n,rotation:x(this,J,Dl).call(this),structTreeParentId:this._structTreeParentId};return this.annotationElementId&&!x(this,J,nA).call(this,r)?null:(r.id=this.annotationElementId,r)}renderAnnotationElement(e){return e.updateEdited({rect:this.getRect(0,0)}),null}static canCreateNewEmptyEditor(){return!1}};Lo=new WeakMap,gh=new WeakMap,Bi=new WeakMap,Xr=new WeakMap,Io=new WeakMap,bn=new WeakMap,mh=new WeakMap,yh=new WeakMap,Kr=new WeakMap,Wn=new WeakMap,Ee=new WeakMap,Ue=new WeakMap,Do=new WeakMap,Vi=new WeakMap,ne=new WeakMap,Oo=new WeakMap,xn=new WeakMap,vh=new WeakMap,J=new WeakSet,$p=function(){const e=new _y(c(this,Bi),.001);b(this,Wn,e.getOutlines()),{x:this.x,y:this.y,width:this.width,height:this.height}=c(this,Wn).box;const n=new _y(c(this,Bi),.0025,.001,this._uiManager.direction==="ltr");b(this,bn,n.getOutlines());const{lastPoint:s}=c(this,bn).box;b(this,Do,[(s[0]-this.x)/this.width,(s[1]-this.y)/this.height])},ku=function({highlightOutlines:e,highlightId:n,clipPathId:s}){var d,f;if(b(this,Wn,e),b(this,bn,e.getNewOutline(c(this,xn)/2+1.5,.0025)),n>=0)b(this,Ee,n),b(this,Xr,s),this.parent.drawLayer.finalizeLine(n,e),b(this,ne,this.parent.drawLayer.drawOutline(c(this,bn)));else if(this.parent){const p=this.parent.viewport.rotation;this.parent.drawLayer.updateLine(c(this,Ee),e),this.parent.drawLayer.updateBox(c(this,Ee),x(d=mt,Sn,Pa).call(d,c(this,Wn).box,(p-this.rotation+360)%360)),this.parent.drawLayer.updateLine(c(this,ne),c(this,bn)),this.parent.drawLayer.updateBox(c(this,ne),x(f=mt,Sn,Pa).call(f,c(this,bn).box,p))}const{x:a,y:o,width:l,height:h}=e.box;switch(this.rotation){case 0:this.x=a,this.y=o,this.width=l,this.height=h;break;case 90:{const[p,g]=this.parentDimensions;this.x=o,this.y=1-a,this.width=l*g/p,this.height=h*p/g;break}case 180:this.x=1-a,this.y=1-o,this.width=l,this.height=h;break;case 270:{const[p,g]=this.parentDimensions;this.x=1-o,this.y=a,this.width=l*g/p,this.height=h*p/g;break}}const{lastPoint:u}=c(this,bn).box;b(this,Do,[(u[0]-a)/l,(u[1]-o)/h])},Xx=function(e){const n=(a,o)=>{var l,h,u;this.color=a,(l=this.parent)==null||l.drawLayer.changeColor(c(this,Ee),a),(h=c(this,Io))==null||h.updateColor(a),b(this,Vi,o),(u=this.parent)==null||u.drawLayer.changeOpacity(c(this,Ee),o)},s=this.color,r=c(this,Vi);this.addCommands({cmd:n.bind(this,e,mt._defaultOpacity),undo:n.bind(this,s,r),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Q.HIGHLIGHT_COLOR,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"color_changed",color:this._uiManager.highlightColorNames.get(e)},!0)},Kx=function(e){const n=c(this,xn),s=r=>{b(this,xn,r),x(this,J,Yx).call(this,r)};this.addCommands({cmd:s.bind(this,e),undo:s.bind(this,n),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Q.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"thickness_changed",thickness:e},!0)},Yx=function(e){if(!c(this,Ue))return;x(this,J,ku).call(this,{highlightOutlines:c(this,Wn).getNewOutline(e/2)}),this.fixAndSetPosition();const[n,s]=this.parentDimensions;this.setDims(this.width*n,this.height*s)},Up=function(){c(this,Ee)===null||!this.parent||(this.parent.drawLayer.remove(c(this,Ee)),b(this,Ee,null),this.parent.drawLayer.remove(c(this,ne)),b(this,ne,null))},tr=function(e=this.parent){c(this,Ee)===null&&({id:ke(this,Ee)._,clipPathId:ke(this,Xr)._}=e.drawLayer.draw(c(this,Wn),this.color,c(this,Vi)),b(this,ne,e.drawLayer.drawOutline(c(this,bn))),c(this,Kr)&&(c(this,Kr).style.clipPath=c(this,Xr)))},Sn=new WeakSet,Pa=function({x:e,y:n,width:s,height:r},a){switch(a){case 90:return{x:1-n-r,y:e,width:r,height:s};case 180:return{x:1-e-s,y:1-n-r,width:s,height:r};case 270:return{x:n,y:1-e-s,width:r,height:s}}return{x:e,y:n,width:s,height:r}},Qx=function(e){mt._keyboardManager.exec(this,e)},Mu=function(e){if(!c(this,Lo))return;const n=window.getSelection();e?n.setPosition(c(this,Lo),c(this,gh)):n.setPosition(c(this,mh),c(this,yh))},Dl=function(){return c(this,Ue)?this.rotation:0},Zx=function(){if(c(this,Ue))return null;const[e,n]=this.pageDimensions,[s,r]=this.pageTranslation,a=c(this,Bi),o=new Float32Array(a.length*8);let l=0;for(const{x:h,y:u,width:d,height:f}of a){const p=h*e+s,g=(1-u-f)*n+r;o[l]=o[l+4]=p,o[l+1]=o[l+3]=g,o[l+2]=o[l+6]=p+d*e,o[l+5]=o[l+7]=g+f*n,l+=8}return o},Jx=function(e){return c(this,Wn).serialize(e,x(this,J,Dl).call(this))},tA=function(e,n){this._freeHighlight.add(n)&&e.drawLayer.updatePath(this._freeHighlightId,this._freeHighlight)},eA=function(e,n){this._freeHighlight.isEmpty()?e.drawLayer.remove(this._freeHighlightId):e.createAndAddNewEditor(n,!1,{highlightId:this._freeHighlightId,highlightOutlines:this._freeHighlight.getOutlines(),clipPathId:this._freeHighlightClipId,methodOfCreation:"main_toolbar"}),this._freeHighlightId=-1,this._freeHighlight=null,this._freeHighlightClipId=""},nA=function(e){const{color:n}=this._initialData;return e.color.some((s,r)=>s!==n[r])},w(mt,Sn),K(mt,"_defaultColor",null),K(mt,"_defaultOpacity",1),K(mt,"_defaultThickness",12),K(mt,"_type","highlight"),K(mt,"_editorType",et.HIGHLIGHT),K(mt,"_freeHighlightId",-1),K(mt,"_freeHighlight",null),K(mt,"_freeHighlightClipId","");let Ju=mt;var Yr,Qr,li,Hi,An,Zr,Jr,ta,$i,Fo,ea,na,Is,B,iA,sA,rA,aA,zp,oA,Gp,lA,cA,hA,uA,dA,er,qp,Xp,Kp,Lu,Iu,Ra,Yp,Du,ns,fA,Qp,pA,gA,Zp,Ou,Ol;const Ot=class Ot extends St{constructor(e){super({...e,name:"inkEditor"});w(this,B);w(this,Yr,0);w(this,Qr,0);w(this,li,null);w(this,Hi,new Path2D);w(this,An,!1);w(this,Zr,null);w(this,Jr,!1);w(this,ta,!1);w(this,$i,null);w(this,Fo,null);w(this,ea,0);w(this,na,0);w(this,Is,null);this.color=e.color||null,this.thickness=e.thickness||null,this.opacity=e.opacity||null,this.paths=[],this.bezierPath2D=[],this.allRawPaths=[],this.currentPath=[],this.scaleFactor=1,this.translationX=this.translationY=0,this.x=0,this.y=0,this._willKeepAspectRatio=!0}static initialize(e,n){St.initialize(e,n)}static updateDefaultParams(e,n){switch(e){case Q.INK_THICKNESS:Ot._defaultThickness=n;break;case Q.INK_COLOR:Ot._defaultColor=n;break;case Q.INK_OPACITY:Ot._defaultOpacity=n/100;break}}updateParams(e,n){switch(e){case Q.INK_THICKNESS:x(this,B,iA).call(this,n);break;case Q.INK_COLOR:x(this,B,sA).call(this,n);break;case Q.INK_OPACITY:x(this,B,rA).call(this,n);break}}static get defaultPropertiesToUpdate(){return[[Q.INK_THICKNESS,Ot._defaultThickness],[Q.INK_COLOR,Ot._defaultColor||St._defaultLineColor],[Q.INK_OPACITY,Math.round(Ot._defaultOpacity*100)]]}get propertiesToUpdate(){return[[Q.INK_THICKNESS,this.thickness||Ot._defaultThickness],[Q.INK_COLOR,this.color||Ot._defaultColor||St._defaultLineColor],[Q.INK_OPACITY,Math.round(100*(this.opacity??Ot._defaultOpacity))]]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.canvas||(x(this,B,Lu).call(this),x(this,B,Iu).call(this)),this.isAttachedToDOM||(this.parent.add(this),x(this,B,Ra).call(this)),x(this,B,Ol).call(this)))}remove(){var e;this.canvas!==null&&(this.isEmpty()||this.commit(),this.canvas.width=this.canvas.height=0,this.canvas.remove(),this.canvas=null,c(this,li)&&(clearTimeout(c(this,li)),b(this,li,null)),(e=c(this,$i))==null||e.disconnect(),b(this,$i,null),super.remove())}setParent(e){!this.parent&&e?this._uiManager.removeShouldRescale(this):this.parent&&e===null&&this._uiManager.addShouldRescale(this),super.setParent(e)}onScaleChanging(){const[e,n]=this.parentDimensions,s=this.width*e,r=this.height*n;this.setDimensions(s,r)}enableEditMode(){c(this,An)||this.canvas===null||(super.enableEditMode(),this._isDraggable=!1,x(this,B,qp).call(this))}disableEditMode(){!this.isInEditMode()||this.canvas===null||(super.disableEditMode(),this._isDraggable=!this.isEmpty(),this.div.classList.remove("editing"),x(this,B,Xp).call(this))}onceAdded(){this._isDraggable=!this.isEmpty()}isEmpty(){return this.paths.length===0||this.paths.length===1&&this.paths[0].length===0}commit(){c(this,An)||(super.commit(),this.isEditing=!1,this.disableEditMode(),this.setInForeground(),b(this,An,!0),this.div.classList.add("disabled"),x(this,B,Ol).call(this,!0),this.select(),this.parent.addInkEditorIfNeeded(!0),this.moveInDOM(),this.div.focus({preventScroll:!0}))}focusin(e){this._focusEventsAllowed&&(super.focusin(e),this.enableEditMode())}canvasPointerdown(e){e.button!==0||!this.isInEditMode()||c(this,An)||(this.setInForeground(),e.preventDefault(),this.div.contains(document.activeElement)||this.div.focus({preventScroll:!0}),x(this,B,oA).call(this,e.offsetX,e.offsetY))}canvasPointermove(e){e.preventDefault(),x(this,B,Gp).call(this,e.offsetX,e.offsetY)}canvasPointerup(e){e.preventDefault(),x(this,B,Kp).call(this,e)}canvasPointerleave(e){x(this,B,Kp).call(this,e)}get isResizable(){return!this.isEmpty()&&c(this,An)}render(){if(this.div)return this.div;let e,n;this.width&&(e=this.x,n=this.y),super.render(),this.div.setAttribute("data-l10n-id","pdfjs-ink");const[s,r,a,o]=x(this,B,aA).call(this);if(this.setAt(s,r,0,0),this.setDims(a,o),x(this,B,Lu).call(this),this.width){const[l,h]=this.parentDimensions;this.setAspectRatio(this.width*l,this.height*h),this.setAt(e*l,n*h,this.width*l,this.height*h),b(this,ta,!0),x(this,B,Ra).call(this),this.setDims(this.width*l,this.height*h),x(this,B,er).call(this),this.div.classList.add("disabled")}else this.div.classList.add("editing"),this.enableEditMode();return x(this,B,Iu).call(this),this.div}setDimensions(e,n){const s=Math.round(e),r=Math.round(n);if(c(this,ea)===s&&c(this,na)===r)return;b(this,ea,s),b(this,na,r),this.canvas.style.visibility="hidden";const[a,o]=this.parentDimensions;this.width=e/a,this.height=n/o,this.fixAndSetPosition(),c(this,An)&&x(this,B,Yp).call(this,e,n),x(this,B,Ra).call(this),x(this,B,er).call(this),this.canvas.style.visibility="visible",this.fixDims()}static async deserialize(e,n,s){var v,y,A;if(e instanceof qg)return null;const r=await super.deserialize(e,n,s);r.thickness=e.thickness,r.color=W.makeHexColor(...e.color),r.opacity=e.opacity;const[a,o]=r.pageDimensions,l=r.width*a,h=r.height*o,u=r.parentScale,d=e.thickness/2;b(r,An,!0),b(r,ea,Math.round(l)),b(r,na,Math.round(h));const{paths:f,rect:p,rotation:g}=e;for(let{bezier:S}of f){S=x(v=Ot,ns,pA).call(v,S,p,g);const E=[];r.paths.push(E);let T=u*(S[0]-d),_=u*(S[1]-d);for(let k=2,I=S.length;k<I;k+=6){const D=u*(S[k]-d),M=u*(S[k+1]-d),L=u*(S[k+2]-d),N=u*(S[k+3]-d),O=u*(S[k+4]-d),U=u*(S[k+5]-d);E.push([[T,_],[D,M],[L,N],[O,U]]),T=O,_=U}const R=x(this,ns,fA).call(this,E);r.bezierPath2D.push(R)}const m=x(y=r,B,Zp).call(y);return b(r,Qr,Math.max(St.MIN_SIZE,m[2]-m[0])),b(r,Yr,Math.max(St.MIN_SIZE,m[3]-m[1])),x(A=r,B,Yp).call(A,l,h),r}serialize(){if(this.isEmpty())return null;const e=this.getRect(0,0),n=St._colorManager.convert(this.ctx.strokeStyle);return{annotationType:et.INK,color:n,thickness:this.thickness,opacity:this.opacity,paths:x(this,B,gA).call(this,this.scaleFactor/this.parentScale,this.translationX,this.translationY,e),pageIndex:this.pageIndex,rect:e,rotation:this.rotation,structTreeParentId:this._structTreeParentId}}};Yr=new WeakMap,Qr=new WeakMap,li=new WeakMap,Hi=new WeakMap,An=new WeakMap,Zr=new WeakMap,Jr=new WeakMap,ta=new WeakMap,$i=new WeakMap,Fo=new WeakMap,ea=new WeakMap,na=new WeakMap,Is=new WeakMap,B=new WeakSet,iA=function(e){const n=r=>{this.thickness=r,x(this,B,Ol).call(this)},s=this.thickness;this.addCommands({cmd:n.bind(this,e),undo:n.bind(this,s),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Q.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0})},sA=function(e){const n=r=>{this.color=r,x(this,B,er).call(this)},s=this.color;this.addCommands({cmd:n.bind(this,e),undo:n.bind(this,s),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Q.INK_COLOR,overwriteIfSameType:!0,keepUndo:!0})},rA=function(e){const n=r=>{this.opacity=r,x(this,B,er).call(this)};e/=100;const s=this.opacity;this.addCommands({cmd:n.bind(this,e),undo:n.bind(this,s),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Q.INK_OPACITY,overwriteIfSameType:!0,keepUndo:!0})},aA=function(){const{parentRotation:e,parentDimensions:[n,s]}=this;switch(e){case 90:return[0,s,s,n];case 180:return[n,s,n,s];case 270:return[n,0,s,n];default:return[0,0,n,s]}},zp=function(){const{ctx:e,color:n,opacity:s,thickness:r,parentScale:a,scaleFactor:o}=this;e.lineWidth=r*a/o,e.lineCap="round",e.lineJoin="round",e.miterLimit=10,e.strokeStyle=`${n}${L1(s)}`},oA=function(e,n){this.canvas.addEventListener("contextmenu",Cn,{signal:this._uiManager._signal}),x(this,B,Xp).call(this),b(this,Zr,new AbortController);const s=this._uiManager.combinedSignal(c(this,Zr));this.canvas.addEventListener("pointerleave",this.canvasPointerleave.bind(this),{signal:s}),this.canvas.addEventListener("pointermove",this.canvasPointermove.bind(this),{signal:s}),this.canvas.addEventListener("pointerup",this.canvasPointerup.bind(this),{signal:s}),this.isEditing=!0,c(this,ta)||(b(this,ta,!0),x(this,B,Ra).call(this),this.thickness||(this.thickness=Ot._defaultThickness),this.color||(this.color=Ot._defaultColor||St._defaultLineColor),this.opacity??(this.opacity=Ot._defaultOpacity)),this.currentPath.push([e,n]),b(this,Jr,!1),x(this,B,zp).call(this),b(this,Is,()=>{x(this,B,hA).call(this),c(this,Is)&&window.requestAnimationFrame(c(this,Is))}),window.requestAnimationFrame(c(this,Is))},Gp=function(e,n){const[s,r]=this.currentPath.at(-1);if(this.currentPath.length>1&&e===s&&n===r)return;const a=this.currentPath;let o=c(this,Hi);if(a.push([e,n]),b(this,Jr,!0),a.length<=2){o.moveTo(...a[0]),o.lineTo(e,n);return}a.length===3&&(b(this,Hi,o=new Path2D),o.moveTo(...a[0])),x(this,B,uA).call(this,o,...a.at(-3),...a.at(-2),e,n)},lA=function(){if(this.currentPath.length===0)return;const e=this.currentPath.at(-1);c(this,Hi).lineTo(...e)},cA=function(e,n){b(this,Is,null),e=Math.min(Math.max(e,0),this.canvas.width),n=Math.min(Math.max(n,0),this.canvas.height),x(this,B,Gp).call(this,e,n),x(this,B,lA).call(this);let s;if(this.currentPath.length!==1)s=x(this,B,dA).call(this);else{const h=[e,n];s=[[h,h.slice(),h.slice(),h]]}const r=c(this,Hi),a=this.currentPath;this.currentPath=[],b(this,Hi,new Path2D);const o=()=>{this.allRawPaths.push(a),this.paths.push(s),this.bezierPath2D.push(r),this._uiManager.rebuild(this)},l=()=>{this.allRawPaths.pop(),this.paths.pop(),this.bezierPath2D.pop(),this.paths.length===0?this.remove():(this.canvas||(x(this,B,Lu).call(this),x(this,B,Iu).call(this)),x(this,B,Ol).call(this))};this.addCommands({cmd:o,undo:l,mustExec:!0})},hA=function(){if(!c(this,Jr))return;b(this,Jr,!1);const e=Math.ceil(this.thickness*this.parentScale),n=this.currentPath.slice(-3),s=n.map(o=>o[0]),r=n.map(o=>o[1]);Math.min(...s)-e,Math.max(...s)+e,Math.min(...r)-e,Math.max(...r)+e;const{ctx:a}=this;a.save(),a.clearRect(0,0,this.canvas.width,this.canvas.height);for(const o of this.bezierPath2D)a.stroke(o);a.stroke(c(this,Hi)),a.restore()},uA=function(e,n,s,r,a,o,l){const h=(n+r)/2,u=(s+a)/2,d=(r+o)/2,f=(a+l)/2;e.bezierCurveTo(h+2*(r-h)/3,u+2*(a-u)/3,d+2*(r-d)/3,f+2*(a-f)/3,d,f)},dA=function(){const e=this.currentPath;if(e.length<=2)return[[e[0],e[0],e.at(-1),e.at(-1)]];const n=[];let s,[r,a]=e[0];for(s=1;s<e.length-2;s++){const[p,g]=e[s],[m,v]=e[s+1],y=(p+m)/2,A=(g+v)/2,S=[r+2*(p-r)/3,a+2*(g-a)/3],E=[y+2*(p-y)/3,A+2*(g-A)/3];n.push([[r,a],S,E,[y,A]]),[r,a]=[y,A]}const[o,l]=e[s],[h,u]=e[s+1],d=[r+2*(o-r)/3,a+2*(l-a)/3],f=[h+2*(o-h)/3,u+2*(l-u)/3];return n.push([[r,a],d,f,[h,u]]),n},er=function(){if(this.isEmpty()){x(this,B,Du).call(this);return}x(this,B,zp).call(this);const{canvas:e,ctx:n}=this;n.setTransform(1,0,0,1,0,0),n.clearRect(0,0,e.width,e.height),x(this,B,Du).call(this);for(const s of this.bezierPath2D)n.stroke(s)},qp=function(){if(c(this,Fo))return;b(this,Fo,new AbortController);const e=this._uiManager.combinedSignal(c(this,Fo));this.canvas.addEventListener("pointerdown",this.canvasPointerdown.bind(this),{signal:e})},Xp=function(){var e;(e=this.pointerdownAC)==null||e.abort(),this.pointerdownAC=null},Kp=function(e){var n;(n=c(this,Zr))==null||n.abort(),b(this,Zr,null),x(this,B,qp).call(this),c(this,li)&&clearTimeout(c(this,li)),b(this,li,setTimeout(()=>{b(this,li,null),this.canvas.removeEventListener("contextmenu",Cn)},10)),x(this,B,cA).call(this,e.offsetX,e.offsetY),this.addToAnnotationStorage(),this.setInBackground()},Lu=function(){this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=0,this.canvas.className="inkEditorCanvas",this.canvas.setAttribute("data-l10n-id","pdfjs-ink-canvas"),this.div.append(this.canvas),this.ctx=this.canvas.getContext("2d")},Iu=function(){b(this,$i,new ResizeObserver(e=>{const n=e[0].contentRect;n.width&&n.height&&this.setDimensions(n.width,n.height)})),c(this,$i).observe(this.div),this._uiManager._signal.addEventListener("abort",()=>{var e;(e=c(this,$i))==null||e.disconnect(),b(this,$i,null)},{once:!0})},Ra=function(){if(!c(this,ta))return;const[e,n]=this.parentDimensions;this.canvas.width=Math.ceil(this.width*e),this.canvas.height=Math.ceil(this.height*n),x(this,B,Du).call(this)},Yp=function(e,n){const s=x(this,B,Ou).call(this),r=(e-s)/c(this,Qr),a=(n-s)/c(this,Yr);this.scaleFactor=Math.min(r,a)},Du=function(){const e=x(this,B,Ou).call(this)/2;this.ctx.setTransform(this.scaleFactor,0,0,this.scaleFactor,this.translationX*this.scaleFactor+e,this.translationY*this.scaleFactor+e)},ns=new WeakSet,fA=function(e){const n=new Path2D;for(let s=0,r=e.length;s<r;s++){const[a,o,l,h]=e[s];s===0&&n.moveTo(...a),n.bezierCurveTo(o[0],o[1],l[0],l[1],h[0],h[1])}return n},Qp=function(e,n,s){const[r,a,o,l]=n;switch(s){case 0:for(let h=0,u=e.length;h<u;h+=2)e[h]+=r,e[h+1]=l-e[h+1];break;case 90:for(let h=0,u=e.length;h<u;h+=2){const d=e[h];e[h]=e[h+1]+r,e[h+1]=d+a}break;case 180:for(let h=0,u=e.length;h<u;h+=2)e[h]=o-e[h],e[h+1]+=a;break;case 270:for(let h=0,u=e.length;h<u;h+=2){const d=e[h];e[h]=o-e[h+1],e[h+1]=l-d}break;default:throw new Error("Invalid rotation")}return e},pA=function(e,n,s){const[r,a,o,l]=n;switch(s){case 0:for(let h=0,u=e.length;h<u;h+=2)e[h]-=r,e[h+1]=l-e[h+1];break;case 90:for(let h=0,u=e.length;h<u;h+=2){const d=e[h];e[h]=e[h+1]-a,e[h+1]=d-r}break;case 180:for(let h=0,u=e.length;h<u;h+=2)e[h]=o-e[h],e[h+1]-=a;break;case 270:for(let h=0,u=e.length;h<u;h+=2){const d=e[h];e[h]=l-e[h+1],e[h+1]=o-d}break;default:throw new Error("Invalid rotation")}return e},gA=function(e,n,s,r){var u,d;const a=[],o=this.thickness/2,l=e*n+o,h=e*s+o;for(const f of this.paths){const p=[],g=[];for(let m=0,v=f.length;m<v;m++){const[y,A,S,E]=f[m];if(y[0]===E[0]&&y[1]===E[1]&&v===1){const N=e*y[0]+l,O=e*y[1]+h;p.push(N,O),g.push(N,O);break}const T=e*y[0]+l,_=e*y[1]+h,R=e*A[0]+l,k=e*A[1]+h,I=e*S[0]+l,D=e*S[1]+h,M=e*E[0]+l,L=e*E[1]+h;m===0&&(p.push(T,_),g.push(T,_)),p.push(R,k,I,D,M,L),g.push(R,k),m===v-1&&g.push(M,L)}a.push({bezier:x(u=Ot,ns,Qp).call(u,p,r,this.rotation),points:x(d=Ot,ns,Qp).call(d,g,r,this.rotation)})}return a},Zp=function(){let e=1/0,n=-1/0,s=1/0,r=-1/0;for(const a of this.paths)for(const[o,l,h,u]of a){const d=W.bezierBoundingBox(...o,...l,...h,...u);e=Math.min(e,d[0]),s=Math.min(s,d[1]),n=Math.max(n,d[2]),r=Math.max(r,d[3])}return[e,s,n,r]},Ou=function(){return c(this,An)?Math.ceil(this.thickness*this.parentScale):0},Ol=function(e=!1){if(this.isEmpty())return;if(!c(this,An)){x(this,B,er).call(this);return}const n=x(this,B,Zp).call(this),s=x(this,B,Ou).call(this);b(this,Qr,Math.max(St.MIN_SIZE,n[2]-n[0])),b(this,Yr,Math.max(St.MIN_SIZE,n[3]-n[1]));const r=Math.ceil(s+c(this,Qr)*this.scaleFactor),a=Math.ceil(s+c(this,Yr)*this.scaleFactor),[o,l]=this.parentDimensions;this.width=r/o,this.height=a/l,this.setAspectRatio(r,a);const h=this.translationX,u=this.translationY;this.translationX=-n[0],this.translationY=-n[1],x(this,B,Ra).call(this),x(this,B,er).call(this),b(this,ea,r),b(this,na,a),this.setDims(r,a);const d=e?s/this.scaleFactor/2:0;this.translate(h-this.translationX-d,u-this.translationY-d)},w(Ot,ns),K(Ot,"_defaultColor",null),K(Ot,"_defaultOpacity",1),K(Ot,"_defaultThickness",1),K(Ot,"_type","ink"),K(Ot,"_editorType",et.INK);let Wp=Ot;var Nt,ge,Ds,Ui,Os,No,ci,Wi,hi,on,jo,ct,Fl,Nl,Fu,tg,mA,Nu,eg,ju,yA,vA;const Ql=class Ql extends St{constructor(e){super({...e,name:"stampEditor"});w(this,ct);w(this,Nt,null);w(this,ge,null);w(this,Ds,null);w(this,Ui,null);w(this,Os,null);w(this,No,"");w(this,ci,null);w(this,Wi,null);w(this,hi,null);w(this,on,!1);w(this,jo,!1);b(this,Ui,e.bitmapUrl),b(this,Os,e.bitmapFile)}static initialize(e,n){St.initialize(e,n)}static get supportedTypes(){return ht(this,"supportedTypes",["apng","avif","bmp","gif","jpeg","png","svg+xml","webp","x-icon"].map(n=>`image/${n}`))}static get supportedTypesStr(){return ht(this,"supportedTypesStr",this.supportedTypes.join(","))}static isHandlingMimeForPasting(e){return this.supportedTypes.includes(e)}static paste(e,n){n.pasteEditor(et.STAMP,{bitmapFile:e.getAsFile()})}altTextFinish(){this._uiManager.useNewAltTextFlow&&(this.div.hidden=!1),super.altTextFinish()}get telemetryFinalData(){var e;return{type:"stamp",hasAltText:!!((e=this.altTextData)!=null&&e.altText)}}static computeTelemetryFinalData(e){const n=e.get("hasAltText");return{hasAltText:n.get(!0)??0,hasNoAltText:n.get(!1)??0}}async mlGuessAltText(e=null,n=!0){if(this.hasAltTextData())return null;const{mlManager:s}=this._uiManager;if(!s)throw new Error("No ML.");if(!await s.isEnabledFor("altText"))throw new Error("ML isn't enabled for alt text.");const{data:r,width:a,height:o}=e||this.copyCanvas(null,null,!0).imageData,l=await s.guess({name:"altText",request:{data:r,width:a,height:o,channels:r.length/(a*o)}});if(!l)throw new Error("No response from the AI service.");if(l.error)throw new Error("Error from the AI service.");if(l.cancel)return null;if(!l.output)throw new Error("No valid response from the AI service.");const h=l.output;return await this.setGuessedAltText(h),n&&!this.hasAltTextData()&&(this.altTextData={alt:h,decorative:!1}),h}remove(){var e,n;c(this,ge)&&(b(this,Nt,null),this._uiManager.imageManager.deleteId(c(this,ge)),(e=c(this,ci))==null||e.remove(),b(this,ci,null),(n=c(this,Wi))==null||n.disconnect(),b(this,Wi,null),c(this,hi)&&(clearTimeout(c(this,hi)),b(this,hi,null))),super.remove()}rebuild(){if(!this.parent){c(this,ge)&&x(this,ct,Fu).call(this);return}super.rebuild(),this.div!==null&&(c(this,ge)&&c(this,ci)===null&&x(this,ct,Fu).call(this),this.isAttachedToDOM||this.parent.add(this))}onceAdded(){this._isDraggable=!0,this.div.focus()}isEmpty(){return!(c(this,Ds)||c(this,Nt)||c(this,Ui)||c(this,Os)||c(this,ge))}get isResizable(){return!0}render(){if(this.div)return this.div;let e,n;if(this.width&&(e=this.x,n=this.y),super.render(),this.div.hidden=!0,this.div.setAttribute("role","figure"),this.addAltTextButton(),c(this,Nt)?x(this,ct,tg).call(this):x(this,ct,Fu).call(this),this.width&&!this.annotationElementId){const[s,r]=this.parentDimensions;this.setAt(e*s,n*r,this.width*s,this.height*r)}return this.div}copyCanvas(e,n,s=!1){var p;e||(e=224);const{width:r,height:a}=c(this,Nt),o=new Kf;let l=c(this,Nt),h=r,u=a,d=null;if(n){if(r>n||a>n){const k=Math.min(n/r,n/a);h=Math.floor(r*k),u=Math.floor(a*k)}d=document.createElement("canvas");const g=d.width=Math.ceil(h*o.sx),m=d.height=Math.ceil(u*o.sy);c(this,on)||(l=x(this,ct,Nu).call(this,g,m));const v=d.getContext("2d");v.filter=this._uiManager.hcmFilter;let y="white",A="#cfcfd8";this._uiManager.hcmFilter!=="none"?A="black":(p=window.matchMedia)!=null&&p.call(window,"(prefers-color-scheme: dark)").matches&&(y="#8f8f9d",A="#42414d");const S=15,E=S*o.sx,T=S*o.sy,_=new OffscreenCanvas(E*2,T*2),R=_.getContext("2d");R.fillStyle=y,R.fillRect(0,0,E*2,T*2),R.fillStyle=A,R.fillRect(0,0,E,T),R.fillRect(E,T,E,T),v.fillStyle=v.createPattern(_,"repeat"),v.fillRect(0,0,g,m),v.drawImage(l,0,0,l.width,l.height,0,0,g,m)}let f=null;if(s){let g,m;if(o.symmetric&&l.width<e&&l.height<e)g=l.width,m=l.height;else if(l=c(this,Nt),r>e||a>e){const A=Math.min(e/r,e/a);g=Math.floor(r*A),m=Math.floor(a*A),c(this,on)||(l=x(this,ct,Nu).call(this,g,m))}const y=new OffscreenCanvas(g,m).getContext("2d",{willReadFrequently:!0});y.drawImage(l,0,0,l.width,l.height,0,0,g,m),f={width:g,height:m,data:y.getImageData(0,0,g,m).data}}return{canvas:d,width:h,height:u,imageData:f}}getImageForAltText(){return c(this,ci)}static async deserialize(e,n,s){var m;let r=null;if(e instanceof Px){const{data:{rect:v,rotation:y,id:A,structParent:S,popupRef:E},container:T,parent:{page:{pageNumber:_}}}=e,R=T.querySelector("canvas"),k=s.imageManager.getFromCanvas(T.id,R);R.remove();const I=((m=await n._structTree.getAriaAttributes(`${Fg}${A}`))==null?void 0:m.get("aria-label"))||"";r=e={annotationType:et.STAMP,bitmapId:k.id,bitmap:k.bitmap,pageIndex:_-1,rect:v.slice(0),rotation:y,id:A,deleted:!1,accessibilityData:{decorative:!1,altText:I},isSvg:!1,structParent:S,popupRef:E}}const a=await super.deserialize(e,n,s),{rect:o,bitmap:l,bitmapUrl:h,bitmapId:u,isSvg:d,accessibilityData:f}=e;u&&s.imageManager.isValidId(u)?(b(a,ge,u),l&&b(a,Nt,l)):b(a,Ui,h),b(a,on,d);const[p,g]=a.pageDimensions;return a.width=(o[2]-o[0])/p,a.height=(o[3]-o[1])/g,a.annotationElementId=e.id||null,f&&(a.altTextData=f),a._initialData=r,b(a,jo,!!r),a}serialize(e=!1,n=null){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const s={annotationType:et.STAMP,bitmapId:c(this,ge),pageIndex:this.pageIndex,rect:this.getRect(0,0),rotation:this.rotation,isSvg:c(this,on),structTreeParentId:this._structTreeParentId};if(e)return s.bitmapUrl=x(this,ct,ju).call(this,!0),s.accessibilityData=this.serializeAltText(!0),s;const{decorative:r,altText:a}=this.serializeAltText(!1);if(!r&&a&&(s.accessibilityData={type:"Figure",alt:a}),this.annotationElementId){const l=x(this,ct,vA).call(this,s);if(l.isSame)return null;l.isSameAltText?delete s.accessibilityData:s.accessibilityData.structParent=this._initialData.structParent??-1}if(s.id=this.annotationElementId,n===null)return s;n.stamps||(n.stamps=new Map);const o=c(this,on)?(s.rect[2]-s.rect[0])*(s.rect[3]-s.rect[1]):null;if(!n.stamps.has(c(this,ge)))n.stamps.set(c(this,ge),{area:o,serialized:s}),s.bitmap=x(this,ct,ju).call(this,!1);else if(c(this,on)){const l=n.stamps.get(c(this,ge));o>l.area&&(l.area=o,l.serialized.bitmap.close(),l.serialized.bitmap=x(this,ct,ju).call(this,!1))}return s}renderAnnotationElement(e){return e.updateEdited({rect:this.getRect(0,0)}),null}};Nt=new WeakMap,ge=new WeakMap,Ds=new WeakMap,Ui=new WeakMap,Os=new WeakMap,No=new WeakMap,ci=new WeakMap,Wi=new WeakMap,hi=new WeakMap,on=new WeakMap,jo=new WeakMap,ct=new WeakSet,Fl=function(e,n=!1){if(!e){this.remove();return}b(this,Nt,e.bitmap),n||(b(this,ge,e.id),b(this,on,e.isSvg)),e.file&&b(this,No,e.file.name),x(this,ct,tg).call(this)},Nl=function(){if(b(this,Ds,null),this._uiManager.enableWaiting(!1),!!c(this,ci)){if(this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&c(this,Nt)){this._editToolbar.hide(),this._uiManager.editAltText(this,!0);return}if(!this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&c(this,Nt)){this._reportTelemetry({action:"pdfjs.image.image_added",data:{alt_text_modal:!1,alt_text_type:"empty"}});try{this.mlGuessAltText()}catch{}}this.div.focus()}},Fu=function(){if(c(this,ge)){this._uiManager.enableWaiting(!0),this._uiManager.imageManager.getFromId(c(this,ge)).then(s=>x(this,ct,Fl).call(this,s,!0)).finally(()=>x(this,ct,Nl).call(this));return}if(c(this,Ui)){const s=c(this,Ui);b(this,Ui,null),this._uiManager.enableWaiting(!0),b(this,Ds,this._uiManager.imageManager.getFromUrl(s).then(r=>x(this,ct,Fl).call(this,r)).finally(()=>x(this,ct,Nl).call(this)));return}if(c(this,Os)){const s=c(this,Os);b(this,Os,null),this._uiManager.enableWaiting(!0),b(this,Ds,this._uiManager.imageManager.getFromFile(s).then(r=>x(this,ct,Fl).call(this,r)).finally(()=>x(this,ct,Nl).call(this)));return}const e=document.createElement("input");e.type="file",e.accept=Ql.supportedTypesStr;const n=this._uiManager._signal;b(this,Ds,new Promise(s=>{e.addEventListener("change",async()=>{if(!e.files||e.files.length===0)this.remove();else{this._uiManager.enableWaiting(!0);const r=await this._uiManager.imageManager.getFromFile(e.files[0]);this._reportTelemetry({action:"pdfjs.image.image_selected",data:{alt_text_modal:this._uiManager.useNewAltTextFlow}}),x(this,ct,Fl).call(this,r)}s()},{signal:n}),e.addEventListener("cancel",()=>{this.remove(),s()},{signal:n})}).finally(()=>x(this,ct,Nl).call(this))),e.click()},tg=function(){const{div:e}=this;let{width:n,height:s}=c(this,Nt);const[r,a]=this.pageDimensions,o=.75;if(this.width)n=this.width*r,s=this.height*a;else if(n>o*r||s>o*a){const d=Math.min(o*r/n,o*a/s);n*=d,s*=d}const[l,h]=this.parentDimensions;this.setDims(n*l/r,s*h/a),this._uiManager.enableWaiting(!1);const u=b(this,ci,document.createElement("canvas"));u.setAttribute("role","img"),this.addContainer(u),(!this._uiManager.useNewAltTextWhenAddingImage||!this._uiManager.useNewAltTextFlow||this.annotationElementId)&&(e.hidden=!1),x(this,ct,eg).call(this,n,s),x(this,ct,yA).call(this),c(this,jo)||(this.parent.addUndoableEditor(this),b(this,jo,!0)),this._reportTelemetry({action:"inserted_image"}),c(this,No)&&u.setAttribute("aria-label",c(this,No))},mA=function(e,n){var o;const[s,r]=this.parentDimensions;this.width=e/s,this.height=n/r,(o=this._initialOptions)!=null&&o.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,c(this,hi)!==null&&clearTimeout(c(this,hi)),b(this,hi,setTimeout(()=>{b(this,hi,null),x(this,ct,eg).call(this,e,n)},200))},Nu=function(e,n){const{width:s,height:r}=c(this,Nt);let a=s,o=r,l=c(this,Nt);for(;a>2*e||o>2*n;){const h=a,u=o;a>2*e&&(a=a>=16384?Math.floor(a/2)-1:Math.ceil(a/2)),o>2*n&&(o=o>=16384?Math.floor(o/2)-1:Math.ceil(o/2));const d=new OffscreenCanvas(a,o);d.getContext("2d").drawImage(l,0,0,h,u,0,0,a,o),l=d.transferToImageBitmap()}return l},eg=function(e,n){const s=new Kf,r=Math.ceil(e*s.sx),a=Math.ceil(n*s.sy),o=c(this,ci);if(!o||o.width===r&&o.height===a)return;o.width=r,o.height=a;const l=c(this,on)?c(this,Nt):x(this,ct,Nu).call(this,r,a),h=o.getContext("2d");h.filter=this._uiManager.hcmFilter,h.drawImage(l,0,0,l.width,l.height,0,0,r,a)},ju=function(e){if(e){if(c(this,on)){const r=this._uiManager.imageManager.getSvgUrl(c(this,ge));if(r)return r}const n=document.createElement("canvas");return{width:n.width,height:n.height}=c(this,Nt),n.getContext("2d").drawImage(c(this,Nt),0,0),n.toDataURL()}if(c(this,on)){const[n,s]=this.pageDimensions,r=Math.round(this.width*n*Vs.PDF_TO_CSS_UNITS),a=Math.round(this.height*s*Vs.PDF_TO_CSS_UNITS),o=new OffscreenCanvas(r,a);return o.getContext("2d").drawImage(c(this,Nt),0,0,c(this,Nt).width,c(this,Nt).height,0,0,r,a),o.transferToImageBitmap()}return structuredClone(c(this,Nt))},yA=function(){this._uiManager._signal&&(b(this,Wi,new ResizeObserver(e=>{const n=e[0].contentRect;n.width&&n.height&&x(this,ct,mA).call(this,n.width,n.height)})),c(this,Wi).observe(this.div),this._uiManager._signal.addEventListener("abort",()=>{var e;(e=c(this,Wi))==null||e.disconnect(),b(this,Wi,null)},{once:!0}))},vA=function(e){var h;const{rect:n,pageIndex:s,accessibilityData:{altText:r}}=this._initialData,a=e.rect.every((u,d)=>Math.abs(u-n[d])<1),o=e.pageIndex===s,l=(((h=e.accessibilityData)==null?void 0:h.alt)||"")===r;return{isSame:a&&o&&l,isSameAltText:l}},K(Ql,"_type","stamp"),K(Ql,"_editorType",et.STAMP);let Jp=Ql;var ia,Bo,ui,Fs,zi,ln,Ns,Vo,Ho,_e,Gi,q,js,ve,bA,ig,sg,rg,Bu;const kn=class kn{constructor({uiManager:t,pageIndex:e,div:n,structTreeLayer:s,accessibilityManager:r,annotationLayer:a,drawLayer:o,textLayer:l,viewport:h,l10n:u}){w(this,ve);w(this,ia);w(this,Bo,!1);w(this,ui,null);w(this,Fs,null);w(this,zi,null);w(this,ln,new Map);w(this,Ns,!1);w(this,Vo,!1);w(this,Ho,!1);w(this,_e,null);w(this,Gi,null);w(this,q);const d=[...c(kn,js).values()];if(!kn._initialized){kn._initialized=!0;for(const f of d)f.initialize(u,t)}t.registerEditorTypes(d),b(this,q,t),this.pageIndex=e,this.div=n,b(this,ia,r),b(this,ui,a),this.viewport=h,b(this,_e,l),this.drawLayer=o,this._structTree=s,c(this,q).addLayer(this)}get isEmpty(){return c(this,ln).size===0}get isInvisible(){return this.isEmpty&&c(this,q).getMode()===et.NONE}updateToolbar(t){c(this,q).updateToolbar(t)}updateMode(t=c(this,q).getMode()){switch(x(this,ve,Bu).call(this),t){case et.NONE:this.disableTextSelection(),this.togglePointerEvents(!1),this.toggleAnnotationLayerPointerEvents(!0),this.disableClick();return;case et.INK:this.addInkEditorIfNeeded(!1),this.disableTextSelection(),this.togglePointerEvents(!0),this.disableClick();break;case et.HIGHLIGHT:this.enableTextSelection(),this.togglePointerEvents(!1),this.disableClick();break;default:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick()}this.toggleAnnotationLayerPointerEvents(!1);const{classList:e}=this.div;for(const n of c(kn,js).values())e.toggle(`${n._type}Editing`,t===n._editorType);this.div.hidden=!1}hasTextLayer(t){var e;return t===((e=c(this,_e))==null?void 0:e.div)}addInkEditorIfNeeded(t){if(c(this,q).getMode()!==et.INK)return;if(!t){for(const n of c(this,ln).values())if(n.isEmpty()){n.setInBackground();return}}this.createAndAddNewEditor({offsetX:0,offsetY:0},!1).setInBackground()}setEditingState(t){c(this,q).setEditingState(t)}addCommands(t){c(this,q).addCommands(t)}toggleDrawing(t=!1){this.div.classList.toggle("drawing",!t)}togglePointerEvents(t=!1){this.div.classList.toggle("disabled",!t)}toggleAnnotationLayerPointerEvents(t=!1){var e;(e=c(this,ui))==null||e.div.classList.toggle("disabled",!t)}async enable(){this.div.tabIndex=0,this.togglePointerEvents(!0);const t=new Set;for(const n of c(this,ln).values())n.enableEditing(),n.show(!0),n.annotationElementId&&(c(this,q).removeChangedExistingAnnotation(n),t.add(n.annotationElementId));if(!c(this,ui))return;const e=c(this,ui).getEditableAnnotations();for(const n of e){if(n.hide(),c(this,q).isDeletedAnnotationElement(n.data.id)||t.has(n.data.id))continue;const s=await this.deserialize(n);s&&(this.addOrRebuild(s),s.enableEditing())}}disable(){var s;b(this,Ho,!0),this.div.tabIndex=-1,this.togglePointerEvents(!1);const t=new Map,e=new Map;for(const r of c(this,ln).values())if(r.disableEditing(),!!r.annotationElementId){if(r.serialize()!==null){t.set(r.annotationElementId,r);continue}else e.set(r.annotationElementId,r);(s=this.getEditableAnnotation(r.annotationElementId))==null||s.show(),r.remove()}if(c(this,ui)){const r=c(this,ui).getEditableAnnotations();for(const a of r){const{id:o}=a.data;if(c(this,q).isDeletedAnnotationElement(o))continue;let l=e.get(o);if(l){l.resetAnnotationElement(a),l.show(!1),a.show();continue}l=t.get(o),l&&(c(this,q).addChangedExistingAnnotation(l),l.renderAnnotationElement(a)&&l.show(!1)),a.show()}}x(this,ve,Bu).call(this),this.isEmpty&&(this.div.hidden=!0);const{classList:n}=this.div;for(const r of c(kn,js).values())n.remove(`${r._type}Editing`);this.disableTextSelection(),this.toggleAnnotationLayerPointerEvents(!0),b(this,Ho,!1)}getEditableAnnotation(t){var e;return((e=c(this,ui))==null?void 0:e.getEditableAnnotation(t))||null}setActiveEditor(t){c(this,q).getActive()!==t&&c(this,q).setActiveEditor(t)}enableTextSelection(){var t;if(this.div.tabIndex=-1,(t=c(this,_e))!=null&&t.div&&!c(this,Gi)){b(this,Gi,new AbortController);const e=c(this,q).combinedSignal(c(this,Gi));c(this,_e).div.addEventListener("pointerdown",x(this,ve,bA).bind(this),{signal:e}),c(this,_e).div.classList.add("highlighting")}}disableTextSelection(){var t;this.div.tabIndex=0,(t=c(this,_e))!=null&&t.div&&c(this,Gi)&&(c(this,Gi).abort(),b(this,Gi,null),c(this,_e).div.classList.remove("highlighting"))}enableClick(){if(c(this,Fs))return;b(this,Fs,new AbortController);const t=c(this,q).combinedSignal(c(this,Fs));this.div.addEventListener("pointerdown",this.pointerdown.bind(this),{signal:t}),this.div.addEventListener("pointerup",this.pointerup.bind(this),{signal:t})}disableClick(){var t;(t=c(this,Fs))==null||t.abort(),b(this,Fs,null)}attach(t){c(this,ln).set(t.id,t);const{annotationElementId:e}=t;e&&c(this,q).isDeletedAnnotationElement(e)&&c(this,q).removeDeletedAnnotationElement(t)}detach(t){var e;c(this,ln).delete(t.id),(e=c(this,ia))==null||e.removePointerInTextLayer(t.contentDiv),!c(this,Ho)&&t.annotationElementId&&c(this,q).addDeletedAnnotationElement(t)}remove(t){this.detach(t),c(this,q).removeEditor(t),t.div.remove(),t.isAttachedToDOM=!1,c(this,Vo)||this.addInkEditorIfNeeded(!1)}changeParent(t){var e;t.parent!==this&&(t.parent&&t.annotationElementId&&(c(this,q).addDeletedAnnotationElement(t.annotationElementId),St.deleteAnnotationElement(t),t.annotationElementId=null),this.attach(t),(e=t.parent)==null||e.detach(t),t.setParent(this),t.div&&t.isAttachedToDOM&&(t.div.remove(),this.div.append(t.div)))}add(t){if(!(t.parent===this&&t.isAttachedToDOM)){if(this.changeParent(t),c(this,q).addEditor(t),this.attach(t),!t.isAttachedToDOM){const e=t.render();this.div.append(e),t.isAttachedToDOM=!0}t.fixAndSetPosition(),t.onceAdded(),c(this,q).addToAnnotationStorage(t),t._reportTelemetry(t.telemetryInitialData)}}moveEditorInDOM(t){var n;if(!t.isAttachedToDOM)return;const{activeElement:e}=document;t.div.contains(e)&&!c(this,zi)&&(t._focusEventsAllowed=!1,b(this,zi,setTimeout(()=>{b(this,zi,null),t.div.contains(document.activeElement)?t._focusEventsAllowed=!0:(t.div.addEventListener("focusin",()=>{t._focusEventsAllowed=!0},{once:!0,signal:c(this,q)._signal}),e.focus())},0))),t._structTreeParentId=(n=c(this,ia))==null?void 0:n.moveElementInDOM(this.div,t.div,t.contentDiv,!0)}addOrRebuild(t){t.needsToBeRebuilt()?(t.parent||(t.parent=this),t.rebuild(),t.show()):this.add(t)}addUndoableEditor(t){const e=()=>t._uiManager.rebuild(t),n=()=>{t.remove()};this.addCommands({cmd:e,undo:n,mustExec:!1})}getNextId(){return c(this,q).getId()}combinedSignal(t){return c(this,q).combinedSignal(t)}canCreateNewEmptyEditor(){var t;return(t=c(this,ve,ig))==null?void 0:t.canCreateNewEmptyEditor()}pasteEditor(t,e){c(this,q).updateToolbar(t),c(this,q).updateMode(t);const{offsetX:n,offsetY:s}=x(this,ve,rg).call(this),r=this.getNextId(),a=x(this,ve,sg).call(this,{parent:this,id:r,x:n,y:s,uiManager:c(this,q),isCentered:!0,...e});a&&this.add(a)}async deserialize(t){var e;return await((e=c(kn,js).get(t.annotationType??t.annotationEditorType))==null?void 0:e.deserialize(t,this,c(this,q)))||null}createAndAddNewEditor(t,e,n={}){const s=this.getNextId(),r=x(this,ve,sg).call(this,{parent:this,id:s,x:t.offsetX,y:t.offsetY,uiManager:c(this,q),isCentered:e,...n});return r&&this.add(r),r}addNewEditor(){this.createAndAddNewEditor(x(this,ve,rg).call(this),!0)}setSelected(t){c(this,q).setSelected(t)}toggleSelected(t){c(this,q).toggleSelected(t)}unselect(t){c(this,q).unselect(t)}pointerup(t){const{isMac:e}=De.platform;if(!(t.button!==0||t.ctrlKey&&e)&&t.target===this.div&&c(this,Ns)){if(b(this,Ns,!1),!c(this,Bo)){b(this,Bo,!0);return}if(c(this,q).getMode()===et.STAMP){c(this,q).unselectAll();return}this.createAndAddNewEditor(t,!1)}}pointerdown(t){if(c(this,q).getMode()===et.HIGHLIGHT&&this.enableTextSelection(),c(this,Ns)){b(this,Ns,!1);return}const{isMac:e}=De.platform;if(t.button!==0||t.ctrlKey&&e||t.target!==this.div)return;b(this,Ns,!0);const n=c(this,q).getActive();b(this,Bo,!n||n.isEmpty())}findNewParent(t,e,n){const s=c(this,q).findParent(e,n);return s===null||s===this?!1:(s.changeParent(t),!0)}destroy(){var t,e;((t=c(this,q).getActive())==null?void 0:t.parent)===this&&(c(this,q).commitOrRemove(),c(this,q).setActiveEditor(null)),c(this,zi)&&(clearTimeout(c(this,zi)),b(this,zi,null));for(const n of c(this,ln).values())(e=c(this,ia))==null||e.removePointerInTextLayer(n.contentDiv),n.setParent(null),n.isAttachedToDOM=!1,n.div.remove();this.div=null,c(this,ln).clear(),c(this,q).removeLayer(this)}render({viewport:t}){this.viewport=t,la(this.div,t);for(const e of c(this,q).getEditors(this.pageIndex))this.add(e),e.rebuild();this.updateMode()}update({viewport:t}){c(this,q).commitOrRemove(),x(this,ve,Bu).call(this);const e=this.viewport.rotation,n=t.rotation;if(this.viewport=t,la(this.div,{rotation:n}),e!==n)for(const s of c(this,ln).values())s.rotate(n);this.addInkEditorIfNeeded(!1)}get pageDimensions(){const{pageWidth:t,pageHeight:e}=this.viewport.rawDims;return[t,e]}get scale(){return c(this,q).viewParameters.realScale}};ia=new WeakMap,Bo=new WeakMap,ui=new WeakMap,Fs=new WeakMap,zi=new WeakMap,ln=new WeakMap,Ns=new WeakMap,Vo=new WeakMap,Ho=new WeakMap,_e=new WeakMap,Gi=new WeakMap,q=new WeakMap,js=new WeakMap,ve=new WeakSet,bA=function(t){c(this,q).unselectAll();const{target:e}=t;if(e===c(this,_e).div||(e.getAttribute("role")==="img"||e.classList.contains("endOfContent"))&&c(this,_e).div.contains(e)){const{isMac:n}=De.platform;if(t.button!==0||t.ctrlKey&&n)return;c(this,q).showAllEditors("highlight",!0,!0),c(this,_e).div.classList.add("free"),this.toggleDrawing(),Ju.startHighlighting(this,c(this,q).direction==="ltr",{target:c(this,_e).div,x:t.x,y:t.y}),c(this,_e).div.addEventListener("pointerup",()=>{c(this,_e).div.classList.remove("free"),this.toggleDrawing(!0)},{once:!0,signal:c(this,q)._signal}),t.preventDefault()}},ig=function(){return c(kn,js).get(c(this,q).getMode())},sg=function(t){const e=c(this,ve,ig);return e?new e.prototype.constructor(t):null},rg=function(){const{x:t,y:e,width:n,height:s}=this.div.getBoundingClientRect(),r=Math.max(0,t),a=Math.max(0,e),o=Math.min(window.innerWidth,t+n),l=Math.min(window.innerHeight,e+s),h=(r+o)/2-t,u=(a+l)/2-e,[d,f]=this.viewport.rotation%180===0?[h,u]:[u,h];return{offsetX:d,offsetY:f}},Bu=function(){b(this,Vo,!0);for(const t of c(this,ln).values())t.isEmpty()&&t.remove();b(this,Vo,!1)},K(kn,"_initialized",!1),w(kn,js,new Map([Op,Wp,Jp,Ju].map(t=>[t._editorType,t])));let ng=kn;var di,bh,Yt,qi,xh,og,fa,lg,xA;const de=class de{constructor({pageIndex:t}){w(this,fa);w(this,di,null);w(this,bh,0);w(this,Yt,new Map);w(this,qi,new Map);this.pageIndex=t}setParent(t){if(!c(this,di)){b(this,di,t);return}if(c(this,di)!==t){if(c(this,Yt).size>0)for(const e of c(this,Yt).values())e.remove(),t.append(e);b(this,di,t)}}static get _svgFactory(){return ht(this,"_svgFactory",new Gg)}draw(t,e,n,s=!1){const r=ke(this,bh)._++,a=x(this,fa,lg).call(this,t.box);a.classList.add(...t.classNamesForDrawing);const o=de._svgFactory.createElement("defs");a.append(o);const l=de._svgFactory.createElement("path");o.append(l);const h=`path_p${this.pageIndex}_${r}`;l.setAttribute("id",h),l.setAttribute("d",t.toSVGPath()),s&&c(this,qi).set(r,l);const u=x(this,fa,xA).call(this,o,h),d=de._svgFactory.createElement("use");return a.append(d),a.setAttribute("fill",e),a.setAttribute("fill-opacity",n),d.setAttribute("href",`#${h}`),c(this,Yt).set(r,a),{id:r,clipPathId:`url(#${u})`}}drawOutline(t){const e=ke(this,bh)._++,n=x(this,fa,lg).call(this,t.box);n.classList.add(...t.classNamesForOutlining);const s=de._svgFactory.createElement("defs");n.append(s);const r=de._svgFactory.createElement("path");s.append(r);const a=`path_p${this.pageIndex}_${e}`;r.setAttribute("id",a),r.setAttribute("d",t.toSVGPath()),r.setAttribute("vector-effect","non-scaling-stroke");let o;if(t.mustRemoveSelfIntersections){const u=de._svgFactory.createElement("mask");s.append(u),o=`mask_p${this.pageIndex}_${e}`,u.setAttribute("id",o),u.setAttribute("maskUnits","objectBoundingBox");const d=de._svgFactory.createElement("rect");u.append(d),d.setAttribute("width","1"),d.setAttribute("height","1"),d.setAttribute("fill","white");const f=de._svgFactory.createElement("use");u.append(f),f.setAttribute("href",`#${a}`),f.setAttribute("stroke","none"),f.setAttribute("fill","black"),f.setAttribute("fill-rule","nonzero"),f.classList.add("mask")}const l=de._svgFactory.createElement("use");n.append(l),l.setAttribute("href",`#${a}`),o&&l.setAttribute("mask",`url(#${o})`);const h=l.cloneNode();return n.append(h),l.classList.add("mainOutline"),h.classList.add("secondaryOutline"),c(this,Yt).set(e,n),e}finalizeLine(t,e){const n=c(this,qi).get(t);c(this,qi).delete(t),this.updateBox(t,e.box),n.setAttribute("d",e.toSVGPath())}updateLine(t,e){c(this,Yt).get(t).firstChild.firstChild.setAttribute("d",e.toSVGPath())}updatePath(t,e){c(this,qi).get(t).setAttribute("d",e.toSVGPath())}updateBox(t,e){var n;x(n=de,xh,og).call(n,c(this,Yt).get(t),e)}show(t,e){c(this,Yt).get(t).classList.toggle("hidden",!e)}rotate(t,e){c(this,Yt).get(t).setAttribute("data-main-rotation",e)}changeColor(t,e){c(this,Yt).get(t).setAttribute("fill",e)}changeOpacity(t,e){c(this,Yt).get(t).setAttribute("fill-opacity",e)}addClass(t,e){c(this,Yt).get(t).classList.add(e)}removeClass(t,e){c(this,Yt).get(t).classList.remove(e)}getSVGRoot(t){return c(this,Yt).get(t)}remove(t){c(this,qi).delete(t),c(this,di)!==null&&(c(this,Yt).get(t).remove(),c(this,Yt).delete(t))}destroy(){b(this,di,null);for(const t of c(this,Yt).values())t.remove();c(this,Yt).clear(),c(this,qi).clear()}};di=new WeakMap,bh=new WeakMap,Yt=new WeakMap,qi=new WeakMap,xh=new WeakSet,og=function(t,{x:e=0,y:n=0,width:s=1,height:r=1}={}){const{style:a}=t;a.top=`${100*n}%`,a.left=`${100*e}%`,a.width=`${100*s}%`,a.height=`${100*r}%`},fa=new WeakSet,lg=function(t){var n;const e=de._svgFactory.create(1,1,!0);return c(this,di).append(e),e.setAttribute("aria-hidden",!0),x(n=de,xh,og).call(n,e,t),e},xA=function(t,e){const n=de._svgFactory.createElement("clipPath");t.append(n);const s=`clip_${e}`;n.setAttribute("id",s),n.setAttribute("clipPathUnits","objectBoundingBox");const r=de._svgFactory.createElement("use");return n.append(r),r.setAttribute("href",`#${e}`),r.classList.add("clip"),s},w(de,xh);let ag=de;var uC=Z.AbortException,dC=Z.AnnotationEditorLayer,fC=Z.AnnotationEditorParamsType,pC=Z.AnnotationEditorType,gC=Z.AnnotationEditorUIManager,mC=Z.AnnotationLayer,yC=Z.AnnotationMode,vC=Z.ColorPicker,bC=Z.DOMSVGFactory,xC=Z.DrawLayer,AC=Z.FeatureTest,wC=Z.GlobalWorkerOptions,SC=Z.ImageKind,EC=Z.InvalidPDFException,_C=Z.MissingPDFException,TC=Z.OPS,CC=Z.OutputScale,PC=Z.PDFDataRangeTransport,RC=Z.PDFDateString,kC=Z.PDFWorker,MC=Z.PasswordResponses,LC=Z.PermissionFlag,IC=Z.PixelsPerInch,DC=Z.RenderingCancelledException,OC=Z.TextLayer,FC=Z.UnexpectedResponseException,NC=Z.Util,jC=Z.VerbosityLevel,BC=Z.XfaLayer,VC=Z.build,HC=Z.createValidAbsoluteUrl,$C=Z.fetchData,UC=Z.getDocument,WC=Z.getFilenameFromUrl,zC=Z.getPdfFilenameFromUrl,GC=Z.getXfaPageViewport,qC=Z.isDataScheme,XC=Z.isPdfFile,KC=Z.noContextMenu,YC=Z.normalizeUnicode,QC=Z.setLayerDimensions,ZC=Z.shadow,JC=Z.version;const tP=Object.freeze(Object.defineProperty({__proto__:null,AbortException:uC,AnnotationEditorLayer:dC,AnnotationEditorParamsType:fC,AnnotationEditorType:pC,AnnotationEditorUIManager:gC,AnnotationLayer:mC,AnnotationMode:yC,ColorPicker:vC,DOMSVGFactory:bC,DrawLayer:xC,FeatureTest:AC,GlobalWorkerOptions:wC,ImageKind:SC,InvalidPDFException:EC,MissingPDFException:_C,OPS:TC,OutputScale:CC,PDFDataRangeTransport:PC,PDFDateString:RC,PDFWorker:kC,PasswordResponses:MC,PermissionFlag:LC,PixelsPerInch:IC,RenderingCancelledException:DC,TextLayer:OC,UnexpectedResponseException:FC,Util:NC,VerbosityLevel:jC,XfaLayer:BC,build:VC,createValidAbsoluteUrl:HC,fetchData:$C,getDocument:UC,getFilenameFromUrl:WC,getPdfFilenameFromUrl:zC,getXfaPageViewport:GC,isDataScheme:qC,isPdfFile:XC,noContextMenu:KC,normalizeUnicode:YC,setLayerDimensions:QC,shadow:ZC,version:JC},Symbol.toStringTag,{value:"Module"})),yi=tP;var re=function(i,t,e){if(e||arguments.length===2)for(var n=0,s=t.length,r;n<s;n++)(r||!(n in t))&&(r||(r=Array.prototype.slice.call(t,0,n)),r[n]=t[n]);return i.concat(r||Array.prototype.slice.call(t))},eP=["onCopy","onCut","onPaste"],nP=["onCompositionEnd","onCompositionStart","onCompositionUpdate"],iP=["onFocus","onBlur"],sP=["onInput","onInvalid","onReset","onSubmit"],rP=["onLoad","onError"],aP=["onKeyDown","onKeyPress","onKeyUp"],oP=["onAbort","onCanPlay","onCanPlayThrough","onDurationChange","onEmptied","onEncrypted","onEnded","onError","onLoadedData","onLoadedMetadata","onLoadStart","onPause","onPlay","onPlaying","onProgress","onRateChange","onSeeked","onSeeking","onStalled","onSuspend","onTimeUpdate","onVolumeChange","onWaiting"],lP=["onClick","onContextMenu","onDoubleClick","onMouseDown","onMouseEnter","onMouseLeave","onMouseMove","onMouseOut","onMouseOver","onMouseUp"],cP=["onDrag","onDragEnd","onDragEnter","onDragExit","onDragLeave","onDragOver","onDragStart","onDrop"],hP=["onSelect"],uP=["onTouchCancel","onTouchEnd","onTouchMove","onTouchStart"],dP=["onPointerDown","onPointerMove","onPointerUp","onPointerCancel","onGotPointerCapture","onLostPointerCapture","onPointerEnter","onPointerLeave","onPointerOver","onPointerOut"],fP=["onScroll"],pP=["onWheel"],gP=["onAnimationStart","onAnimationEnd","onAnimationIteration"],mP=["onTransitionEnd"],yP=["onToggle"],vP=["onChange"],AA=re(re(re(re(re(re(re(re(re(re(re(re(re(re(re(re(re(re([],eP,!0),nP,!0),iP,!0),sP,!0),rP,!0),aP,!0),oP,!0),lP,!0),cP,!0),hP,!0),uP,!0),dP,!0),fP,!0),pP,!0),gP,!0),mP,!0),vP,!0),yP,!0);function wA(i,t){var e={};return AA.forEach(function(n){var s=i[n];s&&(t?e[n]=function(r){return s(r,t(n))}:e[n]=s)}),e}function Zo(i){var t=!1,e=new Promise(function(n,s){i.then(function(r){return!t&&n(r)}).catch(function(r){return!t&&s(r)})});return{promise:e,cancel:function(){t=!0}}}var bP="Invariant failed";function wt(i,t){if(!i)throw new Error(bP)}var mf,Ty;function xP(){if(Ty)return mf;Ty=1;var i=function(){};return mf=i,mf}var AP=xP();const ye=Ne(AP);var Cy=Object.prototype.hasOwnProperty;function Py(i,t,e){for(e of i.keys())if(Va(e,t))return e}function Va(i,t){var e,n,s;if(i===t)return!0;if(i&&t&&(e=i.constructor)===t.constructor){if(e===Date)return i.getTime()===t.getTime();if(e===RegExp)return i.toString()===t.toString();if(e===Array){if((n=i.length)===t.length)for(;n--&&Va(i[n],t[n]););return n===-1}if(e===Set){if(i.size!==t.size)return!1;for(n of i)if(s=n,s&&typeof s=="object"&&(s=Py(t,s),!s)||!t.has(s))return!1;return!0}if(e===Map){if(i.size!==t.size)return!1;for(n of i)if(s=n[0],s&&typeof s=="object"&&(s=Py(t,s),!s)||!Va(n[1],t.get(s)))return!1;return!0}if(e===ArrayBuffer)i=new Uint8Array(i),t=new Uint8Array(t);else if(e===DataView){if((n=i.byteLength)===t.byteLength)for(;n--&&i.getInt8(n)===t.getInt8(n););return n===-1}if(ArrayBuffer.isView(i)){if((n=i.byteLength)===t.byteLength)for(;n--&&i[n]===t[n];);return n===-1}if(!e||typeof i=="object"){n=0;for(e in i)if(Cy.call(i,e)&&++n&&!Cy.call(t,e)||!(e in t)||!Va(i[e],t[e]))return!1;return Object.keys(t).length===n}}return i!==i&&t!==t}const SA=P.createContext(null);function Ha({children:i,type:t}){return ut.createElement("div",{className:`react-pdf__message react-pdf__message--${t}`},i)}const wP="noopener noreferrer nofollow";class EA{constructor(){this.externalLinkEnabled=!0,this.externalLinkRel=void 0,this.externalLinkTarget=void 0,this.isInPresentationMode=!1,this.pdfDocument=void 0,this.pdfViewer=void 0}setDocument(t){this.pdfDocument=t}setViewer(t){this.pdfViewer=t}setExternalLinkRel(t){this.externalLinkRel=t}setExternalLinkTarget(t){this.externalLinkTarget=t}setHistory(){}get pagesCount(){return this.pdfDocument?this.pdfDocument.numPages:0}get page(){return wt(this.pdfViewer),this.pdfViewer.currentPageNumber||0}set page(t){wt(this.pdfViewer),this.pdfViewer.currentPageNumber=t}get rotation(){return 0}set rotation(t){}goToDestination(t){return new Promise(e=>{wt(this.pdfDocument),wt(t),typeof t=="string"?this.pdfDocument.getDestination(t).then(e):Array.isArray(t)?e(t):t.then(e)}).then(e=>{wt(Array.isArray(e));const n=e[0];new Promise(s=>{wt(this.pdfDocument),n instanceof Object?this.pdfDocument.getPageIndex(n).then(r=>{s(r)}).catch(()=>{wt(!1)}):typeof n=="number"?s(n):wt(!1)}).then(s=>{const r=s+1;wt(this.pdfViewer),wt(r>=1&&r<=this.pagesCount),this.pdfViewer.scrollPageIntoView({dest:e,pageIndex:s,pageNumber:r})})})}navigateTo(t){this.goToDestination(t)}goToPage(t){const e=t-1;wt(this.pdfViewer),wt(t>=1&&t<=this.pagesCount),this.pdfViewer.scrollPageIntoView({pageIndex:e,pageNumber:t})}addLinkAttributes(t,e,n){t.href=e,t.rel=this.externalLinkRel||wP,t.target=n?"_blank":this.externalLinkTarget||""}getDestinationHash(){return"#"}getAnchorUrl(){return"#"}setHash(){}executeNamedAction(){}cachePageRef(){}isPageVisible(){return!0}isPageCached(){return!0}executeSetOCGState(){}}const Ry={NEED_PASSWORD:1,INCORRECT_PASSWORD:2},zd=typeof document<"u",_A=zd&&window.location.protocol==="file:";function aa(i){return typeof i<"u"}function Ys(i){return aa(i)&&i!==null}function SP(i){return typeof i=="string"}function EP(i){return i instanceof ArrayBuffer}function _P(i){return wt(zd),i instanceof Blob}function cg(i){return SP(i)&&/^data:/.test(i)}function ky(i){wt(cg(i));const[t="",e=""]=i.split(",");return t.split(";").indexOf("base64")!==-1?atob(e):unescape(e)}function TP(){return zd&&window.devicePixelRatio||1}const TA="On Chromium based browsers, you can use --allow-file-access-from-files flag for debugging purposes.";function My(){ye(!_A,`Loading PDF as base64 strings/URLs may not work on protocols other than HTTP/HTTPS. ${TA}`)}function CP(){ye(!_A,`Loading PDF.js worker may not work on protocols other than HTTP/HTTPS. ${TA}`)}function $s(i){i&&i.cancel&&i.cancel()}function td(i,t){return Object.defineProperty(i,"width",{get(){return this.view[2]*t},configurable:!0}),Object.defineProperty(i,"height",{get(){return this.view[3]*t},configurable:!0}),Object.defineProperty(i,"originalWidth",{get(){return this.view[2]},configurable:!0}),Object.defineProperty(i,"originalHeight",{get(){return this.view[3]},configurable:!0}),i}function CA(i){return i.name==="RenderingCancelledException"}function PP(i){return new Promise((t,e)=>{const n=new FileReader;n.onload=()=>{if(!n.result)return e(new Error("Error while reading a file."));t(n.result)},n.onerror=s=>{if(!s.target)return e(new Error("Error while reading a file."));const{error:r}=s.target;if(!r)return e(new Error("Error while reading a file."));switch(r.code){case r.NOT_FOUND_ERR:return e(new Error("Error while reading a file: File not found."));case r.SECURITY_ERR:return e(new Error("Error while reading a file: Security error."));case r.ABORT_ERR:return e(new Error("Error while reading a file: Aborted."));default:return e(new Error("Error while reading a file."))}},n.readAsArrayBuffer(i)})}function RP(i,t){switch(t.type){case"RESOLVE":return{value:t.value,error:void 0};case"REJECT":return{value:!1,error:t.error};case"RESET":return{value:void 0,error:void 0};default:return i}}function ua(){return P.useReducer(RP,{value:void 0,error:void 0})}const{PDFDataRangeTransport:kP}=yi,PA=(()=>{const i={};return AA.forEach(t=>{i[t]=F.func}),i})(),MP=F.oneOfType([F.instanceOf(Int8Array),F.instanceOf(Uint8Array),F.instanceOf(Uint8ClampedArray),F.instanceOf(Int16Array),F.instanceOf(Uint16Array),F.instanceOf(Int32Array),F.instanceOf(Uint32Array),F.instanceOf(Float32Array),F.instanceOf(Float64Array)]),RA=[F.string,F.instanceOf(ArrayBuffer),F.shape({data:F.oneOfType([F.string,F.instanceOf(ArrayBuffer),F.arrayOf(F.number.isRequired),MP]).isRequired}),F.shape({range:F.instanceOf(kP).isRequired}),F.shape({url:F.string.isRequired})];typeof Blob<"u"&&RA.push(F.instanceOf(Blob));const kA=F.oneOfType([F.string,F.arrayOf(F.string)]),LP=F.oneOfType(RA);F.instanceOf(EA);F.oneOf(["_self","_blank","_parent","_top"]);F.shape({commonObjs:F.shape({}).isRequired,getAnnotations:F.func.isRequired,getTextContent:F.func.isRequired,getViewport:F.func.isRequired,render:F.func.isRequired});const IP=function(t,e,n){const{[e]:s,pageNumber:r,pdf:a}=t;if(!aa(a))return null;if(aa(s)){if(typeof s!="number")return new Error(`\`${e}\` of type \`${typeof s}\` supplied to \`${n}\`, expected \`number\`.`);if(s<0)return new Error(`Expected \`${e}\` to be greater or equal to 0.`);const{numPages:o}=a;if(s+1>o)return new Error(`Expected \`${e}\` to be less or equal to ${o-1}.`)}else if(!aa(r))return new Error(`\`${e}\` not supplied. Either pageIndex or pageNumber must be supplied to \`${n}\`.`);return null},DP=function(t,e,n){const{[e]:s,pageIndex:r,pdf:a}=t;if(!aa(a))return null;if(aa(s)){if(typeof s!="number")return new Error(`\`${e}\` of type \`${typeof s}\` supplied to \`${n}\`, expected \`number\`.`);if(s<1)return new Error(`Expected \`${e}\` to be greater or equal to 1.`);const{numPages:o}=a;if(s>o)return new Error(`Expected \`${e}\` to be less or equal to ${o}.`)}else if(!aa(r))return new Error(`\`${e}\` not supplied. Either pageIndex or pageNumber must be supplied to \`${n}\`.`);return null},OP=F.oneOfType([F.any,F.oneOf([!1])]),hg=F.oneOfType([F.func,F.exact({current:F.any})]),FP=F.oneOf(["canvas","custom","none","svg"]),NP=F.oneOf([0,90,180,270]);var jP=function(i,t,e,n){function s(r){return r instanceof e?r:new e(function(a){a(r)})}return new(e||(e=Promise))(function(r,a){function o(u){try{h(n.next(u))}catch(d){a(d)}}function l(u){try{h(n.throw(u))}catch(d){a(d)}}function h(u){u.done?r(u.value):s(u.value).then(o,l)}h((n=n.apply(i,t||[])).next())})},Ly=function(i,t){var e={};for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&t.indexOf(n)<0&&(e[n]=i[n]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(i);s<n.length;s++)t.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(i,n[s])&&(e[n[s]]=i[n[s]]);return e};const{PDFDataRangeTransport:BP}=yi,VP=(i,t)=>{switch(t){case Ry.NEED_PASSWORD:{const e=prompt("Enter the password to open this PDF file.");i(e);break}case Ry.INCORRECT_PASSWORD:{const e=prompt("Invalid password. Please try again.");i(e);break}}};function Iy(i){return typeof i=="object"&&i!==null&&("data"in i||"range"in i||"url"in i)}const MA=P.forwardRef(function(t,e){var{children:n,className:s,error:r="Failed to load PDF file.",externalLinkRel:a,externalLinkTarget:o,file:l,inputRef:h,imageResourcesPath:u,loading:d="Loading PDF",noData:f="No PDF file specified.",onItemClick:p,onLoadError:g,onLoadProgress:m,onLoadSuccess:v,onPassword:y=VP,onSourceError:A,onSourceSuccess:S,options:E,renderMode:T,rotate:_}=t,R=Ly(t,["children","className","error","externalLinkRel","externalLinkTarget","file","inputRef","imageResourcesPath","loading","noData","onItemClick","onLoadError","onLoadProgress","onLoadSuccess","onPassword","onSourceError","onSourceSuccess","options","renderMode","rotate"]);const[k,I]=ua(),{value:D,error:M}=k,[L,N]=ua(),{value:O,error:U}=L,z=P.useRef(new EA),j=P.useRef([]),V=P.useRef(),tt=P.useRef();P.useEffect(()=>{l&&l!==V.current&&Iy(l)&&(ye(!Va(l,V.current),`File prop passed to <Document /> changed, but it's equal to previous one. This might result in unnecessary reloads. Consider memoizing the value passed to "file" prop.`),V.current=l)},[l]),P.useEffect(()=>{E&&E!==tt.current&&(ye(!Va(E,tt.current),`Options prop passed to <Document /> changed, but it's equal to previous one. This might result in unnecessary reloads. Consider memoizing the value passed to "options" prop.`),tt.current=E)},[E]);const yt=P.useRef({scrollPageIntoView:Vt=>{const{dest:Dt,pageNumber:Pn,pageIndex:is=Pn-1}=Vt;if(p){p({dest:Dt,pageIndex:is,pageNumber:Pn});return}const ss=j.current[is];if(ss){ss.scrollIntoView();return}ye(!1,`An internal link leading to page ${Pn} was clicked, but neither <Document> was provided with onItemClick nor it was able to find the page within itself. Either provide onItemClick to <Document> and handle navigating by yourself or ensure that all pages are rendered within <Document>.`)}});P.useImperativeHandle(e,()=>({linkService:z,pages:j,viewer:yt}),[]);function ft(){S&&S()}function st(){M&&(ye(!1,M.toString()),A&&A(M))}function lt(){I({type:"RESET"})}P.useEffect(lt,[l,I]);const It=P.useCallback(()=>jP(this,void 0,void 0,function*(){if(!l)return null;if(typeof l=="string")return cg(l)?{data:ky(l)}:(My(),{url:l});if(l instanceof BP)return{range:l};if(EP(l))return{data:l};if(zd&&_P(l))return{data:yield PP(l)};if(wt(typeof l=="object"),wt(Iy(l)),"url"in l&&typeof l.url=="string"){if(cg(l.url)){const{url:Vt}=l,Dt=Ly(l,["url"]),Pn=ky(Vt);return Object.assign({data:Pn},Dt)}My()}return l}),[l]);P.useEffect(()=>{const Vt=Zo(It());return Vt.promise.then(Dt=>{I({type:"RESOLVE",value:Dt})}).catch(Dt=>{I({type:"REJECT",error:Dt})}),()=>{$s(Vt)}},[It,I]),P.useEffect(()=>{if(!(typeof D>"u")){if(D===!1){st();return}ft()}},[D]);function Wt(){O&&(v&&v(O),j.current=new Array(O.numPages),z.current.setDocument(O))}function gt(){U&&(ye(!1,U.toString()),g&&g(U))}function Y(){N({type:"RESET"})}P.useEffect(Y,[N,D]);function rt(){if(!D)return;const Vt=Object.assign(Object.assign({},E),{isEvalSupported:!1}),Dt=Object.assign(Object.assign({},D),Vt),Pn=yi.getDocument(Dt);m&&(Pn.onProgress=m),y&&(Pn.onPassword=y);const is=Pn;return is.promise.then(ss=>{N({type:"RESOLVE",value:ss})}).catch(ss=>{is.destroyed||N({type:"REJECT",error:ss})}),()=>{is.destroy()}}P.useEffect(rt,[E,N,D]),P.useEffect(()=>{if(!(typeof O>"u")){if(O===!1){gt();return}Wt()}},[O]);function Tt(){z.current.setViewer(yt.current),z.current.setExternalLinkRel(a),z.current.setExternalLinkTarget(o)}P.useEffect(Tt,[a,o]);function zt(Vt,Dt){j.current[Vt]=Dt}function pt(Vt){delete j.current[Vt]}const be=P.useMemo(()=>({imageResourcesPath:u,linkService:z.current,onItemClick:p,pdf:O,registerPage:zt,renderMode:T,rotate:_,unregisterPage:pt}),[u,p,O,T,_]),el=P.useMemo(()=>wA(R,()=>O),[R,O]);function je(){return ut.createElement(SA.Provider,{value:be},n)}function qn(){return l?O==null?ut.createElement(Ha,{type:"loading"},typeof d=="function"?d():d):O===!1?ut.createElement(Ha,{type:"error"},typeof r=="function"?r():r):je():ut.createElement(Ha,{type:"no-data"},typeof f=="function"?f():f)}return ut.createElement("div",Object.assign({className:_d("react-pdf__Document",s),ref:h,style:{"--scale-factor":"1"}},el),qn())}),yf=F.oneOfType([F.func,F.node]);MA.propTypes=Object.assign(Object.assign({},PA),{children:F.node,className:kA,error:yf,externalLinkRel:F.string,externalLinkTarget:F.oneOf(["_self","_blank","_parent","_top"]),file:LP,imageResourcesPath:F.string,inputRef:hg,loading:yf,noData:yf,onItemClick:F.func,onLoadError:F.func,onLoadProgress:F.func,onLoadSuccess:F.func,onPassword:F.func,onSourceError:F.func,onSourceSuccess:F.func,options:F.shape({canvasFactory:F.any,canvasMaxAreaInBytes:F.number,cMapPacked:F.bool,CMapReaderFactory:F.any,cMapUrl:F.string,disableAutoFetch:F.bool,disableFontFace:F.bool,disableRange:F.bool,disableStream:F.bool,docBaseUrl:F.string,enableXfa:F.bool,filterFactory:F.any,fontExtraProperties:F.bool,httpHeaders:F.object,isEvalSupported:F.bool,isOffscreenCanvasSupported:F.bool,length:F.number,maxImageSize:F.number,ownerDocument:F.any,password:F.string,pdfBug:F.bool,rangeChunkSize:F.number,StandardFontDataFactory:F.any,standardFontDataUrl:F.string,stopAtErrors:F.bool,useSystemFonts:F.bool,useWorkerFetch:F.bool,verbosity:F.number,withCredentials:F.bool,worker:F.any}),rotate:F.number});function LA(){return P.useContext(SA)}function IA(){for(var i=[],t=0;t<arguments.length;t++)i[t]=arguments[t];var e=i.filter(Boolean);if(e.length<=1){var n=e[0];return n||null}return function(r){e.forEach(function(a){typeof a=="function"?a(r):a&&(a.current=r)})}}const DA=P.createContext(null),OA={Document:null,DocumentFragment:null,Part:"group",Sect:"group",Div:"group",Aside:"note",NonStruct:"none",P:null,H:"heading",Title:null,FENote:"note",Sub:"group",Lbl:null,Span:null,Em:null,Strong:null,Link:"link",Annot:"note",Form:"form",Ruby:null,RB:null,RT:null,RP:null,Warichu:null,WT:null,WP:null,L:"list",LI:"listitem",LBody:null,Table:"table",TR:"row",TH:"columnheader",TD:"cell",THead:"columnheader",TBody:null,TFoot:null,Caption:null,Figure:"figure",Formula:null,Artifact:null},HP=/^H(\d+)$/;function $P(i){return i in OA}function Gd(i){return"children"in i}function FA(i){return Gd(i)?i.children.length===1&&0 in i.children&&"id"in i.children[0]:!1}function UP(i){const t={};if(Gd(i)){const{role:e}=i,n=e.match(HP);if(n)t.role="heading",t["aria-level"]=Number(n[1]);else if($P(e)){const s=OA[e];s&&(t.role=s)}}return t}function NA(i){const t={};if(Gd(i)){if(i.alt!==void 0&&(t["aria-label"]=i.alt),i.lang!==void 0&&(t.lang=i.lang),FA(i)){const[e]=i.children;if(e){const n=NA(e);return Object.assign(Object.assign({},t),n)}}}else"id"in i&&(t["aria-owns"]=i.id);return t}function WP(i){return i?Object.assign(Object.assign({},UP(i)),NA(i)):null}function jA({className:i,node:t}){const e=P.useMemo(()=>WP(t),[t]),n=P.useMemo(()=>!Gd(t)||FA(t)?null:t.children.map((s,r)=>ut.createElement(jA,{key:r,node:s})),[t]);return ut.createElement("span",Object.assign({className:i},e),n)}function _h(){return P.useContext(DA)}function zP(){const i=_h();wt(i);const{onGetStructTreeError:t,onGetStructTreeSuccess:e}=i,[n,s]=ua(),{value:r,error:a}=n,{customTextRenderer:o,page:l}=i;function h(){r&&e&&e(r)}function u(){a&&(ye(!1,a.toString()),t&&t(a))}function d(){s({type:"RESET"})}P.useEffect(d,[s,l]);function f(){if(o||!l)return;const p=Zo(l.getStructTree()),g=p;return p.promise.then(m=>{s({type:"RESOLVE",value:m})}).catch(m=>{s({type:"REJECT",error:m})}),()=>$s(g)}return P.useEffect(f,[o,l,s]),P.useEffect(()=>{if(r!==void 0){if(r===!1){u();return}h()}},[r]),r?ut.createElement(jA,{className:"react-pdf__Page__structTree structTree",node:r}):null}const Dy=yi.AnnotationMode;function GP(i){const t=_h();wt(t);const e=Object.assign(Object.assign({},t),i),{_className:n,canvasBackground:s,devicePixelRatio:r=TP(),onRenderError:a,onRenderSuccess:o,page:l,renderForms:h,renderTextLayer:u,rotate:d,scale:f}=e,{canvasRef:p}=i;wt(l);const g=P.useRef(null);function m(){l&&o&&o(td(l,f))}function v(T){CA(T)||(ye(!1,T.toString()),a&&a(T))}const y=P.useMemo(()=>l.getViewport({scale:f*r,rotation:d}),[r,l,d,f]),A=P.useMemo(()=>l.getViewport({scale:f,rotation:d}),[l,d,f]);function S(){if(!l)return;l.cleanup();const{current:T}=g;if(!T)return;T.width=y.width,T.height=y.height,T.style.width=`${Math.floor(A.width)}px`,T.style.height=`${Math.floor(A.height)}px`,T.style.visibility="hidden";const _={annotationMode:h?Dy.ENABLE_FORMS:Dy.ENABLE,canvasContext:T.getContext("2d",{alpha:!1}),viewport:y};s&&(_.background=s);const R=l.render(_),k=R;return R.promise.then(()=>{T.style.visibility="",m()}).catch(v),()=>$s(k)}P.useEffect(S,[s,g,r,l,h,y,A]);const E=P.useCallback(()=>{const{current:T}=g;T&&(T.width=0,T.height=0)},[g]);return P.useEffect(()=>E,[E]),ut.createElement("canvas",{className:`${n}__canvas`,dir:"ltr",ref:IA(p,g),style:{display:"block",userSelect:"none"}},u?ut.createElement(zP,null):null)}function qP(){const i=_h();wt(i);const{_className:t,onRenderSuccess:e,onRenderError:n,page:s,rotate:r,scale:a}=i;wt(s);const[o,l]=ua(),{value:h,error:u}=o;function d(){s&&e&&e(td(s,a))}function f(){u&&(CA(u)||(ye(!1,u.toString()),n&&n(u)))}const p=P.useMemo(()=>s.getViewport({scale:a,rotation:r}),[s,r,a]);function g(){l({type:"RESET"})}P.useEffect(g,[s,l,p]);function m(){if(!s)return;const S=Zo(s.getOperatorList());return S.promise.then(E=>{new yi.SVGGraphics(s.commonObjs,s.objs).getSVG(E,p).then(_=>{if(!(_ instanceof SVGElement))throw new Error("getSVG returned unexpected result.");l({type:"RESOLVE",value:_})}).catch(_=>{l({type:"REJECT",error:_})})}).catch(E=>{l({type:"REJECT",error:E})}),()=>$s(S)}P.useEffect(m,[s,l,p]),P.useEffect(()=>{if(h!==void 0){if(h===!1){f();return}d()}},[h]);function v(S){if(!S||!h)return;S.firstElementChild||S.appendChild(h);const{width:E,height:T}=p;h.setAttribute("width",`${E}`),h.setAttribute("height",`${T}`)}const{width:y,height:A}=p;return ut.createElement("div",{className:`${t}__svg`,ref:S=>v(S),style:{display:"block",backgroundColor:"white",overflow:"hidden",width:y,height:A,userSelect:"none"}})}function XP(i){return"str"in i}function KP(){const i=_h();wt(i);const{customTextRenderer:t,onGetTextError:e,onGetTextSuccess:n,onRenderTextLayerError:s,onRenderTextLayerSuccess:r,page:a,pageIndex:o,pageNumber:l,rotate:h,scale:u}=i;wt(a);const[d,f]=ua(),{value:p,error:g}=d,m=P.useRef(null),v=P.useRef();ye(parseInt(window.getComputedStyle(document.body).getPropertyValue("--react-pdf-text-layer"),10)===1,"TextLayer styles not found. Read more: https://github.com/wojtekmaj/react-pdf#support-for-text-layer");function y(){p&&n&&n(p)}function A(){g&&(ye(!1,g.toString()),e&&e(g))}function S(){f({type:"RESET"})}P.useEffect(S,[a,f]);function E(){if(!a)return;const M=Zo(a.getTextContent()),L=M;return M.promise.then(N=>{f({type:"RESOLVE",value:N})}).catch(N=>{f({type:"REJECT",error:N})}),()=>$s(L)}P.useEffect(E,[a,f]),P.useEffect(()=>{if(p!==void 0){if(p===!1){A();return}y()}},[p]);const T=P.useCallback(()=>{r&&r()},[r]),_=P.useCallback(M=>{ye(!1,M.toString()),s&&s(M)},[s]);function R(){const M=v.current;M&&M.classList.add("active")}function k(){const M=v.current;M&&M.classList.remove("active")}const I=P.useMemo(()=>a.getViewport({scale:u,rotation:h}),[a,h,u]);function D(){if(!a||!p)return;const{current:M}=m;if(!M)return;M.innerHTML="";const L=a.streamTextContent({includeMarkedContent:!0}),N={container:M,textContentSource:L,viewport:I},O=yi.renderTextLayer(N),U=O;return O.promise.then(()=>{const z=document.createElement("div");z.className="endOfContent",M.append(z),v.current=z;const j=M.querySelectorAll('[role="presentation"]');if(t){let V=0;p.items.forEach((tt,yt)=>{if(!XP(tt))return;const ft=j[V];if(!ft)return;const st=t(Object.assign({pageIndex:o,pageNumber:l,itemIndex:yt},tt));ft.innerHTML=st,V+=tt.str&&tt.hasEOL?2:1})}T()}).catch(_),()=>$s(U)}return P.useLayoutEffect(D,[t,_,T,a,o,l,p,I]),ut.createElement("div",{className:_d("react-pdf__Page__textContent","textLayer"),onMouseUp:k,onMouseDown:R,ref:m})}function YP(){const i=LA(),t=_h();wt(t);const e=Object.assign(Object.assign({},i),t),{imageResourcesPath:n,linkService:s,onGetAnnotationsError:r,onGetAnnotationsSuccess:a,onRenderAnnotationLayerError:o,onRenderAnnotationLayerSuccess:l,page:h,pdf:u,renderForms:d,rotate:f,scale:p=1}=e;wt(u),wt(h),wt(s);const[g,m]=ua(),{value:v,error:y}=g,A=P.useRef(null);ye(parseInt(window.getComputedStyle(document.body).getPropertyValue("--react-pdf-annotation-layer"),10)===1,"AnnotationLayer styles not found. Read more: https://github.com/wojtekmaj/react-pdf#support-for-annotations");function S(){v&&a&&a(v)}function E(){y&&(ye(!1,y.toString()),r&&r(y))}function T(){m({type:"RESET"})}P.useEffect(T,[m,h]);function _(){if(!h)return;const M=Zo(h.getAnnotations()),L=M;return M.promise.then(N=>{m({type:"RESOLVE",value:N})}).catch(N=>{m({type:"REJECT",error:N})}),()=>{$s(L)}}P.useEffect(_,[m,h,d]),P.useEffect(()=>{if(v!==void 0){if(v===!1){E();return}S()}},[v]);function R(){l&&l()}function k(M){ye(!1,`${M}`),o&&o(M)}const I=P.useMemo(()=>h.getViewport({scale:p,rotation:f}),[h,f,p]);function D(){if(!u||!h||!s||!v)return;const{current:M}=A;if(!M)return;const L=I.clone({dontFlip:!0}),N={accessibilityManager:null,annotationCanvasMap:null,div:M,l10n:null,page:h,viewport:L},O={annotations:v,annotationStorage:u.annotationStorage,div:M,downloadManager:null,imageResourcesPath:n,linkService:s,page:h,renderForms:d,viewport:L};M.innerHTML="";try{new yi.AnnotationLayer(N).render(O),R()}catch(U){k(U)}return()=>{}}return P.useEffect(D,[v,n,s,h,d,I]),ut.createElement("div",{className:_d("react-pdf__Page__annotations","annotationLayer"),ref:A})}var QP=function(i,t){var e={};for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&t.indexOf(n)<0&&(e[n]=i[n]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(i);s<n.length;s++)t.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(i,n[s])&&(e[n[s]]=i[n[s]]);return e};const Oy=1,BA=function(t){const e=LA(),n=Object.assign(Object.assign({},e),t),{_className:s="react-pdf__Page",_enableRegisterUnregisterPage:r=!0,canvasBackground:a,canvasRef:o,children:l,className:h,customRenderer:u,customTextRenderer:d,devicePixelRatio:f,error:p="Failed to load the page.",height:g,inputRef:m,loading:v="Loading page",noData:y="No page specified.",onGetAnnotationsError:A,onGetAnnotationsSuccess:S,onGetStructTreeError:E,onGetStructTreeSuccess:T,onGetTextError:_,onGetTextSuccess:R,onLoadError:k,onLoadSuccess:I,onRenderAnnotationLayerError:D,onRenderAnnotationLayerSuccess:M,onRenderError:L,onRenderSuccess:N,onRenderTextLayerError:O,onRenderTextLayerSuccess:U,pageIndex:z,pageNumber:j,pdf:V,registerPage:tt,renderAnnotationLayer:yt=!0,renderForms:ft=!1,renderMode:st="canvas",renderTextLayer:lt=!0,rotate:It,scale:Wt=Oy,unregisterPage:gt,width:Y}=n,rt=QP(n,["_className","_enableRegisterUnregisterPage","canvasBackground","canvasRef","children","className","customRenderer","customTextRenderer","devicePixelRatio","error","height","inputRef","loading","noData","onGetAnnotationsError","onGetAnnotationsSuccess","onGetStructTreeError","onGetStructTreeSuccess","onGetTextError","onGetTextSuccess","onLoadError","onLoadSuccess","onRenderAnnotationLayerError","onRenderAnnotationLayerSuccess","onRenderError","onRenderSuccess","onRenderTextLayerError","onRenderTextLayerSuccess","pageIndex","pageNumber","pdf","registerPage","renderAnnotationLayer","renderForms","renderMode","renderTextLayer","rotate","scale","unregisterPage","width"]),[Tt,zt]=ua(),{value:pt,error:be}=Tt,el=P.useRef(null);wt(V);const je=Ys(j)?j-1:z??null,qn=j??(Ys(z)?z+1:null),Vt=It??(pt?pt.rotate:null),Dt=P.useMemo(()=>{if(!pt)return null;let va=1;const tf=Wt??Oy;if(Y||g){const ba=pt.getViewport({scale:1,rotation:Vt});Y?va=Y/ba.width:g&&(va=g/ba.height)}return tf*va},[g,pt,Vt,Wt,Y]);function Pn(){return()=>{Ys(je)&&r&&gt&&gt(je)}}P.useEffect(Pn,[r,V,je,gt]);function is(){if(I){if(!pt||!Dt)return;I(td(pt,Dt))}if(r&&tt){if(!Ys(je)||!el.current)return;tt(je,el.current)}}function ss(){be&&(ye(!1,be.toString()),k&&k(be))}function PS(){zt({type:"RESET"})}P.useEffect(PS,[zt,V,je]);function RS(){if(!V||!qn)return;const va=Zo(V.getPage(qn)),tf=va;return va.promise.then(ba=>{zt({type:"RESOLVE",value:ba})}).catch(ba=>{zt({type:"REJECT",error:ba})}),()=>$s(tf)}P.useEffect(RS,[zt,V,je,qn,tt]),P.useEffect(()=>{if(pt!==void 0){if(pt===!1){ss();return}is()}},[pt,Dt]);const kS=P.useMemo(()=>pt&&Ys(je)&&qn&&Ys(Vt)&&Ys(Dt)?{_className:s,canvasBackground:a,customTextRenderer:d,devicePixelRatio:f,onGetAnnotationsError:A,onGetAnnotationsSuccess:S,onGetStructTreeError:E,onGetStructTreeSuccess:T,onGetTextError:_,onGetTextSuccess:R,onRenderAnnotationLayerError:D,onRenderAnnotationLayerSuccess:M,onRenderError:L,onRenderSuccess:N,onRenderTextLayerError:O,onRenderTextLayerSuccess:U,page:pt,pageIndex:je,pageNumber:qn,renderForms:ft,renderTextLayer:lt,rotate:Vt,scale:Dt}:null,[s,a,d,f,A,S,E,T,_,R,D,M,L,N,O,U,pt,je,qn,ft,lt,Vt,Dt]),MS=P.useMemo(()=>wA(rt,()=>pt&&(Dt?td(pt,Dt):void 0)),[rt,pt,Dt]),kh=`${je}@${Dt}/${Vt}`,LS=`${je}/${Vt}`;function IS(){switch(st){case"custom":return wt(u),ut.createElement(u,{key:`${kh}_custom`});case"none":return null;case"svg":return ut.createElement(qP,{key:`${LS}_svg`});case"canvas":default:return ut.createElement(GP,{key:`${kh}_canvas`,canvasRef:o})}}function DS(){return lt?ut.createElement(KP,{key:`${kh}_text`}):null}function OS(){return yt?ut.createElement(YP,{key:`${kh}_annotations`}):null}function FS(){return ut.createElement(DA.Provider,{value:kS},IS(),DS(),OS(),l)}function NS(){return qn?V===null||pt===void 0||pt===null?ut.createElement(Ha,{type:"loading"},typeof v=="function"?v():v):V===!1||pt===!1?ut.createElement(Ha,{type:"error"},typeof p=="function"?p():p):FS():ut.createElement(Ha,{type:"no-data"},typeof y=="function"?y():y)}return ut.createElement("div",Object.assign({className:_d(s,h),"data-page-number":qn,ref:IA(m,el),style:{"--scale-factor":`${Dt}`,backgroundColor:a||"white",position:"relative",minWidth:"min-content",minHeight:"min-content"}},MS),NS())},vf=F.oneOfType([F.func,F.node]);BA.propTypes=Object.assign(Object.assign({},PA),{canvasBackground:F.string,canvasRef:hg,children:F.node,className:kA,customRenderer:F.func,customTextRenderer:F.func,devicePixelRatio:F.number,error:vf,height:F.number,imageResourcesPath:F.string,inputRef:hg,loading:vf,noData:vf,onGetTextError:F.func,onGetTextSuccess:F.func,onLoadError:F.func,onLoadSuccess:F.func,onRenderError:F.func,onRenderSuccess:F.func,onRenderTextLayerError:F.func,onRenderTextLayerSuccess:F.func,pageIndex:IP,pageNumber:DP,pdf:OP,renderAnnotationLayer:F.bool,renderForms:F.bool,renderMode:FP,renderTextLayer:F.bool,rotate:NP,scale:F.number,width:F.number});CP();yi.GlobalWorkerOptions.workerSrc="pdf.worker.js";typeof window<"u"&&"Worker"in window&&(yi.GlobalWorkerOptions.workerSrc=`//cdnjs.cloudflare.com/ajax/libs/pdf.js/${yi.version}/pdf.worker.min.js`);const ZP=({url:i,title:t,onCloseFocusRef:e})=>{const n=Re(),s=$o(n.breakpoints.down("sm")),[r,a]=P.useState(null),[o,l]=P.useState(null),h=P.useRef(null),u=ut.useMemo(()=>{try{const m=typeof URL<"u"&&typeof URL.createObjectURL=="function";if(typeof Blob<"u"&&i instanceof Blob&&m){const v=URL.createObjectURL(i);return l(v),v}}catch{}return i},[i]);P.useEffect(()=>()=>{try{o&&typeof URL<"u"&&URL.revokeObjectURL(o)}catch{}},[o]),P.useEffect(()=>{e!=null&&e.current&&h.current&&e.current!==h.current&&(e.current=h.current)},[e]);const d=()=>{try{if(typeof i=="string"){const m=i.split("/");return m[m.length-1]}return t?`${t.replace(/\s+/g,"_")}.pdf`:"document.pdf"}catch{return"document.pdf"}},f=({numPages:m})=>{a(m)},p=()=>{const m=document.createElement("a");m.href=u,m.download=d(),document.body.appendChild(m),m.click(),document.body.removeChild(m)},g=()=>{window.open(u,"_blank","noopener,noreferrer")};return C.jsxs(G,{sx:{height:"100%",display:"flex",flexDirection:"column",overflow:"hidden",backgroundColor:n.palette.background.paper},children:[C.jsxs(G,{sx:{display:"flex",gap:1,p:1,borderBottom:1,borderColor:"divider"},children:[C.jsx(_n,{ref:h,startIcon:C.jsx(o1,{}),onClick:p,variant:"contained",color:"primary",size:"small",children:"Download"}),C.jsx(_n,{startIcon:C.jsx(h1,{}),onClick:g,variant:"outlined",color:"primary",size:"small",children:"Open in New Tab"})]}),C.jsx(G,{sx:{flex:1,overflow:"auto",display:"flex",flexDirection:"column",alignItems:"center",py:2},children:C.jsx(MA,{file:u,onLoadSuccess:f,loading:C.jsx(Td,{"aria-label":"Loading PDF document"}),error:C.jsx("div",{children:"Error loading PDF. Please try downloading it instead."}),children:Array.from(new Array(r),(m,v)=>C.jsx(BA,{pageNumber:v+1,width:s?window.innerWidth-32:void 0,renderTextLayer:!1,renderAnnotationLayer:!1},`page_${v+1}`))})})]})},Fy=({url:i,title:t,isMobile:e})=>{const[n,s]=P.useState(!0),[r,a]=P.useState(!1),[o,l]=P.useState(""),h=Re();return P.useEffect(()=>{if(!i){a(!0);return}try{if(i.includes("figma.com")){let u=i;i.includes("embed.figma.com")||(u=i.replace("www.figma.com","embed.figma.com")),u.includes("embed-host=")||(u+=u.includes("?")?"&embed-host=share":"?embed-host=share"),u.includes("viewer=")||(u+="&viewer=1"),l(u)}else if(i.includes("miro.com")){let u=i;i.includes("embed/")||(u=i.replace("miro.com/","miro.com/embed/")),l(u)}else l(i)}catch(u){console.error("Error processing URL:",u),a(!0)}},[i]),C.jsx(G,{sx:{height:e?"100vh":"80vh",display:"flex",flexDirection:"column",overflow:"hidden"},children:r?C.jsx(zS,{severity:"error",sx:{m:2},children:"There was an error loading the content. Please try refreshing the page or opening the content in a new tab."}):C.jsxs(C.Fragment,{children:[n&&C.jsx(G,{sx:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",zIndex:1},children:C.jsx(Td,{})}),C.jsx(G,{component:"iframe",src:o,title:t,onLoad:()=>s(!1),sx:{width:"100%",height:"100%",border:"none",backgroundColor:h.palette.background.paper}})]})})},JP=P.createContext({openPdf:(i,t)=>{},openIframe:(i,t)=>{},openExternalContent:(i,t)=>{},openProjectModal:i=>{},closeModal:()=>{},projectContent:null,projectOpen:!1}),tR={position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:"95vw",height:"95vh",maxWidth:"95vw",maxHeight:"95vh",bgcolor:"background.paper",boxShadow:24,borderRadius:1,overflow:"hidden",display:"flex",flexDirection:"column"},eR=({children:i})=>{const[t,e]=P.useState(!1),[n,s]=P.useState(null),[r,a]=P.useState(""),[o,l]=P.useState(!1),[h,u]=P.useState(""),[d,f]=P.useState(""),[p,g]=P.useState(!1),[m,v]=P.useState(""),[y,A]=P.useState(""),[S,E]=P.useState(!1),[T,_]=P.useState(null),R=Re(),k=$o(R.breakpoints.down("sm")),I=P.useCallback((O,U="")=>{s(O),a(U),e(!0),l(!1),g(!1),E(!1)},[]),D=P.useCallback((O,U="External Content")=>{u(O),f(U),l(!0),e(!1),g(!1),E(!1)},[]),M=P.useCallback((O,U="External Website")=>{v(O),A(U),g(!0),e(!1),l(!1),E(!1)},[]),L=P.useCallback(O=>{_(O),E(!0),e(!1),l(!1),g(!1)},[]),N=P.useCallback(()=>{e(!1),l(!1),g(!1),E(!1)},[]);return C.jsxs(JP.Provider,{value:{openPdf:I,openIframe:D,openExternalContent:M,openProjectModal:L,closeModal:N,projectContent:T,projectOpen:S},children:[i,C.jsxs(nu,{open:t,onClose:N,fullScreen:!1,maxWidth:!1,fullWidth:!1,TransitionComponent:nf,"aria-labelledby":"pdf-modal-title","aria-describedby":"pdf-modal-description",PaperProps:{sx:{m:0,borderRadius:2,width:"95vw",height:"80vh",maxWidth:"95vw",maxHeight:"80vh",display:"flex",flexDirection:"column"}},children:[C.jsx(iu,{position:"sticky",color:"default",elevation:1,sx:{borderRadius:0},children:C.jsxs(su,{sx:{minHeight:56,px:1},children:[C.jsx(dt,{variant:"subtitle1",sx:{flex:1,fontWeight:600},children:r||"PDF Document"}),C.jsx(pi,{edge:"end",color:"inherit",onClick:N,"aria-label":"Close PDF",size:"large",children:C.jsx(Ul,{})})]})}),C.jsx(G,{sx:{flex:1,width:"100vw",height:"100%",minHeight:0,p:0,display:"flex",flexDirection:"column"},children:C.jsx(ZP,{url:n,title:r||"PDF Document"})})]}),C.jsxs(nu,{open:o,onClose:N,fullScreen:k,maxWidth:"md",fullWidth:!0,TransitionComponent:nf,"aria-labelledby":"iframe-modal-title","aria-describedby":"iframe-modal-description",PaperProps:{sx:k?{m:0,borderRadius:0,height:"100vh"}:{borderRadius:2}},children:[k&&C.jsx(iu,{position:"sticky",color:"default",elevation:1,sx:{borderRadius:0},children:C.jsxs(su,{sx:{minHeight:56,px:1},children:[C.jsx(dt,{variant:"subtitle1",sx:{flex:1,fontWeight:600},children:d||"External Content"}),C.jsx(pi,{edge:"end",color:"inherit",onClick:N,"aria-label":"Close content",size:"large",children:C.jsx(Ul,{})})]})}),C.jsx(G,{sx:{flex:1,height:k?"calc(100vh - 56px)":"80vh",p:0,display:"flex",flexDirection:"column"},children:C.jsx(Fy,{url:h,title:d})})]}),C.jsxs(nu,{open:p,onClose:N,fullScreen:k,maxWidth:"md",fullWidth:!0,TransitionComponent:nf,"aria-labelledby":"external-modal-title","aria-describedby":"external-modal-description",PaperProps:{sx:k?{m:0,borderRadius:0,height:"100vh"}:{borderRadius:2}},children:[k&&C.jsx(iu,{position:"sticky",color:"default",elevation:1,sx:{borderRadius:0},children:C.jsxs(su,{sx:{minHeight:56,px:1},children:[C.jsx(dt,{variant:"subtitle1",sx:{flex:1,fontWeight:600},children:y||"External Website"}),C.jsx(pi,{edge:"end",color:"inherit",onClick:N,"aria-label":"Close external",size:"large",children:C.jsx(Ul,{})})]})}),C.jsx(G,{sx:{flex:1,height:k?"calc(100vh - 56px)":"80vh",p:0,display:"flex",flexDirection:"column"},children:C.jsx(Fy,{url:m,title:y})})]}),C.jsx(GS,{open:S,onClose:N,children:C.jsx(G,{sx:tR,children:T})})]})};var Mt={},Vh={},Hh={},$h={},bf,Ny;function nR(){if(Ny)return bf;Ny=1;var i="Expected a function",t=NaN,e="[object Symbol]",n=/^\s+|\s+$/g,s=/^[-+]0x[0-9a-f]+$/i,r=/^0b[01]+$/i,a=/^0o[0-7]+$/i,o=parseInt,l=typeof Lh=="object"&&Lh&&Lh.Object===Object&&Lh,h=typeof self=="object"&&self&&self.Object===Object&&self,u=l||h||Function("return this")(),d=Object.prototype,f=d.toString,p=Math.max,g=Math.min,m=function(){return u.Date.now()};function v(_,R,k){var I,D,M,L,N,O,U=0,z=!1,j=!1,V=!0;if(typeof _!="function")throw new TypeError(i);R=T(R)||0,A(k)&&(z=!!k.leading,j="maxWait"in k,M=j?p(T(k.maxWait)||0,R):M,V="trailing"in k?!!k.trailing:V);function tt(rt){var Tt=I,zt=D;return I=D=void 0,U=rt,L=_.apply(zt,Tt),L}function yt(rt){return U=rt,N=setTimeout(lt,R),z?tt(rt):L}function ft(rt){var Tt=rt-O,zt=rt-U,pt=R-Tt;return j?g(pt,M-zt):pt}function st(rt){var Tt=rt-O,zt=rt-U;return O===void 0||Tt>=R||Tt<0||j&&zt>=M}function lt(){var rt=m();if(st(rt))return It(rt);N=setTimeout(lt,ft(rt))}function It(rt){return N=void 0,V&&I?tt(rt):(I=D=void 0,L)}function Wt(){N!==void 0&&clearTimeout(N),U=0,I=O=D=N=void 0}function gt(){return N===void 0?L:It(m())}function Y(){var rt=m(),Tt=st(rt);if(I=arguments,D=this,O=rt,Tt){if(N===void 0)return yt(O);if(j)return N=setTimeout(lt,R),tt(O)}return N===void 0&&(N=setTimeout(lt,R)),L}return Y.cancel=Wt,Y.flush=gt,Y}function y(_,R,k){var I=!0,D=!0;if(typeof _!="function")throw new TypeError(i);return A(k)&&(I="leading"in k?!!k.leading:I,D="trailing"in k?!!k.trailing:D),v(_,R,{leading:I,maxWait:R,trailing:D})}function A(_){var R=typeof _;return!!_&&(R=="object"||R=="function")}function S(_){return!!_&&typeof _=="object"}function E(_){return typeof _=="symbol"||S(_)&&f.call(_)==e}function T(_){if(typeof _=="number")return _;if(E(_))return t;if(A(_)){var R=typeof _.valueOf=="function"?_.valueOf():_;_=A(R)?R+"":R}if(typeof _!="string")return _===0?_:+_;_=_.replace(n,"");var k=r.test(_);return k||a.test(_)?o(_.slice(2),k?2:8):s.test(_)?t:+_}return bf=y,bf}var ll={},jy;function Xg(){if(jy)return ll;jy=1,Object.defineProperty(ll,"__esModule",{value:!0}),ll.addPassiveEventListener=function(e,n,s){var r=s.name;r||(r=n,console.warn("Listener must be a named function.")),i.has(n)||i.set(n,new Set);var a=i.get(n);if(!a.has(r)){var o=function(){var l=!1;try{var h=Object.defineProperty({},"passive",{get:function(){l=!0}});window.addEventListener("test",null,h)}catch{}return l}();e.addEventListener(n,s,o?{passive:!0}:!1),a.add(r)}},ll.removePassiveEventListener=function(e,n,s){e.removeEventListener(n,s),i.get(n).delete(s.name||n)};var i=new Map;return ll}var By;function Kg(){if(By)return $h;By=1,Object.defineProperty($h,"__esModule",{value:!0});var i=nR(),t=n(i),e=Xg();function n(a){return a&&a.__esModule?a:{default:a}}var s=function(o){var l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:66;return(0,t.default)(o,l)},r={spyCallbacks:[],spySetState:[],scrollSpyContainers:[],mount:function(o,l){if(o){var h=s(function(u){r.scrollHandler(o)},l);return r.scrollSpyContainers.push(o),(0,e.addPassiveEventListener)(o,"scroll",h),function(){(0,e.removePassiveEventListener)(o,"scroll",h),r.scrollSpyContainers.splice(r.scrollSpyContainers.indexOf(o),1)}}return function(){}},isMounted:function(o){return r.scrollSpyContainers.indexOf(o)!==-1},currentPositionX:function(o){if(o===document){var l=window.scrollY!==void 0,h=(document.compatMode||"")==="CSS1Compat";return l?window.scrollX:h?document.documentElement.scrollLeft:document.body.scrollLeft}else return o.scrollLeft},currentPositionY:function(o){if(o===document){var l=window.scrollX!==void 0,h=(document.compatMode||"")==="CSS1Compat";return l?window.scrollY:h?document.documentElement.scrollTop:document.body.scrollTop}else return o.scrollTop},scrollHandler:function(o){var l=r.scrollSpyContainers[r.scrollSpyContainers.indexOf(o)].spyCallbacks||[];l.forEach(function(h){return h(r.currentPositionX(o),r.currentPositionY(o))})},addStateHandler:function(o){r.spySetState.push(o)},addSpyHandler:function(o,l){var h=r.scrollSpyContainers[r.scrollSpyContainers.indexOf(l)];h.spyCallbacks||(h.spyCallbacks=[]),h.spyCallbacks.push(o)},updateStates:function(){r.spySetState.forEach(function(o){return o()})},unmount:function(o,l){r.scrollSpyContainers.forEach(function(h){return h.spyCallbacks&&h.spyCallbacks.length&&h.spyCallbacks.indexOf(l)>-1&&h.spyCallbacks.splice(h.spyCallbacks.indexOf(l),1)}),r.spySetState&&r.spySetState.length&&r.spySetState.indexOf(o)>-1&&r.spySetState.splice(r.spySetState.indexOf(o),1),document.removeEventListener("scroll",r.scrollHandler)},update:function(){return r.scrollSpyContainers.forEach(function(o){return r.scrollHandler(o)})}};return $h.default=r,$h}var Uh={},Wh={},Vy;function qd(){if(Vy)return Wh;Vy=1,Object.defineProperty(Wh,"__esModule",{value:!0});var i=function(o,l){var h=o.indexOf("#")===0?o.substring(1):o,u=h?"#"+h:"",d=window&&window.location,f=u?d.pathname+d.search+u:d.pathname+d.search;l?history.pushState(history.state,"",f):history.replaceState(history.state,"",f)},t=function(){return window.location.hash.replace(/^#/,"")},e=function(o){return function(l){return o.contains?o!=l&&o.contains(l):!!(o.compareDocumentPosition(l)&16)}},n=function(o){return getComputedStyle(o).position!=="static"},s=function(o,l){for(var h=o.offsetTop,u=o.offsetParent;u&&!l(u);)h+=u.offsetTop,u=u.offsetParent;return{offsetTop:h,offsetParent:u}},r=function(o,l,h){if(h)return o===document?l.getBoundingClientRect().left+(window.scrollX||window.pageXOffset):getComputedStyle(o).position!=="static"?l.offsetLeft:l.offsetLeft-o.offsetLeft;if(o===document)return l.getBoundingClientRect().top+(window.scrollY||window.pageYOffset);if(n(o)){if(l.offsetParent!==o){var u=function(v){return v===o||v===document},d=s(l,u),f=d.offsetTop,p=d.offsetParent;if(p!==o)throw new Error("Seems containerElement is not an ancestor of the Element");return f}return l.offsetTop}if(l.offsetParent===o.offsetParent)return l.offsetTop-o.offsetTop;var g=function(v){return v===document};return s(l,g).offsetTop-s(o,g).offsetTop};return Wh.default={updateHash:i,getHash:t,filterElementInContainer:e,scrollOffset:r},Wh}var zh={},Gh={},Hy;function iR(){return Hy||(Hy=1,Object.defineProperty(Gh,"__esModule",{value:!0}),Gh.default={defaultEasing:function(t){return t<.5?Math.pow(t*2,2)/2:1-Math.pow((1-t)*2,2)/2},linear:function(t){return t},easeInQuad:function(t){return t*t},easeOutQuad:function(t){return t*(2-t)},easeInOutQuad:function(t){return t<.5?2*t*t:-1+(4-2*t)*t},easeInCubic:function(t){return t*t*t},easeOutCubic:function(t){return--t*t*t+1},easeInOutCubic:function(t){return t<.5?4*t*t*t:(t-1)*(2*t-2)*(2*t-2)+1},easeInQuart:function(t){return t*t*t*t},easeOutQuart:function(t){return 1- --t*t*t*t},easeInOutQuart:function(t){return t<.5?8*t*t*t*t:1-8*--t*t*t*t},easeInQuint:function(t){return t*t*t*t*t},easeOutQuint:function(t){return 1+--t*t*t*t*t},easeInOutQuint:function(t){return t<.5?16*t*t*t*t*t:1+16*--t*t*t*t*t}}),Gh}var qh={},$y;function sR(){if($y)return qh;$y=1,Object.defineProperty(qh,"__esModule",{value:!0});var i=Xg(),t=["mousedown","wheel","touchmove","keydown"];return qh.default={subscribe:function(n){return typeof document<"u"&&t.forEach(function(s){return(0,i.addPassiveEventListener)(document,s,n)})}},qh}var Xh={},Uy;function Yg(){if(Uy)return Xh;Uy=1,Object.defineProperty(Xh,"__esModule",{value:!0});var i={registered:{},scrollEvent:{register:function(e,n){i.registered[e]=n},remove:function(e){i.registered[e]=null}}};return Xh.default=i,Xh}var Wy;function VA(){if(Wy)return zh;Wy=1,Object.defineProperty(zh,"__esModule",{value:!0});var i=Object.assign||function(D){for(var M=1;M<arguments.length;M++){var L=arguments[M];for(var N in L)Object.prototype.hasOwnProperty.call(L,N)&&(D[N]=L[N])}return D},t=qd();l(t);var e=iR(),n=l(e),s=sR(),r=l(s),a=Yg(),o=l(a);function l(D){return D&&D.__esModule?D:{default:D}}var h=function(M){return n.default[M.smooth]||n.default.defaultEasing},u=function(M){return typeof M=="function"?M:function(){return M}},d=function(){if(typeof window<"u")return window.requestAnimationFrame||window.webkitRequestAnimationFrame},f=function(){return d()||function(D,M,L){window.setTimeout(D,L||1e3/60,new Date().getTime())}}(),p=function(){return{currentPosition:0,startPosition:0,targetPosition:0,progress:0,duration:0,cancel:!1,target:null,containerElement:null,to:null,start:null,delta:null,percent:null,delayTimeout:null}},g=function(M){var L=M.data.containerElement;if(L&&L!==document&&L!==document.body)return L.scrollLeft;var N=window.pageXOffset!==void 0,O=(document.compatMode||"")==="CSS1Compat";return N?window.pageXOffset:O?document.documentElement.scrollLeft:document.body.scrollLeft},m=function(M){var L=M.data.containerElement;if(L&&L!==document&&L!==document.body)return L.scrollTop;var N=window.pageXOffset!==void 0,O=(document.compatMode||"")==="CSS1Compat";return N?window.pageYOffset:O?document.documentElement.scrollTop:document.body.scrollTop},v=function(M){var L=M.data.containerElement;if(L&&L!==document&&L!==document.body)return L.scrollWidth-L.offsetWidth;var N=document.body,O=document.documentElement;return Math.max(N.scrollWidth,N.offsetWidth,O.clientWidth,O.scrollWidth,O.offsetWidth)},y=function(M){var L=M.data.containerElement;if(L&&L!==document&&L!==document.body)return L.scrollHeight-L.offsetHeight;var N=document.body,O=document.documentElement;return Math.max(N.scrollHeight,N.offsetHeight,O.clientHeight,O.scrollHeight,O.offsetHeight)},A=function D(M,L,N){var O=L.data;if(!L.ignoreCancelEvents&&O.cancel){o.default.registered.end&&o.default.registered.end(O.to,O.target,O.currentPositionY);return}if(O.delta=Math.round(O.targetPosition-O.startPosition),O.start===null&&(O.start=N),O.progress=N-O.start,O.percent=O.progress>=O.duration?1:M(O.progress/O.duration),O.currentPosition=O.startPosition+Math.ceil(O.delta*O.percent),O.containerElement&&O.containerElement!==document&&O.containerElement!==document.body?L.horizontal?O.containerElement.scrollLeft=O.currentPosition:O.containerElement.scrollTop=O.currentPosition:L.horizontal?window.scrollTo(O.currentPosition,0):window.scrollTo(0,O.currentPosition),O.percent<1){var U=D.bind(null,M,L);f.call(window,U);return}o.default.registered.end&&o.default.registered.end(O.to,O.target,O.currentPosition)},S=function(M){M.data.containerElement=M?M.containerId?document.getElementById(M.containerId):M.container&&M.container.nodeType?M.container:document:null},E=function(M,L,N,O){L.data=L.data||p(),window.clearTimeout(L.data.delayTimeout);var U=function(){L.data.cancel=!0};if(r.default.subscribe(U),S(L),L.data.start=null,L.data.cancel=!1,L.data.startPosition=L.horizontal?g(L):m(L),L.data.targetPosition=L.absolute?M:M+L.data.startPosition,L.data.startPosition===L.data.targetPosition){o.default.registered.end&&o.default.registered.end(L.data.to,L.data.target,L.data.currentPosition);return}L.data.delta=Math.round(L.data.targetPosition-L.data.startPosition),L.data.duration=u(L.duration)(L.data.delta),L.data.duration=isNaN(parseFloat(L.data.duration))?1e3:parseFloat(L.data.duration),L.data.to=N,L.data.target=O;var z=h(L),j=A.bind(null,z,L);if(L&&L.delay>0){L.data.delayTimeout=window.setTimeout(function(){o.default.registered.begin&&o.default.registered.begin(L.data.to,L.data.target),f.call(window,j)},L.delay);return}o.default.registered.begin&&o.default.registered.begin(L.data.to,L.data.target),f.call(window,j)},T=function(M){return M=i({},M),M.data=M.data||p(),M.absolute=!0,M},_=function(M){E(0,T(M))},R=function(M,L){E(M,T(L))},k=function(M){M=T(M),S(M),E(M.horizontal?v(M):y(M),M)},I=function(M,L){L=T(L),S(L);var N=L.horizontal?g(L):m(L);E(M+N,L)};return zh.default={animateTopScroll:E,getAnimationType:h,scrollToTop:_,scrollToBottom:k,scrollTo:R,scrollMore:I},zh}var zy;function Xd(){if(zy)return Uh;zy=1,Object.defineProperty(Uh,"__esModule",{value:!0});var i=Object.assign||function(u){for(var d=1;d<arguments.length;d++){var f=arguments[d];for(var p in f)Object.prototype.hasOwnProperty.call(f,p)&&(u[p]=f[p])}return u},t=qd(),e=o(t),n=VA(),s=o(n),r=Yg(),a=o(r);function o(u){return u&&u.__esModule?u:{default:u}}var l={},h=void 0;return Uh.default={unmount:function(){l={}},register:function(d,f){l[d]=f},unregister:function(d){delete l[d]},get:function(d){return l[d]||document.getElementById(d)||document.getElementsByName(d)[0]||document.getElementsByClassName(d)[0]},setActiveLink:function(d){return h=d},getActiveLink:function(){return h},scrollTo:function(d,f){var p=this.get(d);if(!p){console.warn("target Element not found");return}f=i({},f,{absolute:!1});var g=f.containerId,m=f.container,v=void 0;g?v=document.getElementById(g):m&&m.nodeType?v=m:v=document,f.absolute=!0;var y=f.horizontal,A=e.default.scrollOffset(v,p,y)+(f.offset||0);if(!f.smooth){a.default.registered.begin&&a.default.registered.begin(d,p),v===document?f.horizontal?window.scrollTo(A,0):window.scrollTo(0,A):v.scrollTop=A,a.default.registered.end&&a.default.registered.end(d,p);return}s.default.animateTopScroll(A,f,d,p)}},Uh}var Kh={},Gy;function HA(){if(Gy)return Kh;Gy=1,Object.defineProperty(Kh,"__esModule",{value:!0}),Xg();var i=qd(),t=e(i);function e(s){return s&&s.__esModule?s:{default:s}}var n={mountFlag:!1,initialized:!1,scroller:null,containers:{},mount:function(r){this.scroller=r,this.handleHashChange=this.handleHashChange.bind(this),window.addEventListener("hashchange",this.handleHashChange),this.initStateFromHash(),this.mountFlag=!0},mapContainer:function(r,a){this.containers[r]=a},isMounted:function(){return this.mountFlag},isInitialized:function(){return this.initialized},initStateFromHash:function(){var r=this,a=this.getHash();a?window.setTimeout(function(){r.scrollTo(a,!0),r.initialized=!0},10):this.initialized=!0},scrollTo:function(r,a){var o=this.scroller,l=o.get(r);if(l&&(a||r!==o.getActiveLink())){var h=this.containers[r]||document;o.scrollTo(r,{container:h})}},getHash:function(){return t.default.getHash()},changeHash:function(r,a){this.isInitialized()&&t.default.getHash()!==r&&t.default.updateHash(r,a)},handleHashChange:function(){this.scrollTo(this.getHash())},unmount:function(){this.scroller=null,this.containers=null,window.removeEventListener("hashchange",this.handleHashChange)}};return Kh.default=n,Kh}var qy;function Qg(){if(qy)return Hh;qy=1,Object.defineProperty(Hh,"__esModule",{value:!0});var i=Object.assign||function(y){for(var A=1;A<arguments.length;A++){var S=arguments[A];for(var E in S)Object.prototype.hasOwnProperty.call(S,E)&&(y[E]=S[E])}return y},t=function(){function y(A,S){for(var E=0;E<S.length;E++){var T=S[E];T.enumerable=T.enumerable||!1,T.configurable=!0,"value"in T&&(T.writable=!0),Object.defineProperty(A,T.key,T)}}return function(A,S,E){return S&&y(A.prototype,S),E&&y(A,E),A}}(),e=qs(),n=f(e),s=Kg(),r=f(s),a=Xd(),o=f(a),l=Cd(),h=f(l),u=HA(),d=f(u);function f(y){return y&&y.__esModule?y:{default:y}}function p(y,A){if(!(y instanceof A))throw new TypeError("Cannot call a class as a function")}function g(y,A){if(!y)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return A&&(typeof A=="object"||typeof A=="function")?A:y}function m(y,A){if(typeof A!="function"&&A!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof A);y.prototype=Object.create(A&&A.prototype,{constructor:{value:y,enumerable:!1,writable:!0,configurable:!0}}),A&&(Object.setPrototypeOf?Object.setPrototypeOf(y,A):y.__proto__=A)}var v={to:h.default.string.isRequired,containerId:h.default.string,container:h.default.object,activeClass:h.default.string,activeStyle:h.default.object,spy:h.default.bool,horizontal:h.default.bool,smooth:h.default.oneOfType([h.default.bool,h.default.string]),offset:h.default.number,delay:h.default.number,isDynamic:h.default.bool,onClick:h.default.func,duration:h.default.oneOfType([h.default.number,h.default.func]),absolute:h.default.bool,onSetActive:h.default.func,onSetInactive:h.default.func,ignoreCancelEvents:h.default.bool,hashSpy:h.default.bool,saveHashHistory:h.default.bool,spyThrottle:h.default.number};return Hh.default=function(y,A){var S=A||o.default,E=function(_){m(R,_);function R(k){p(this,R);var I=g(this,(R.__proto__||Object.getPrototypeOf(R)).call(this,k));return T.call(I),I.state={active:!1},I.beforeUnmountCallbacks=[],I}return t(R,[{key:"getScrollSpyContainer",value:function(){var I=this.props.containerId,D=this.props.container;return I&&!D?document.getElementById(I):D&&D.nodeType?D:document}},{key:"componentDidMount",value:function(){if(this.props.spy||this.props.hashSpy){var I=this.getScrollSpyContainer();if(!r.default.isMounted(I)){var D=r.default.mount(I,this.props.spyThrottle);this.beforeUnmountCallbacks.push(D)}this.props.hashSpy&&(d.default.isMounted()||d.default.mount(S),d.default.mapContainer(this.props.to,I)),r.default.addSpyHandler(this.spyHandler,I),this.setState({container:I})}}},{key:"componentWillUnmount",value:function(){r.default.unmount(this.stateHandler,this.spyHandler),this.beforeUnmountCallbacks.forEach(function(I){return I()})}},{key:"render",value:function(){var I="";this.state&&this.state.active?I=((this.props.className||"")+" "+(this.props.activeClass||"active")).trim():I=this.props.className;var D={};this.state&&this.state.active?D=i({},this.props.style,this.props.activeStyle):D=i({},this.props.style);var M=i({},this.props);for(var L in v)M.hasOwnProperty(L)&&delete M[L];return M.className=I,M.style=D,M.onClick=this.handleClick,n.default.createElement(y,M)}}]),R}(n.default.PureComponent),T=function(){var R=this;this.scrollTo=function(k,I){S.scrollTo(k,i({},R.state,I))},this.handleClick=function(k){R.props.onClick&&R.props.onClick(k),k.stopPropagation&&k.stopPropagation(),k.preventDefault&&k.preventDefault(),R.scrollTo(R.props.to,R.props)},this.spyHandler=function(k,I){var D=R.getScrollSpyContainer();if(!(d.default.isMounted()&&!d.default.isInitialized())){var M=R.props.horizontal,L=R.props.to,N=null,O=void 0,U=void 0;if(M){var z=0,j=0,V=0;if(D.getBoundingClientRect){var tt=D.getBoundingClientRect();V=tt.left}if(!N||R.props.isDynamic){if(N=S.get(L),!N)return;var yt=N.getBoundingClientRect();z=yt.left-V+k,j=z+yt.width}var ft=k-R.props.offset;O=ft>=Math.floor(z)&&ft<Math.floor(j),U=ft<Math.floor(z)||ft>=Math.floor(j)}else{var st=0,lt=0,It=0;if(D.getBoundingClientRect){var Wt=D.getBoundingClientRect();It=Wt.top}if(!N||R.props.isDynamic){if(N=S.get(L),!N)return;var gt=N.getBoundingClientRect();st=gt.top-It+I,lt=st+gt.height}var Y=I-R.props.offset;O=Y>=Math.floor(st)&&Y<Math.floor(lt),U=Y<Math.floor(st)||Y>=Math.floor(lt)}var rt=S.getActiveLink();if(U){if(L===rt&&S.setActiveLink(void 0),R.props.hashSpy&&d.default.getHash()===L){var Tt=R.props.saveHashHistory,zt=Tt===void 0?!1:Tt;d.default.changeHash("",zt)}R.props.spy&&R.state.active&&(R.setState({active:!1}),R.props.onSetInactive&&R.props.onSetInactive(L,N))}if(O&&(rt!==L||R.state.active===!1)){S.setActiveLink(L);var pt=R.props.saveHashHistory,be=pt===void 0?!1:pt;R.props.hashSpy&&d.default.changeHash(L,be),R.props.spy&&(R.setState({active:!0}),R.props.onSetActive&&R.props.onSetActive(L,N))}}}};return E.propTypes=v,E.defaultProps={offset:0},E},Hh}var Xy;function rR(){if(Xy)return Vh;Xy=1,Object.defineProperty(Vh,"__esModule",{value:!0});var i=qs(),t=s(i),e=Qg(),n=s(e);function s(h){return h&&h.__esModule?h:{default:h}}function r(h,u){if(!(h instanceof u))throw new TypeError("Cannot call a class as a function")}function a(h,u){if(!h)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return u&&(typeof u=="object"||typeof u=="function")?u:h}function o(h,u){if(typeof u!="function"&&u!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof u);h.prototype=Object.create(u&&u.prototype,{constructor:{value:h,enumerable:!1,writable:!0,configurable:!0}}),u&&(Object.setPrototypeOf?Object.setPrototypeOf(h,u):h.__proto__=u)}var l=function(h){o(u,h);function u(){var d,f,p,g;r(this,u);for(var m=arguments.length,v=Array(m),y=0;y<m;y++)v[y]=arguments[y];return g=(f=(p=a(this,(d=u.__proto__||Object.getPrototypeOf(u)).call.apply(d,[this].concat(v))),p),p.render=function(){return t.default.createElement("a",p.props,p.props.children)},f),a(p,g)}return u}(t.default.Component);return Vh.default=(0,n.default)(l),Vh}var Yh={},Ky;function aR(){if(Ky)return Yh;Ky=1,Object.defineProperty(Yh,"__esModule",{value:!0});var i=function(){function u(d,f){for(var p=0;p<f.length;p++){var g=f[p];g.enumerable=g.enumerable||!1,g.configurable=!0,"value"in g&&(g.writable=!0),Object.defineProperty(d,g.key,g)}}return function(d,f,p){return f&&u(d.prototype,f),p&&u(d,p),d}}(),t=qs(),e=r(t),n=Qg(),s=r(n);function r(u){return u&&u.__esModule?u:{default:u}}function a(u,d){if(!(u instanceof d))throw new TypeError("Cannot call a class as a function")}function o(u,d){if(!u)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return d&&(typeof d=="object"||typeof d=="function")?d:u}function l(u,d){if(typeof d!="function"&&d!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof d);u.prototype=Object.create(d&&d.prototype,{constructor:{value:u,enumerable:!1,writable:!0,configurable:!0}}),d&&(Object.setPrototypeOf?Object.setPrototypeOf(u,d):u.__proto__=d)}var h=function(u){l(d,u);function d(){return a(this,d),o(this,(d.__proto__||Object.getPrototypeOf(d)).apply(this,arguments))}return i(d,[{key:"render",value:function(){return e.default.createElement("button",this.props,this.props.children)}}]),d}(e.default.Component);return Yh.default=(0,s.default)(h),Yh}var Qh={},Zh={},Yy;function $A(){if(Yy)return Zh;Yy=1,Object.defineProperty(Zh,"__esModule",{value:!0});var i=Object.assign||function(p){for(var g=1;g<arguments.length;g++){var m=arguments[g];for(var v in m)Object.prototype.hasOwnProperty.call(m,v)&&(p[v]=m[v])}return p},t=function(){function p(g,m){for(var v=0;v<m.length;v++){var y=m[v];y.enumerable=y.enumerable||!1,y.configurable=!0,"value"in y&&(y.writable=!0),Object.defineProperty(g,y.key,y)}}return function(g,m,v){return m&&p(g.prototype,m),v&&p(g,v),g}}(),e=qs(),n=h(e),s=Lb();h(s);var r=Xd(),a=h(r),o=Cd(),l=h(o);function h(p){return p&&p.__esModule?p:{default:p}}function u(p,g){if(!(p instanceof g))throw new TypeError("Cannot call a class as a function")}function d(p,g){if(!p)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return g&&(typeof g=="object"||typeof g=="function")?g:p}function f(p,g){if(typeof g!="function"&&g!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof g);p.prototype=Object.create(g&&g.prototype,{constructor:{value:p,enumerable:!1,writable:!0,configurable:!0}}),g&&(Object.setPrototypeOf?Object.setPrototypeOf(p,g):p.__proto__=g)}return Zh.default=function(p){var g=function(m){f(v,m);function v(y){u(this,v);var A=d(this,(v.__proto__||Object.getPrototypeOf(v)).call(this,y));return A.childBindings={domNode:null},A}return t(v,[{key:"componentDidMount",value:function(){if(typeof window>"u")return!1;this.registerElems(this.props.name)}},{key:"componentDidUpdate",value:function(A){this.props.name!==A.name&&this.registerElems(this.props.name)}},{key:"componentWillUnmount",value:function(){if(typeof window>"u")return!1;a.default.unregister(this.props.name)}},{key:"registerElems",value:function(A){a.default.register(A,this.childBindings.domNode)}},{key:"render",value:function(){return n.default.createElement(p,i({},this.props,{parentBindings:this.childBindings}))}}]),v}(n.default.Component);return g.propTypes={name:l.default.string,id:l.default.string},g},Zh}var Qy;function oR(){if(Qy)return Qh;Qy=1,Object.defineProperty(Qh,"__esModule",{value:!0});var i=Object.assign||function(p){for(var g=1;g<arguments.length;g++){var m=arguments[g];for(var v in m)Object.prototype.hasOwnProperty.call(m,v)&&(p[v]=m[v])}return p},t=function(){function p(g,m){for(var v=0;v<m.length;v++){var y=m[v];y.enumerable=y.enumerable||!1,y.configurable=!0,"value"in y&&(y.writable=!0),Object.defineProperty(g,y.key,y)}}return function(g,m,v){return m&&p(g.prototype,m),v&&p(g,v),g}}(),e=qs(),n=l(e),s=$A(),r=l(s),a=Cd(),o=l(a);function l(p){return p&&p.__esModule?p:{default:p}}function h(p,g){if(!(p instanceof g))throw new TypeError("Cannot call a class as a function")}function u(p,g){if(!p)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return g&&(typeof g=="object"||typeof g=="function")?g:p}function d(p,g){if(typeof g!="function"&&g!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof g);p.prototype=Object.create(g&&g.prototype,{constructor:{value:p,enumerable:!1,writable:!0,configurable:!0}}),g&&(Object.setPrototypeOf?Object.setPrototypeOf(p,g):p.__proto__=g)}var f=function(p){d(g,p);function g(){return h(this,g),u(this,(g.__proto__||Object.getPrototypeOf(g)).apply(this,arguments))}return t(g,[{key:"render",value:function(){var v=this,y=i({},this.props);return delete y.name,y.parentBindings&&delete y.parentBindings,n.default.createElement("div",i({},y,{ref:function(S){v.props.parentBindings.domNode=S}}),this.props.children)}}]),g}(n.default.Component);return f.propTypes={name:o.default.string,id:o.default.string},Qh.default=(0,r.default)(f),Qh}var xf,Zy;function lR(){if(Zy)return xf;Zy=1;var i=Object.assign||function(f){for(var p=1;p<arguments.length;p++){var g=arguments[p];for(var m in g)Object.prototype.hasOwnProperty.call(g,m)&&(f[m]=g[m])}return f},t=function(){function f(p,g){for(var m=0;m<g.length;m++){var v=g[m];v.enumerable=v.enumerable||!1,v.configurable=!0,"value"in v&&(v.writable=!0),Object.defineProperty(p,v.key,v)}}return function(p,g,m){return g&&f(p.prototype,g),m&&f(p,m),p}}();function e(f,p){if(!(f instanceof p))throw new TypeError("Cannot call a class as a function")}function n(f,p){if(!f)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return p&&(typeof p=="object"||typeof p=="function")?p:f}function s(f,p){if(typeof p!="function"&&p!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof p);f.prototype=Object.create(p&&p.prototype,{constructor:{value:f,enumerable:!1,writable:!0,configurable:!0}}),p&&(Object.setPrototypeOf?Object.setPrototypeOf(f,p):f.__proto__=p)}var r=qs();Lb(),qd();var a=Kg(),o=Xd(),l=Cd(),h=HA(),u={to:l.string.isRequired,containerId:l.string,container:l.object,activeClass:l.string,spy:l.bool,smooth:l.oneOfType([l.bool,l.string]),offset:l.number,delay:l.number,isDynamic:l.bool,onClick:l.func,duration:l.oneOfType([l.number,l.func]),absolute:l.bool,onSetActive:l.func,onSetInactive:l.func,ignoreCancelEvents:l.bool,hashSpy:l.bool,spyThrottle:l.number},d={Scroll:function(p,g){console.warn("Helpers.Scroll is deprecated since v1.7.0");var m=g||o,v=function(A){s(S,A);function S(E){e(this,S);var T=n(this,(S.__proto__||Object.getPrototypeOf(S)).call(this,E));return y.call(T),T.state={active:!1},T}return t(S,[{key:"getScrollSpyContainer",value:function(){var T=this.props.containerId,_=this.props.container;return T?document.getElementById(T):_&&_.nodeType?_:document}},{key:"componentDidMount",value:function(){if(this.props.spy||this.props.hashSpy){var T=this.getScrollSpyContainer();a.isMounted(T)||a.mount(T,this.props.spyThrottle),this.props.hashSpy&&(h.isMounted()||h.mount(m),h.mapContainer(this.props.to,T)),this.props.spy&&a.addStateHandler(this.stateHandler),a.addSpyHandler(this.spyHandler,T),this.setState({container:T})}}},{key:"componentWillUnmount",value:function(){a.unmount(this.stateHandler,this.spyHandler)}},{key:"render",value:function(){var T="";this.state&&this.state.active?T=((this.props.className||"")+" "+(this.props.activeClass||"active")).trim():T=this.props.className;var _=i({},this.props);for(var R in u)_.hasOwnProperty(R)&&delete _[R];return _.className=T,_.onClick=this.handleClick,r.createElement(p,_)}}]),S}(r.Component),y=function(){var S=this;this.scrollTo=function(E,T){m.scrollTo(E,i({},S.state,T))},this.handleClick=function(E){S.props.onClick&&S.props.onClick(E),E.stopPropagation&&E.stopPropagation(),E.preventDefault&&E.preventDefault(),S.scrollTo(S.props.to,S.props)},this.stateHandler=function(){m.getActiveLink()!==S.props.to&&(S.state!==null&&S.state.active&&S.props.onSetInactive&&S.props.onSetInactive(),S.setState({active:!1}))},this.spyHandler=function(E){var T=S.getScrollSpyContainer();if(!(h.isMounted()&&!h.isInitialized())){var _=S.props.to,R=null,k=0,I=0,D=0;if(T.getBoundingClientRect){var M=T.getBoundingClientRect();D=M.top}if(!R||S.props.isDynamic){if(R=m.get(_),!R)return;var L=R.getBoundingClientRect();k=L.top-D+E,I=k+L.height}var N=E-S.props.offset,O=N>=Math.floor(k)&&N<Math.floor(I),U=N<Math.floor(k)||N>=Math.floor(I),z=m.getActiveLink();if(U)return _===z&&m.setActiveLink(void 0),S.props.hashSpy&&h.getHash()===_&&h.changeHash(),S.props.spy&&S.state.active&&(S.setState({active:!1}),S.props.onSetInactive&&S.props.onSetInactive()),a.updateStates();if(O&&z!==_)return m.setActiveLink(_),S.props.hashSpy&&h.changeHash(_),S.props.spy&&(S.setState({active:!0}),S.props.onSetActive&&S.props.onSetActive(_)),a.updateStates()}}};return v.propTypes=u,v.defaultProps={offset:0},v},Element:function(p){console.warn("Helpers.Element is deprecated since v1.7.0");var g=function(m){s(v,m);function v(y){e(this,v);var A=n(this,(v.__proto__||Object.getPrototypeOf(v)).call(this,y));return A.childBindings={domNode:null},A}return t(v,[{key:"componentDidMount",value:function(){if(typeof window>"u")return!1;this.registerElems(this.props.name)}},{key:"componentDidUpdate",value:function(A){this.props.name!==A.name&&this.registerElems(this.props.name)}},{key:"componentWillUnmount",value:function(){if(typeof window>"u")return!1;o.unregister(this.props.name)}},{key:"registerElems",value:function(A){o.register(A,this.childBindings.domNode)}},{key:"render",value:function(){return r.createElement(p,i({},this.props,{parentBindings:this.childBindings}))}}]),v}(r.Component);return g.propTypes={name:l.string,id:l.string},g}};return xf=d,xf}var Jy;function cR(){if(Jy)return Mt;Jy=1,Object.defineProperty(Mt,"__esModule",{value:!0}),Mt.Helpers=Mt.ScrollElement=Mt.ScrollLink=Mt.animateScroll=Mt.scrollSpy=Mt.Events=Mt.scroller=Mt.Element=Mt.Button=Mt.Link=void 0;var i=rR(),t=E(i),e=aR(),n=E(e),s=oR(),r=E(s),a=Xd(),o=E(a),l=Yg(),h=E(l),u=Kg(),d=E(u),f=VA(),p=E(f),g=Qg(),m=E(g),v=$A(),y=E(v),A=lR(),S=E(A);function E(T){return T&&T.__esModule?T:{default:T}}return Mt.Link=t.default,Mt.Button=n.default,Mt.Element=r.default,Mt.scroller=o.default,Mt.Events=h.default,Mt.scrollSpy=d.default,Mt.animateScroll=p.default,Mt.ScrollLink=m.default,Mt.ScrollElement=y.default,Mt.Helpers=S.default,Mt.default={Link:t.default,Button:n.default,Element:r.default,scroller:o.default,Events:h.default,scrollSpy:d.default,animateScroll:p.default,ScrollLink:m.default,ScrollElement:y.default,Helpers:S.default},Mt}var UA=cR(),cl={},tv;function hR(){if(tv)return cl;tv=1;var i=Ke();Object.defineProperty(cl,"__esModule",{value:!0}),cl.default=void 0;var t=i(Qe()),e=Ye();return cl.default=(0,t.default)((0,e.jsx)("path",{d:"M3 18h18v-2H3zm0-5h18v-2H3zm0-7v2h18V6z"}),"Menu"),cl}var uR=hR();const dR=Ne(uR);var hl={},ev;function fR(){if(ev)return hl;ev=1;var i=Ke();Object.defineProperty(hl,"__esModule",{value:!0}),hl.default=void 0,s(qs());var t=i(Qe()),e=Ye();function n(r){if(typeof WeakMap!="function")return null;var a=new WeakMap,o=new WeakMap;return(n=function(l){return l?o:a})(r)}function s(r,a){if(r&&r.__esModule)return r;if(r===null||typeof r!="object"&&typeof r!="function")return{default:r};var o=n(a);if(o&&o.has(r))return o.get(r);var l={__proto__:null},h=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in r)if(u!=="default"&&Object.prototype.hasOwnProperty.call(r,u)){var d=h?Object.getOwnPropertyDescriptor(r,u):null;d&&(d.get||d.set)?Object.defineProperty(l,u,d):l[u]=r[u]}return l.default=r,o&&o.set(r,l),l}return hl.default=(0,t.default)((0,e.jsx)("path",{d:"M19 3a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h14m-.5 15.5v-5.3a3.26 3.26 0 0 0-3.26-3.26c-.85 0-1.84.52-2.32 1.3v-1.11h-2.79v8.37h2.79v-4.93c0-.77.62-1.4 1.39-1.4a1.4 1.4 0 0 1 1.4 1.4v4.93h2.79M6.88 8.56a1.68 1.68 0 0 0 1.68-1.68c0-.93-.75-1.69-1.68-1.69a1.69 1.69 0 0 0-1.69 1.69c0 .93.76 1.68 1.69 1.68m1.39 9.94v-8.37H5.5v8.37h2.77z"}),"LinkedIn"),hl}var pR=fR();const WA=Ne(pR),zA=P.createContext({});function gR(i){const t=P.useRef(null);return t.current===null&&(t.current=i()),t.current}const Zg=P.createContext(null),GA=P.createContext({transformPagePoint:i=>i,isStatic:!1,reducedMotion:"never"});function mR(i=!0){const t=P.useContext(Zg);if(t===null)return[!0,null];const{isPresent:e,onExitComplete:n,register:s}=t,r=P.useId();P.useEffect(()=>{i&&s(r)},[i]);const a=P.useCallback(()=>i&&n&&n(r),[r,n,i]);return!e&&n?[!1,a]:[!0]}const Jg=typeof window<"u",yR=Jg?P.useLayoutEffect:P.useEffect,un=i=>i;let qA=un;function tm(i){let t;return()=>(t===void 0&&(t=i()),t)}const Xo=(i,t,e)=>{const n=t-i;return n===0?1:(e-i)/n},Yi=i=>i*1e3,Qi=i=>i/1e3,vR={useManualTiming:!1};function bR(i){let t=new Set,e=new Set,n=!1,s=!1;const r=new WeakSet;let a={delta:0,timestamp:0,isProcessing:!1};function o(h){r.has(h)&&(l.schedule(h),i()),h(a)}const l={schedule:(h,u=!1,d=!1)=>{const p=d&&n?t:e;return u&&r.add(h),p.has(h)||p.add(h),h},cancel:h=>{e.delete(h),r.delete(h)},process:h=>{if(a=h,n){s=!0;return}n=!0,[t,e]=[e,t],t.forEach(o),t.clear(),n=!1,s&&(s=!1,l.process(h))}};return l}const Jh=["read","resolveKeyframes","update","preRender","render","postRender"],xR=40;function XA(i,t){let e=!1,n=!0;const s={delta:0,timestamp:0,isProcessing:!1},r=()=>e=!0,a=Jh.reduce((y,A)=>(y[A]=bR(r),y),{}),{read:o,resolveKeyframes:l,update:h,preRender:u,render:d,postRender:f}=a,p=()=>{const y=performance.now();e=!1,s.delta=n?1e3/60:Math.max(Math.min(y-s.timestamp,xR),1),s.timestamp=y,s.isProcessing=!0,o.process(s),l.process(s),h.process(s),u.process(s),d.process(s),f.process(s),s.isProcessing=!1,e&&t&&(n=!1,i(p))},g=()=>{e=!0,n=!0,s.isProcessing||i(p)};return{schedule:Jh.reduce((y,A)=>{const S=a[A];return y[A]=(E,T=!1,_=!1)=>(e||g(),S.schedule(E,T,_)),y},{}),cancel:y=>{for(let A=0;A<Jh.length;A++)a[Jh[A]].cancel(y)},state:s,steps:a}}const{schedule:kt,cancel:Us,state:me,steps:Af}=XA(typeof requestAnimationFrame<"u"?requestAnimationFrame:un,!0),KA=P.createContext({strict:!1}),nv={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},Ko={};for(const i in nv)Ko[i]={isEnabled:t=>nv[i].some(e=>!!t[e])};function AR(i){for(const t in i)Ko[t]={...Ko[t],...i[t]}}const wR=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function ed(i){return i.startsWith("while")||i.startsWith("drag")&&i!=="draggable"||i.startsWith("layout")||i.startsWith("onTap")||i.startsWith("onPan")||i.startsWith("onLayout")||wR.has(i)}let YA=i=>!ed(i);function SR(i){i&&(YA=t=>t.startsWith("on")?!ed(t):i(t))}try{SR(require("@emotion/is-prop-valid").default)}catch{}function ER(i,t,e){const n={};for(const s in i)s==="values"&&typeof i.values=="object"||(YA(s)||e===!0&&ed(s)||!t&&!ed(s)||i.draggable&&s.startsWith("onDrag"))&&(n[s]=i[s]);return n}function _R(i){if(typeof Proxy>"u")return i;const t=new Map,e=(...n)=>i(...n);return new Proxy(e,{get:(n,s)=>s==="create"?i:(t.has(s)||t.set(s,i(s)),t.get(s))})}const Kd=P.createContext({});function ec(i){return typeof i=="string"||Array.isArray(i)}function Yd(i){return i!==null&&typeof i=="object"&&typeof i.start=="function"}const em=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],nm=["initial",...em];function Qd(i){return Yd(i.animate)||nm.some(t=>ec(i[t]))}function QA(i){return!!(Qd(i)||i.variants)}function TR(i,t){if(Qd(i)){const{initial:e,animate:n}=i;return{initial:e===!1||ec(e)?e:void 0,animate:ec(n)?n:void 0}}return i.inherit!==!1?t:{}}function CR(i){const{initial:t,animate:e}=TR(i,P.useContext(Kd));return P.useMemo(()=>({initial:t,animate:e}),[iv(t),iv(e)])}function iv(i){return Array.isArray(i)?i.join(" "):i}const PR=Symbol.for("motionComponentSymbol");function Ma(i){return i&&typeof i=="object"&&Object.prototype.hasOwnProperty.call(i,"current")}function RR(i,t,e){return P.useCallback(n=>{n&&i.onMount&&i.onMount(n),t&&(n?t.mount(n):t.unmount()),e&&(typeof e=="function"?e(n):Ma(e)&&(e.current=n))},[t])}const im=i=>i.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),kR="framerAppearId",ZA="data-"+im(kR),{schedule:sm}=XA(queueMicrotask,!1),JA=P.createContext({});function MR(i,t,e,n,s){var r,a;const{visualElement:o}=P.useContext(Kd),l=P.useContext(KA),h=P.useContext(Zg),u=P.useContext(GA).reducedMotion,d=P.useRef(null);n=n||l.renderer,!d.current&&n&&(d.current=n(i,{visualState:t,parent:o,props:e,presenceContext:h,blockInitialAnimation:h?h.initial===!1:!1,reducedMotionConfig:u}));const f=d.current,p=P.useContext(JA);f&&!f.projection&&s&&(f.type==="html"||f.type==="svg")&&LR(d.current,e,s,p);const g=P.useRef(!1);P.useInsertionEffect(()=>{f&&g.current&&f.update(e,h)});const m=e[ZA],v=P.useRef(!!m&&!(!((r=window.MotionHandoffIsComplete)===null||r===void 0)&&r.call(window,m))&&((a=window.MotionHasOptimisedAnimation)===null||a===void 0?void 0:a.call(window,m)));return yR(()=>{f&&(g.current=!0,window.MotionIsMounted=!0,f.updateFeatures(),sm.render(f.render),v.current&&f.animationState&&f.animationState.animateChanges())}),P.useEffect(()=>{f&&(!v.current&&f.animationState&&f.animationState.animateChanges(),v.current&&(queueMicrotask(()=>{var y;(y=window.MotionHandoffMarkAsComplete)===null||y===void 0||y.call(window,m)}),v.current=!1))}),f}function LR(i,t,e,n){const{layoutId:s,layout:r,drag:a,dragConstraints:o,layoutScroll:l,layoutRoot:h}=t;i.projection=new e(i.latestValues,t["data-framer-portal-id"]?void 0:tw(i.parent)),i.projection.setOptions({layoutId:s,layout:r,alwaysMeasureLayout:!!a||o&&Ma(o),visualElement:i,animationType:typeof r=="string"?r:"both",initialPromotionConfig:n,layoutScroll:l,layoutRoot:h})}function tw(i){if(i)return i.options.allowProjection!==!1?i.projection:tw(i.parent)}function IR({preloadedFeatures:i,createVisualElement:t,useRender:e,useVisualState:n,Component:s}){var r,a;i&&AR(i);function o(h,u){let d;const f={...P.useContext(GA),...h,layoutId:DR(h)},{isStatic:p}=f,g=CR(h),m=n(h,p);if(!p&&Jg){OR();const v=FR(f);d=v.MeasureLayout,g.visualElement=MR(s,m,f,t,v.ProjectionNode)}return C.jsxs(Kd.Provider,{value:g,children:[d&&g.visualElement?C.jsx(d,{visualElement:g.visualElement,...f}):null,e(s,h,RR(m,g.visualElement,u),m,p,g.visualElement)]})}o.displayName=`motion.${typeof s=="string"?s:`create(${(a=(r=s.displayName)!==null&&r!==void 0?r:s.name)!==null&&a!==void 0?a:""})`}`;const l=P.forwardRef(o);return l[PR]=s,l}function DR({layoutId:i}){const t=P.useContext(zA).id;return t&&i!==void 0?t+"-"+i:i}function OR(i,t){P.useContext(KA).strict}function FR(i){const{drag:t,layout:e}=Ko;if(!t&&!e)return{};const n={...t,...e};return{MeasureLayout:t!=null&&t.isEnabled(i)||e!=null&&e.isEnabled(i)?n.MeasureLayout:void 0,ProjectionNode:n.ProjectionNode}}const NR=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function rm(i){return typeof i!="string"||i.includes("-")?!1:!!(NR.indexOf(i)>-1||/[A-Z]/u.test(i))}function sv(i){const t=[{},{}];return i==null||i.values.forEach((e,n)=>{t[0][n]=e.get(),t[1][n]=e.getVelocity()}),t}function am(i,t,e,n){if(typeof t=="function"){const[s,r]=sv(n);t=t(e!==void 0?e:i.custom,s,r)}if(typeof t=="string"&&(t=i.variants&&i.variants[t]),typeof t=="function"){const[s,r]=sv(n);t=t(e!==void 0?e:i.custom,s,r)}return t}const ug=i=>Array.isArray(i),jR=i=>!!(i&&typeof i=="object"&&i.mix&&i.toValue),BR=i=>ug(i)?i[i.length-1]||0:i,Pe=i=>!!(i&&i.getVelocity);function Vu(i){const t=Pe(i)?i.get():i;return jR(t)?t.toValue():t}function VR({scrapeMotionValuesFromProps:i,createRenderState:t,onUpdate:e},n,s,r){const a={latestValues:HR(n,s,r,i),renderState:t()};return e&&(a.onMount=o=>e({props:n,current:o,...a}),a.onUpdate=o=>e(o)),a}const ew=i=>(t,e)=>{const n=P.useContext(Kd),s=P.useContext(Zg),r=()=>VR(i,t,n,s);return e?r():gR(r)};function HR(i,t,e,n){const s={},r=n(i,{});for(const f in r)s[f]=Vu(r[f]);let{initial:a,animate:o}=i;const l=Qd(i),h=QA(i);t&&h&&!l&&i.inherit!==!1&&(a===void 0&&(a=t.initial),o===void 0&&(o=t.animate));let u=e?e.initial===!1:!1;u=u||a===!1;const d=u?o:a;if(d&&typeof d!="boolean"&&!Yd(d)){const f=Array.isArray(d)?d:[d];for(let p=0;p<f.length;p++){const g=am(i,f[p]);if(g){const{transitionEnd:m,transition:v,...y}=g;for(const A in y){let S=y[A];if(Array.isArray(S)){const E=u?S.length-1:0;S=S[E]}S!==null&&(s[A]=S)}for(const A in m)s[A]=m[A]}}}return s}const Jo=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],ya=new Set(Jo),nw=i=>t=>typeof t=="string"&&t.startsWith(i),iw=nw("--"),$R=nw("var(--"),om=i=>$R(i)?UR.test(i.split("/*")[0].trim()):!1,UR=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,sw=(i,t)=>t&&typeof i=="number"?t.transform(i):i,ts=(i,t,e)=>e>t?t:e<i?i:e,tl={test:i=>typeof i=="number",parse:parseFloat,transform:i=>i},nc={...tl,transform:i=>ts(0,1,i)},tu={...tl,default:1},Th=i=>({test:t=>typeof t=="string"&&t.endsWith(i)&&t.split(" ").length===1,parse:parseFloat,transform:t=>`${t}${i}`}),hs=Th("deg"),gi=Th("%"),X=Th("px"),WR=Th("vh"),zR=Th("vw"),rv={...gi,parse:i=>gi.parse(i)/100,transform:i=>gi.transform(i*100)},GR={borderWidth:X,borderTopWidth:X,borderRightWidth:X,borderBottomWidth:X,borderLeftWidth:X,borderRadius:X,radius:X,borderTopLeftRadius:X,borderTopRightRadius:X,borderBottomRightRadius:X,borderBottomLeftRadius:X,width:X,maxWidth:X,height:X,maxHeight:X,top:X,right:X,bottom:X,left:X,padding:X,paddingTop:X,paddingRight:X,paddingBottom:X,paddingLeft:X,margin:X,marginTop:X,marginRight:X,marginBottom:X,marginLeft:X,backgroundPositionX:X,backgroundPositionY:X},qR={rotate:hs,rotateX:hs,rotateY:hs,rotateZ:hs,scale:tu,scaleX:tu,scaleY:tu,scaleZ:tu,skew:hs,skewX:hs,skewY:hs,distance:X,translateX:X,translateY:X,translateZ:X,x:X,y:X,z:X,perspective:X,transformPerspective:X,opacity:nc,originX:rv,originY:rv,originZ:X},av={...tl,transform:Math.round},lm={...GR,...qR,zIndex:av,size:X,fillOpacity:nc,strokeOpacity:nc,numOctaves:av},XR={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},KR=Jo.length;function YR(i,t,e){let n="",s=!0;for(let r=0;r<KR;r++){const a=Jo[r],o=i[a];if(o===void 0)continue;let l=!0;if(typeof o=="number"?l=o===(a.startsWith("scale")?1:0):l=parseFloat(o)===0,!l||e){const h=sw(o,lm[a]);if(!l){s=!1;const u=XR[a]||a;n+=`${u}(${h}) `}e&&(t[a]=h)}}return n=n.trim(),e?n=e(t,s?"":n):s&&(n="none"),n}function cm(i,t,e){const{style:n,vars:s,transformOrigin:r}=i;let a=!1,o=!1;for(const l in t){const h=t[l];if(ya.has(l)){a=!0;continue}else if(iw(l)){s[l]=h;continue}else{const u=sw(h,lm[l]);l.startsWith("origin")?(o=!0,r[l]=u):n[l]=u}}if(t.transform||(a||e?n.transform=YR(t,i.transform,e):n.transform&&(n.transform="none")),o){const{originX:l="50%",originY:h="50%",originZ:u=0}=r;n.transformOrigin=`${l} ${h} ${u}`}}const QR={offset:"stroke-dashoffset",array:"stroke-dasharray"},ZR={offset:"strokeDashoffset",array:"strokeDasharray"};function JR(i,t,e=1,n=0,s=!0){i.pathLength=1;const r=s?QR:ZR;i[r.offset]=X.transform(-n);const a=X.transform(t),o=X.transform(e);i[r.array]=`${a} ${o}`}function ov(i,t,e){return typeof i=="string"?i:X.transform(t+e*i)}function tk(i,t,e){const n=ov(t,i.x,i.width),s=ov(e,i.y,i.height);return`${n} ${s}`}function hm(i,{attrX:t,attrY:e,attrScale:n,originX:s,originY:r,pathLength:a,pathSpacing:o=1,pathOffset:l=0,...h},u,d){if(cm(i,h,d),u){i.style.viewBox&&(i.attrs.viewBox=i.style.viewBox);return}i.attrs=i.style,i.style={};const{attrs:f,style:p,dimensions:g}=i;f.transform&&(g&&(p.transform=f.transform),delete f.transform),g&&(s!==void 0||r!==void 0||p.transform)&&(p.transformOrigin=tk(g,s!==void 0?s:.5,r!==void 0?r:.5)),t!==void 0&&(f.x=t),e!==void 0&&(f.y=e),n!==void 0&&(f.scale=n),a!==void 0&&JR(f,a,o,l,!1)}const um=()=>({style:{},transform:{},transformOrigin:{},vars:{}}),rw=()=>({...um(),attrs:{}}),dm=i=>typeof i=="string"&&i.toLowerCase()==="svg";function aw(i,{style:t,vars:e},n,s){Object.assign(i.style,t,s&&s.getProjectionStyles(n));for(const r in e)i.style.setProperty(r,e[r])}const ow=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function lw(i,t,e,n){aw(i,t,void 0,n);for(const s in t.attrs)i.setAttribute(ow.has(s)?s:im(s),t.attrs[s])}const nd={};function ek(i){Object.assign(nd,i)}function cw(i,{layout:t,layoutId:e}){return ya.has(i)||i.startsWith("origin")||(t||e!==void 0)&&(!!nd[i]||i==="opacity")}function fm(i,t,e){var n;const{style:s}=i,r={};for(const a in s)(Pe(s[a])||t.style&&Pe(t.style[a])||cw(a,i)||((n=e==null?void 0:e.getValue(a))===null||n===void 0?void 0:n.liveStyle)!==void 0)&&(r[a]=s[a]);return r}function hw(i,t,e){const n=fm(i,t,e);for(const s in i)if(Pe(i[s])||Pe(t[s])){const r=Jo.indexOf(s)!==-1?"attr"+s.charAt(0).toUpperCase()+s.substring(1):s;n[r]=i[s]}return n}function nk(i,t){try{t.dimensions=typeof i.getBBox=="function"?i.getBBox():i.getBoundingClientRect()}catch{t.dimensions={x:0,y:0,width:0,height:0}}}const lv=["x","y","width","height","cx","cy","r"],ik={useVisualState:ew({scrapeMotionValuesFromProps:hw,createRenderState:rw,onUpdate:({props:i,prevProps:t,current:e,renderState:n,latestValues:s})=>{if(!e)return;let r=!!i.drag;if(!r){for(const o in s)if(ya.has(o)){r=!0;break}}if(!r)return;let a=!t;if(t)for(let o=0;o<lv.length;o++){const l=lv[o];i[l]!==t[l]&&(a=!0)}a&&kt.read(()=>{nk(e,n),kt.render(()=>{hm(n,s,dm(e.tagName),i.transformTemplate),lw(e,n)})})}})},sk={useVisualState:ew({scrapeMotionValuesFromProps:fm,createRenderState:um})};function uw(i,t,e){for(const n in t)!Pe(t[n])&&!cw(n,e)&&(i[n]=t[n])}function rk({transformTemplate:i},t){return P.useMemo(()=>{const e=um();return cm(e,t,i),Object.assign({},e.vars,e.style)},[t])}function ak(i,t){const e=i.style||{},n={};return uw(n,e,i),Object.assign(n,rk(i,t)),n}function ok(i,t){const e={},n=ak(i,t);return i.drag&&i.dragListener!==!1&&(e.draggable=!1,n.userSelect=n.WebkitUserSelect=n.WebkitTouchCallout="none",n.touchAction=i.drag===!0?"none":`pan-${i.drag==="x"?"y":"x"}`),i.tabIndex===void 0&&(i.onTap||i.onTapStart||i.whileTap)&&(e.tabIndex=0),e.style=n,e}function lk(i,t,e,n){const s=P.useMemo(()=>{const r=rw();return hm(r,t,dm(n),i.transformTemplate),{...r.attrs,style:{...r.style}}},[t]);if(i.style){const r={};uw(r,i.style,i),s.style={...r,...s.style}}return s}function ck(i=!1){return(e,n,s,{latestValues:r},a)=>{const l=(rm(e)?lk:ok)(n,r,a,e),h=ER(n,typeof e=="string",i),u=e!==P.Fragment?{...h,...l,ref:s}:{},{children:d}=n,f=P.useMemo(()=>Pe(d)?d.get():d,[d]);return P.createElement(e,{...u,children:f})}}function hk(i,t){return function(n,{forwardMotionProps:s}={forwardMotionProps:!1}){const a={...rm(n)?ik:sk,preloadedFeatures:i,useRender:ck(s),createVisualElement:t,Component:n};return IR(a)}}function dw(i,t){if(!Array.isArray(t))return!1;const e=t.length;if(e!==i.length)return!1;for(let n=0;n<e;n++)if(t[n]!==i[n])return!1;return!0}function Zd(i,t,e){const n=i.getProps();return am(n,t,e!==void 0?e:n.custom,i)}const uk=tm(()=>window.ScrollTimeline!==void 0);class dk{constructor(t){this.stop=()=>this.runAll("stop"),this.animations=t.filter(Boolean)}get finished(){return Promise.all(this.animations.map(t=>"finished"in t?t.finished:t))}getAll(t){return this.animations[0][t]}setAll(t,e){for(let n=0;n<this.animations.length;n++)this.animations[n][t]=e}attachTimeline(t,e){const n=this.animations.map(s=>{if(uk()&&s.attachTimeline)return s.attachTimeline(t);if(typeof e=="function")return e(s)});return()=>{n.forEach((s,r)=>{s&&s(),this.animations[r].stop()})}}get time(){return this.getAll("time")}set time(t){this.setAll("time",t)}get speed(){return this.getAll("speed")}set speed(t){this.setAll("speed",t)}get startTime(){return this.getAll("startTime")}get duration(){let t=0;for(let e=0;e<this.animations.length;e++)t=Math.max(t,this.animations[e].duration);return t}runAll(t){this.animations.forEach(e=>e[t]())}flatten(){this.runAll("flatten")}play(){this.runAll("play")}pause(){this.runAll("pause")}cancel(){this.runAll("cancel")}complete(){this.runAll("complete")}}class fk extends dk{then(t,e){return Promise.all(this.animations).then(t).catch(e)}}function pm(i,t){return i?i[t]||i.default||i:void 0}const dg=2e4;function fw(i){let t=0;const e=50;let n=i.next(t);for(;!n.done&&t<dg;)t+=e,n=i.next(t);return t>=dg?1/0:t}function gm(i){return typeof i=="function"}function cv(i,t){i.timeline=t,i.onfinish=null}const mm=i=>Array.isArray(i)&&typeof i[0]=="number",pk={linearEasing:void 0};function gk(i,t){const e=tm(i);return()=>{var n;return(n=pk[t])!==null&&n!==void 0?n:e()}}const id=gk(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),pw=(i,t,e=10)=>{let n="";const s=Math.max(Math.round(t/e),2);for(let r=0;r<s;r++)n+=i(Xo(0,s-1,r))+", ";return`linear(${n.substring(0,n.length-2)})`};function gw(i){return!!(typeof i=="function"&&id()||!i||typeof i=="string"&&(i in fg||id())||mm(i)||Array.isArray(i)&&i.every(gw))}const jl=([i,t,e,n])=>`cubic-bezier(${i}, ${t}, ${e}, ${n})`,fg={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:jl([0,.65,.55,1]),circOut:jl([.55,0,1,.45]),backIn:jl([.31,.01,.66,-.59]),backOut:jl([.33,1.53,.69,.99])};function mw(i,t){if(i)return typeof i=="function"&&id()?pw(i,t):mm(i)?jl(i):Array.isArray(i)?i.map(e=>mw(e,t)||fg.easeOut):fg[i]}const Rn={x:!1,y:!1};function yw(){return Rn.x||Rn.y}function mk(i,t,e){var n;if(i instanceof Element)return[i];if(typeof i=="string"){let s=document;const r=(n=void 0)!==null&&n!==void 0?n:s.querySelectorAll(i);return r?Array.from(r):[]}return Array.from(i)}function vw(i,t){const e=mk(i),n=new AbortController,s={passive:!0,...t,signal:n.signal};return[e,s,()=>n.abort()]}function hv(i){return t=>{t.pointerType==="touch"||yw()||i(t)}}function yk(i,t,e={}){const[n,s,r]=vw(i,e),a=hv(o=>{const{target:l}=o,h=t(o);if(typeof h!="function"||!l)return;const u=hv(d=>{h(d),l.removeEventListener("pointerleave",u)});l.addEventListener("pointerleave",u,s)});return n.forEach(o=>{o.addEventListener("pointerenter",a,s)}),r}const bw=(i,t)=>t?i===t?!0:bw(i,t.parentElement):!1,ym=i=>i.pointerType==="mouse"?typeof i.button!="number"||i.button<=0:i.isPrimary!==!1,vk=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function bk(i){return vk.has(i.tagName)||i.tabIndex!==-1}const Bl=new WeakSet;function uv(i){return t=>{t.key==="Enter"&&i(t)}}function wf(i,t){i.dispatchEvent(new PointerEvent("pointer"+t,{isPrimary:!0,bubbles:!0}))}const xk=(i,t)=>{const e=i.currentTarget;if(!e)return;const n=uv(()=>{if(Bl.has(e))return;wf(e,"down");const s=uv(()=>{wf(e,"up")}),r=()=>wf(e,"cancel");e.addEventListener("keyup",s,t),e.addEventListener("blur",r,t)});e.addEventListener("keydown",n,t),e.addEventListener("blur",()=>e.removeEventListener("keydown",n),t)};function dv(i){return ym(i)&&!yw()}function Ak(i,t,e={}){const[n,s,r]=vw(i,e),a=o=>{const l=o.currentTarget;if(!dv(o)||Bl.has(l))return;Bl.add(l);const h=t(o),u=(p,g)=>{window.removeEventListener("pointerup",d),window.removeEventListener("pointercancel",f),!(!dv(p)||!Bl.has(l))&&(Bl.delete(l),typeof h=="function"&&h(p,{success:g}))},d=p=>{u(p,e.useGlobalTarget||bw(l,p.target))},f=p=>{u(p,!1)};window.addEventListener("pointerup",d,s),window.addEventListener("pointercancel",f,s)};return n.forEach(o=>{!bk(o)&&o.getAttribute("tabindex")===null&&(o.tabIndex=0),(e.useGlobalTarget?window:o).addEventListener("pointerdown",a,s),o.addEventListener("focus",h=>xk(h,s),s)}),r}function wk(i){return i==="x"||i==="y"?Rn[i]?null:(Rn[i]=!0,()=>{Rn[i]=!1}):Rn.x||Rn.y?null:(Rn.x=Rn.y=!0,()=>{Rn.x=Rn.y=!1})}const xw=new Set(["width","height","top","left","right","bottom",...Jo]);let Hu;function Sk(){Hu=void 0}const mi={now:()=>(Hu===void 0&&mi.set(me.isProcessing||vR.useManualTiming?me.timestamp:performance.now()),Hu),set:i=>{Hu=i,queueMicrotask(Sk)}};function vm(i,t){i.indexOf(t)===-1&&i.push(t)}function bm(i,t){const e=i.indexOf(t);e>-1&&i.splice(e,1)}class xm{constructor(){this.subscriptions=[]}add(t){return vm(this.subscriptions,t),()=>bm(this.subscriptions,t)}notify(t,e,n){const s=this.subscriptions.length;if(s)if(s===1)this.subscriptions[0](t,e,n);else for(let r=0;r<s;r++){const a=this.subscriptions[r];a&&a(t,e,n)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}function Aw(i,t){return t?i*(1e3/t):0}const fv=30,Ek=i=>!isNaN(parseFloat(i));class _k{constructor(t,e={}){this.version="11.18.2",this.canTrackVelocity=null,this.events={},this.updateAndNotify=(n,s=!0)=>{const r=mi.now();this.updatedAt!==r&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(n),this.current!==this.prev&&this.events.change&&this.events.change.notify(this.current),s&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.hasAnimated=!1,this.setCurrent(t),this.owner=e.owner}setCurrent(t){this.current=t,this.updatedAt=mi.now(),this.canTrackVelocity===null&&t!==void 0&&(this.canTrackVelocity=Ek(this.current))}setPrevFrameValue(t=this.current){this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt}onChange(t){return this.on("change",t)}on(t,e){this.events[t]||(this.events[t]=new xm);const n=this.events[t].add(e);return t==="change"?()=>{n(),kt.read(()=>{this.events.change.getSize()||this.stop()})}:n}clearListeners(){for(const t in this.events)this.events[t].clear()}attach(t,e){this.passiveEffect=t,this.stopPassiveEffect=e}set(t,e=!0){!e||!this.passiveEffect?this.updateAndNotify(t,e):this.passiveEffect(t,this.updateAndNotify)}setWithVelocity(t,e,n){this.set(e),this.prev=void 0,this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt-n}jump(t,e=!0){this.updateAndNotify(t),this.prev=t,this.prevUpdatedAt=this.prevFrameValue=void 0,e&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const t=mi.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||t-this.updatedAt>fv)return 0;const e=Math.min(this.updatedAt-this.prevUpdatedAt,fv);return Aw(parseFloat(this.current)-parseFloat(this.prevFrameValue),e)}start(t){return this.stop(),new Promise(e=>{this.hasAnimated=!0,this.animation=t(e),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function ic(i,t){return new _k(i,t)}function Tk(i,t,e){i.hasValue(t)?i.getValue(t).set(e):i.addValue(t,ic(e))}function Ck(i,t){const e=Zd(i,t);let{transitionEnd:n={},transition:s={},...r}=e||{};r={...r,...n};for(const a in r){const o=BR(r[a]);Tk(i,a,o)}}function Pk(i){return!!(Pe(i)&&i.add)}function pg(i,t){const e=i.getValue("willChange");if(Pk(e))return e.add(t)}function ww(i){return i.props[ZA]}const Sw=(i,t,e)=>(((1-3*e+3*t)*i+(3*e-6*t))*i+3*t)*i,Rk=1e-7,kk=12;function Mk(i,t,e,n,s){let r,a,o=0;do a=t+(e-t)/2,r=Sw(a,n,s)-i,r>0?e=a:t=a;while(Math.abs(r)>Rk&&++o<kk);return a}function Ch(i,t,e,n){if(i===t&&e===n)return un;const s=r=>Mk(r,0,1,i,e);return r=>r===0||r===1?r:Sw(s(r),t,n)}const Ew=i=>t=>t<=.5?i(2*t)/2:(2-i(2*(1-t)))/2,_w=i=>t=>1-i(1-t),Tw=Ch(.33,1.53,.69,.99),Am=_w(Tw),Cw=Ew(Am),Pw=i=>(i*=2)<1?.5*Am(i):.5*(2-Math.pow(2,-10*(i-1))),wm=i=>1-Math.sin(Math.acos(i)),Rw=_w(wm),kw=Ew(wm),Mw=i=>/^0[^.\s]+$/u.test(i);function Lk(i){return typeof i=="number"?i===0:i!==null?i==="none"||i==="0"||Mw(i):!0}const Gl=i=>Math.round(i*1e5)/1e5,Sm=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function Ik(i){return i==null}const Dk=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,Em=(i,t)=>e=>!!(typeof e=="string"&&Dk.test(e)&&e.startsWith(i)||t&&!Ik(e)&&Object.prototype.hasOwnProperty.call(e,t)),Lw=(i,t,e)=>n=>{if(typeof n!="string")return n;const[s,r,a,o]=n.match(Sm);return{[i]:parseFloat(s),[t]:parseFloat(r),[e]:parseFloat(a),alpha:o!==void 0?parseFloat(o):1}},Ok=i=>ts(0,255,i),Sf={...tl,transform:i=>Math.round(Ok(i))},or={test:Em("rgb","red"),parse:Lw("red","green","blue"),transform:({red:i,green:t,blue:e,alpha:n=1})=>"rgba("+Sf.transform(i)+", "+Sf.transform(t)+", "+Sf.transform(e)+", "+Gl(nc.transform(n))+")"};function Fk(i){let t="",e="",n="",s="";return i.length>5?(t=i.substring(1,3),e=i.substring(3,5),n=i.substring(5,7),s=i.substring(7,9)):(t=i.substring(1,2),e=i.substring(2,3),n=i.substring(3,4),s=i.substring(4,5),t+=t,e+=e,n+=n,s+=s),{red:parseInt(t,16),green:parseInt(e,16),blue:parseInt(n,16),alpha:s?parseInt(s,16)/255:1}}const gg={test:Em("#"),parse:Fk,transform:or.transform},La={test:Em("hsl","hue"),parse:Lw("hue","saturation","lightness"),transform:({hue:i,saturation:t,lightness:e,alpha:n=1})=>"hsla("+Math.round(i)+", "+gi.transform(Gl(t))+", "+gi.transform(Gl(e))+", "+Gl(nc.transform(n))+")"},Te={test:i=>or.test(i)||gg.test(i)||La.test(i),parse:i=>or.test(i)?or.parse(i):La.test(i)?La.parse(i):gg.parse(i),transform:i=>typeof i=="string"?i:i.hasOwnProperty("red")?or.transform(i):La.transform(i)},Nk=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function jk(i){var t,e;return isNaN(i)&&typeof i=="string"&&(((t=i.match(Sm))===null||t===void 0?void 0:t.length)||0)+(((e=i.match(Nk))===null||e===void 0?void 0:e.length)||0)>0}const Iw="number",Dw="color",Bk="var",Vk="var(",pv="${}",Hk=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function sc(i){const t=i.toString(),e=[],n={color:[],number:[],var:[]},s=[];let r=0;const o=t.replace(Hk,l=>(Te.test(l)?(n.color.push(r),s.push(Dw),e.push(Te.parse(l))):l.startsWith(Vk)?(n.var.push(r),s.push(Bk),e.push(l)):(n.number.push(r),s.push(Iw),e.push(parseFloat(l))),++r,pv)).split(pv);return{values:e,split:o,indexes:n,types:s}}function Ow(i){return sc(i).values}function Fw(i){const{split:t,types:e}=sc(i),n=t.length;return s=>{let r="";for(let a=0;a<n;a++)if(r+=t[a],s[a]!==void 0){const o=e[a];o===Iw?r+=Gl(s[a]):o===Dw?r+=Te.transform(s[a]):r+=s[a]}return r}}const $k=i=>typeof i=="number"?0:i;function Uk(i){const t=Ow(i);return Fw(i)(t.map($k))}const Ws={test:jk,parse:Ow,createTransformer:Fw,getAnimatableNone:Uk},Wk=new Set(["brightness","contrast","saturate","opacity"]);function zk(i){const[t,e]=i.slice(0,-1).split("(");if(t==="drop-shadow")return i;const[n]=e.match(Sm)||[];if(!n)return i;const s=e.replace(n,"");let r=Wk.has(t)?1:0;return n!==e&&(r*=100),t+"("+r+s+")"}const Gk=/\b([a-z-]*)\(.*?\)/gu,mg={...Ws,getAnimatableNone:i=>{const t=i.match(Gk);return t?t.map(zk).join(" "):i}},qk={...lm,color:Te,backgroundColor:Te,outlineColor:Te,fill:Te,stroke:Te,borderColor:Te,borderTopColor:Te,borderRightColor:Te,borderBottomColor:Te,borderLeftColor:Te,filter:mg,WebkitFilter:mg},_m=i=>qk[i];function Nw(i,t){let e=_m(i);return e!==mg&&(e=Ws),e.getAnimatableNone?e.getAnimatableNone(t):void 0}const Xk=new Set(["auto","none","0"]);function Kk(i,t,e){let n=0,s;for(;n<i.length&&!s;){const r=i[n];typeof r=="string"&&!Xk.has(r)&&sc(r).values.length&&(s=i[n]),n++}if(s&&e)for(const r of t)i[r]=Nw(e,s)}const gv=i=>i===tl||i===X,mv=(i,t)=>parseFloat(i.split(", ")[t]),yv=(i,t)=>(e,{transform:n})=>{if(n==="none"||!n)return 0;const s=n.match(/^matrix3d\((.+)\)$/u);if(s)return mv(s[1],t);{const r=n.match(/^matrix\((.+)\)$/u);return r?mv(r[1],i):0}},Yk=new Set(["x","y","z"]),Qk=Jo.filter(i=>!Yk.has(i));function Zk(i){const t=[];return Qk.forEach(e=>{const n=i.getValue(e);n!==void 0&&(t.push([e,n.get()]),n.set(e.startsWith("scale")?1:0))}),t}const Yo={width:({x:i},{paddingLeft:t="0",paddingRight:e="0"})=>i.max-i.min-parseFloat(t)-parseFloat(e),height:({y:i},{paddingTop:t="0",paddingBottom:e="0"})=>i.max-i.min-parseFloat(t)-parseFloat(e),top:(i,{top:t})=>parseFloat(t),left:(i,{left:t})=>parseFloat(t),bottom:({y:i},{top:t})=>parseFloat(t)+(i.max-i.min),right:({x:i},{left:t})=>parseFloat(t)+(i.max-i.min),x:yv(4,13),y:yv(5,14)};Yo.translateX=Yo.x;Yo.translateY=Yo.y;const oa=new Set;let yg=!1,vg=!1;function jw(){if(vg){const i=Array.from(oa).filter(n=>n.needsMeasurement),t=new Set(i.map(n=>n.element)),e=new Map;t.forEach(n=>{const s=Zk(n);s.length&&(e.set(n,s),n.render())}),i.forEach(n=>n.measureInitialState()),t.forEach(n=>{n.render();const s=e.get(n);s&&s.forEach(([r,a])=>{var o;(o=n.getValue(r))===null||o===void 0||o.set(a)})}),i.forEach(n=>n.measureEndState()),i.forEach(n=>{n.suspendedScrollY!==void 0&&window.scrollTo(0,n.suspendedScrollY)})}vg=!1,yg=!1,oa.forEach(i=>i.complete()),oa.clear()}function Bw(){oa.forEach(i=>{i.readKeyframes(),i.needsMeasurement&&(vg=!0)})}function Jk(){Bw(),jw()}class Tm{constructor(t,e,n,s,r,a=!1){this.isComplete=!1,this.isAsync=!1,this.needsMeasurement=!1,this.isScheduled=!1,this.unresolvedKeyframes=[...t],this.onComplete=e,this.name=n,this.motionValue=s,this.element=r,this.isAsync=a}scheduleResolve(){this.isScheduled=!0,this.isAsync?(oa.add(this),yg||(yg=!0,kt.read(Bw),kt.resolveKeyframes(jw))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:t,name:e,element:n,motionValue:s}=this;for(let r=0;r<t.length;r++)if(t[r]===null)if(r===0){const a=s==null?void 0:s.get(),o=t[t.length-1];if(a!==void 0)t[0]=a;else if(n&&e){const l=n.readValue(e,o);l!=null&&(t[0]=l)}t[0]===void 0&&(t[0]=o),s&&a===void 0&&s.set(t[0])}else t[r]=t[r-1]}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(){this.isComplete=!0,this.onComplete(this.unresolvedKeyframes,this.finalKeyframe),oa.delete(this)}cancel(){this.isComplete||(this.isScheduled=!1,oa.delete(this))}resume(){this.isComplete||this.scheduleResolve()}}const Vw=i=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(i),tM=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function eM(i){const t=tM.exec(i);if(!t)return[,];const[,e,n,s]=t;return[`--${e??n}`,s]}function Hw(i,t,e=1){const[n,s]=eM(i);if(!n)return;const r=window.getComputedStyle(t).getPropertyValue(n);if(r){const a=r.trim();return Vw(a)?parseFloat(a):a}return om(s)?Hw(s,t,e+1):s}const $w=i=>t=>t.test(i),nM={test:i=>i==="auto",parse:i=>i},Uw=[tl,X,gi,hs,zR,WR,nM],vv=i=>Uw.find($w(i));class Ww extends Tm{constructor(t,e,n,s,r){super(t,e,n,s,r,!0)}readKeyframes(){const{unresolvedKeyframes:t,element:e,name:n}=this;if(!e||!e.current)return;super.readKeyframes();for(let l=0;l<t.length;l++){let h=t[l];if(typeof h=="string"&&(h=h.trim(),om(h))){const u=Hw(h,e.current);u!==void 0&&(t[l]=u),l===t.length-1&&(this.finalKeyframe=h)}}if(this.resolveNoneKeyframes(),!xw.has(n)||t.length!==2)return;const[s,r]=t,a=vv(s),o=vv(r);if(a!==o)if(gv(a)&&gv(o))for(let l=0;l<t.length;l++){const h=t[l];typeof h=="string"&&(t[l]=parseFloat(h))}else this.needsMeasurement=!0}resolveNoneKeyframes(){const{unresolvedKeyframes:t,name:e}=this,n=[];for(let s=0;s<t.length;s++)Lk(t[s])&&n.push(s);n.length&&Kk(t,n,e)}measureInitialState(){const{element:t,unresolvedKeyframes:e,name:n}=this;if(!t||!t.current)return;n==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=Yo[n](t.measureViewportBox(),window.getComputedStyle(t.current)),e[0]=this.measuredOrigin;const s=e[e.length-1];s!==void 0&&t.getValue(n,s).jump(s,!1)}measureEndState(){var t;const{element:e,name:n,unresolvedKeyframes:s}=this;if(!e||!e.current)return;const r=e.getValue(n);r&&r.jump(this.measuredOrigin,!1);const a=s.length-1,o=s[a];s[a]=Yo[n](e.measureViewportBox(),window.getComputedStyle(e.current)),o!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=o),!((t=this.removedTransforms)===null||t===void 0)&&t.length&&this.removedTransforms.forEach(([l,h])=>{e.getValue(l).set(h)}),this.resolveNoneKeyframes()}}const bv=(i,t)=>t==="zIndex"?!1:!!(typeof i=="number"||Array.isArray(i)||typeof i=="string"&&(Ws.test(i)||i==="0")&&!i.startsWith("url("));function iM(i){const t=i[0];if(i.length===1)return!0;for(let e=0;e<i.length;e++)if(i[e]!==t)return!0}function sM(i,t,e,n){const s=i[0];if(s===null)return!1;if(t==="display"||t==="visibility")return!0;const r=i[i.length-1],a=bv(s,t),o=bv(r,t);return!a||!o?!1:iM(i)||(e==="spring"||gm(e))&&n}const rM=i=>i!==null;function Jd(i,{repeat:t,repeatType:e="loop"},n){const s=i.filter(rM),r=t&&e!=="loop"&&t%2===1?0:s.length-1;return!r||n===void 0?s[r]:n}const aM=40;class zw{constructor({autoplay:t=!0,delay:e=0,type:n="keyframes",repeat:s=0,repeatDelay:r=0,repeatType:a="loop",...o}){this.isStopped=!1,this.hasAttemptedResolve=!1,this.createdAt=mi.now(),this.options={autoplay:t,delay:e,type:n,repeat:s,repeatDelay:r,repeatType:a,...o},this.updateFinishedPromise()}calcStartTime(){return this.resolvedAt?this.resolvedAt-this.createdAt>aM?this.resolvedAt:this.createdAt:this.createdAt}get resolved(){return!this._resolved&&!this.hasAttemptedResolve&&Jk(),this._resolved}onKeyframesResolved(t,e){this.resolvedAt=mi.now(),this.hasAttemptedResolve=!0;const{name:n,type:s,velocity:r,delay:a,onComplete:o,onUpdate:l,isGenerator:h}=this.options;if(!h&&!sM(t,n,s,r))if(a)this.options.duration=0;else{l&&l(Jd(t,this.options,e)),o&&o(),this.resolveFinishedPromise();return}const u=this.initPlayback(t,e);u!==!1&&(this._resolved={keyframes:t,finalKeyframe:e,...u},this.onPostResolved())}onPostResolved(){}then(t,e){return this.currentFinishedPromise.then(t,e)}flatten(){this.options.type="keyframes",this.options.ease="linear"}updateFinishedPromise(){this.currentFinishedPromise=new Promise(t=>{this.resolveFinishedPromise=t})}}const Bt=(i,t,e)=>i+(t-i)*e;function Ef(i,t,e){return e<0&&(e+=1),e>1&&(e-=1),e<1/6?i+(t-i)*6*e:e<1/2?t:e<2/3?i+(t-i)*(2/3-e)*6:i}function oM({hue:i,saturation:t,lightness:e,alpha:n}){i/=360,t/=100,e/=100;let s=0,r=0,a=0;if(!t)s=r=a=e;else{const o=e<.5?e*(1+t):e+t-e*t,l=2*e-o;s=Ef(l,o,i+1/3),r=Ef(l,o,i),a=Ef(l,o,i-1/3)}return{red:Math.round(s*255),green:Math.round(r*255),blue:Math.round(a*255),alpha:n}}function sd(i,t){return e=>e>0?t:i}const _f=(i,t,e)=>{const n=i*i,s=e*(t*t-n)+n;return s<0?0:Math.sqrt(s)},lM=[gg,or,La],cM=i=>lM.find(t=>t.test(i));function xv(i){const t=cM(i);if(!t)return!1;let e=t.parse(i);return t===La&&(e=oM(e)),e}const Av=(i,t)=>{const e=xv(i),n=xv(t);if(!e||!n)return sd(i,t);const s={...e};return r=>(s.red=_f(e.red,n.red,r),s.green=_f(e.green,n.green,r),s.blue=_f(e.blue,n.blue,r),s.alpha=Bt(e.alpha,n.alpha,r),or.transform(s))},hM=(i,t)=>e=>t(i(e)),Ph=(...i)=>i.reduce(hM),bg=new Set(["none","hidden"]);function uM(i,t){return bg.has(i)?e=>e<=0?i:t:e=>e>=1?t:i}function dM(i,t){return e=>Bt(i,t,e)}function Cm(i){return typeof i=="number"?dM:typeof i=="string"?om(i)?sd:Te.test(i)?Av:gM:Array.isArray(i)?Gw:typeof i=="object"?Te.test(i)?Av:fM:sd}function Gw(i,t){const e=[...i],n=e.length,s=i.map((r,a)=>Cm(r)(r,t[a]));return r=>{for(let a=0;a<n;a++)e[a]=s[a](r);return e}}function fM(i,t){const e={...i,...t},n={};for(const s in e)i[s]!==void 0&&t[s]!==void 0&&(n[s]=Cm(i[s])(i[s],t[s]));return s=>{for(const r in n)e[r]=n[r](s);return e}}function pM(i,t){var e;const n=[],s={color:0,var:0,number:0};for(let r=0;r<t.values.length;r++){const a=t.types[r],o=i.indexes[a][s[a]],l=(e=i.values[o])!==null&&e!==void 0?e:0;n[r]=l,s[a]++}return n}const gM=(i,t)=>{const e=Ws.createTransformer(t),n=sc(i),s=sc(t);return n.indexes.var.length===s.indexes.var.length&&n.indexes.color.length===s.indexes.color.length&&n.indexes.number.length>=s.indexes.number.length?bg.has(i)&&!s.values.length||bg.has(t)&&!n.values.length?uM(i,t):Ph(Gw(pM(n,s),s.values),e):sd(i,t)};function qw(i,t,e){return typeof i=="number"&&typeof t=="number"&&typeof e=="number"?Bt(i,t,e):Cm(i)(i,t)}const mM=5;function Xw(i,t,e){const n=Math.max(t-mM,0);return Aw(e-i(n),t-n)}const Ut={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},Tf=.001;function yM({duration:i=Ut.duration,bounce:t=Ut.bounce,velocity:e=Ut.velocity,mass:n=Ut.mass}){let s,r,a=1-t;a=ts(Ut.minDamping,Ut.maxDamping,a),i=ts(Ut.minDuration,Ut.maxDuration,Qi(i)),a<1?(s=h=>{const u=h*a,d=u*i,f=u-e,p=xg(h,a),g=Math.exp(-d);return Tf-f/p*g},r=h=>{const d=h*a*i,f=d*e+e,p=Math.pow(a,2)*Math.pow(h,2)*i,g=Math.exp(-d),m=xg(Math.pow(h,2),a);return(-s(h)+Tf>0?-1:1)*((f-p)*g)/m}):(s=h=>{const u=Math.exp(-h*i),d=(h-e)*i+1;return-Tf+u*d},r=h=>{const u=Math.exp(-h*i),d=(e-h)*(i*i);return u*d});const o=5/i,l=bM(s,r,o);if(i=Yi(i),isNaN(l))return{stiffness:Ut.stiffness,damping:Ut.damping,duration:i};{const h=Math.pow(l,2)*n;return{stiffness:h,damping:a*2*Math.sqrt(n*h),duration:i}}}const vM=12;function bM(i,t,e){let n=e;for(let s=1;s<vM;s++)n=n-i(n)/t(n);return n}function xg(i,t){return i*Math.sqrt(1-t*t)}const xM=["duration","bounce"],AM=["stiffness","damping","mass"];function wv(i,t){return t.some(e=>i[e]!==void 0)}function wM(i){let t={velocity:Ut.velocity,stiffness:Ut.stiffness,damping:Ut.damping,mass:Ut.mass,isResolvedFromDuration:!1,...i};if(!wv(i,AM)&&wv(i,xM))if(i.visualDuration){const e=i.visualDuration,n=2*Math.PI/(e*1.2),s=n*n,r=2*ts(.05,1,1-(i.bounce||0))*Math.sqrt(s);t={...t,mass:Ut.mass,stiffness:s,damping:r}}else{const e=yM(i);t={...t,...e,mass:Ut.mass},t.isResolvedFromDuration=!0}return t}function Kw(i=Ut.visualDuration,t=Ut.bounce){const e=typeof i!="object"?{visualDuration:i,keyframes:[0,1],bounce:t}:i;let{restSpeed:n,restDelta:s}=e;const r=e.keyframes[0],a=e.keyframes[e.keyframes.length-1],o={done:!1,value:r},{stiffness:l,damping:h,mass:u,duration:d,velocity:f,isResolvedFromDuration:p}=wM({...e,velocity:-Qi(e.velocity||0)}),g=f||0,m=h/(2*Math.sqrt(l*u)),v=a-r,y=Qi(Math.sqrt(l/u)),A=Math.abs(v)<5;n||(n=A?Ut.restSpeed.granular:Ut.restSpeed.default),s||(s=A?Ut.restDelta.granular:Ut.restDelta.default);let S;if(m<1){const T=xg(y,m);S=_=>{const R=Math.exp(-m*y*_);return a-R*((g+m*y*v)/T*Math.sin(T*_)+v*Math.cos(T*_))}}else if(m===1)S=T=>a-Math.exp(-y*T)*(v+(g+y*v)*T);else{const T=y*Math.sqrt(m*m-1);S=_=>{const R=Math.exp(-m*y*_),k=Math.min(T*_,300);return a-R*((g+m*y*v)*Math.sinh(k)+T*v*Math.cosh(k))/T}}const E={calculatedDuration:p&&d||null,next:T=>{const _=S(T);if(p)o.done=T>=d;else{let R=0;m<1&&(R=T===0?Yi(g):Xw(S,T,_));const k=Math.abs(R)<=n,I=Math.abs(a-_)<=s;o.done=k&&I}return o.value=o.done?a:_,o},toString:()=>{const T=Math.min(fw(E),dg),_=pw(R=>E.next(T*R).value,T,30);return T+"ms "+_}};return E}function Sv({keyframes:i,velocity:t=0,power:e=.8,timeConstant:n=325,bounceDamping:s=10,bounceStiffness:r=500,modifyTarget:a,min:o,max:l,restDelta:h=.5,restSpeed:u}){const d=i[0],f={done:!1,value:d},p=k=>o!==void 0&&k<o||l!==void 0&&k>l,g=k=>o===void 0?l:l===void 0||Math.abs(o-k)<Math.abs(l-k)?o:l;let m=e*t;const v=d+m,y=a===void 0?v:a(v);y!==v&&(m=y-d);const A=k=>-m*Math.exp(-k/n),S=k=>y+A(k),E=k=>{const I=A(k),D=S(k);f.done=Math.abs(I)<=h,f.value=f.done?y:D};let T,_;const R=k=>{p(f.value)&&(T=k,_=Kw({keyframes:[f.value,g(f.value)],velocity:Xw(S,k,f.value),damping:s,stiffness:r,restDelta:h,restSpeed:u}))};return R(0),{calculatedDuration:null,next:k=>{let I=!1;return!_&&T===void 0&&(I=!0,E(k),R(k)),T!==void 0&&k>=T?_.next(k-T):(!I&&E(k),f)}}}const SM=Ch(.42,0,1,1),EM=Ch(0,0,.58,1),Yw=Ch(.42,0,.58,1),_M=i=>Array.isArray(i)&&typeof i[0]!="number",TM={linear:un,easeIn:SM,easeInOut:Yw,easeOut:EM,circIn:wm,circInOut:kw,circOut:Rw,backIn:Am,backInOut:Cw,backOut:Tw,anticipate:Pw},Ev=i=>{if(mm(i)){qA(i.length===4);const[t,e,n,s]=i;return Ch(t,e,n,s)}else if(typeof i=="string")return TM[i];return i};function CM(i,t,e){const n=[],s=e||qw,r=i.length-1;for(let a=0;a<r;a++){let o=s(i[a],i[a+1]);if(t){const l=Array.isArray(t)?t[a]||un:t;o=Ph(l,o)}n.push(o)}return n}function PM(i,t,{clamp:e=!0,ease:n,mixer:s}={}){const r=i.length;if(qA(r===t.length),r===1)return()=>t[0];if(r===2&&t[0]===t[1])return()=>t[1];const a=i[0]===i[1];i[0]>i[r-1]&&(i=[...i].reverse(),t=[...t].reverse());const o=CM(t,n,s),l=o.length,h=u=>{if(a&&u<i[0])return t[0];let d=0;if(l>1)for(;d<i.length-2&&!(u<i[d+1]);d++);const f=Xo(i[d],i[d+1],u);return o[d](f)};return e?u=>h(ts(i[0],i[r-1],u)):h}function RM(i,t){const e=i[i.length-1];for(let n=1;n<=t;n++){const s=Xo(0,t,n);i.push(Bt(e,1,s))}}function kM(i){const t=[0];return RM(t,i.length-1),t}function MM(i,t){return i.map(e=>e*t)}function LM(i,t){return i.map(()=>t||Yw).splice(0,i.length-1)}function rd({duration:i=300,keyframes:t,times:e,ease:n="easeInOut"}){const s=_M(n)?n.map(Ev):Ev(n),r={done:!1,value:t[0]},a=MM(e&&e.length===t.length?e:kM(t),i),o=PM(a,t,{ease:Array.isArray(s)?s:LM(t,s)});return{calculatedDuration:i,next:l=>(r.value=o(l),r.done=l>=i,r)}}const IM=i=>{const t=({timestamp:e})=>i(e);return{start:()=>kt.update(t,!0),stop:()=>Us(t),now:()=>me.isProcessing?me.timestamp:mi.now()}},DM={decay:Sv,inertia:Sv,tween:rd,keyframes:rd,spring:Kw},OM=i=>i/100;class Pm extends zw{constructor(t){super(t),this.holdTime=null,this.cancelTime=null,this.currentTime=0,this.playbackSpeed=1,this.pendingPlayState="running",this.startTime=null,this.state="idle",this.stop=()=>{if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.teardown();const{onStop:l}=this.options;l&&l()};const{name:e,motionValue:n,element:s,keyframes:r}=this.options,a=(s==null?void 0:s.KeyframeResolver)||Tm,o=(l,h)=>this.onKeyframesResolved(l,h);this.resolver=new a(r,o,e,n,s),this.resolver.scheduleResolve()}flatten(){super.flatten(),this._resolved&&Object.assign(this._resolved,this.initPlayback(this._resolved.keyframes))}initPlayback(t){const{type:e="keyframes",repeat:n=0,repeatDelay:s=0,repeatType:r,velocity:a=0}=this.options,o=gm(e)?e:DM[e]||rd;let l,h;o!==rd&&typeof t[0]!="number"&&(l=Ph(OM,qw(t[0],t[1])),t=[0,100]);const u=o({...this.options,keyframes:t});r==="mirror"&&(h=o({...this.options,keyframes:[...t].reverse(),velocity:-a})),u.calculatedDuration===null&&(u.calculatedDuration=fw(u));const{calculatedDuration:d}=u,f=d+s,p=f*(n+1)-s;return{generator:u,mirroredGenerator:h,mapPercentToKeyframes:l,calculatedDuration:d,resolvedDuration:f,totalDuration:p}}onPostResolved(){const{autoplay:t=!0}=this.options;this.play(),this.pendingPlayState==="paused"||!t?this.pause():this.state=this.pendingPlayState}tick(t,e=!1){const{resolved:n}=this;if(!n){const{keyframes:k}=this.options;return{done:!0,value:k[k.length-1]}}const{finalKeyframe:s,generator:r,mirroredGenerator:a,mapPercentToKeyframes:o,keyframes:l,calculatedDuration:h,totalDuration:u,resolvedDuration:d}=n;if(this.startTime===null)return r.next(0);const{delay:f,repeat:p,repeatType:g,repeatDelay:m,onUpdate:v}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,t):this.speed<0&&(this.startTime=Math.min(t-u/this.speed,this.startTime)),e?this.currentTime=t:this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=Math.round(t-this.startTime)*this.speed;const y=this.currentTime-f*(this.speed>=0?1:-1),A=this.speed>=0?y<0:y>u;this.currentTime=Math.max(y,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=u);let S=this.currentTime,E=r;if(p){const k=Math.min(this.currentTime,u)/d;let I=Math.floor(k),D=k%1;!D&&k>=1&&(D=1),D===1&&I--,I=Math.min(I,p+1),!!(I%2)&&(g==="reverse"?(D=1-D,m&&(D-=m/d)):g==="mirror"&&(E=a)),S=ts(0,1,D)*d}const T=A?{done:!1,value:l[0]}:E.next(S);o&&(T.value=o(T.value));let{done:_}=T;!A&&h!==null&&(_=this.speed>=0?this.currentTime>=u:this.currentTime<=0);const R=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&_);return R&&s!==void 0&&(T.value=Jd(l,this.options,s)),v&&v(T.value),R&&this.finish(),T}get duration(){const{resolved:t}=this;return t?Qi(t.calculatedDuration):0}get time(){return Qi(this.currentTime)}set time(t){t=Yi(t),this.currentTime=t,this.holdTime!==null||this.speed===0?this.holdTime=t:this.driver&&(this.startTime=this.driver.now()-t/this.speed)}get speed(){return this.playbackSpeed}set speed(t){const e=this.playbackSpeed!==t;this.playbackSpeed=t,e&&(this.time=Qi(this.currentTime))}play(){if(this.resolver.isScheduled||this.resolver.resume(),!this._resolved){this.pendingPlayState="running";return}if(this.isStopped)return;const{driver:t=IM,onPlay:e,startTime:n}=this.options;this.driver||(this.driver=t(r=>this.tick(r))),e&&e();const s=this.driver.now();this.holdTime!==null?this.startTime=s-this.holdTime:this.startTime?this.state==="finished"&&(this.startTime=s):this.startTime=n??this.calcStartTime(),this.state==="finished"&&this.updateFinishedPromise(),this.cancelTime=this.startTime,this.holdTime=null,this.state="running",this.driver.start()}pause(){var t;if(!this._resolved){this.pendingPlayState="paused";return}this.state="paused",this.holdTime=(t=this.currentTime)!==null&&t!==void 0?t:0}complete(){this.state!=="running"&&this.play(),this.pendingPlayState=this.state="finished",this.holdTime=null}finish(){this.teardown(),this.state="finished";const{onComplete:t}=this.options;t&&t()}cancel(){this.cancelTime!==null&&this.tick(this.cancelTime),this.teardown(),this.updateFinishedPromise()}teardown(){this.state="idle",this.stopDriver(),this.resolveFinishedPromise(),this.updateFinishedPromise(),this.startTime=this.cancelTime=null,this.resolver.cancel()}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(t){return this.startTime=0,this.tick(t,!0)}}const FM=new Set(["opacity","clipPath","filter","transform"]);function NM(i,t,e,{delay:n=0,duration:s=300,repeat:r=0,repeatType:a="loop",ease:o="easeInOut",times:l}={}){const h={[t]:e};l&&(h.offset=l);const u=mw(o,s);return Array.isArray(u)&&(h.easing=u),i.animate(h,{delay:n,duration:s,easing:Array.isArray(u)?"linear":u,fill:"both",iterations:r+1,direction:a==="reverse"?"alternate":"normal"})}const jM=tm(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),ad=10,BM=2e4;function VM(i){return gm(i.type)||i.type==="spring"||!gw(i.ease)}function HM(i,t){const e=new Pm({...t,keyframes:i,repeat:0,delay:0,isGenerator:!0});let n={done:!1,value:i[0]};const s=[];let r=0;for(;!n.done&&r<BM;)n=e.sample(r),s.push(n.value),r+=ad;return{times:void 0,keyframes:s,duration:r-ad,ease:"linear"}}const Qw={anticipate:Pw,backInOut:Cw,circInOut:kw};function $M(i){return i in Qw}class _v extends zw{constructor(t){super(t);const{name:e,motionValue:n,element:s,keyframes:r}=this.options;this.resolver=new Ww(r,(a,o)=>this.onKeyframesResolved(a,o),e,n,s),this.resolver.scheduleResolve()}initPlayback(t,e){let{duration:n=300,times:s,ease:r,type:a,motionValue:o,name:l,startTime:h}=this.options;if(!o.owner||!o.owner.current)return!1;if(typeof r=="string"&&id()&&$M(r)&&(r=Qw[r]),VM(this.options)){const{onComplete:d,onUpdate:f,motionValue:p,element:g,...m}=this.options,v=HM(t,m);t=v.keyframes,t.length===1&&(t[1]=t[0]),n=v.duration,s=v.times,r=v.ease,a="keyframes"}const u=NM(o.owner.current,l,t,{...this.options,duration:n,times:s,ease:r});return u.startTime=h??this.calcStartTime(),this.pendingTimeline?(cv(u,this.pendingTimeline),this.pendingTimeline=void 0):u.onfinish=()=>{const{onComplete:d}=this.options;o.set(Jd(t,this.options,e)),d&&d(),this.cancel(),this.resolveFinishedPromise()},{animation:u,duration:n,times:s,type:a,ease:r,keyframes:t}}get duration(){const{resolved:t}=this;if(!t)return 0;const{duration:e}=t;return Qi(e)}get time(){const{resolved:t}=this;if(!t)return 0;const{animation:e}=t;return Qi(e.currentTime||0)}set time(t){const{resolved:e}=this;if(!e)return;const{animation:n}=e;n.currentTime=Yi(t)}get speed(){const{resolved:t}=this;if(!t)return 1;const{animation:e}=t;return e.playbackRate}set speed(t){const{resolved:e}=this;if(!e)return;const{animation:n}=e;n.playbackRate=t}get state(){const{resolved:t}=this;if(!t)return"idle";const{animation:e}=t;return e.playState}get startTime(){const{resolved:t}=this;if(!t)return null;const{animation:e}=t;return e.startTime}attachTimeline(t){if(!this._resolved)this.pendingTimeline=t;else{const{resolved:e}=this;if(!e)return un;const{animation:n}=e;cv(n,t)}return un}play(){if(this.isStopped)return;const{resolved:t}=this;if(!t)return;const{animation:e}=t;e.playState==="finished"&&this.updateFinishedPromise(),e.play()}pause(){const{resolved:t}=this;if(!t)return;const{animation:e}=t;e.pause()}stop(){if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.resolveFinishedPromise(),this.updateFinishedPromise();const{resolved:t}=this;if(!t)return;const{animation:e,keyframes:n,duration:s,type:r,ease:a,times:o}=t;if(e.playState==="idle"||e.playState==="finished")return;if(this.time){const{motionValue:h,onUpdate:u,onComplete:d,element:f,...p}=this.options,g=new Pm({...p,keyframes:n,duration:s,type:r,ease:a,times:o,isGenerator:!0}),m=Yi(this.time);h.setWithVelocity(g.sample(m-ad).value,g.sample(m).value,ad)}const{onStop:l}=this.options;l&&l(),this.cancel()}complete(){const{resolved:t}=this;t&&t.animation.finish()}cancel(){const{resolved:t}=this;t&&t.animation.cancel()}static supports(t){const{motionValue:e,name:n,repeatDelay:s,repeatType:r,damping:a,type:o}=t;if(!e||!e.owner||!(e.owner.current instanceof HTMLElement))return!1;const{onUpdate:l,transformTemplate:h}=e.owner.getProps();return jM()&&n&&FM.has(n)&&!l&&!h&&!s&&r!=="mirror"&&a!==0&&o!=="inertia"}}const UM={type:"spring",stiffness:500,damping:25,restSpeed:10},WM=i=>({type:"spring",stiffness:550,damping:i===0?2*Math.sqrt(550):30,restSpeed:10}),zM={type:"keyframes",duration:.8},GM={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},qM=(i,{keyframes:t})=>t.length>2?zM:ya.has(i)?i.startsWith("scale")?WM(t[1]):UM:GM;function XM({when:i,delay:t,delayChildren:e,staggerChildren:n,staggerDirection:s,repeat:r,repeatType:a,repeatDelay:o,from:l,elapsed:h,...u}){return!!Object.keys(u).length}const Rm=(i,t,e,n={},s,r)=>a=>{const o=pm(n,i)||{},l=o.delay||n.delay||0;let{elapsed:h=0}=n;h=h-Yi(l);let u={keyframes:Array.isArray(e)?e:[null,e],ease:"easeOut",velocity:t.getVelocity(),...o,delay:-h,onUpdate:f=>{t.set(f),o.onUpdate&&o.onUpdate(f)},onComplete:()=>{a(),o.onComplete&&o.onComplete()},name:i,motionValue:t,element:r?void 0:s};XM(o)||(u={...u,...qM(i,u)}),u.duration&&(u.duration=Yi(u.duration)),u.repeatDelay&&(u.repeatDelay=Yi(u.repeatDelay)),u.from!==void 0&&(u.keyframes[0]=u.from);let d=!1;if((u.type===!1||u.duration===0&&!u.repeatDelay)&&(u.duration=0,u.delay===0&&(d=!0)),d&&!r&&t.get()!==void 0){const f=Jd(u.keyframes,o);if(f!==void 0)return kt.update(()=>{u.onUpdate(f),u.onComplete()}),new fk([])}return!r&&_v.supports(u)?new _v(u):new Pm(u)};function KM({protectedKeys:i,needsAnimating:t},e){const n=i.hasOwnProperty(e)&&t[e]!==!0;return t[e]=!1,n}function Zw(i,t,{delay:e=0,transitionOverride:n,type:s}={}){var r;let{transition:a=i.getDefaultTransition(),transitionEnd:o,...l}=t;n&&(a=n);const h=[],u=s&&i.animationState&&i.animationState.getState()[s];for(const d in l){const f=i.getValue(d,(r=i.latestValues[d])!==null&&r!==void 0?r:null),p=l[d];if(p===void 0||u&&KM(u,d))continue;const g={delay:e,...pm(a||{},d)};let m=!1;if(window.MotionHandoffAnimation){const y=ww(i);if(y){const A=window.MotionHandoffAnimation(y,d,kt);A!==null&&(g.startTime=A,m=!0)}}pg(i,d),f.start(Rm(d,f,p,i.shouldReduceMotion&&xw.has(d)?{type:!1}:g,i,m));const v=f.animation;v&&h.push(v)}return o&&Promise.all(h).then(()=>{kt.update(()=>{o&&Ck(i,o)})}),h}function Ag(i,t,e={}){var n;const s=Zd(i,t,e.type==="exit"?(n=i.presenceContext)===null||n===void 0?void 0:n.custom:void 0);let{transition:r=i.getDefaultTransition()||{}}=s||{};e.transitionOverride&&(r=e.transitionOverride);const a=s?()=>Promise.all(Zw(i,s,e)):()=>Promise.resolve(),o=i.variantChildren&&i.variantChildren.size?(h=0)=>{const{delayChildren:u=0,staggerChildren:d,staggerDirection:f}=r;return YM(i,t,u+h,d,f,e)}:()=>Promise.resolve(),{when:l}=r;if(l){const[h,u]=l==="beforeChildren"?[a,o]:[o,a];return h().then(()=>u())}else return Promise.all([a(),o(e.delay)])}function YM(i,t,e=0,n=0,s=1,r){const a=[],o=(i.variantChildren.size-1)*n,l=s===1?(h=0)=>h*n:(h=0)=>o-h*n;return Array.from(i.variantChildren).sort(QM).forEach((h,u)=>{h.notify("AnimationStart",t),a.push(Ag(h,t,{...r,delay:e+l(u)}).then(()=>h.notify("AnimationComplete",t)))}),Promise.all(a)}function QM(i,t){return i.sortNodePosition(t)}function ZM(i,t,e={}){i.notify("AnimationStart",t);let n;if(Array.isArray(t)){const s=t.map(r=>Ag(i,r,e));n=Promise.all(s)}else if(typeof t=="string")n=Ag(i,t,e);else{const s=typeof t=="function"?Zd(i,t,e.custom):t;n=Promise.all(Zw(i,s,e))}return n.then(()=>{i.notify("AnimationComplete",t)})}const JM=nm.length;function Jw(i){if(!i)return;if(!i.isControllingVariants){const e=i.parent?Jw(i.parent)||{}:{};return i.props.initial!==void 0&&(e.initial=i.props.initial),e}const t={};for(let e=0;e<JM;e++){const n=nm[e],s=i.props[n];(ec(s)||s===!1)&&(t[n]=s)}return t}const tL=[...em].reverse(),eL=em.length;function nL(i){return t=>Promise.all(t.map(({animation:e,options:n})=>ZM(i,e,n)))}function iL(i){let t=nL(i),e=Tv(),n=!0;const s=l=>(h,u)=>{var d;const f=Zd(i,u,l==="exit"?(d=i.presenceContext)===null||d===void 0?void 0:d.custom:void 0);if(f){const{transition:p,transitionEnd:g,...m}=f;h={...h,...m,...g}}return h};function r(l){t=l(i)}function a(l){const{props:h}=i,u=Jw(i.parent)||{},d=[],f=new Set;let p={},g=1/0;for(let v=0;v<eL;v++){const y=tL[v],A=e[y],S=h[y]!==void 0?h[y]:u[y],E=ec(S),T=y===l?A.isActive:null;T===!1&&(g=v);let _=S===u[y]&&S!==h[y]&&E;if(_&&n&&i.manuallyAnimateOnMount&&(_=!1),A.protectedKeys={...p},!A.isActive&&T===null||!S&&!A.prevProp||Yd(S)||typeof S=="boolean")continue;const R=sL(A.prevProp,S);let k=R||y===l&&A.isActive&&!_&&E||v>g&&E,I=!1;const D=Array.isArray(S)?S:[S];let M=D.reduce(s(y),{});T===!1&&(M={});const{prevResolvedValues:L={}}=A,N={...L,...M},O=j=>{k=!0,f.has(j)&&(I=!0,f.delete(j)),A.needsAnimating[j]=!0;const V=i.getValue(j);V&&(V.liveStyle=!1)};for(const j in N){const V=M[j],tt=L[j];if(p.hasOwnProperty(j))continue;let yt=!1;ug(V)&&ug(tt)?yt=!dw(V,tt):yt=V!==tt,yt?V!=null?O(j):f.add(j):V!==void 0&&f.has(j)?O(j):A.protectedKeys[j]=!0}A.prevProp=S,A.prevResolvedValues=M,A.isActive&&(p={...p,...M}),n&&i.blockInitialAnimation&&(k=!1),k&&(!(_&&R)||I)&&d.push(...D.map(j=>({animation:j,options:{type:y}})))}if(f.size){const v={};f.forEach(y=>{const A=i.getBaseTarget(y),S=i.getValue(y);S&&(S.liveStyle=!0),v[y]=A??null}),d.push({animation:v})}let m=!!d.length;return n&&(h.initial===!1||h.initial===h.animate)&&!i.manuallyAnimateOnMount&&(m=!1),n=!1,m?t(d):Promise.resolve()}function o(l,h){var u;if(e[l].isActive===h)return Promise.resolve();(u=i.variantChildren)===null||u===void 0||u.forEach(f=>{var p;return(p=f.animationState)===null||p===void 0?void 0:p.setActive(l,h)}),e[l].isActive=h;const d=a(l);for(const f in e)e[f].protectedKeys={};return d}return{animateChanges:a,setActive:o,setAnimateFunction:r,getState:()=>e,reset:()=>{e=Tv(),n=!0}}}function sL(i,t){return typeof t=="string"?t!==i:Array.isArray(t)?!dw(t,i):!1}function Qs(i=!1){return{isActive:i,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function Tv(){return{animate:Qs(!0),whileInView:Qs(),whileHover:Qs(),whileTap:Qs(),whileDrag:Qs(),whileFocus:Qs(),exit:Qs()}}class Ks{constructor(t){this.isMounted=!1,this.node=t}update(){}}class rL extends Ks{constructor(t){super(t),t.animationState||(t.animationState=iL(t))}updateAnimationControlsSubscription(){const{animate:t}=this.node.getProps();Yd(t)&&(this.unmountControls=t.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:t}=this.node.getProps(),{animate:e}=this.node.prevProps||{};t!==e&&this.updateAnimationControlsSubscription()}unmount(){var t;this.node.animationState.reset(),(t=this.unmountControls)===null||t===void 0||t.call(this)}}let aL=0;class oL extends Ks{constructor(){super(...arguments),this.id=aL++}update(){if(!this.node.presenceContext)return;const{isPresent:t,onExitComplete:e}=this.node.presenceContext,{isPresent:n}=this.node.prevPresenceContext||{};if(!this.node.animationState||t===n)return;const s=this.node.animationState.setActive("exit",!t);e&&!t&&s.then(()=>e(this.id))}mount(){const{register:t}=this.node.presenceContext||{};t&&(this.unmount=t(this.id))}unmount(){}}const lL={animation:{Feature:rL},exit:{Feature:oL}};function rc(i,t,e,n={passive:!0}){return i.addEventListener(t,e,n),()=>i.removeEventListener(t,e)}function Rh(i){return{point:{x:i.pageX,y:i.pageY}}}const cL=i=>t=>ym(t)&&i(t,Rh(t));function ql(i,t,e,n){return rc(i,t,cL(e),n)}const Cv=(i,t)=>Math.abs(i-t);function hL(i,t){const e=Cv(i.x,t.x),n=Cv(i.y,t.y);return Math.sqrt(e**2+n**2)}class tS{constructor(t,e,{transformPagePoint:n,contextWindow:s,dragSnapToOrigin:r=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const d=Pf(this.lastMoveEventInfo,this.history),f=this.startEvent!==null,p=hL(d.offset,{x:0,y:0})>=3;if(!f&&!p)return;const{point:g}=d,{timestamp:m}=me;this.history.push({...g,timestamp:m});const{onStart:v,onMove:y}=this.handlers;f||(v&&v(this.lastMoveEvent,d),this.startEvent=this.lastMoveEvent),y&&y(this.lastMoveEvent,d)},this.handlePointerMove=(d,f)=>{this.lastMoveEvent=d,this.lastMoveEventInfo=Cf(f,this.transformPagePoint),kt.update(this.updatePoint,!0)},this.handlePointerUp=(d,f)=>{this.end();const{onEnd:p,onSessionEnd:g,resumeAnimation:m}=this.handlers;if(this.dragSnapToOrigin&&m&&m(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const v=Pf(d.type==="pointercancel"?this.lastMoveEventInfo:Cf(f,this.transformPagePoint),this.history);this.startEvent&&p&&p(d,v),g&&g(d,v)},!ym(t))return;this.dragSnapToOrigin=r,this.handlers=e,this.transformPagePoint=n,this.contextWindow=s||window;const a=Rh(t),o=Cf(a,this.transformPagePoint),{point:l}=o,{timestamp:h}=me;this.history=[{...l,timestamp:h}];const{onSessionStart:u}=e;u&&u(t,Pf(o,this.history)),this.removeListeners=Ph(ql(this.contextWindow,"pointermove",this.handlePointerMove),ql(this.contextWindow,"pointerup",this.handlePointerUp),ql(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(t){this.handlers=t}end(){this.removeListeners&&this.removeListeners(),Us(this.updatePoint)}}function Cf(i,t){return t?{point:t(i.point)}:i}function Pv(i,t){return{x:i.x-t.x,y:i.y-t.y}}function Pf({point:i},t){return{point:i,delta:Pv(i,eS(t)),offset:Pv(i,uL(t)),velocity:dL(t,.1)}}function uL(i){return i[0]}function eS(i){return i[i.length-1]}function dL(i,t){if(i.length<2)return{x:0,y:0};let e=i.length-1,n=null;const s=eS(i);for(;e>=0&&(n=i[e],!(s.timestamp-n.timestamp>Yi(t)));)e--;if(!n)return{x:0,y:0};const r=Qi(s.timestamp-n.timestamp);if(r===0)return{x:0,y:0};const a={x:(s.x-n.x)/r,y:(s.y-n.y)/r};return a.x===1/0&&(a.x=0),a.y===1/0&&(a.y=0),a}const nS=1e-4,fL=1-nS,pL=1+nS,iS=.01,gL=0-iS,mL=0+iS;function fn(i){return i.max-i.min}function yL(i,t,e){return Math.abs(i-t)<=e}function Rv(i,t,e,n=.5){i.origin=n,i.originPoint=Bt(t.min,t.max,i.origin),i.scale=fn(e)/fn(t),i.translate=Bt(e.min,e.max,i.origin)-i.originPoint,(i.scale>=fL&&i.scale<=pL||isNaN(i.scale))&&(i.scale=1),(i.translate>=gL&&i.translate<=mL||isNaN(i.translate))&&(i.translate=0)}function Xl(i,t,e,n){Rv(i.x,t.x,e.x,n?n.originX:void 0),Rv(i.y,t.y,e.y,n?n.originY:void 0)}function kv(i,t,e){i.min=e.min+t.min,i.max=i.min+fn(t)}function vL(i,t,e){kv(i.x,t.x,e.x),kv(i.y,t.y,e.y)}function Mv(i,t,e){i.min=t.min-e.min,i.max=i.min+fn(t)}function Kl(i,t,e){Mv(i.x,t.x,e.x),Mv(i.y,t.y,e.y)}function bL(i,{min:t,max:e},n){return t!==void 0&&i<t?i=n?Bt(t,i,n.min):Math.max(i,t):e!==void 0&&i>e&&(i=n?Bt(e,i,n.max):Math.min(i,e)),i}function Lv(i,t,e){return{min:t!==void 0?i.min+t:void 0,max:e!==void 0?i.max+e-(i.max-i.min):void 0}}function xL(i,{top:t,left:e,bottom:n,right:s}){return{x:Lv(i.x,e,s),y:Lv(i.y,t,n)}}function Iv(i,t){let e=t.min-i.min,n=t.max-i.max;return t.max-t.min<i.max-i.min&&([e,n]=[n,e]),{min:e,max:n}}function AL(i,t){return{x:Iv(i.x,t.x),y:Iv(i.y,t.y)}}function wL(i,t){let e=.5;const n=fn(i),s=fn(t);return s>n?e=Xo(t.min,t.max-n,i.min):n>s&&(e=Xo(i.min,i.max-s,t.min)),ts(0,1,e)}function SL(i,t){const e={};return t.min!==void 0&&(e.min=t.min-i.min),t.max!==void 0&&(e.max=t.max-i.min),e}const wg=.35;function EL(i=wg){return i===!1?i=0:i===!0&&(i=wg),{x:Dv(i,"left","right"),y:Dv(i,"top","bottom")}}function Dv(i,t,e){return{min:Ov(i,t),max:Ov(i,e)}}function Ov(i,t){return typeof i=="number"?i:i[t]||0}const Fv=()=>({translate:0,scale:1,origin:0,originPoint:0}),Ia=()=>({x:Fv(),y:Fv()}),Nv=()=>({min:0,max:0}),qt=()=>({x:Nv(),y:Nv()});function mn(i){return[i("x"),i("y")]}function sS({top:i,left:t,right:e,bottom:n}){return{x:{min:t,max:e},y:{min:i,max:n}}}function _L({x:i,y:t}){return{top:t.min,right:i.max,bottom:t.max,left:i.min}}function TL(i,t){if(!t)return i;const e=t({x:i.left,y:i.top}),n=t({x:i.right,y:i.bottom});return{top:e.y,left:e.x,bottom:n.y,right:n.x}}function Rf(i){return i===void 0||i===1}function Sg({scale:i,scaleX:t,scaleY:e}){return!Rf(i)||!Rf(t)||!Rf(e)}function nr(i){return Sg(i)||rS(i)||i.z||i.rotate||i.rotateX||i.rotateY||i.skewX||i.skewY}function rS(i){return jv(i.x)||jv(i.y)}function jv(i){return i&&i!=="0%"}function od(i,t,e){const n=i-e,s=t*n;return e+s}function Bv(i,t,e,n,s){return s!==void 0&&(i=od(i,s,n)),od(i,e,n)+t}function Eg(i,t=0,e=1,n,s){i.min=Bv(i.min,t,e,n,s),i.max=Bv(i.max,t,e,n,s)}function aS(i,{x:t,y:e}){Eg(i.x,t.translate,t.scale,t.originPoint),Eg(i.y,e.translate,e.scale,e.originPoint)}const Vv=.999999999999,Hv=1.0000000000001;function CL(i,t,e,n=!1){const s=e.length;if(!s)return;t.x=t.y=1;let r,a;for(let o=0;o<s;o++){r=e[o],a=r.projectionDelta;const{visualElement:l}=r.options;l&&l.props.style&&l.props.style.display==="contents"||(n&&r.options.layoutScroll&&r.scroll&&r!==r.root&&Oa(i,{x:-r.scroll.offset.x,y:-r.scroll.offset.y}),a&&(t.x*=a.x.scale,t.y*=a.y.scale,aS(i,a)),n&&nr(r.latestValues)&&Oa(i,r.latestValues))}t.x<Hv&&t.x>Vv&&(t.x=1),t.y<Hv&&t.y>Vv&&(t.y=1)}function Da(i,t){i.min=i.min+t,i.max=i.max+t}function $v(i,t,e,n,s=.5){const r=Bt(i.min,i.max,s);Eg(i,t,e,r,n)}function Oa(i,t){$v(i.x,t.x,t.scaleX,t.scale,t.originX),$v(i.y,t.y,t.scaleY,t.scale,t.originY)}function oS(i,t){return sS(TL(i.getBoundingClientRect(),t))}function PL(i,t,e){const n=oS(i,e),{scroll:s}=t;return s&&(Da(n.x,s.offset.x),Da(n.y,s.offset.y)),n}const lS=({current:i})=>i?i.ownerDocument.defaultView:null,RL=new WeakMap;class kL{constructor(t){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=qt(),this.visualElement=t}start(t,{snapToCursor:e=!1}={}){const{presenceContext:n}=this.visualElement;if(n&&n.isPresent===!1)return;const s=u=>{const{dragSnapToOrigin:d}=this.getProps();d?this.pauseAnimation():this.stopAnimation(),e&&this.snapToCursor(Rh(u).point)},r=(u,d)=>{const{drag:f,dragPropagation:p,onDragStart:g}=this.getProps();if(f&&!p&&(this.openDragLock&&this.openDragLock(),this.openDragLock=wk(f),!this.openDragLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),mn(v=>{let y=this.getAxisMotionValue(v).get()||0;if(gi.test(y)){const{projection:A}=this.visualElement;if(A&&A.layout){const S=A.layout.layoutBox[v];S&&(y=fn(S)*(parseFloat(y)/100))}}this.originPoint[v]=y}),g&&kt.postRender(()=>g(u,d)),pg(this.visualElement,"transform");const{animationState:m}=this.visualElement;m&&m.setActive("whileDrag",!0)},a=(u,d)=>{const{dragPropagation:f,dragDirectionLock:p,onDirectionLock:g,onDrag:m}=this.getProps();if(!f&&!this.openDragLock)return;const{offset:v}=d;if(p&&this.currentDirection===null){this.currentDirection=ML(v),this.currentDirection!==null&&g&&g(this.currentDirection);return}this.updateAxis("x",d.point,v),this.updateAxis("y",d.point,v),this.visualElement.render(),m&&m(u,d)},o=(u,d)=>this.stop(u,d),l=()=>mn(u=>{var d;return this.getAnimationState(u)==="paused"&&((d=this.getAxisMotionValue(u).animation)===null||d===void 0?void 0:d.play())}),{dragSnapToOrigin:h}=this.getProps();this.panSession=new tS(t,{onSessionStart:s,onStart:r,onMove:a,onSessionEnd:o,resumeAnimation:l},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:h,contextWindow:lS(this.visualElement)})}stop(t,e){const n=this.isDragging;if(this.cancel(),!n)return;const{velocity:s}=e;this.startAnimation(s);const{onDragEnd:r}=this.getProps();r&&kt.postRender(()=>r(t,e))}cancel(){this.isDragging=!1;const{projection:t,animationState:e}=this.visualElement;t&&(t.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:n}=this.getProps();!n&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),e&&e.setActive("whileDrag",!1)}updateAxis(t,e,n){const{drag:s}=this.getProps();if(!n||!eu(t,s,this.currentDirection))return;const r=this.getAxisMotionValue(t);let a=this.originPoint[t]+n[t];this.constraints&&this.constraints[t]&&(a=bL(a,this.constraints[t],this.elastic[t])),r.set(a)}resolveConstraints(){var t;const{dragConstraints:e,dragElastic:n}=this.getProps(),s=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(t=this.visualElement.projection)===null||t===void 0?void 0:t.layout,r=this.constraints;e&&Ma(e)?this.constraints||(this.constraints=this.resolveRefConstraints()):e&&s?this.constraints=xL(s.layoutBox,e):this.constraints=!1,this.elastic=EL(n),r!==this.constraints&&s&&this.constraints&&!this.hasMutatedConstraints&&mn(a=>{this.constraints!==!1&&this.getAxisMotionValue(a)&&(this.constraints[a]=SL(s.layoutBox[a],this.constraints[a]))})}resolveRefConstraints(){const{dragConstraints:t,onMeasureDragConstraints:e}=this.getProps();if(!t||!Ma(t))return!1;const n=t.current,{projection:s}=this.visualElement;if(!s||!s.layout)return!1;const r=PL(n,s.root,this.visualElement.getTransformPagePoint());let a=AL(s.layout.layoutBox,r);if(e){const o=e(_L(a));this.hasMutatedConstraints=!!o,o&&(a=sS(o))}return a}startAnimation(t){const{drag:e,dragMomentum:n,dragElastic:s,dragTransition:r,dragSnapToOrigin:a,onDragTransitionEnd:o}=this.getProps(),l=this.constraints||{},h=mn(u=>{if(!eu(u,e,this.currentDirection))return;let d=l&&l[u]||{};a&&(d={min:0,max:0});const f=s?200:1e6,p=s?40:1e7,g={type:"inertia",velocity:n?t[u]:0,bounceStiffness:f,bounceDamping:p,timeConstant:750,restDelta:1,restSpeed:10,...r,...d};return this.startAxisValueAnimation(u,g)});return Promise.all(h).then(o)}startAxisValueAnimation(t,e){const n=this.getAxisMotionValue(t);return pg(this.visualElement,t),n.start(Rm(t,n,0,e,this.visualElement,!1))}stopAnimation(){mn(t=>this.getAxisMotionValue(t).stop())}pauseAnimation(){mn(t=>{var e;return(e=this.getAxisMotionValue(t).animation)===null||e===void 0?void 0:e.pause()})}getAnimationState(t){var e;return(e=this.getAxisMotionValue(t).animation)===null||e===void 0?void 0:e.state}getAxisMotionValue(t){const e=`_drag${t.toUpperCase()}`,n=this.visualElement.getProps(),s=n[e];return s||this.visualElement.getValue(t,(n.initial?n.initial[t]:void 0)||0)}snapToCursor(t){mn(e=>{const{drag:n}=this.getProps();if(!eu(e,n,this.currentDirection))return;const{projection:s}=this.visualElement,r=this.getAxisMotionValue(e);if(s&&s.layout){const{min:a,max:o}=s.layout.layoutBox[e];r.set(t[e]-Bt(a,o,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:t,dragConstraints:e}=this.getProps(),{projection:n}=this.visualElement;if(!Ma(e)||!n||!this.constraints)return;this.stopAnimation();const s={x:0,y:0};mn(a=>{const o=this.getAxisMotionValue(a);if(o&&this.constraints!==!1){const l=o.get();s[a]=wL({min:l,max:l},this.constraints[a])}});const{transformTemplate:r}=this.visualElement.getProps();this.visualElement.current.style.transform=r?r({},""):"none",n.root&&n.root.updateScroll(),n.updateLayout(),this.resolveConstraints(),mn(a=>{if(!eu(a,t,null))return;const o=this.getAxisMotionValue(a),{min:l,max:h}=this.constraints[a];o.set(Bt(l,h,s[a]))})}addListeners(){if(!this.visualElement.current)return;RL.set(this.visualElement,this);const t=this.visualElement.current,e=ql(t,"pointerdown",l=>{const{drag:h,dragListener:u=!0}=this.getProps();h&&u&&this.start(l)}),n=()=>{const{dragConstraints:l}=this.getProps();Ma(l)&&l.current&&(this.constraints=this.resolveRefConstraints())},{projection:s}=this.visualElement,r=s.addEventListener("measure",n);s&&!s.layout&&(s.root&&s.root.updateScroll(),s.updateLayout()),kt.read(n);const a=rc(window,"resize",()=>this.scalePositionWithinConstraints()),o=s.addEventListener("didUpdate",({delta:l,hasLayoutChanged:h})=>{this.isDragging&&h&&(mn(u=>{const d=this.getAxisMotionValue(u);d&&(this.originPoint[u]+=l[u].translate,d.set(d.get()+l[u].translate))}),this.visualElement.render())});return()=>{a(),e(),r(),o&&o()}}getProps(){const t=this.visualElement.getProps(),{drag:e=!1,dragDirectionLock:n=!1,dragPropagation:s=!1,dragConstraints:r=!1,dragElastic:a=wg,dragMomentum:o=!0}=t;return{...t,drag:e,dragDirectionLock:n,dragPropagation:s,dragConstraints:r,dragElastic:a,dragMomentum:o}}}function eu(i,t,e){return(t===!0||t===i)&&(e===null||e===i)}function ML(i,t=10){let e=null;return Math.abs(i.y)>t?e="y":Math.abs(i.x)>t&&(e="x"),e}class LL extends Ks{constructor(t){super(t),this.removeGroupControls=un,this.removeListeners=un,this.controls=new kL(t)}mount(){const{dragControls:t}=this.node.getProps();t&&(this.removeGroupControls=t.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||un}unmount(){this.removeGroupControls(),this.removeListeners()}}const Uv=i=>(t,e)=>{i&&kt.postRender(()=>i(t,e))};class IL extends Ks{constructor(){super(...arguments),this.removePointerDownListener=un}onPointerDown(t){this.session=new tS(t,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:lS(this.node)})}createPanHandlers(){const{onPanSessionStart:t,onPanStart:e,onPan:n,onPanEnd:s}=this.node.getProps();return{onSessionStart:Uv(t),onStart:Uv(e),onMove:n,onEnd:(r,a)=>{delete this.session,s&&kt.postRender(()=>s(r,a))}}}mount(){this.removePointerDownListener=ql(this.node.current,"pointerdown",t=>this.onPointerDown(t))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const $u={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function Wv(i,t){return t.max===t.min?0:i/(t.max-t.min)*100}const ul={correct:(i,t)=>{if(!t.target)return i;if(typeof i=="string")if(X.test(i))i=parseFloat(i);else return i;const e=Wv(i,t.target.x),n=Wv(i,t.target.y);return`${e}% ${n}%`}},DL={correct:(i,{treeScale:t,projectionDelta:e})=>{const n=i,s=Ws.parse(i);if(s.length>5)return n;const r=Ws.createTransformer(i),a=typeof s[0]!="number"?1:0,o=e.x.scale*t.x,l=e.y.scale*t.y;s[0+a]/=o,s[1+a]/=l;const h=Bt(o,l,.5);return typeof s[2+a]=="number"&&(s[2+a]/=h),typeof s[3+a]=="number"&&(s[3+a]/=h),r(s)}};class OL extends P.Component{componentDidMount(){const{visualElement:t,layoutGroup:e,switchLayoutGroup:n,layoutId:s}=this.props,{projection:r}=t;ek(FL),r&&(e.group&&e.group.add(r),n&&n.register&&s&&n.register(r),r.root.didUpdate(),r.addEventListener("animationComplete",()=>{this.safeToRemove()}),r.setOptions({...r.options,onExitComplete:()=>this.safeToRemove()})),$u.hasEverUpdated=!0}getSnapshotBeforeUpdate(t){const{layoutDependency:e,visualElement:n,drag:s,isPresent:r}=this.props,a=n.projection;return a&&(a.isPresent=r,s||t.layoutDependency!==e||e===void 0?a.willUpdate():this.safeToRemove(),t.isPresent!==r&&(r?a.promote():a.relegate()||kt.postRender(()=>{const o=a.getStack();(!o||!o.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:t}=this.props.visualElement;t&&(t.root.didUpdate(),sm.postRender(()=>{!t.currentAnimation&&t.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:t,layoutGroup:e,switchLayoutGroup:n}=this.props,{projection:s}=t;s&&(s.scheduleCheckAfterUnmount(),e&&e.group&&e.group.remove(s),n&&n.deregister&&n.deregister(s))}safeToRemove(){const{safeToRemove:t}=this.props;t&&t()}render(){return null}}function cS(i){const[t,e]=mR(),n=P.useContext(zA);return C.jsx(OL,{...i,layoutGroup:n,switchLayoutGroup:P.useContext(JA),isPresent:t,safeToRemove:e})}const FL={borderRadius:{...ul,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:ul,borderTopRightRadius:ul,borderBottomLeftRadius:ul,borderBottomRightRadius:ul,boxShadow:DL};function NL(i,t,e){const n=Pe(i)?i:ic(i);return n.start(Rm("",n,t,e)),n.animation}function jL(i){return i instanceof SVGElement&&i.tagName!=="svg"}const BL=(i,t)=>i.depth-t.depth;class VL{constructor(){this.children=[],this.isDirty=!1}add(t){vm(this.children,t),this.isDirty=!0}remove(t){bm(this.children,t),this.isDirty=!0}forEach(t){this.isDirty&&this.children.sort(BL),this.isDirty=!1,this.children.forEach(t)}}function HL(i,t){const e=mi.now(),n=({timestamp:s})=>{const r=s-e;r>=t&&(Us(n),i(r-t))};return kt.read(n,!0),()=>Us(n)}const hS=["TopLeft","TopRight","BottomLeft","BottomRight"],$L=hS.length,zv=i=>typeof i=="string"?parseFloat(i):i,Gv=i=>typeof i=="number"||X.test(i);function UL(i,t,e,n,s,r){s?(i.opacity=Bt(0,e.opacity!==void 0?e.opacity:1,WL(n)),i.opacityExit=Bt(t.opacity!==void 0?t.opacity:1,0,zL(n))):r&&(i.opacity=Bt(t.opacity!==void 0?t.opacity:1,e.opacity!==void 0?e.opacity:1,n));for(let a=0;a<$L;a++){const o=`border${hS[a]}Radius`;let l=qv(t,o),h=qv(e,o);if(l===void 0&&h===void 0)continue;l||(l=0),h||(h=0),l===0||h===0||Gv(l)===Gv(h)?(i[o]=Math.max(Bt(zv(l),zv(h),n),0),(gi.test(h)||gi.test(l))&&(i[o]+="%")):i[o]=h}(t.rotate||e.rotate)&&(i.rotate=Bt(t.rotate||0,e.rotate||0,n))}function qv(i,t){return i[t]!==void 0?i[t]:i.borderRadius}const WL=uS(0,.5,Rw),zL=uS(.5,.95,un);function uS(i,t,e){return n=>n<i?0:n>t?1:e(Xo(i,t,n))}function Xv(i,t){i.min=t.min,i.max=t.max}function gn(i,t){Xv(i.x,t.x),Xv(i.y,t.y)}function Kv(i,t){i.translate=t.translate,i.scale=t.scale,i.originPoint=t.originPoint,i.origin=t.origin}function Yv(i,t,e,n,s){return i-=t,i=od(i,1/e,n),s!==void 0&&(i=od(i,1/s,n)),i}function GL(i,t=0,e=1,n=.5,s,r=i,a=i){if(gi.test(t)&&(t=parseFloat(t),t=Bt(a.min,a.max,t/100)-a.min),typeof t!="number")return;let o=Bt(r.min,r.max,n);i===r&&(o-=t),i.min=Yv(i.min,t,e,o,s),i.max=Yv(i.max,t,e,o,s)}function Qv(i,t,[e,n,s],r,a){GL(i,t[e],t[n],t[s],t.scale,r,a)}const qL=["x","scaleX","originX"],XL=["y","scaleY","originY"];function Zv(i,t,e,n){Qv(i.x,t,qL,e?e.x:void 0,n?n.x:void 0),Qv(i.y,t,XL,e?e.y:void 0,n?n.y:void 0)}function Jv(i){return i.translate===0&&i.scale===1}function dS(i){return Jv(i.x)&&Jv(i.y)}function tb(i,t){return i.min===t.min&&i.max===t.max}function KL(i,t){return tb(i.x,t.x)&&tb(i.y,t.y)}function eb(i,t){return Math.round(i.min)===Math.round(t.min)&&Math.round(i.max)===Math.round(t.max)}function fS(i,t){return eb(i.x,t.x)&&eb(i.y,t.y)}function nb(i){return fn(i.x)/fn(i.y)}function ib(i,t){return i.translate===t.translate&&i.scale===t.scale&&i.originPoint===t.originPoint}class YL{constructor(){this.members=[]}add(t){vm(this.members,t),t.scheduleRender()}remove(t){if(bm(this.members,t),t===this.prevLead&&(this.prevLead=void 0),t===this.lead){const e=this.members[this.members.length-1];e&&this.promote(e)}}relegate(t){const e=this.members.findIndex(s=>t===s);if(e===0)return!1;let n;for(let s=e;s>=0;s--){const r=this.members[s];if(r.isPresent!==!1){n=r;break}}return n?(this.promote(n),!0):!1}promote(t,e){const n=this.lead;if(t!==n&&(this.prevLead=n,this.lead=t,t.show(),n)){n.instance&&n.scheduleRender(),t.scheduleRender(),t.resumeFrom=n,e&&(t.resumeFrom.preserveOpacity=!0),n.snapshot&&(t.snapshot=n.snapshot,t.snapshot.latestValues=n.animationValues||n.latestValues),t.root&&t.root.isUpdating&&(t.isLayoutDirty=!0);const{crossfade:s}=t.options;s===!1&&n.hide()}}exitAnimationComplete(){this.members.forEach(t=>{const{options:e,resumingFrom:n}=t;e.onExitComplete&&e.onExitComplete(),n&&n.options.onExitComplete&&n.options.onExitComplete()})}scheduleRender(){this.members.forEach(t=>{t.instance&&t.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function QL(i,t,e){let n="";const s=i.x.translate/t.x,r=i.y.translate/t.y,a=(e==null?void 0:e.z)||0;if((s||r||a)&&(n=`translate3d(${s}px, ${r}px, ${a}px) `),(t.x!==1||t.y!==1)&&(n+=`scale(${1/t.x}, ${1/t.y}) `),e){const{transformPerspective:h,rotate:u,rotateX:d,rotateY:f,skewX:p,skewY:g}=e;h&&(n=`perspective(${h}px) ${n}`),u&&(n+=`rotate(${u}deg) `),d&&(n+=`rotateX(${d}deg) `),f&&(n+=`rotateY(${f}deg) `),p&&(n+=`skewX(${p}deg) `),g&&(n+=`skewY(${g}deg) `)}const o=i.x.scale*t.x,l=i.y.scale*t.y;return(o!==1||l!==1)&&(n+=`scale(${o}, ${l})`),n||"none"}const ir={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0},Vl=typeof window<"u"&&window.MotionDebug!==void 0,kf=["","X","Y","Z"],ZL={visibility:"hidden"},sb=1e3;let JL=0;function Mf(i,t,e,n){const{latestValues:s}=t;s[i]&&(e[i]=s[i],t.setStaticValue(i,0),n&&(n[i]=0))}function pS(i){if(i.hasCheckedOptimisedAppear=!0,i.root===i)return;const{visualElement:t}=i.options;if(!t)return;const e=ww(t);if(window.MotionHasOptimisedAnimation(e,"transform")){const{layout:s,layoutId:r}=i.options;window.MotionCancelOptimisedAnimation(e,"transform",kt,!(s||r))}const{parent:n}=i;n&&!n.hasCheckedOptimisedAppear&&pS(n)}function gS({attachResizeListener:i,defaultParent:t,measureScroll:e,checkIsScrollRoot:n,resetTransform:s}){return class{constructor(a={},o=t==null?void 0:t()){this.id=JL++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,Vl&&(ir.totalNodes=ir.resolvedTargetDeltas=ir.recalculatedProjection=0),this.nodes.forEach(nI),this.nodes.forEach(oI),this.nodes.forEach(lI),this.nodes.forEach(iI),Vl&&window.MotionDebug.record(ir)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=a,this.root=o?o.root||o:this,this.path=o?[...o.path,o]:[],this.parent=o,this.depth=o?o.depth+1:0;for(let l=0;l<this.path.length;l++)this.path[l].shouldResetTransform=!0;this.root===this&&(this.nodes=new VL)}addEventListener(a,o){return this.eventHandlers.has(a)||this.eventHandlers.set(a,new xm),this.eventHandlers.get(a).add(o)}notifyListeners(a,...o){const l=this.eventHandlers.get(a);l&&l.notify(...o)}hasListeners(a){return this.eventHandlers.has(a)}mount(a,o=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=jL(a),this.instance=a;const{layoutId:l,layout:h,visualElement:u}=this.options;if(u&&!u.current&&u.mount(a),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),o&&(h||l)&&(this.isLayoutDirty=!0),i){let d;const f=()=>this.root.updateBlockedByResize=!1;i(a,()=>{this.root.updateBlockedByResize=!0,d&&d(),d=HL(f,250),$u.hasAnimatedSinceResize&&($u.hasAnimatedSinceResize=!1,this.nodes.forEach(ab))})}l&&this.root.registerSharedNode(l,this),this.options.animate!==!1&&u&&(l||h)&&this.addEventListener("didUpdate",({delta:d,hasLayoutChanged:f,hasRelativeTargetChanged:p,layout:g})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const m=this.options.transition||u.getDefaultTransition()||fI,{onLayoutAnimationStart:v,onLayoutAnimationComplete:y}=u.getProps(),A=!this.targetLayout||!fS(this.targetLayout,g)||p,S=!f&&p;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||S||f&&(A||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(d,S);const E={...pm(m,"layout"),onPlay:v,onComplete:y};(u.shouldReduceMotion||this.options.layoutRoot)&&(E.delay=0,E.type=!1),this.startAnimation(E)}else f||ab(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=g})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const a=this.getStack();a&&a.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,Us(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(cI),this.animationId++)}getTransformTemplate(){const{visualElement:a}=this.options;return a&&a.getProps().transformTemplate}willUpdate(a=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&pS(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let u=0;u<this.path.length;u++){const d=this.path[u];d.shouldResetTransform=!0,d.updateScroll("snapshot"),d.options.layoutRoot&&d.willUpdate(!1)}const{layoutId:o,layout:l}=this.options;if(o===void 0&&!l)return;const h=this.getTransformTemplate();this.prevTransformTemplateValue=h?h(this.latestValues,""):void 0,this.updateSnapshot(),a&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(rb);return}this.isUpdating||this.nodes.forEach(rI),this.isUpdating=!1,this.nodes.forEach(aI),this.nodes.forEach(tI),this.nodes.forEach(eI),this.clearAllSnapshots();const o=mi.now();me.delta=ts(0,1e3/60,o-me.timestamp),me.timestamp=o,me.isProcessing=!0,Af.update.process(me),Af.preRender.process(me),Af.render.process(me),me.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,sm.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(sI),this.sharedNodes.forEach(hI)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,kt.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){kt.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let l=0;l<this.path.length;l++)this.path[l].updateScroll();const a=this.layout;this.layout=this.measure(!1),this.layoutCorrected=qt(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:o}=this.options;o&&o.notify("LayoutMeasure",this.layout.layoutBox,a?a.layoutBox:void 0)}updateScroll(a="measure"){let o=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===a&&(o=!1),o){const l=n(this.instance);this.scroll={animationId:this.root.animationId,phase:a,isRoot:l,offset:e(this.instance),wasRoot:this.scroll?this.scroll.isRoot:l}}}resetTransform(){if(!s)return;const a=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,o=this.projectionDelta&&!dS(this.projectionDelta),l=this.getTransformTemplate(),h=l?l(this.latestValues,""):void 0,u=h!==this.prevTransformTemplateValue;a&&(o||nr(this.latestValues)||u)&&(s(this.instance,h),this.shouldResetTransform=!1,this.scheduleRender())}measure(a=!0){const o=this.measurePageBox();let l=this.removeElementScroll(o);return a&&(l=this.removeTransform(l)),pI(l),{animationId:this.root.animationId,measuredBox:o,layoutBox:l,latestValues:{},source:this.id}}measurePageBox(){var a;const{visualElement:o}=this.options;if(!o)return qt();const l=o.measureViewportBox();if(!(((a=this.scroll)===null||a===void 0?void 0:a.wasRoot)||this.path.some(gI))){const{scroll:u}=this.root;u&&(Da(l.x,u.offset.x),Da(l.y,u.offset.y))}return l}removeElementScroll(a){var o;const l=qt();if(gn(l,a),!((o=this.scroll)===null||o===void 0)&&o.wasRoot)return l;for(let h=0;h<this.path.length;h++){const u=this.path[h],{scroll:d,options:f}=u;u!==this.root&&d&&f.layoutScroll&&(d.wasRoot&&gn(l,a),Da(l.x,d.offset.x),Da(l.y,d.offset.y))}return l}applyTransform(a,o=!1){const l=qt();gn(l,a);for(let h=0;h<this.path.length;h++){const u=this.path[h];!o&&u.options.layoutScroll&&u.scroll&&u!==u.root&&Oa(l,{x:-u.scroll.offset.x,y:-u.scroll.offset.y}),nr(u.latestValues)&&Oa(l,u.latestValues)}return nr(this.latestValues)&&Oa(l,this.latestValues),l}removeTransform(a){const o=qt();gn(o,a);for(let l=0;l<this.path.length;l++){const h=this.path[l];if(!h.instance||!nr(h.latestValues))continue;Sg(h.latestValues)&&h.updateSnapshot();const u=qt(),d=h.measurePageBox();gn(u,d),Zv(o,h.latestValues,h.snapshot?h.snapshot.layoutBox:void 0,u)}return nr(this.latestValues)&&Zv(o,this.latestValues),o}setTargetDelta(a){this.targetDelta=a,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(a){this.options={...this.options,...a,crossfade:a.crossfade!==void 0?a.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==me.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(a=!1){var o;const l=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=l.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=l.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=l.isSharedProjectionDirty);const h=!!this.resumingFrom||this!==l;if(!(a||h&&this.isSharedProjectionDirty||this.isProjectionDirty||!((o=this.parent)===null||o===void 0)&&o.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:d,layoutId:f}=this.options;if(!(!this.layout||!(d||f))){if(this.resolvedRelativeTargetAt=me.timestamp,!this.targetDelta&&!this.relativeTarget){const p=this.getClosestProjectingParent();p&&p.layout&&this.animationProgress!==1?(this.relativeParent=p,this.forceRelativeParentToResolveTarget(),this.relativeTarget=qt(),this.relativeTargetOrigin=qt(),Kl(this.relativeTargetOrigin,this.layout.layoutBox,p.layout.layoutBox),gn(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=qt(),this.targetWithTransforms=qt()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),vL(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):gn(this.target,this.layout.layoutBox),aS(this.target,this.targetDelta)):gn(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const p=this.getClosestProjectingParent();p&&!!p.resumingFrom==!!this.resumingFrom&&!p.options.layoutScroll&&p.target&&this.animationProgress!==1?(this.relativeParent=p,this.forceRelativeParentToResolveTarget(),this.relativeTarget=qt(),this.relativeTargetOrigin=qt(),Kl(this.relativeTargetOrigin,this.target,p.target),gn(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}Vl&&ir.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||Sg(this.parent.latestValues)||rS(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var a;const o=this.getLead(),l=!!this.resumingFrom||this!==o;let h=!0;if((this.isProjectionDirty||!((a=this.parent)===null||a===void 0)&&a.isProjectionDirty)&&(h=!1),l&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(h=!1),this.resolvedRelativeTargetAt===me.timestamp&&(h=!1),h)return;const{layout:u,layoutId:d}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(u||d))return;gn(this.layoutCorrected,this.layout.layoutBox);const f=this.treeScale.x,p=this.treeScale.y;CL(this.layoutCorrected,this.treeScale,this.path,l),o.layout&&!o.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(o.target=o.layout.layoutBox,o.targetWithTransforms=qt());const{target:g}=o;if(!g){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(Kv(this.prevProjectionDelta.x,this.projectionDelta.x),Kv(this.prevProjectionDelta.y,this.projectionDelta.y)),Xl(this.projectionDelta,this.layoutCorrected,g,this.latestValues),(this.treeScale.x!==f||this.treeScale.y!==p||!ib(this.projectionDelta.x,this.prevProjectionDelta.x)||!ib(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",g)),Vl&&ir.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(a=!0){var o;if((o=this.options.visualElement)===null||o===void 0||o.scheduleRender(),a){const l=this.getStack();l&&l.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=Ia(),this.projectionDelta=Ia(),this.projectionDeltaWithTransform=Ia()}setAnimationOrigin(a,o=!1){const l=this.snapshot,h=l?l.latestValues:{},u={...this.latestValues},d=Ia();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!o;const f=qt(),p=l?l.source:void 0,g=this.layout?this.layout.source:void 0,m=p!==g,v=this.getStack(),y=!v||v.members.length<=1,A=!!(m&&!y&&this.options.crossfade===!0&&!this.path.some(dI));this.animationProgress=0;let S;this.mixTargetDelta=E=>{const T=E/1e3;ob(d.x,a.x,T),ob(d.y,a.y,T),this.setTargetDelta(d),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(Kl(f,this.layout.layoutBox,this.relativeParent.layout.layoutBox),uI(this.relativeTarget,this.relativeTargetOrigin,f,T),S&&KL(this.relativeTarget,S)&&(this.isProjectionDirty=!1),S||(S=qt()),gn(S,this.relativeTarget)),m&&(this.animationValues=u,UL(u,h,this.latestValues,T,A,y)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=T},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(a){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(Us(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=kt.update(()=>{$u.hasAnimatedSinceResize=!0,this.currentAnimation=NL(0,sb,{...a,onUpdate:o=>{this.mixTargetDelta(o),a.onUpdate&&a.onUpdate(o)},onComplete:()=>{a.onComplete&&a.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const a=this.getStack();a&&a.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(sb),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const a=this.getLead();let{targetWithTransforms:o,target:l,layout:h,latestValues:u}=a;if(!(!o||!l||!h)){if(this!==a&&this.layout&&h&&mS(this.options.animationType,this.layout.layoutBox,h.layoutBox)){l=this.target||qt();const d=fn(this.layout.layoutBox.x);l.x.min=a.target.x.min,l.x.max=l.x.min+d;const f=fn(this.layout.layoutBox.y);l.y.min=a.target.y.min,l.y.max=l.y.min+f}gn(o,l),Oa(o,u),Xl(this.projectionDeltaWithTransform,this.layoutCorrected,o,u)}}registerSharedNode(a,o){this.sharedNodes.has(a)||this.sharedNodes.set(a,new YL),this.sharedNodes.get(a).add(o);const h=o.options.initialPromotionConfig;o.promote({transition:h?h.transition:void 0,preserveFollowOpacity:h&&h.shouldPreserveFollowOpacity?h.shouldPreserveFollowOpacity(o):void 0})}isLead(){const a=this.getStack();return a?a.lead===this:!0}getLead(){var a;const{layoutId:o}=this.options;return o?((a=this.getStack())===null||a===void 0?void 0:a.lead)||this:this}getPrevLead(){var a;const{layoutId:o}=this.options;return o?(a=this.getStack())===null||a===void 0?void 0:a.prevLead:void 0}getStack(){const{layoutId:a}=this.options;if(a)return this.root.sharedNodes.get(a)}promote({needsReset:a,transition:o,preserveFollowOpacity:l}={}){const h=this.getStack();h&&h.promote(this,l),a&&(this.projectionDelta=void 0,this.needsReset=!0),o&&this.setOptions({transition:o})}relegate(){const a=this.getStack();return a?a.relegate(this):!1}resetSkewAndRotation(){const{visualElement:a}=this.options;if(!a)return;let o=!1;const{latestValues:l}=a;if((l.z||l.rotate||l.rotateX||l.rotateY||l.rotateZ||l.skewX||l.skewY)&&(o=!0),!o)return;const h={};l.z&&Mf("z",a,h,this.animationValues);for(let u=0;u<kf.length;u++)Mf(`rotate${kf[u]}`,a,h,this.animationValues),Mf(`skew${kf[u]}`,a,h,this.animationValues);a.render();for(const u in h)a.setStaticValue(u,h[u]),this.animationValues&&(this.animationValues[u]=h[u]);a.scheduleRender()}getProjectionStyles(a){var o,l;if(!this.instance||this.isSVG)return;if(!this.isVisible)return ZL;const h={visibility:""},u=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,h.opacity="",h.pointerEvents=Vu(a==null?void 0:a.pointerEvents)||"",h.transform=u?u(this.latestValues,""):"none",h;const d=this.getLead();if(!this.projectionDelta||!this.layout||!d.target){const m={};return this.options.layoutId&&(m.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,m.pointerEvents=Vu(a==null?void 0:a.pointerEvents)||""),this.hasProjected&&!nr(this.latestValues)&&(m.transform=u?u({},""):"none",this.hasProjected=!1),m}const f=d.animationValues||d.latestValues;this.applyTransformsToTarget(),h.transform=QL(this.projectionDeltaWithTransform,this.treeScale,f),u&&(h.transform=u(f,h.transform));const{x:p,y:g}=this.projectionDelta;h.transformOrigin=`${p.origin*100}% ${g.origin*100}% 0`,d.animationValues?h.opacity=d===this?(l=(o=f.opacity)!==null&&o!==void 0?o:this.latestValues.opacity)!==null&&l!==void 0?l:1:this.preserveOpacity?this.latestValues.opacity:f.opacityExit:h.opacity=d===this?f.opacity!==void 0?f.opacity:"":f.opacityExit!==void 0?f.opacityExit:0;for(const m in nd){if(f[m]===void 0)continue;const{correct:v,applyTo:y}=nd[m],A=h.transform==="none"?f[m]:v(f[m],d);if(y){const S=y.length;for(let E=0;E<S;E++)h[y[E]]=A}else h[m]=A}return this.options.layoutId&&(h.pointerEvents=d===this?Vu(a==null?void 0:a.pointerEvents)||"":"none"),h}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(a=>{var o;return(o=a.currentAnimation)===null||o===void 0?void 0:o.stop()}),this.root.nodes.forEach(rb),this.root.sharedNodes.clear()}}}function tI(i){i.updateLayout()}function eI(i){var t;const e=((t=i.resumeFrom)===null||t===void 0?void 0:t.snapshot)||i.snapshot;if(i.isLead()&&i.layout&&e&&i.hasListeners("didUpdate")){const{layoutBox:n,measuredBox:s}=i.layout,{animationType:r}=i.options,a=e.source!==i.layout.source;r==="size"?mn(d=>{const f=a?e.measuredBox[d]:e.layoutBox[d],p=fn(f);f.min=n[d].min,f.max=f.min+p}):mS(r,e.layoutBox,n)&&mn(d=>{const f=a?e.measuredBox[d]:e.layoutBox[d],p=fn(n[d]);f.max=f.min+p,i.relativeTarget&&!i.currentAnimation&&(i.isProjectionDirty=!0,i.relativeTarget[d].max=i.relativeTarget[d].min+p)});const o=Ia();Xl(o,n,e.layoutBox);const l=Ia();a?Xl(l,i.applyTransform(s,!0),e.measuredBox):Xl(l,n,e.layoutBox);const h=!dS(o);let u=!1;if(!i.resumeFrom){const d=i.getClosestProjectingParent();if(d&&!d.resumeFrom){const{snapshot:f,layout:p}=d;if(f&&p){const g=qt();Kl(g,e.layoutBox,f.layoutBox);const m=qt();Kl(m,n,p.layoutBox),fS(g,m)||(u=!0),d.options.layoutRoot&&(i.relativeTarget=m,i.relativeTargetOrigin=g,i.relativeParent=d)}}}i.notifyListeners("didUpdate",{layout:n,snapshot:e,delta:l,layoutDelta:o,hasLayoutChanged:h,hasRelativeTargetChanged:u})}else if(i.isLead()){const{onExitComplete:n}=i.options;n&&n()}i.options.transition=void 0}function nI(i){Vl&&ir.totalNodes++,i.parent&&(i.isProjecting()||(i.isProjectionDirty=i.parent.isProjectionDirty),i.isSharedProjectionDirty||(i.isSharedProjectionDirty=!!(i.isProjectionDirty||i.parent.isProjectionDirty||i.parent.isSharedProjectionDirty)),i.isTransformDirty||(i.isTransformDirty=i.parent.isTransformDirty))}function iI(i){i.isProjectionDirty=i.isSharedProjectionDirty=i.isTransformDirty=!1}function sI(i){i.clearSnapshot()}function rb(i){i.clearMeasurements()}function rI(i){i.isLayoutDirty=!1}function aI(i){const{visualElement:t}=i.options;t&&t.getProps().onBeforeLayoutMeasure&&t.notify("BeforeLayoutMeasure"),i.resetTransform()}function ab(i){i.finishAnimation(),i.targetDelta=i.relativeTarget=i.target=void 0,i.isProjectionDirty=!0}function oI(i){i.resolveTargetDelta()}function lI(i){i.calcProjection()}function cI(i){i.resetSkewAndRotation()}function hI(i){i.removeLeadSnapshot()}function ob(i,t,e){i.translate=Bt(t.translate,0,e),i.scale=Bt(t.scale,1,e),i.origin=t.origin,i.originPoint=t.originPoint}function lb(i,t,e,n){i.min=Bt(t.min,e.min,n),i.max=Bt(t.max,e.max,n)}function uI(i,t,e,n){lb(i.x,t.x,e.x,n),lb(i.y,t.y,e.y,n)}function dI(i){return i.animationValues&&i.animationValues.opacityExit!==void 0}const fI={duration:.45,ease:[.4,0,.1,1]},cb=i=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(i),hb=cb("applewebkit/")&&!cb("chrome/")?Math.round:un;function ub(i){i.min=hb(i.min),i.max=hb(i.max)}function pI(i){ub(i.x),ub(i.y)}function mS(i,t,e){return i==="position"||i==="preserve-aspect"&&!yL(nb(t),nb(e),.2)}function gI(i){var t;return i!==i.root&&((t=i.scroll)===null||t===void 0?void 0:t.wasRoot)}const mI=gS({attachResizeListener:(i,t)=>rc(i,"resize",t),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),Lf={current:void 0},yS=gS({measureScroll:i=>({x:i.scrollLeft,y:i.scrollTop}),defaultParent:()=>{if(!Lf.current){const i=new mI({});i.mount(window),i.setOptions({layoutScroll:!0}),Lf.current=i}return Lf.current},resetTransform:(i,t)=>{i.style.transform=t!==void 0?t:"none"},checkIsScrollRoot:i=>window.getComputedStyle(i).position==="fixed"}),yI={pan:{Feature:IL},drag:{Feature:LL,ProjectionNode:yS,MeasureLayout:cS}};function db(i,t,e){const{props:n}=i;i.animationState&&n.whileHover&&i.animationState.setActive("whileHover",e==="Start");const s="onHover"+e,r=n[s];r&&kt.postRender(()=>r(t,Rh(t)))}class vI extends Ks{mount(){const{current:t}=this.node;t&&(this.unmount=yk(t,e=>(db(this.node,e,"Start"),n=>db(this.node,n,"End"))))}unmount(){}}class bI extends Ks{constructor(){super(...arguments),this.isActive=!1}onFocus(){let t=!1;try{t=this.node.current.matches(":focus-visible")}catch{t=!0}!t||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Ph(rc(this.node.current,"focus",()=>this.onFocus()),rc(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function fb(i,t,e){const{props:n}=i;i.animationState&&n.whileTap&&i.animationState.setActive("whileTap",e==="Start");const s="onTap"+(e==="End"?"":e),r=n[s];r&&kt.postRender(()=>r(t,Rh(t)))}class xI extends Ks{mount(){const{current:t}=this.node;t&&(this.unmount=Ak(t,e=>(fb(this.node,e,"Start"),(n,{success:s})=>fb(this.node,n,s?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const _g=new WeakMap,If=new WeakMap,AI=i=>{const t=_g.get(i.target);t&&t(i)},wI=i=>{i.forEach(AI)};function SI({root:i,...t}){const e=i||document;If.has(e)||If.set(e,{});const n=If.get(e),s=JSON.stringify(t);return n[s]||(n[s]=new IntersectionObserver(wI,{root:i,...t})),n[s]}function EI(i,t,e){const n=SI(t);return _g.set(i,e),n.observe(i),()=>{_g.delete(i),n.unobserve(i)}}const _I={some:0,all:1};class TI extends Ks{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:t={}}=this.node.getProps(),{root:e,margin:n,amount:s="some",once:r}=t,a={root:e?e.current:void 0,rootMargin:n,threshold:typeof s=="number"?s:_I[s]},o=l=>{const{isIntersecting:h}=l;if(this.isInView===h||(this.isInView=h,r&&!h&&this.hasEnteredView))return;h&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",h);const{onViewportEnter:u,onViewportLeave:d}=this.node.getProps(),f=h?u:d;f&&f(l)};return EI(this.node.current,a,o)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:t,prevProps:e}=this.node;["amount","margin","root"].some(CI(t,e))&&this.startObserver()}unmount(){}}function CI({viewport:i={}},{viewport:t={}}={}){return e=>i[e]!==t[e]}const PI={inView:{Feature:TI},tap:{Feature:xI},focus:{Feature:bI},hover:{Feature:vI}},RI={layout:{ProjectionNode:yS,MeasureLayout:cS}},Tg={current:null},vS={current:!1};function kI(){if(vS.current=!0,!!Jg)if(window.matchMedia){const i=window.matchMedia("(prefers-reduced-motion)"),t=()=>Tg.current=i.matches;i.addListener(t),t()}else Tg.current=!1}const MI=[...Uw,Te,Ws],LI=i=>MI.find($w(i)),pb=new WeakMap;function II(i,t,e){for(const n in t){const s=t[n],r=e[n];if(Pe(s))i.addValue(n,s);else if(Pe(r))i.addValue(n,ic(s,{owner:i}));else if(r!==s)if(i.hasValue(n)){const a=i.getValue(n);a.liveStyle===!0?a.jump(s):a.hasAnimated||a.set(s)}else{const a=i.getStaticValue(n);i.addValue(n,ic(a!==void 0?a:s,{owner:i}))}}for(const n in e)t[n]===void 0&&i.removeValue(n);return t}const gb=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class DI{scrapeMotionValuesFromProps(t,e,n){return{}}constructor({parent:t,props:e,presenceContext:n,reducedMotionConfig:s,blockInitialAnimation:r,visualState:a},o={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=Tm,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const p=mi.now();this.renderScheduledAt<p&&(this.renderScheduledAt=p,kt.render(this.render,!1,!0))};const{latestValues:l,renderState:h,onUpdate:u}=a;this.onUpdate=u,this.latestValues=l,this.baseTarget={...l},this.initialValues=e.initial?{...l}:{},this.renderState=h,this.parent=t,this.props=e,this.presenceContext=n,this.depth=t?t.depth+1:0,this.reducedMotionConfig=s,this.options=o,this.blockInitialAnimation=!!r,this.isControllingVariants=Qd(e),this.isVariantNode=QA(e),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(t&&t.current);const{willChange:d,...f}=this.scrapeMotionValuesFromProps(e,{},this);for(const p in f){const g=f[p];l[p]!==void 0&&Pe(g)&&g.set(l[p],!1)}}mount(t){this.current=t,pb.set(t,this),this.projection&&!this.projection.instance&&this.projection.mount(t),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((e,n)=>this.bindToMotionValue(n,e)),vS.current||kI(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:Tg.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){pb.delete(this.current),this.projection&&this.projection.unmount(),Us(this.notifyUpdate),Us(this.render),this.valueSubscriptions.forEach(t=>t()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const t in this.events)this.events[t].clear();for(const t in this.features){const e=this.features[t];e&&(e.unmount(),e.isMounted=!1)}this.current=null}bindToMotionValue(t,e){this.valueSubscriptions.has(t)&&this.valueSubscriptions.get(t)();const n=ya.has(t),s=e.on("change",o=>{this.latestValues[t]=o,this.props.onUpdate&&kt.preRender(this.notifyUpdate),n&&this.projection&&(this.projection.isTransformDirty=!0)}),r=e.on("renderRequest",this.scheduleRender);let a;window.MotionCheckAppearSync&&(a=window.MotionCheckAppearSync(this,t,e)),this.valueSubscriptions.set(t,()=>{s(),r(),a&&a(),e.owner&&e.stop()})}sortNodePosition(t){return!this.current||!this.sortInstanceNodePosition||this.type!==t.type?0:this.sortInstanceNodePosition(this.current,t.current)}updateFeatures(){let t="animation";for(t in Ko){const e=Ko[t];if(!e)continue;const{isEnabled:n,Feature:s}=e;if(!this.features[t]&&s&&n(this.props)&&(this.features[t]=new s(this)),this.features[t]){const r=this.features[t];r.isMounted?r.update():(r.mount(),r.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):qt()}getStaticValue(t){return this.latestValues[t]}setStaticValue(t,e){this.latestValues[t]=e}update(t,e){(t.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=t,this.prevPresenceContext=this.presenceContext,this.presenceContext=e;for(let n=0;n<gb.length;n++){const s=gb[n];this.propEventSubscriptions[s]&&(this.propEventSubscriptions[s](),delete this.propEventSubscriptions[s]);const r="on"+s,a=t[r];a&&(this.propEventSubscriptions[s]=this.on(s,a))}this.prevMotionValues=II(this,this.scrapeMotionValuesFromProps(t,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue(),this.onUpdate&&this.onUpdate(this)}getProps(){return this.props}getVariant(t){return this.props.variants?this.props.variants[t]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(t){const e=this.getClosestVariantNode();if(e)return e.variantChildren&&e.variantChildren.add(t),()=>e.variantChildren.delete(t)}addValue(t,e){const n=this.values.get(t);e!==n&&(n&&this.removeValue(t),this.bindToMotionValue(t,e),this.values.set(t,e),this.latestValues[t]=e.get())}removeValue(t){this.values.delete(t);const e=this.valueSubscriptions.get(t);e&&(e(),this.valueSubscriptions.delete(t)),delete this.latestValues[t],this.removeValueFromRenderState(t,this.renderState)}hasValue(t){return this.values.has(t)}getValue(t,e){if(this.props.values&&this.props.values[t])return this.props.values[t];let n=this.values.get(t);return n===void 0&&e!==void 0&&(n=ic(e===null?void 0:e,{owner:this}),this.addValue(t,n)),n}readValue(t,e){var n;let s=this.latestValues[t]!==void 0||!this.current?this.latestValues[t]:(n=this.getBaseTargetFromProps(this.props,t))!==null&&n!==void 0?n:this.readValueFromInstance(this.current,t,this.options);return s!=null&&(typeof s=="string"&&(Vw(s)||Mw(s))?s=parseFloat(s):!LI(s)&&Ws.test(e)&&(s=Nw(t,e)),this.setBaseTarget(t,Pe(s)?s.get():s)),Pe(s)?s.get():s}setBaseTarget(t,e){this.baseTarget[t]=e}getBaseTarget(t){var e;const{initial:n}=this.props;let s;if(typeof n=="string"||typeof n=="object"){const a=am(this.props,n,(e=this.presenceContext)===null||e===void 0?void 0:e.custom);a&&(s=a[t])}if(n&&s!==void 0)return s;const r=this.getBaseTargetFromProps(this.props,t);return r!==void 0&&!Pe(r)?r:this.initialValues[t]!==void 0&&s===void 0?void 0:this.baseTarget[t]}on(t,e){return this.events[t]||(this.events[t]=new xm),this.events[t].add(e)}notify(t,...e){this.events[t]&&this.events[t].notify(...e)}}class bS extends DI{constructor(){super(...arguments),this.KeyframeResolver=Ww}sortInstanceNodePosition(t,e){return t.compareDocumentPosition(e)&2?1:-1}getBaseTargetFromProps(t,e){return t.style?t.style[e]:void 0}removeValueFromRenderState(t,{vars:e,style:n}){delete e[t],delete n[t]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:t}=this.props;Pe(t)&&(this.childSubscription=t.on("change",e=>{this.current&&(this.current.textContent=`${e}`)}))}}function OI(i){return window.getComputedStyle(i)}class FI extends bS{constructor(){super(...arguments),this.type="html",this.renderInstance=aw}readValueFromInstance(t,e){if(ya.has(e)){const n=_m(e);return n&&n.default||0}else{const n=OI(t),s=(iw(e)?n.getPropertyValue(e):n[e])||0;return typeof s=="string"?s.trim():s}}measureInstanceViewportBox(t,{transformPagePoint:e}){return oS(t,e)}build(t,e,n){cm(t,e,n.transformTemplate)}scrapeMotionValuesFromProps(t,e,n){return fm(t,e,n)}}class NI extends bS{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=qt}getBaseTargetFromProps(t,e){return t[e]}readValueFromInstance(t,e){if(ya.has(e)){const n=_m(e);return n&&n.default||0}return e=ow.has(e)?e:im(e),t.getAttribute(e)}scrapeMotionValuesFromProps(t,e,n){return hw(t,e,n)}build(t,e,n){hm(t,e,this.isSVGTag,n.transformTemplate)}renderInstance(t,e,n,s){lw(t,e,n,s)}mount(t){this.isSVGTag=dm(t.tagName),super.mount(t)}}const jI=(i,t)=>rm(i)?new NI(t):new FI(t,{allowProjection:i!==P.Fragment}),BI=hk({...lL,...PI,...yI,...RI},jI),ze=_R(BI),VI=P.createContext(null),HI=()=>{const i=P.useContext(VI);if(!i)throw new Error("useTheme must be used within a ThemeProvider");return i},$I=()=>{const{mode:i,toggleTheme:t}=HI();return{mode:i,toggleTheme:t}};var dl={},mb;function UI(){if(mb)return dl;mb=1;var i=Ke();Object.defineProperty(dl,"__esModule",{value:!0}),dl.default=void 0;var t=i(Qe()),e=Ye();return dl.default=(0,t.default)((0,e.jsx)("path",{d:"M20 8.69V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12zM12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12s-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6c3.31 0 6 2.69 6 6s-2.69 6-6 6"}),"Brightness4"),dl}var WI=UI();const zI=Ne(WI);var fl={},yb;function GI(){if(yb)return fl;yb=1;var i=Ke();Object.defineProperty(fl,"__esModule",{value:!0}),fl.default=void 0;var t=i(Qe()),e=Ye();return fl.default=(0,t.default)((0,e.jsx)("path",{d:"M20 8.69V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12zM12 18c-3.31 0-6-2.69-6-6s2.69-6 6-6 6 2.69 6 6-2.69 6-6 6m0-10c-2.21 0-4 1.79-4 4s1.79 4 4 4 4-1.79 4-4-1.79-4-4-4"}),"Brightness7"),fl}var qI=GI();const XI=Ne(qI),vb=({onToggle:i,mode:t,variant:e="icon"})=>{const n=Re(),s=t==="dark"?"Switch to light mode":"Switch to dark mode",r=t==="dark"?C.jsx(XI,{}):C.jsx(zI,{});return e==="button"?C.jsx(_n,{onClick:i,fullWidth:!0,variant:"text",color:"inherit","aria-label":s,sx:{py:1.2,borderRadius:2,fontWeight:600,fontSize:"1.05rem",textTransform:"none",justifyContent:"flex-start",fontFamily:n.typography.fontFamily,color:n.palette.text.primary,mb:1,"&:hover":{backgroundColor:n.palette.action.hover}},startIcon:r,children:t==="dark"?"Light Mode":"Dark Mode"}):C.jsx(qS,{title:s,children:C.jsx(pi,{onClick:i,color:"inherit","aria-label":s,sx:{p:1,borderRadius:"50%",color:n.palette.text.primary,backgroundColor:n.palette.mode==="dark"?"rgba(255, 255, 255, 0.08)":"rgba(0, 0, 0, 0.08)",transition:"all 0.3s ease","&:hover":{backgroundColor:n.palette.mode==="dark"?"rgba(255, 255, 255, 0.15)":"rgba(0, 0, 0, 0.15)"}},children:r})})},Df=[{id:"home",label:"Home",path:"/",exact:!0},{id:"work",label:"Work",path:"/work"},{id:"about",label:"About",path:"/about"},{id:"contact",label:"Contact",path:"/contact",isCallToAction:!0}],KI=[{id:"github",label:"GitHub",url:"https://github.com/YungSeepferd",icon:"GitHub"},{id:"linkedin",label:"LinkedIn",url:"https://www.linkedin.com/in/vincent-goeke/",icon:"LinkedIn"},{id:"twitter",label:"Twitter",url:"https://twitter.com/vincentgoeke",icon:"Twitter"}];function YI({navItems:i,variant:t="desktop",onClick:e}){const n=s=>{UA.scroller.scrollTo(s,{smooth:!0,offset:-70,duration:500}),e&&e()};return t==="mobile"?C.jsx(C.Fragment,{children:i.map(s=>C.jsx(XS,{disablePadding:!0,sx:{justifyContent:"center",mb:1},children:C.jsx(_n,{variant:s.isCallToAction?"contained":"text",color:s.isCallToAction?"secondary":"inherit",fullWidth:!0,sx:{py:1.5,borderRadius:s.isCallToAction?"50px":"default",textTransform:"none"},onClick:()=>n(s.id),children:s.label})},s.id))}):C.jsx(KS,{direction:"row",alignItems:"center",gap:2,pr:{md:3,lg:5},children:i.map((s,r)=>C.jsx(_n,{variant:s.isCallToAction?"contained":"text",color:s.isCallToAction?"secondary":"inherit",sx:{ml:r===0?0:2,px:s.isCallToAction?3:2,py:s.isCallToAction?.5:"auto",borderRadius:s.isCallToAction?"50px":"default",position:"relative",textTransform:"none",fontWeight:500},onClick:()=>n(s.id),children:s.label},s.id))})}const QI=()=>{const i=Re(),{mode:t,toggleTheme:e}=$I(),[n,s]=P.useState(!1),[r,a]=P.useState(!1),[o,l]=P.useState(null),h=ut.useRef(!0),u=P.useMemo(()=>({initial:h.current?{y:-100,opacity:0}:{y:0,opacity:1},animate:{y:0,opacity:1},transition:{duration:.5,ease:"easeOut",delay:.2}}),[]);P.useEffect(()=>{h.current&&(h.current=!1);const g=()=>{a(window.scrollY>20)};return window.addEventListener("scroll",g,{passive:!0}),g(),()=>{window.removeEventListener("scroll",g)}},[]);const d=g=>{l(g.currentTarget),s(!0)},f=()=>{l(null),s(!1)},p=t==="dark"?i.custom.overlays.header.dark:i.custom.overlays.header.light;return C.jsxs(ze.div,{initial:u.initial,animate:u.animate,transition:u.transition,children:[C.jsx(iu,{position:"fixed",elevation:r?4:0,sx:{backgroundColor:r?i.palette.background.paper:p,transition:i.transitions.create(["background-color","box-shadow"],{duration:.3}),backdropFilter:"blur(10px)",borderBottom:r?`1px solid ${i.palette.divider}`:"none",color:i.palette.text.primary,width:"100vw",maxWidth:"100vw",left:0},children:C.jsx(Pb,{maxWidth:!1,disableGutters:!0,sx:{px:0,width:"100vw",maxWidth:"100vw",mx:0},children:C.jsxs(su,{sx:{minHeight:{xs:56,sm:64},px:0,justifyContent:"space-between"},children:[C.jsxs(G,{sx:{display:"flex",alignItems:"center",gap:1.5},children:[C.jsx(UA.Link,{to:"hero",spy:!0,smooth:!0,offset:-70,duration:500,children:C.jsx(G,{component:"div",sx:{cursor:"pointer",fontWeight:700,fontSize:"1.5rem",letterSpacing:"-0.5px",color:i.palette.text.primary,fontFamily:i.typography.fontFamily,paddingLeft:{xs:"15px",sm:"6px",md:"40px",lg:"20px"},transition:"padding 0.2s",display:"flex",alignItems:"center"},children:"WORK IN PROGRESS"})}),KI.map(g=>g.icon==="LinkedIn"&&C.jsx(pi,{href:g.url,target:"_blank",size:"small",sx:{ml:1,color:i.palette.secondary.dark,backgroundColor:i.custom.overlays.socialIcon.base,"&:hover":{backgroundColor:i.custom.overlays.socialIcon.hover},p:.5},"aria-label":g.label,children:C.jsx(WA,{fontSize:"small"})},g.id))]}),C.jsxs(G,{sx:{display:{xs:"none",md:"flex"},alignItems:"center"},children:[C.jsx(YI,{navItems:Df,variant:"desktop"}),C.jsx(G,{sx:{ml:1},children:C.jsx(vb,{mode:t,onToggle:e,variant:"icon"})})]}),C.jsx(pi,{color:"inherit","aria-label":"open drawer",edge:"end",onClick:d,sx:{display:{md:"none"},ml:0,position:"absolute",right:i.custom.header.burgerMenuOffset.right,top:i.custom.header.burgerMenuOffset.top,zIndex:1201},children:C.jsx(dR,{})})]})})}),C.jsx(YS,{open:!!o&&n,anchorEl:o,onClose:f,anchorOrigin:{vertical:"bottom",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"},PaperProps:{sx:{mt:1.5,ml:0,borderRadius:3,boxShadow:4,minWidth:180,maxWidth:"90vw",p:2,background:g=>g.palette.background.paper,display:{xs:"flex",md:"none"},flexDirection:"column",alignItems:"stretch",gap:1.5,position:"relative"}},disableScrollLock:!0,children:C.jsxs(Rb,{elevation:0,sx:{background:"none",boxShadow:"none",p:0},children:[C.jsxs(G,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:1},children:[C.jsx(G,{sx:{fontWeight:700,fontSize:"1.1rem",color:i.palette.secondary.main,pl:1,fontFamily:i.typography.fontFamily},children:"Menu"}),C.jsx(pi,{size:"small",onClick:f,sx:{ml:1},"aria-label":"Close menu",children:C.jsx(Ul,{})})]}),C.jsxs(QS,{children:[C.jsx(vb,{mode:t,onToggle:e,variant:"button"}),Df.map((g,m)=>C.jsx(_n,{variant:g.isCallToAction?"contained":"text",color:g.isCallToAction?"secondary":"inherit",fullWidth:!0,sx:{py:1.2,borderRadius:2,fontWeight:600,fontSize:"1.05rem",mb:m===Df.length-1?2:0,textTransform:"none",justifyContent:"flex-start",fontFamily:i.typography.fontFamily},onClick:()=>{var y;f();const v=g.target||g.id;(y=document.getElementById(v))==null||y.scrollIntoView({behavior:"smooth",block:"start"})},children:g.label},g.id))]})]})})]},"header-animation")};var pl={},bb;function ZI(){if(bb)return pl;bb=1;var i=Ke();Object.defineProperty(pl,"__esModule",{value:!0}),pl.default=void 0;var t=i(Qe()),e=Ye();return pl.default=(0,t.default)((0,e.jsx)("path",{d:"M20 4H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2m0 4-8 5-8-5V6l8 5 8-5z"}),"Email"),pl}var JI=ZI();const tD=Ne(JI);var gl={},xb;function eD(){if(xb)return gl;xb=1;var i=Ke();Object.defineProperty(gl,"__esModule",{value:!0}),gl.default=void 0,s(qs());var t=i(Qe()),e=Ye();function n(r){if(typeof WeakMap!="function")return null;var a=new WeakMap,o=new WeakMap;return(n=function(l){return l?o:a})(r)}function s(r,a){if(r&&r.__esModule)return r;if(r===null||typeof r!="object"&&typeof r!="function")return{default:r};var o=n(a);if(o&&o.has(r))return o.get(r);var l={__proto__:null},h=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in r)if(u!=="default"&&Object.prototype.hasOwnProperty.call(r,u)){var d=h?Object.getOwnPropertyDescriptor(r,u):null;d&&(d.get||d.set)?Object.defineProperty(l,u,d):l[u]=r[u]}return l.default=r,o&&o.set(r,l),l}return gl.default=(0,t.default)((0,e.jsx)("path",{d:"M12 1.27a11 11 0 00-3.48 21.46c.55.09.73-.28.73-.55v-1.84c-3.03.64-3.67-1.46-3.67-1.46-.55-1.29-1.28-1.65-1.28-1.65-.92-.65.1-.65.1-.65 1.1 0 1.73 1.1 1.73 1.1.92 1.65 2.57 1.2 3.21.92a2 2 0 01.64-1.47c-2.47-.27-5.04-1.19-5.04-5.5 0-1.1.46-2.1 1.2-2.84a3.76 3.76 0 010-2.93s.91-.28 3.11 1.1c1.8-.49 3.7-.49 5.5 0 2.1-1.38 3.02-1.1 3.02-1.1a3.76 3.76 0 010 2.93c.83.74 1.2 1.74 1.2 2.94 0 4.21-2.57 5.13-5.04 5.4.45.37.82.92.82 2.02v3.03c0 .27.1.64.73.55A11 11 0 0012 1.27"}),"GitHub"),gl}var nD=eD();const iD=Ne(nD),sD=({projectContext:i})=>{const t=Re(),e=i?`mailto:goeke.vincent@gmail.com?subject=${encodeURIComponent(`Regarding your ${i} project`)}`:`mailto:goeke.vincent@gmail.com?subject=${encodeURIComponent("Contact from Portfolio")}`,n=i?`Interested in discussing more about the ${i} project? I'd love to share insights about the process and outcomes!`:"If you want to chat about UX, audio design, haptic design or just say hello, I'd love to hear from you! Let's schedule a call or connect through any of these channels.";return C.jsx(G,{component:"footer",id:"footer-contact",sx:{width:"100vw",maxWidth:"100vw",padding:0,marginBottom:0,textAlign:"left"},children:C.jsx(ze.div,{initial:{opacity:0,y:50},whileInView:{opacity:1,y:0},transition:{duration:.5},viewport:{once:!0},style:{width:"100%"},children:C.jsx(Rb,{id:"contact",elevation:3,square:!0,sx:{background:`linear-gradient(135deg, ${t.palette.primary.main} 0%, ${t.palette.primary.dark} 100%)`,overflow:"hidden",position:"relative",py:8,minHeight:"500px"},children:C.jsx(G,{sx:{width:"100%",px:{xs:"20px",sm:"30px",md:"40px",lg:"50px"},boxSizing:"border-box",position:"relative",zIndex:2},children:C.jsx(Uu,{container:!0,spacing:4,justifyContent:"center",children:C.jsx(Uu,{item:!0,xs:12,children:C.jsx(kb,{elevation:6,sx:{backgroundColor:t.custom.overlays.contactCard.background,backdropFilter:"blur(10px)",color:t.palette.common.white,border:t.custom.overlays.contactCard.border,height:"100%",maxWidth:"900px",mx:"auto"},children:C.jsxs(Mb,{sx:{p:4},children:[C.jsx(dt,{variant:"h3",gutterBottom:!0,sx:{color:t.palette.common.white,fontWeight:"bold",mb:3},children:"Let's Connect!"}),C.jsx(dt,{variant:"body1",sx:{color:t.palette.common.white,mb:3,opacity:.9,maxWidth:"700px"},children:n}),C.jsxs(G,{sx:{mt:4,display:"flex",gap:2,flexWrap:"wrap"},children:[C.jsx(_n,{variant:"contained",color:"secondary",size:"large",startIcon:C.jsx(tD,{}),href:e,sx:{fontWeight:"bold",textTransform:"none",fontSize:"1rem"},children:"Email Me"}),C.jsx(pi,{component:"a",href:"https://www.linkedin.com/in/vincent-goeke/",target:"_blank",rel:"noopener noreferrer",sx:{color:t.palette.common.white,"&:hover":{color:t.palette.secondary.main}},children:C.jsx(WA,{fontSize:"large"})}),C.jsx(pi,{component:"a",href:"https://github.com/YungSeepferd",target:"_blank",rel:"noopener noreferrer",sx:{color:t.palette.common.white,"&:hover":{color:t.palette.secondary.main}},children:C.jsx(iD,{fontSize:"large"})})]})]})})})})})})})})};var ml={},Ab;function rD(){if(Ab)return ml;Ab=1;var i=Ke();Object.defineProperty(ml,"__esModule",{value:!0}),ml.default=void 0;var t=i(Qe()),e=Ye();return ml.default=(0,t.default)((0,e.jsx)("path",{d:"M11 15h2v2h-2zm0-8h2v6h-2zm.99-5C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2M12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8"}),"ErrorOutline"),ml}var aD=rD();const oD=Ne(aD);class $a extends ut.Component{constructor(e){super(e);K(this,"handleRetry",()=>{this.setState({hasError:!1,error:void 0,errorInfo:void 0})});this.state={hasError:!1}}static getDerivedStateFromError(e){return{hasError:!0,error:e}}componentDidCatch(e,n){this.setState({error:e,errorInfo:n})}render(){return this.state.hasError?C.jsx(Pb,{maxWidth:"md",children:C.jsxs(G,{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",minHeight:"50vh",textAlign:"center",gap:2,children:[C.jsx(oD,{sx:{fontSize:64,color:"error.main"}}),C.jsx(dt,{variant:"h4",component:"h1",gutterBottom:!0,children:"Oops! Something went wrong"}),C.jsx(dt,{variant:"body1",color:"text.secondary",gutterBottom:!0,children:this.props.componentName?`There was an error in the ${this.props.componentName} component.`:"An unexpected error occurred while loading this content."}),C.jsx(_n,{variant:"contained",color:"primary",onClick:this.handleRetry,sx:{mt:2},children:"Try Again"}),!1]})}):this.props.children}}const lD=["UX Design","UI Development","Creative Coding","Interaction Design"],cD=["Three.js","React","Figma","Web Audio"],Cg=({skills:i,maxTags:t=5,variant:e="default",color:n="secondary",showMoreLabel:s="+ more"})=>{const r=Re();if(!i||i.length===0)return null;const a=i.slice(0,t),o=i.length>t,l=()=>{switch(e){case"outlined":return{border:`1px solid ${r.palette[n].main}`,bgcolor:"transparent",color:r.palette[n].main,"&:hover":{bgcolor:`${r.palette[n].main}15`}};case"contained":return{bgcolor:r.palette[n].main,color:r.palette[n].contrastText,"&:hover":{bgcolor:r.palette[n].dark}};case"minimal":return{bgcolor:"transparent",color:r.palette[n].main,"&:hover":{bgcolor:`${r.palette[n].main}15`}};default:return{bgcolor:`${r.palette[n].main}15`,color:r.palette[n].dark,"&:hover":{bgcolor:`${r.palette[n].main}25`}}}};return C.jsxs(G,{sx:{display:"flex",flexWrap:"wrap",gap:1,alignItems:"center"},children:[a.map((h,u)=>C.jsx(ZS,{label:h,size:"small",sx:{borderRadius:"16px",fontSize:"0.75rem",fontWeight:500,px:.5,...l()}},u)),o&&C.jsx(dt,{variant:"caption",color:"text.secondary",sx:{fontSize:"0.75rem",fontWeight:500,opacity:.8},children:s})]})};Cg.propTypes={skills:F.array.isRequired,maxTags:F.number,variant:F.oneOf(["default","outlined","contained","minimal"]),color:F.oneOf(["primary","secondary","error","warning","info","success"]),showMoreLabel:F.string};const hD=()=>{const i=Re(),t=$o(i.breakpoints.up("md")),e=$o(i.breakpoints.up("lg")),n={hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.3,duration:.8}}},s={hidden:{opacity:0,y:20},visible:{opacity:1,y:0,transition:{duration:.6,ease:"easeOut"}}},r=i.breakpoints.values.sm;return C.jsx(G,{sx:{position:"relative",width:"100%",maxWidth:"100%",display:"flex",justifyContent:{xs:"flex-start",sm:"flex-start",md:"flex-start"},alignItems:{xs:"flex-start",md:"top"},zIndex:10,pointerEvents:"none",userSelect:"none",pl:{xs:2,sm:4,md:8,lg:12},mt:{xs:"72px",sm:"72px",md:0}},children:C.jsxs(ze.div,{initial:"hidden",animate:"visible",variants:n,style:{maxWidth:e?"550px":t?"470px":"min(100%, 340px)",textAlign:"left"},children:[C.jsx(ze.div,{variants:s,children:C.jsx(dt,{variant:"h1",sx:{fontSize:{xs:"3rem",sm:"2rem",md:"4rem",lg:"4.5rem"},fontWeight:700,lineHeight:1.2,mb:1,color:i.palette.text.primary,letterSpacing:"-0.5px"},children:"Vincent Gke"})}),C.jsx(ze.div,{variants:s,children:C.jsx(dt,{variant:"h4",component:"h2",sx:{fontSize:{xs:"0.9rem",sm:"0.9rem",md:"1.35rem"},fontWeight:500,mb:2,color:i.palette.secondary.main},children:"Creative Technologist & Interaction Designer"})}),C.jsx(ze.div,{variants:s,children:C.jsx(dt,{variant:"body1",sx:{mb:2,fontSize:{xs:"0.65rem",sm:"0.9rem",md:"1rem"},lineHeight:1.7,color:i.palette.text.secondary},children:"Fulltime | Available from June 2025 | On-Site, Hybrid, Remote"})}),C.jsxs(G,{component:ze.div,variants:s,sx:{pointerEvents:"none"},children:[C.jsx(G,{sx:{display:"flex",flexWrap:"wrap",gap:1,mb:1.5,justifyContent:t?"flex-start":window.innerWidth<r?"center":"flex-start"},children:lD.map((a,o)=>C.jsx(Cg,{label:a,size:"responsive",variant:"skill",sx:{pointerEvents:"none"}},o))}),C.jsx(G,{sx:{display:"flex",flexWrap:"wrap",gap:1,justifyContent:t?"flex-start":window.innerWidth<r?"center":"flex-start"},children:cD.map((a,o)=>C.jsx(Cg,{label:a,size:"responsive",variant:"skill",sx:{pointerEvents:"none"}},o))})]})]})})};var yl={},wb;function uD(){if(wb)return yl;wb=1;var i=Ke();Object.defineProperty(yl,"__esModule",{value:!0}),yl.default=void 0;var t=i(Qe()),e=Ye();return yl.default=(0,t.default)((0,e.jsx)("path",{d:"m20 12-1.41-1.41L13 16.17V4h-2v12.17l-5.58-5.59L4 12l8 8z"}),"ArrowDownward"),yl}var dD=uD();const fD=Ne(dD),pD=(i,t={})=>{const{offset:e=-70}=t;try{const n=document.getElementById(i);if(!n){console.warn(`Section with ID "${i}" not found`);return}const s=n.getBoundingClientRect().top+window.pageYOffset+e;window.scrollTo({top:s,behavior:"smooth"}),window.gtag&&window.gtag("event","scroll_to_section",{section_id:i})}catch(n){console.error("Error scrolling to section:",n)}},gD=()=>{const i=Re(),t=()=>{pD("work")};return C.jsx(G,{sx:{position:"absolute",bottom:i.spacing(6),left:0,right:0,display:"flex",justifyContent:"center",alignItems:"center",width:"100%",cursor:"pointer",zIndex:10,pointerEvents:"auto"},onClick:t,role:"button","aria-label":"Scroll to explore content",tabIndex:0,onKeyDown:e=>{e.key==="Enter"&&t()},children:C.jsxs(ze.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:1.5,duration:.8},whileHover:{scale:1.05},style:{display:"flex",flexDirection:"column",alignItems:"center",padding:i.spacing(1)},children:[C.jsx(dt,{variant:"caption",sx:{mb:1,color:i.palette.text.secondary,opacity:.8,fontWeight:i.typography.fontWeightRegular},children:"Scroll to explore"}),C.jsx(ze.div,{animate:{y:[0,10,0],opacity:[.6,1,.6]},transition:{duration:2,repeat:1/0,repeatType:"loop"},children:C.jsx(fD,{color:"primary",fontSize:"small"})})]})})},mD=({theme:i,onSceneClick:t,performanceMode:e="medium"})=>C.jsx(G,{id:"background3d-placeholder",sx:{position:"absolute",top:0,left:0,width:"100%",height:"100%",zIndex:1,background:`linear-gradient(145deg, ${i.palette.background.default} 0%, ${i.palette.primary.dark} 100%)`,opacity:.7,cursor:"pointer","&:hover":{opacity:.8}},onClick:t,role:"presentation","aria-label":"Interactive background"}),Yl={SPHERE:0,BOX:1,TORUS:2},xS=P.createContext({currentShapeType:Yl.SPHERE,switchShapeType:()=>{},isTransitioning:!1,showParticles:!0,toggleParticles:()=>{},mousePosition:{x:0,y:0},updateMousePosition:()=>{},isDragging:!1,updateDragging:()=>{},isInteractionEnabled:!0,setInteractionEnabled:()=>{},hasInteraction:!1}),yD=({children:i})=>{const[t,e]=P.useState(Yl.SPHERE),[n,s]=P.useState(!1),[r,a]=P.useState(!0),[o,l]=P.useState(!1),[h,u]=P.useState({x:0,y:0}),[d,f]=P.useState(!0),[p,g]=P.useState(!1),m=P.useRef(Date.now()),v=P.useRef(null),y=P.useCallback(()=>{a(_=>!_)},[]),A=P.useCallback(()=>{if(console.log(" SceneContext: switchShapeType called, current state:",{currentShapeType:t,isTransitioning:n}),n||!d){console.log(" SceneContext: Ignoring switchShapeType - already in transition or interaction disabled");return}console.log(" SceneContext: Starting transition"),s(!0),setTimeout(()=>{const _=(t+1)%3;console.log(` SceneContext: Changing shape type from ${t} to ${_}`),e(_),setTimeout(()=>{console.log(" SceneContext: Transition complete"),s(!1)},400)},200)},[n,t,d]),S=P.useCallback(_=>{_&&typeof _.x=="number"&&typeof _.y=="number"&&(u(_),g(!0),m.current=Date.now(),v.current&&clearTimeout(v.current),v.current=setTimeout(()=>{g(!1)},2e3))},[]);ut.useEffect(()=>()=>{v.current&&clearTimeout(v.current)},[]);const E=P.useCallback(_=>{l(_),_&&(g(!0),m.current=Date.now())},[]),T=P.useCallback(_=>{f(_)},[]);return C.jsx(xS.Provider,{value:{currentShapeType:t,switchShapeType:A,isTransitioning:n,showParticles:r,toggleParticles:y,mousePosition:h,updateMousePosition:S,isDragging:o,updateDragging:E,isInteractionEnabled:d,setInteractionEnabled:T,hasInteraction:p},children:i})},vD=()=>{const i=P.useContext(xS);if(!i)throw new Error("useSceneState must be used within a SceneProvider");return i},AS=P.memo(({onSceneClick:i,onToggleParticles:t,showParticles:e})=>{const[n,s]=P.useState(!0);return P.useEffect(()=>{const r=setTimeout(()=>{s(!1)},5e3);return()=>clearTimeout(r)},[]),C.jsx($a,{componentName:"Background3D",children:C.jsx(yD,{children:C.jsx(wS,{onSceneClick:i,onToggleParticles:t,showParticles:e,showInteractionHint:n})})})}),wS=P.memo(({onSceneClick:i,onToggleParticles:t,showParticles:e,showInteractionHint:n})=>{const s=Re(),{switchShapeType:r}=vD(),a=P.useCallback(()=>{console.log(" BackgroundController: Scene change button clicked"),r(),i&&(console.log(" BackgroundController: Calling parent onSceneClick handler"),i())},[r,i]);return C.jsx(C.Fragment,{children:C.jsx(mD,{theme:s,onSceneClick:a,performanceMode:"medium"})})}),SS=()=>{const i=Re();$o(i.breakpoints.down("sm"));const[t,e]=P.useState(!0),[n,s]=P.useState(0),[r,a]=P.useState(!1),[o,l]=P.useState("Spheres"),[h,u]=P.useState(!0),d=P.useRef(null),f=P.useCallback(m=>{switch(m){case Yl.SPHERE:return"Spheres";case Yl.BOX:return"Boxes";case Yl.TORUS:return"Drawing";default:return"Scene"}},[]),p=P.useCallback(()=>{console.log(" Hero.tsx: handleSceneClick called - About to change scene");const m=(n+1)%3;s(m),l(f(m)),a(!0),console.log(` Hero.tsx: Scene changed to ${f(m)} (index: ${m})`),setTimeout(()=>{a(!1)},2e3)},[n,f]),g=P.useCallback(()=>{e(m=>!m)},[]);return P.useEffect(()=>{const m=()=>{if(!d.current)return;const v=d.current.getBoundingClientRect(),y=v.top<window.innerHeight*.6&&v.bottom>window.innerHeight*.2;u(y)};return window.addEventListener("scroll",m,{passive:!0}),m(),()=>window.removeEventListener("scroll",m)},[]),C.jsxs(G,{id:"hero",component:"section",ref:d,"aria-label":"Hero section",sx:{width:"100%",minHeight:{xs:"calc(100vh - 56px)",sm:"calc(100vh - 64px)"},display:"flex",flexDirection:"column",position:"relative",overflow:"visible",background:`linear-gradient(145deg, ${i.palette.background.default} 0%, ${i.palette.background.paper} 100%)`,py:{xs:i.spacing(4),md:i.spacing(0)},isolation:"isolate"},children:[C.jsx(AS,{onSceneClick:p,onToggleParticles:g,showParticles:t}),C.jsx(Dm,{in:r,timeout:{enter:400,exit:800},children:C.jsx(G,{sx:{position:"absolute",top:"30%",left:"50%",transform:"translate(-50%, -50%)",backgroundColor:"rgba(0,0,0,0.7)",color:"white",padding:{xs:"6px 12px",sm:"8px 16px"},borderRadius:{xs:1.5,sm:2},zIndex:30,pointerEvents:"none",fontSize:{xs:"14px",sm:"16px",md:"18px"},fontWeight:500,backdropFilter:"blur(4px)",border:"1px solid rgba(255,255,255,0.1)"},children:o})}),C.jsx(G,{sx:{width:"100%",height:"100%",minHeight:{xs:"80vh",md:"100vh"},display:"flex",alignItems:{xs:"flex-start",md:"center"},justifyContent:"flex-start",position:"relative",zIndex:2,pointerEvents:"none",pt:{xs:0,md:0}},children:C.jsx(hD,{})}),C.jsx(Dm,{in:h,timeout:{enter:600,exit:400},children:C.jsx(G,{sx:{position:"fixed",left:0,right:0,bottom:0,zIndex:20,pointerEvents:"none",display:{xs:"flex",sm:"flex",md:"none"},justifyContent:"center"},children:C.jsx(G,{sx:{pointerEvents:"auto"},children:C.jsx(gD,{})})})})]})};SS.displayName="Hero";AS.displayName="HeroBackground";wS.displayName="BackgroundController";const bD=({project:i,onClick:t})=>{var n,s;const e=Re();return C.jsx(kb,{sx:{height:"100%",display:"flex",flexDirection:"column",transition:"transform 0.3s, box-shadow 0.3s","&:hover":{transform:"translateY(-8px)",boxShadow:e.shadows[8]},backgroundColor:e.palette.background.paper,borderRadius:2,overflow:"hidden"},elevation:3,children:C.jsxs(JS,{onClick:t,sx:{height:"100%",display:"flex",flexDirection:"column",alignItems:"stretch"},children:[C.jsx(tE,{component:"div",sx:{height:0,paddingTop:"56.25%",backgroundColor:e.palette.action.hover,position:"relative"},title:i.title,children:i.featured&&C.jsx(G,{sx:{position:"absolute",top:12,right:12,backgroundColor:e.palette.primary.main,color:e.palette.primary.contrastText,borderRadius:1,px:1,py:.5,fontSize:"0.75rem",fontWeight:500},children:"Featured"})}),C.jsxs(Mb,{sx:{flexGrow:1,display:"flex",flexDirection:"column",p:2.5},children:[C.jsx(dt,{variant:"h6",component:"h3",gutterBottom:!0,sx:{fontWeight:600,fontSize:"1.1rem",mb:1},children:i.title}),C.jsx(dt,{variant:"body2",color:"text.secondary",sx:{mb:2,flexGrow:1},children:((n=i.description)==null?void 0:n.length)>120?`${i.description.slice(0,120)}...`:i.description}),C.jsx(G,{sx:{display:"flex",flexWrap:"wrap",gap:1,mt:"auto"},children:(s=i.tags)==null?void 0:s.slice(0,3).map((r,a)=>C.jsx(dt,{variant:"caption",sx:{backgroundColor:e.palette.action.selected,borderRadius:4,px:1,py:.5,fontSize:"0.7rem"},children:r},a))})]})]})})},xD=({projects:i,onCardClick:t})=>{const e={hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.15,delayChildren:.2}}},n={hidden:{opacity:0,y:20},visible:{opacity:1,y:0,transition:{duration:.6,ease:"easeOut"}}};return C.jsx(G,{sx:{mt:4,mb:2},children:C.jsx(ze.div,{variants:e,initial:"hidden",animate:"visible",style:{width:"100%"},children:C.jsx(Uu,{container:!0,spacing:{xs:2,sm:3,md:4},sx:{width:"100%",mx:"auto"},children:i==null?void 0:i.map((s,r)=>C.jsx(Uu,{item:!0,xs:12,sm:6,md:4,component:ze.div,variants:n,children:C.jsx(bD,{project:s,onClick:()=>t(s)})},s.id||r))})})})};var vl={},Sb;function AD(){if(Sb)return vl;Sb=1;var i=Ke();Object.defineProperty(vl,"__esModule",{value:!0}),vl.default=void 0;var t=i(Qe()),e=Ye();return vl.default=(0,t.default)((0,e.jsx)("path",{d:"M17.77 3.77 16 2 6 12l10 10 1.77-1.77L9.54 12z"}),"ArrowBackIosNew"),vl}var wD=AD();const SD=Ne(wD);var bl={},Eb;function ED(){if(Eb)return bl;Eb=1;var i=Ke();Object.defineProperty(bl,"__esModule",{value:!0}),bl.default=void 0;var t=i(Qe()),e=Ye();return bl.default=(0,t.default)((0,e.jsx)("path",{d:"M6.23 20.23 8 22l10-10L8 2 6.23 3.77 14.46 12z"}),"ArrowForwardIos"),bl}var _D=ED();const TD=Ne(_D),CD=({open:i,onClose:t,project:e,onNextProject:n,onPreviousProject:s,projectIndex:r,projectTotal:a})=>{var h;const o=Re(),l=$o(o.breakpoints.down("md"));return e?C.jsxs(nu,{open:i,onClose:t,fullScreen:l,maxWidth:"lg",scroll:"paper","aria-labelledby":"project-modal-title",PaperProps:{sx:{borderRadius:{xs:0,md:3},backgroundImage:"none",boxShadow:o.shadows[20],maxWidth:"100vw",maxHeight:"100vh"}},children:[C.jsxs(G,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",p:2,pl:3,borderBottom:`1px solid ${o.palette.divider}`},children:[C.jsxs(G,{children:[C.jsx(dt,{variant:"h5",component:"h2",id:"project-modal-title",children:e.title}),C.jsx(dt,{variant:"subtitle2",color:"text.secondary",children:r!==void 0&&a!==void 0?`Project ${r+1} of ${a}`:""})]}),C.jsx(pi,{onClick:t,"aria-label":"Close project details",children:C.jsx(Ul,{})})]}),C.jsx(eE,{sx:{p:0,position:"relative","&:first-of-type":{p:0}},children:C.jsxs(G,{sx:{p:3},children:[C.jsx(dt,{variant:"body1",paragraph:!0,children:e.description||"No description available."}),C.jsx(G,{sx:{width:"100%",height:300,backgroundColor:o.palette.action.hover,display:"flex",justifyContent:"center",alignItems:"center",borderRadius:2,mb:3},children:C.jsx(dt,{variant:"body2",color:"text.secondary",children:"Project image placeholder"})}),C.jsxs(G,{sx:{mb:3},children:[C.jsx(dt,{variant:"h6",gutterBottom:!0,children:"Details"}),C.jsx(G,{sx:{display:"flex",flexWrap:"wrap",gap:2,mb:2},children:(h=e.tags)==null?void 0:h.map((u,d)=>C.jsx(dt,{variant:"body2",sx:{backgroundColor:o.palette.action.selected,borderRadius:4,px:1.5,py:.5},children:u},d))})]}),C.jsxs(G,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mt:2,mb:1},children:[C.jsx(_n,{startIcon:C.jsx(SD,{}),onClick:s,"aria-label":"Previous project",children:"Previous"}),C.jsx(_n,{endIcon:C.jsx(TD,{}),onClick:n,"aria-label":"Next project",children:"Next"})]})]})})]}):null},PD={id:"adhdeer",title:"ADHDeer - ADHD Support App",description:"A mobile application designed to help individuals with ADHD manage daily tasks and build consistent routines through gamification and personalized support features.",categories:["Mobile App","UX Design","UI Design"],technologies:["React Native","Firebase","Figma","Illustrator"],media:[{type:"image",url:"/assets/images/projects/adhdeer/cover.jpg",thumbnail:"/assets/images/projects/adhdeer/thumb.jpg",title:"ADHDeer App Interface",caption:"Main interface of the ADHDeer application"},{type:"image",url:"/assets/images/projects/adhdeer/screens.jpg",title:"App Screens",caption:"Various screens from the ADHDeer application"}],links:[{type:"github",url:"https://github.com/username/adhdeer",title:"GitHub Repository"},{type:"demo",url:"https://adhdeer.app",title:"Demo"}],date:"2022-06-15"},RD={id:"amiai",title:"AmiAI - AI Companion for Elderly",description:"An AI-powered companion application designed to assist elderly individuals with daily tasks, medication reminders, and social engagement to reduce isolation and improve quality of life.",categories:["AI","Healthcare","UX Research"],technologies:["TensorFlow","React","Node.js","Speech Recognition"],media:[{type:"image",url:"/assets/images/projects/amiai/cover.jpg",thumbnail:"/assets/images/projects/amiai/thumb.jpg",title:"AmiAI Interface",caption:"Main interface of the AmiAI application"},{type:"video",url:"/assets/images/projects/amiai/demo.mp4",thumbnail:"/assets/images/projects/amiai/demo-thumb.jpg",title:"Usage Demo",caption:"Demonstration of AmiAI features"}],links:[{type:"website",url:"https://amiai.health",title:"Project Website"},{type:"documentation",url:"https://docs.amiai.health",title:"Documentation"}],date:"2023-03-22"},kD={id:"bachelor-thesis",title:"Immersive Learning Environments",description:"Research and development of immersive learning environments for educational purposes, exploring the effectiveness of VR/AR technologies in knowledge retention and student engagement.",categories:["Research","Education","VR/AR"],technologies:["Unity3D","C#","Oculus SDK","AR Foundation"],media:[{type:"image",url:"/assets/images/projects/bachelor-thesis/cover.jpg",thumbnail:"/assets/images/projects/bachelor-thesis/thumb.jpg",title:"VR Learning Environment",caption:"Virtual classroom environment for immersive education"},{type:"pdf",url:"/assets/docs/bachelor-thesis.pdf",title:"Thesis Document",caption:"Full bachelor thesis document"}],links:[{type:"documentation",url:"https://university.edu/thesis/immersive-learning",title:"Research Publication"}],date:"2020-05-30"},MD={id:"green-wallet",title:"GreenWallet - Sustainable Investing",description:"A digital platform that helps users make environmentally conscious investment decisions by providing transparency about the sustainability practices of companies and investment funds.",categories:["FinTech","Web App","Sustainability"],technologies:["React","TypeScript","Material-UI","Node.js","PostgreSQL"],media:[{type:"image",url:"/assets/images/projects/green-wallet/cover.jpg",thumbnail:"/assets/images/projects/green-wallet/thumb.jpg",title:"GreenWallet Dashboard",caption:"Main dashboard of the GreenWallet application"},{type:"image",url:"/assets/images/projects/green-wallet/analysis.jpg",title:"Investment Analysis",caption:"Sustainability analysis of investment options"}],links:[{type:"github",url:"https://github.com/username/green-wallet",title:"GitHub Repository"},{type:"website",url:"https://greenwallet.invest",title:"Live Website"}],date:"2022-11-10"},LD={id:"master-thesis",title:"Adaptive UI Systems for Cross-Platform Applications",description:"Research and implementation of an adaptive UI system that optimizes user interfaces based on device capabilities, user preferences, and contextual factors to provide optimal experiences across diverse platforms.",categories:["Research","UI Architecture","Accessibility"],technologies:["React","Adaptive Design","User Research","Heuristic Evaluation"],media:[{type:"image",url:"/assets/images/projects/master-thesis/cover.jpg",thumbnail:"/assets/images/projects/master-thesis/thumb.jpg",title:"Adaptive UI Framework",caption:"Visualization of the adaptive UI framework architecture"},{type:"pdf",url:"/assets/docs/master-thesis.pdf",title:"Thesis Document",caption:"Full master thesis document"}],links:[{type:"documentation",url:"https://university.edu/thesis/adaptive-ui-systems",title:"Research Publication"},{type:"github",url:"https://github.com/username/adaptive-ui-framework",title:"Framework Repository"}],date:"2023-06-15"},ID={id:"resonant-relaxation",title:"Resonant Relaxation - Music Therapy",description:"An ambient sound application that generates personalized soundscapes based on biometric data and user preferences to reduce anxiety, improve focus, and promote relaxation.",categories:["Audio","Health & Wellness","Interactive Media"],technologies:["Web Audio API","React","Canvas","Heart Rate API","TensorFlow.js"],media:[{type:"image",url:"/assets/images/projects/resonant-relaxation/cover.jpg",thumbnail:"/assets/images/projects/resonant-relaxation/thumb.jpg",title:"Resonant Relaxation Interface",caption:"Visual interface showing audio generation"},{type:"video",url:"/assets/images/projects/resonant-relaxation/demo.mp4",thumbnail:"/assets/images/projects/resonant-relaxation/demo-thumb.jpg",title:"Interactive Demo",caption:"Demonstration of the interactive sound generation"},{type:"image",url:"/assets/images/projects/resonant-relaxation/visualization.jpg",title:"Audio Visualization",caption:"Dynamic visualization responding to audio patterns"}],links:[{type:"website",url:"https://resonant-relaxation.app",title:"Web Application"},{type:"demo",url:"https://demo.resonant-relaxation.app",title:"Interactive Demo"}],date:"2023-01-25"},DD=[LD,ID,RD,MD,PD,kD];function OD(i){var t,e;return i?{id:i.id||`project-${Math.random().toString(36).substring(2,9)}`,title:i.title||"Untitled Project",description:i.description||"No description provided.",tags:Array.isArray(i.tags)?i.tags:Array.isArray(i.categories)?i.categories:[],featured:!!i.featured,images:Array.isArray(i.images)?i.images:Array.isArray(i.media)?i.media.filter(n=>n.type==="image").map(n=>({src:n.url,alt:n.title||n.caption||"",caption:n.caption||""})):[],media:Array.isArray(i.media)?i.media:[],links:Array.isArray(i.links)?i.links:[],url:i.url||(Array.isArray(i.links)?(t=i.links.find(n=>n.type==="website"||n.type==="demo"))==null?void 0:t.url:null)||null,github:i.github||(Array.isArray(i.links)?(e=i.links.find(n=>n.type==="github"))==null?void 0:e.url:null)||null,details:i.details||null,date:i.date||null,category:i.category||(Array.isArray(i.categories)&&i.categories.length>0?i.categories[0]:"Other"),role:i.role||"Designer & Developer",technologies:Array.isArray(i.technologies)?i.technologies:[],...i}:null}function FD(i){return Array.isArray(i)?i.map(t=>OD(t)):[]}const ND=()=>FD(DD);function jD(i,t={}){const{defaultData:e=null,validateData:n=()=>!0,onSuccess:s=()=>{},onError:r=()=>{},timeout:a=1e4}=t,[o,l]=P.useState(e),[h,u]=P.useState(!0),[d,f]=P.useState(null),p=P.useRef(!0),g=P.useRef(i);P.useEffect(()=>{g.current=i},[i]),P.useEffect(()=>()=>{p.current=!1},[]);const m=P.useCallback(async()=>{if(p.current){u(!0),f(null);try{const y=g.current,A=typeof y=="function"?await y():y;if(!p.current)return;if(!n(A))throw new Error("Invalid data format received");l(A),s(A)}catch(y){if(!p.current)return;const A=y instanceof Error?y:new Error("Unknown error occurred");f(A),r(A)}finally{p.current&&u(!1)}}},[n,s,r]);P.useEffect(()=>{const y=setTimeout(()=>{h&&(f(new Error("Data loading timed out")),u(!1))},a);return m(),()=>{clearTimeout(y)}},[m,a]);const v=P.useCallback(async()=>{await m()},[m]);return{data:o,isLoading:h,error:d,reload:v}}var xl={},_b;function BD(){if(_b)return xl;_b=1;var i=Ke();Object.defineProperty(xl,"__esModule",{value:!0}),xl.default=void 0;var t=i(Qe()),e=Ye();return xl.default=(0,t.default)((0,e.jsx)("path",{d:"M17.65 6.35C16.2 4.9 14.21 4 12 4c-4.42 0-7.99 3.58-7.99 8s3.57 8 7.99 8c3.73 0 6.84-2.55 7.73-6h-2.08c-.82 2.33-3.04 4-5.65 4-3.31 0-6-2.69-6-6s2.69-6 6-6c1.66 0 3.14.69 4.22 1.78L13 11h7V4z"}),"Refresh"),xl}var VD=BD();const ES=Ne(VD),HD=()=>{const i=Re(),[t,e]=P.useState([]),[n,s]=P.useState(!1),[r,a]=P.useState(null),{data:o,isLoading:l,error:h,reload:u}=jD(ND,{defaultData:[],validateData:v=>{const y=Array.isArray(v)&&v.length>0;return console.log("Work data validation:",y?"passed":"failed"),y},onSuccess:v=>console.log("Projects loaded successfully:",v.length,"projects"),onError:v=>console.error("Error loading projects:",v)});P.useEffect(()=>{e(o)},[o]);const d=v=>{const y=o.findIndex(A=>A.id===v.id);y!==-1&&(a(y),s(!0))},f=()=>{s(!1)},p=()=>{r<o.length-1?a(r+1):a(0)},g=()=>{r>0?a(r-1):a(o.length-1)},m={hidden:{opacity:0,y:50},visible:{opacity:1,y:0,transition:{duration:.8,ease:"easeOut",staggerChildren:.2}}};return C.jsxs($a,{componentName:"WorkSection",children:[C.jsx(G,{id:"work",component:"section",sx:{width:"100%",py:{xs:8,md:12},backgroundColor:i.palette.background.default},children:C.jsx(G,{sx:{width:"100%",px:{xs:"20px",sm:"30px",md:"40px",lg:"50px"},boxSizing:"border-box"},children:C.jsxs(ze.div,{variants:m,initial:"hidden",whileInView:"visible",viewport:{once:!0,margin:"-100px"},children:[C.jsxs(G,{sx:{textAlign:"center",mb:{xs:4,md:6}},children:[C.jsx(dt,{variant:"h2",component:"h2",sx:{mb:2,color:i.palette.text.primary},children:"Work"}),C.jsx(dt,{variant:"subtitle1",component:"p",sx:{maxWidth:"800px",mx:"auto",color:i.palette.text.secondary},children:"Explore a selection of my projects, showcasing skills in UX research, design, and implementation."})]}),l?C.jsx(G,{sx:{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"300px"},children:C.jsx(Td,{color:"primary","aria-label":"Loading projects"})}):h?C.jsxs(G,{sx:{textAlign:"center",p:4,color:"error.main",minHeight:"300px",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"},children:[C.jsx(dt,{variant:"h5",color:"error",gutterBottom:!0,children:"Error Loading Projects"}),C.jsx(dt,{variant:"body1",children:"There was a problem loading the projects. Please try refreshing."}),C.jsxs(dt,{variant:"body2",sx:{mt:2,color:"text.secondary",mb:3},children:["Error details: ",h.message||"Unknown error"]}),C.jsx(_n,{variant:"contained",color:"primary",startIcon:C.jsx(ES,{}),onClick:u,children:"Try Again"})]}):C.jsx($a,{componentName:"ProjectGrid",children:C.jsx(xD,{projects:t,onCardClick:d})})]})})}),C.jsx($a,{componentName:"ProjectModal",children:C.jsx(CD,{open:n,onClose:f,project:r!==null?o[r]:null,onNextProject:p,onPreviousProject:g,projectIndex:r??void 0,projectTotal:(o==null?void 0:o.length)??void 0})})]})},_S=P.forwardRef(({onSectionChange:i,currentSection:t=0,aboutData:e},n)=>{const s=Re(),r=(l,h)=>{i(h)},a={hidden:{opacity:0,x:100},visible:{opacity:1,x:0,transition:{duration:.6,ease:"easeOut"}},exit:{opacity:0,x:-100,transition:{duration:.3}}},o=e[t];return C.jsxs(G,{ref:n,sx:{display:"flex",flexDirection:{xs:"column",md:"row"},width:"100%",px:{xs:s.spacing(2),sm:s.spacing(4),md:s.spacing(6),lg:s.spacing(8)},boxSizing:"border-box"},children:[C.jsx(G,{sx:{minWidth:{xs:"100%",md:"200px"},borderRight:{xs:"none",md:`1px solid ${s.palette.divider}`},borderBottom:{xs:`1px solid ${s.palette.divider}`,md:"none"},pr:{xs:0,md:3},pb:{xs:2,md:0},mb:{xs:4,md:0}},children:C.jsx(nE,{orientation:{xs:"horizontal",md:"vertical"},variant:"scrollable",value:t,onChange:r,sx:{borderRight:{xs:"none",md:0},mb:0,"& .MuiTabs-indicator":{left:{xs:"auto",md:"auto"},right:{md:0}},"& .MuiTab-root":{alignItems:{xs:"center",md:"flex-start"},textAlign:"left"}},children:e.map((l,h)=>C.jsx(iE,{label:l.tabTitle,id:`about-tab-${h}`,"aria-controls":`about-tabpanel-${h}`,sx:{minHeight:48,py:1.5,fontWeight:500}},`tab-${h}`))})}),C.jsx(G,{id:`about-tabpanel-${t}`,role:"tabpanel","aria-labelledby":`about-tab-${t}`,sx:{flexGrow:1,pl:{xs:0,md:4},overflow:"hidden"},children:C.jsxs(ze.div,{variants:a,initial:"hidden",animate:"visible",exit:"exit",children:[C.jsx(dt,{variant:"h4",component:"h3",gutterBottom:!0,sx:{mb:3,fontWeight:700,color:s.palette.primary.main},children:o.title}),C.jsx(G,{sx:{mb:4},children:Array.isArray(o.content)?o.content.map((l,h)=>C.jsx(dt,{variant:"body1",paragraph:!0,sx:{mb:2,lineHeight:1.7},children:l},`p-${h}`)):C.jsx(dt,{variant:"body1",paragraph:!0,sx:{mb:2,lineHeight:1.7},children:o.content})})]},`content-${t}`)})]})});_S.displayName="AboutTabNavigator";const as=[{tabTitle:"Overview",title:"About Me",content:["I am a UX/UI designer and developer with a passion for creating intuitive, accessible, and visually appealing digital experiences. With a background in both design and development, I bring a unique perspective to projects, understanding both the creative and technical aspects of digital product creation.","My approach combines user-centered design principles with technical knowledge to create solutions that are not only beautiful but also functional and performant. I believe that great design should be inclusive, considerate of all users, and solve real problems while delighting users.","I am constantly learning and exploring new technologies and design methodologies to enhance my skills and stay current with industry trends and best practices."]},{tabTitle:"Skills",title:"My Skills & Expertise",content:["UX Design: User research, wireframing, prototyping, usability testing, information architecture, and accessibility compliance.","UI Design: Visual design, interaction design, responsive design, design systems, and component libraries.","Frontend Development: HTML, CSS, JavaScript, React, TypeScript, and modern frontend frameworks and libraries.","3D & Motion: Three.js, WebGL, GSAP, Framer Motion, and other animation libraries for creating immersive experiences.","Tools & Software: Figma, Adobe Creative Suite, Sketch, Visual Studio Code, Git, and various prototyping tools."]},{tabTitle:"Experience",title:"Professional Experience",content:["Over 5 years of experience working with startups, agencies, and established companies to design and develop digital products that meet business goals while providing exceptional user experiences.","Collaborated with cross-functional teams including product managers, developers, and stakeholders to deliver cohesive and effective solutions.","Led the redesign of multiple web and mobile applications, resulting in improved user satisfaction and business metrics.","Developed and maintained design systems to ensure consistency and efficiency across products and platforms."]},{tabTitle:"Education",title:"Education & Training",content:["Bachelor's Degree in Interactive Design with a focus on user experience and visual communication.","Continuous professional development through courses and certifications in UX/UI design, frontend development, and related fields.","Regular participation in design and development workshops, conferences, and communities to stay current with industry trends and best practices."]},{tabTitle:"Values",title:"My Design Values",content:["User-Centered: I believe that understanding users' needs, goals, and pain points is essential for creating successful digital products.","Accessible: I am committed to designing and developing products that are accessible to users of all abilities.","Collaborative: I value open communication and collaboration with team members and stakeholders throughout the design and development process.","Data-Informed: I use both qualitative and quantitative data to inform design decisions and measure success.","Iterative: I embrace an iterative approach to design and development, continuously testing and refining solutions based on feedback and insights."]}],$D=()=>{const[i,t]=P.useState(0),e=P.useRef(null),n=Re(),[s,r]=P.useState(!0);P.useEffect(()=>{const h=setTimeout(()=>{r(!1)},300);return()=>clearTimeout(h)},[]),P.useEffect(()=>{console.log("About section state:",{isLoading:s,dataLength:(as==null?void 0:as.length)||0})},[s]);const a=h=>{try{h>=0&&h<as.length?t(h):console.warn(`Invalid section index: ${h}, max index is ${as.length-1}`)}catch(u){console.error("Error changing about section:",u)}},o={hidden:{opacity:0,y:50},visible:{opacity:1,y:0,transition:{duration:.8,ease:"easeOut"}}},l=Array.isArray(as)&&as.length>0;return C.jsx($a,{componentName:"AboutSection",children:C.jsxs(G,{id:"about-section-root",component:"section",sx:{width:"100%",backgroundColor:n.palette.background.default,position:"relative",py:8},children:[C.jsx(G,{id:"about-section-header",sx:{width:"100%",px:{xs:n.spacing(2),sm:n.spacing(4),md:n.spacing(6),lg:n.spacing(8)},boxSizing:"border-box"},children:C.jsx(ze.div,{variants:o,initial:"hidden",whileInView:"visible",viewport:{once:!0,margin:"-100px"},children:C.jsxs(G,{id:"about-section-header-inner",sx:{width:"100%",textAlign:"center",mb:{xs:4,md:6}},children:[C.jsx(dt,{variant:"h2",component:"h2",sx:{mb:2,color:n.palette.text.primary},children:"About"}),C.jsx(dt,{variant:"subtitle1",sx:{maxWidth:"800px",mx:"auto",color:n.palette.text.secondary},children:"Learn more about my background, skills, and professional journey"})]})})}),s?C.jsxs(G,{id:"about-section-loading",sx:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",minHeight:"400px",gap:2},children:[C.jsx(Td,{color:"primary"}),C.jsx(dt,{variant:"body2",color:"text.secondary",children:"Loading content..."})]}):l?C.jsx(_S,{ref:e,onSectionChange:a,currentSection:i,aboutData:as}):C.jsxs(G,{id:"about-section-nocontent",sx:{textAlign:"center",p:4,minHeight:"400px",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"},children:[C.jsx(dt,{variant:"h5",gutterBottom:!0,children:"No Content Available"}),C.jsx(dt,{variant:"body1",children:"We couldn't find any content to display in this section."}),C.jsx(_n,{variant:"contained",color:"primary",startIcon:C.jsx(ES,{}),onClick:()=>window.location.reload(),sx:{mt:3},children:"Reload Page"})]})]})})},UD=()=>C.jsx(e1,{children:C.jsx(eR,{children:C.jsx(qE,{children:C.jsx($a,{componentName:"App",children:C.jsxs("div",{className:"App",children:[C.jsx(QI,{}),C.jsx("main",{children:C.jsx(WE,{children:C.jsx($b,{path:"/",element:C.jsxs(C.Fragment,{children:[C.jsx(SS,{}),C.jsx(HD,{}),C.jsx($D,{})]})})})}),C.jsx(sD,{}),!1]})})})})});function TS(i){const{defaultMode:t="system",modeStorageKey:e="theme-mode"}=i,n=`
    (function() {
      try {
        // Try to get the stored mode from localStorage
        var storedMode = localStorage.getItem('${e}');
        var mode = storedMode || '${t}';
        
        // Check if the mode is 'system', then use prefers-color-scheme
        if (mode === 'system') {
          // Check for system preference
          var mql = window.matchMedia('(prefers-color-scheme: dark)');
          if (mql.matches) {
            mode = 'dark';
          } else {
            mode = 'light';
          }
        }
        
        // Apply the appropriate mode to document
        document.documentElement.setAttribute('data-mui-color-scheme', mode);
        document.documentElement.setAttribute('data-theme-mode', mode);
        
        // Also store in localStorage for session persistence
        if (!storedMode) {
          localStorage.setItem('${e}', mode);
        }
        
        // Also set appropriate classes for custom CSS targeting
        document.documentElement.classList.remove('light-mode', 'dark-mode');
        document.documentElement.classList.add(mode + '-mode');
      } catch (e) {
        // Fallback if localStorage is not available
        console.error('Error accessing localStorage:', e);
      }
    })();
  `;return C.jsx("script",{dangerouslySetInnerHTML:{__html:n}})}TS.propTypes={defaultMode:F.oneOf(["light","dark","system"]),modeStorageKey:F.string};const CS=document.getElementById("root");if(!CS)throw new Error("Failed to find the root element");const WD=sE.createRoot(CS);WD.render(C.jsxs(ut.StrictMode,{children:[C.jsx(TS,{defaultMode:"light"}),C.jsx(UD,{})]}));
